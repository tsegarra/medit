/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={9787:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCatalogueFromDb=e.getTranscriptsFromDb=e.updateData=e.writeData=e.setUpAuth=void 0;var i=n(5503),r=n(1369),s=n(7753),o=n(2956),a="",u=(0,i.initializeApp)({apiKey:"AIzaSyCUeF7bkF92VGmvy6je0bNdJfdWOAkvSVw",authDomain:"react-test-aa7ce.firebaseapp.com",databaseURL:"https://react-test-aa7ce-default-rtdb.firebaseio.com",projectId:"react-test-aa7ce",storageBucket:"react-test-aa7ce.appspot.com",messagingSenderId:"835290903105",appId:"1:835290903105:web:af6d638fcd297cf6278cc0"}),c=(0,o.getDatabase)(u);function l(t,e){var n=[];for(var i in t)for(var r in t[i]){var s=t[i][r];n.push({fullObject:s,userId:i,id:r,created:s.created?new Date(s.created):null,artist:s.artist,section:s.section,title:s.title,transcript:s.transcript,swung:s.swung,swingSubdivision:s.swingSubdivision||"16n",deleted:s.deleted||!1,hidden:s.hidden||!1})}return e?function(t){var e=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t));e.sort((function(t,e){return t.created||e.created?t.created&&!e.created?-1:!t.created&&e.created?1:e.created.getTime()-t.created.getTime():0}));for(var n=[],i=[],r=0;r<e.length;r++){var s=e[r],o=s.artist+"|"+s.title+"|"+s.section;-1===i.indexOf(o)&&(i.push(o),n.push(s))}return n}(n):n}e.setUpAuth=function(){var t=(0,r.getAuth)(u);new s.auth.AuthUI(t).start("#firebaseui-auth-container",{callbacks:{signInSuccessWithAuthResult:function(){return!1}},signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[{provider:r.GoogleAuthProvider.PROVIDER_ID,fullLabel:"Log In"}]}),t.onAuthStateChanged((function(t){if(t){a=t.uid;var e=document.getElementById("login-options");if(e&&e.classList.add("logged-in"),t.photoURL){var n=document.createElement("img");n.setAttribute("referrerpolicy","no-referrer"),n.src=t.photoURL;var i=document.getElementById("user-logo");i&&i.appendChild(n)}}}),(function(t){console.error(t)}))},e.writeData=function(t,e){if(!a)return alert("You must be logged in to write data."),void e();var n=(0,o.ref)(c,"transcriptions/"+a),i=(0,o.push)(n);(0,o.set)(i,t).then((function(){alert("Data saved."),e()}),(function(){alert("Error saving data."),e()}))},e.updateData=function(t,e,n,i){var r=(0,o.ref)(c,"transcriptions/"+e),s=(0,o.child)(r,t);(0,o.update)(s,n).then((function(){i()})).catch((function(t){alert(t)}))},e.getTranscriptsFromDb=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,o.ref)(c);(0,o.get)((0,o.child)(n,"/transcriptions")).then((function(n){if(n.exists()){var i=l(n.val(),e);t(i)}else alert("Data unavailable.")})).catch((function(t){console.error(t)}))},e.getCatalogueFromDb=function(t){var e=(0,o.ref)(c);(0,o.get)((0,o.child)(e,"/catalogue")).then((function(e){if(e.exists()){var n=e.val();t(n)}else alert("Data unavailable.")})).catch((function(t){console.error(t)}))}},4763:(t,e)=>{"use strict";var n,i;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.IntervalString=e.Intervals=void 0,function(t){t[t.UNISON=0]="UNISON",t[t.MINOR_SECOND=1]="MINOR_SECOND",t[t.MAJOR_SECOND=2]="MAJOR_SECOND",t[t.MINOR_THIRD=3]="MINOR_THIRD",t[t.MAJOR_THIRD=4]="MAJOR_THIRD",t[t.PERFECT_FOURTH=5]="PERFECT_FOURTH",t[t.TRITONE=6]="TRITONE",t[t.PERFECT_FIFTH=7]="PERFECT_FIFTH",t[t.MINOR_SIXTH=8]="MINOR_SIXTH",t[t.MAJOR_SIXTH=9]="MAJOR_SIXTH",t[t.MINOR_SEVENTH=10]="MINOR_SEVENTH",t[t.MAJOR_SEVENTH=11]="MAJOR_SEVENTH",t[t.OCTAVE=12]="OCTAVE",t[t.__NUM_INTERVALS=13]="__NUM_INTERVALS"}(i=e.Intervals||(e.Intervals={})),e.IntervalString=(r(n={},i.UNISON,"1"),r(n,i.MINOR_SECOND,"m2"),r(n,i.MAJOR_SECOND,"M2"),r(n,i.MINOR_THIRD,"m3"),r(n,i.MAJOR_THIRD,"M3"),r(n,i.PERFECT_FOURTH,"p4"),r(n,i.TRITONE,"t"),r(n,i.PERFECT_FIFTH,"p5"),r(n,i.MINOR_SIXTH,"m6"),r(n,i.MAJOR_SIXTH,"M6"),r(n,i.MINOR_SEVENTH,"m7"),r(n,i.MAJOR_SEVENTH,"M7"),r(n,i.OCTAVE,"8"),r(n,i.__NUM_INTERVALS,""),n),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.semitones=e,this.isAscending=n}},1214:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(4763),s=n(8281),o=n(4638),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"between",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.default.C_NATURAL,i=this.getSemitoneDisplacement(t,e,n);return new r.default(Math.abs(i),i>=0)}},{key:"getSemitoneDisplacement",value:function(t,e,n){var i=[0,0,2,4,5,7,9,11,12],r=o.default.getRelativeOctave(t.degree,t.octave,n),s=o.default.getRelativeOctave(e.degree,e.octave,n),a=12*r+i[t.degree]-(t.isFlat?1:0);return 12*s+i[e.degree]-(e.isFlat?1:0)-a}},{key:"all",value:function(e,n){for(var i=[],r=e.filter((function(t){return t.degree>0||t.rhythm.divisor<8})),s=0;s<r.length-1;s++)r[s].degree>0&&r[s+1].degree>0&&i.push(t.between(r[s],r[s+1],n));return i}},{key:"allNgrams",value:function(e,n,i){for(var r=[],s=e.filter((function(t){return t.degree>0||t.rhythm.divisor<8})),o=0;o<s.length-n;o++){for(var a=!0,u=0;u<n;u++)if(0===s[o+u].degree){a=!1;break}if(!a)break;for(var c=[],l=0;l<n;l++)c.push(t.between(s[o+l],s[o+l+1],i));r.push(c)}return r}}]),t}();e.default=a},2836:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.string=e}return n(t,[{key:"toString",value:function(){return this.string}},{key:"isNote",value:function(){return!1}},{key:"isTripletMarker",value:function(){return!1}}]),t}();e.default=i},5202:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(8281),a=n(5697),u=function(t){function e(){return r(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"getOutputAsString",value:function(){return this.getAbcNotation("","")}},{key:"getOutputAsStringWithBoundaries",value:function(t,e){return this.getAbcNotation(t,e)}},{key:"getOutputAsStringWithMetadata",value:function(){var t=this.melody.getHalved()?8:this.getTimeSignature().defaultNoteDivisor;return["T: "+this.melody.getTitle(),"K: "+o.PitchString[this.getKey()],"Q: "+this.getBpm(),"M: "+this.getTimeSignature().stringRep,"L: 1/"+t,this.getAbcNotation("","")].join("\n")}},{key:"getAbcNotation",value:function(t,e){return a.default.getString(this.melody,t,e,this.rhythmCursorIndex,this.getTimeSignature())}}]),e}(n(228).default);e.default=u},8898:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.numDefaultNoteLengths=e,this.pitchString=n,this.isTied=i}return n(t,[{key:"isNote",value:function(){return!0}},{key:"isTripletMarker",value:function(){return!1}},{key:"toString",value:function(){var t=this.pitchString;return this.numDefaultNoteLengths>1?t+=this.numDefaultNoteLengths:this.numDefaultNoteLengths<1&&(t+="/"+1/this.numDefaultNoteLengths),this.isTied?t+"-":t}}]),t}();e.default=i},4468:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8281),s=n(4638),o=n(3201),a=n(6247),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"parse",value:function(t){var e=t.split("\n"),n=this.getMetadataValueFromLines(e,"K"),i=this.getKeyFromString(n),r=this.getMetadataValueFromLines(e,"T"),u=this.getMetadataValueFromLines(e,"M"),c="12/8"===u?o.TimeSignatureTwelveEight:"6/8"===u?o.TimeSignatureSixEight:o.TimeSignatureFourFour,l="1/8"===this.getMetadataValueFromLines(e,"L")&&c===o.TimeSignatureFourFour,h=this.getMetadataValueFromLines(e,"Q"),d=parseInt(h)||120,p=t.split(/\|/s).slice(1).join(),f=this.getNoteStringsFromTranscript(p).map((function(t){return a.default.getEntityFromString(t)})),g=a.default.mergeTies(f),m=a.default.notesFromUntiedFragments(g,i,c,l),_=new s.default(i);_.setTitle(r),_.setBpm(d),_.setTimeSignature(c),l&&_.setOutputHalfDivisions();for(var y=0;y<m.length;y++)_.pushLiteralNote(m[y]);return _}},{key:"getNoteStringsFromTranscript",value:function(t){var e=[],n=!0,i=!1,r=void 0;try{for(var s,o=t.matchAll(/[\^_=]*[a-gA-Gz(][,'/]*[1-9.]*-?/g)[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var a=s.value;e.push(a[0])}}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}return e}},{key:"getMetadataValueFromLines",value:function(t,e){return(t.filter((function(t){return-1!==t.indexOf(e+": ")})).pop()||"").substring((e+": ").length)}},{key:"getKeyFromString",value:function(t){for(var e=0;e<r.default.__NUM_NOTES;e++)if(r.PitchString[e]===t)return e;throw new Error("Invalid key string: "+t)}}]),t}();e.default=u},6247:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8898),s=n(8281),o=n(9267),a=n(5448),u=n(1597),c=n(1255),l=n(1157),h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"notesFromUntiedFragment",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=/([\^_=]*)([A-Ga-gz])([,']*)/g,l=t.pitchString.matchAll(c).next().value,h=l[1],d=l[2],p=l[3],f=a.default.getOctave(d,p),g=i?2:1,m=this.getRhythm(t.numDefaultNoteLengths*g,n,r);if("z"===d)return[new o.default(0,f,!1,m)];var _=new u.default(e),y=a.default.getPitchFromPitchLetter(d,h,e),v=a.default.roundUpToScaleDegree(y,_),b=(y+1)%s.default.__NUM_NOTES===_.getPitchAtDegree(v);return[new o.default(v,f,b,m)]}},{key:"notesFromUntiedFragments",value:function(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[],s=0,o=0;o<t.length;o++){var a=t[o];if(a.isTripletMarker())s=3;else if(a.isNote()){var u=a,c=s>0;c&&s--;for(var l=this.notesFromUntiedFragment(u,e,n,i,c),h=0;h<l.length;h++)r.push(l[h])}}return r}},{key:"getRhythm",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getDivisors(t,e),r=i[0],s=i.slice(1),o=1===s.length&&s[0]===2*r,a=o?[]:s;return new c.default(r,o,n,a)}},{key:"getDivisors",value:function(t,e){var n=[1,2,4,8,16,32],i=e.defaultNoteDivisor/t;if(n.indexOf(i)>-1)return[i];for(var r=0,s=0;s<n.length;s++){var o=n[s];if(r=o,o>i)break}var a=t-e.defaultNoteDivisor/r;return[r].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.getDivisors(a,e)))}},{key:"mergeTies",value:function(t){for(var e=null,n=!1,i=[],s=0;s<t.length;s++){var o=t[s];if(o.isNote()){var a=o;if(null!==e&&n){var u=new r.default(e.numDefaultNoteLengths+a.numDefaultNoteLengths,a.pitchString,!1);a.isTied?e=u:(i.push(u),n=!1)}else a.isTied?(e=a,n=!0):i.push(a)}else i.push(o)}return i}},{key:"getEntityFromString",value:function(t){if("(3"===t)return new l.default;var e=t.matchAll(/([\^_=]*[A-Ga-gz(][,']*)([/0-9.]*)(-?)/g).next().value,n=e[1],i=1;e[2]&&(i=e[2].startsWith("/")?.5:parseFloat(e[2]));var s="-"===e[3];return new r.default(i,n,s)}}]),t}();e.default=h},5448:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8281),s=n(1597),o=n(8662),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getPitchFromPitchLetter",value:function(t,e,n){var i=s.default.getDegreeFromPitchLetter(t,n),o=new s.default(n).getPitchAtDegree(i);if("_"===e||"="===e){var a=o-1;return a<0?r.default.__NUM_NOTES+a:a}return"^"===e?(o+1)%r.default.__NUM_NOTES:o}},{key:"roundUpToScaleDegree",value:function(t,e){var n=o.default.roundUp(e.getPitches(),t);return e.getDegreeOfPitch(n)}},{key:"getOctave",value:function(t,e){if(e){if("'"===e[0])return e.length+1;if(","===e[0])return-1*e.length}else if(t&&t[0]===t[0].toLowerCase())return 1;return 0}}]),t}();e.default=a},5697:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8662),o=n(8898),a=n(4453),u=n(7045),c=n(2836),l=n(1157),h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getString",value:function(t,e,n,i,r){var s=this,a=this.toAbcEntities(t),c=u.default.groupEntities(a,r).map((function(t){return s.mergeTiedNotes(t)})),l=this.addBoundaries(c,i,e,n),h=this.groupBeatsIntoMeasures(l,r),d="| ";return d+=this.mergeBeatsInMeasures(h).map((function(e){return t.getHalved()?e.map((function(t){return t.map((function(t){if(t.isNote()){var e=t;return new o.default(e.numDefaultNoteLengths/2,e.pitchString,e.isTied)}return t}))})).map((function(t){return t.map((function(t){return t.toString()})).join("")})).join(" "):e.map((function(t){return t.map((function(t){return t.toString()})).join("")})).join(" ")})).join(" | "),this.lastMeasureIsFull(h,r)&&(d+=" |"),d}},{key:"addBoundaries",value:function(t,e,n,i){if(-1===e)return t;for(var r=[],s=0,o=!0,a=0;a<t.length;a++){for(var u=[],l=t[a],h=0;h<l.length;h++)s===e&&o&&(u.push(new c.default(n)),o=!1),u.push(l[h]),l[h].isNote()&&!l[h].isTied&&(s===e&&u.push(new c.default(i)),s++);r.push(u)}return r}},{key:"lastMeasureIsFull",value:function(t,e){if(t.length<1)return!1;for(var n=0,i=t[t.length-1],r=0;r<i.length;r++)for(var s=i[r].filter((function(t){return t.isNote()})),o=0;o<s.length;o++)n+=s[o].numDefaultNoteLengths;return n>=e.groupsPerMeasure*e.outputSubdivisionsPerGroup}},{key:"groupBeatsIntoMeasures",value:function(t,e){for(var n=[],i=[],r=0;r<t.length;r++)i.push(t[r]),this.numVirtualGroupsIn(i)>=e.groupsPerMeasure&&(n.push(i),i=[]);return i.length>0&&n.push(i),n}},{key:"numVirtualGroupsIn",value:function(t){for(var e=0,n=0;n<t.length;n++){var i=t[n];i.filter((function(t){return t.isTripletMarker()})).length>0?e+=i.filter((function(t){return t.isNote()}))[0].numDefaultNoteLengths/2:e++}return e}},{key:"toAbcEntities",value:function(t){var e=t.getNotes();if(e.length<1)return[];for(var n=[],i=0,r=0;r<e.length;r++){var s=e[r];s.rhythm.isTriplet&&(0===i&&n.push(new l.default),i=(i+1)%3);var u=t.getTimeSignature(),c=this.getNumDefaultLengthsForRhythm(s.rhythm,u),h=a.default.render(s,t.getMajorScale());n.push(new o.default(c,h,!1))}return n}},{key:"getNumDefaultLengthsForRhythm",value:function(t,e){var n=e.defaultNoteDivisor/t.divisor;if(t.isDotted)return 1.5*n;for(var i=0;i<t.tiedDivisors.length;i++)n+=e.defaultNoteDivisor/t.tiedDivisors[i];return n}},{key:"mergeTiedNotes",value:function(t){return s.default.join(t,(function(t,e){if(!t.isNote()||!e.isNote())return!1;var n=t,i=e;return n.isTied&&n.pitchString===i.pitchString}),(function(t,e){var n=t,i=e;return new o.default(n.numDefaultNoteLengths+i.numDefaultNoteLengths,n.pitchString,i.isTied)}))}},{key:"mergeBeatsInMeasures",value:function(t){var e=function(t,e){var n=t.filter((function(t){return t.isNote()})),i=e.filter((function(t){return t.isNote()}));return 1===n.length&&1===i.length&&n[0].isTied&&n[0].pitchString===i[0].pitchString},n=function(t,e){var n=t.filter((function(t){return t.isNote()})),i=e.filter((function(t){return t.isNote()})),s=t.filter((function(t){return!t.isNote()})),a=e.filter((function(t){return!t.isNote()}));return[].concat(r(s),[new o.default(n[0].numDefaultNoteLengths+i[0].numDefaultNoteLengths,n[0].pitchString,i[0].isTied)],r(a))};return t.map((function(t){return s.default.join(t,e,n)}))}}]),t}();e.default=h},7045:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8898),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"groupEntities",value:function(t,e){if(t.length<1)return[];for(var n=[],i=e.outputSubdivisionsPerGroup,s=[],o=0,a=0,u=0;o<t.length;){var c=t[o];if(c.isNote()){var l=c;0===a&&(u>0&&(3===u&&(i=3*l.numDefaultNoteLengths),u--),a=l.numDefaultNoteLengths);var h=i<a?i:a;s.push(new r.default(h,l.pitchString,h<a||l.isTied)),a-=h,(i-=h)<=0&&(i=e.outputSubdivisionsPerGroup,n.push(s),s=[]),a<=0&&o++}else c.isTripletMarker()&&(u=3),s.push(c),o++}return s.length>0&&n.push(s),n}}]),t}();e.default=s},1995:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(3201),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"isValid",value:function(t,e){if(e!==r.TimeSignatureFourFour)return!1;for(var n=0;n<t.length;n++)if(t[n].rhythm.isTriplet&&!this.canPutTripletsAtIndex(t,n))return!1;return!0}},{key:"canPutTripletsAtIndex",value:function(t,e){for(var n=0,i=0,r=0;r<e;r++){var s=t[r];s.rhythm.isTriplet&&i++,n+=this.computeMeasureFraction(s)}var o=Number(n.toFixed(6));return i%3>0||o%(1/4)==0}},{key:"computeMeasureFraction",value:function(t){var e=1/t.rhythm.divisor;t.rhythm.isTriplet&&(e*=2/3),t.rhythm.isDotted&&(e+=1/(2*t.rhythm.divisor));for(var n=0;n<t.rhythm.tiedDivisors.length;n++)e+=1/t.rhythm.tiedDivisors[n];return e}}]),t}();e.default=s},4453:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8281),s=n(1597),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"render",value:function(e,n){return 0===e.degree?"z":(e.degree>7&&(e.octave+=Math.floor(e.degree/7),e.degree%=7),t.applyOctaveToPitchString(e,n))}},{key:"applyOctaveToPitchString",value:function(e,n){var i=t.getAbcBasePitchString(e,n),r=i;return e.octave<0?r+=",".repeat(-1*e.octave):e.octave>0&&(r=i.toLowerCase(),e.octave>1&&(r+="'".repeat(e.octave-1))),r}},{key:"getAbcBasePitchString",value:function(t,e){var n="CDEFGAB",i=e.getTonic(),o=r.PitchString[i][0],a=n.indexOf(o)+(t.degree-1),u=n[a%=n.length];if(!t.isFlat)return u;var c=new s.default(r.default.C_NATURAL),l=e.getPitchAtDegree(t.degree)-1;return(-1===c.getPitches().indexOf(l)?"_":"=")+u}}]),t}();e.default=o},1255:(t,e)=>{"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,i,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];n(this,t),this.divisor=e,this.isDotted=i,this.isTriplet=r,this.tiedDivisors=s}},1157:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,[{key:"toString",value:function(){return"(3"}},{key:"isNote",value:function(){return!1}},{key:"isTripletMarker",value:function(){return!0}}]),t}();e.default=i},1597:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8281),s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.SCALE_SEMITONES=[0,2,4,5,7,9,11],this.pitches=this.SCALE_SEMITONES.map((function(t){return(e+t)%r.default.__NUM_NOTES}))}return i(t,[{key:"getLength",value:function(){return this.pitches.length}},{key:"getPitches",value:function(){return this.pitches}},{key:"getPitchAtIndex",value:function(t){return this.pitches[t]}},{key:"getPitchAtDegree",value:function(t){return this.pitches[t-1]}},{key:"getTonic",value:function(){return this.pitches[0]}},{key:"getDegreeOfPitch",value:function(t){return this.pitches.indexOf(t)+1}}],[{key:"getDegreeFromPitchLetter",value:function(t,e){var n="CDEFGAB",i=r.PitchString[e][0],s=n.indexOf(i),o=n.indexOf(t.toUpperCase())-s+1;return o>0?o:o+n.length}}]),t}();e.default=s},4638:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(9267),s=n(8281),o=n(1597),a=n(3201),u=n(1255),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.majorScale=new o.default(e),this.notes=[],this.bpm=120,this.timeSignature=a.TimeSignatureFourFour,this.title="",this.outputHalfDivisions=!1}return i(t,[{key:"setOutputHalfDivisions",value:function(){this.outputHalfDivisions=!0}},{key:"setTitle",value:function(t){this.title=t}},{key:"getTitle",value:function(){return this.title}},{key:"getKey",value:function(){return this.majorScale.getPitchAtDegree(1)}},{key:"getMajorScale",value:function(){return this.majorScale}},{key:"pushSixteenthNote",value:function(t){var e=new u.default(16,!1,!1);this.pushNoteWithDuration(t,0,!1,e)}},{key:"pushNoteAfterIndex",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;e>7&&(e=e%8+1,n++);var s=this.timeSignature===a.TimeSignatureFourFour?new u.default(16,!1,!1):new u.default(8,!1,!1),o=t.getAbsoluteOctave(e,n,this.getKey());this.pushExactNoteByDuration(e,o,s,i,r)}},{key:"setPitchAtIndex",value:function(e,n,i,r){r<0||(e>7&&(e=e%8+1,n++),this.notes[r].degree=e,this.notes[r].octave=t.getAbsoluteOctave(e,n,this.getKey()),this.notes[r].isFlat=i)}},{key:"pushNoteWithDuration",value:function(e,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;e>7&&(e=e%8+1,n++);var o=t.getAbsoluteOctave(e,n,this.getKey());this.pushExactNoteByDuration(e,o,r,i,s)}},{key:"pushLiteralNote",value:function(t){this.notes.push(t)}},{key:"pushExactNoteByDuration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=new r.default(t,e,i,n);-1===s?this.notes.push(o):this.notes.splice(s+1,0,o)}},{key:"getLastNote",value:function(){return this.notes[this.notes.length-1]}},{key:"getNoteAtIndex",value:function(t){return this.notes[t]}},{key:"getNotes",value:function(){return this.notes}},{key:"removeNoteAtPosition",value:function(t){this.notes.splice(t,1)}},{key:"setNoteDuration",value:function(t,e){this.notes[t].setDivisor(e),this.notes[t].unDot(),this.notes[t].rhythm.tiedDivisors=[]}},{key:"augmentNoteDurationBy",value:function(t,e){this.notes[t].rhythm.tiedDivisors.push(e)}},{key:"dotNoteAtIndex",value:function(t){t<this.notes.length&&this.notes[t].dot()}},{key:"getNumNotes",value:function(){return this.notes.length}},{key:"changeKeyBy",value:function(t){var e=this.getKey()+t;e<0&&(e=s.default.__NUM_NOTES-1),e%=s.default.__NUM_NOTES,this.setKey(e)}},{key:"setKey",value:function(t){this.majorScale=new o.default(t)}},{key:"getBpm",value:function(){return this.bpm}},{key:"setBpm",value:function(t){this.bpm=t}},{key:"getTimeSignature",value:function(){return this.timeSignature}},{key:"setTimeSignature",value:function(t){this.timeSignature=t}},{key:"makeTripletsStartingOnIndex",value:function(t,e){for(var n=0;n<3;n++)this.notes[t+n].makeTriplet(e)}},{key:"removeTripletsStartingOnIndex",value:function(t){for(var e=0;e<3;e++)this.notes[t+e].makeNonTriplet()}},{key:"addRestAtStart",value:function(){if(!(this.notes.length>0&&0===this.notes[0].degree)){var t=this.notes,e=this.timeSignature===a.TimeSignatureFourFour?16:8,n=new u.default(e,!1,!1);this.notes=[new r.default(0,0,!1,n)].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}}},{key:"getHalved",value:function(){return this.outputHalfDivisions}}],[{key:"getAbsoluteOctave",value:function(t,e,n){var i="CDEFGAB",r=s.PitchString[n][0];return t+i.indexOf(r)>i.length?e+1:e}},{key:"getRelativeOctave",value:function(t,e,n){var i="CDEFGAB",r=s.PitchString[n][0];return t+i.indexOf(r)>i.length?e-1:e}}]),t}();e.default=c},228:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(4638),s=n(8281),o=n(3201),a=n(1255),u=n(1995),c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isInInsertMode=!0,this.melody=new r.default(e),this.inputOctave=1,this.rhythmCursorIndex=-1,this.isSwung=!1}return i(t,[{key:"getKey",value:function(){return this.melody.getKey()}},{key:"pushDegree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.inputOctave,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isInInsertMode?this.melody.pushNoteAfterIndex(t,e,n,this.rhythmCursorIndex):this.melody.setPitchAtIndex(t,e,n,this.rhythmCursorIndex),this.rhythmCursorIndex>-1&&this.advanceRhythmCursor()}},{key:"pushDegreeWithRhythm",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.inputOctave,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments[3];this.melody.pushNoteWithDuration(t,e,n,i)}},{key:"pushFlatDegree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.inputOctave;this.pushDegree(t,e,!0)}},{key:"backspace",value:function(){var t=this.getNumNotes()-1,e=this.rhythmCursorIndex>-1?this.rhythmCursorIndex:t;this.melody.removeNoteAtPosition(e);var n=t;this.rhythmCursorIndex>n?this.rhythmCursorIndex=n:this.rhythmCursorIndex>-1&&this.rhythmCursorIndex--}},{key:"removeAllNotes",value:function(){for(var t=this.getNumNotes(),e=0;e<t;e++)this.backspace()}},{key:"getNumNotes",value:function(){return this.melody.getNumNotes()}},{key:"getRhythmCursorIndex",value:function(){return this.rhythmCursorIndex}},{key:"setRhythmCursor",value:function(t){t>=-1&&t<this.getNumNotes()&&(this.rhythmCursorIndex=t)}},{key:"advanceRhythmCursor",value:function(){this.rhythmCursorIndex<this.getNumNotes()&&this.rhythmCursorIndex++}},{key:"decrementRhythmCursor",value:function(){this.rhythmCursorIndex>0&&this.rhythmCursorIndex--}},{key:"makeQuarterNote",value:function(){this.makeNoteDuration(4)}},{key:"makeEighthNote",value:function(){this.makeNoteDuration(8)}},{key:"makeSixteenthNote",value:function(){this.makeNoteDuration(16)}},{key:"makeNoteDuration",value:function(t){var e=this.getRhythmCursorIndex(),n=this.getNumNotes();-1===e?this.advanceRhythmCursor():e===n&&this.decrementRhythmCursor(),this.rhythmCursorIndex>=0&&this.rhythmCursorIndex<n&&this.melody.setNoteDuration(this.rhythmCursorIndex,t),this.advanceRhythmCursor()}},{key:"addDivisorToPreviousNote",value:function(t){if(this.rhythmCursorIndex>=1){var e=this.rhythmCursorIndex-1;this.melody.augmentNoteDurationBy(e,t)}}},{key:"addSixteenthToPreviousNote",value:function(){if(this.rhythmCursorIndex>=1){var t=this.rhythmCursorIndex-1;this.melody.augmentNoteDurationBy(t,16)}}},{key:"dotLastNote",value:function(){this.melody.dotNoteAtIndex(this.rhythmCursorIndex-1)}},{key:"incrementKey",value:function(){this.melody.changeKeyBy(1)}},{key:"decrementKey",value:function(){this.melody.changeKeyBy(-1)}},{key:"setKeyFromString",value:function(t){for(var e=0;e<s.default.__NUM_NOTES;e++){var n=e;if(t===s.PitchString[n])return void this.melody.setKey(n)}}},{key:"getInputOctave",value:function(){return this.inputOctave}},{key:"incrementOctave",value:function(){this.inputOctave++}},{key:"decrementOctave",value:function(){this.inputOctave--}},{key:"setIsSwung",value:function(t){this.isSwung=t}},{key:"getIsSwung",value:function(){return this.isSwung}},{key:"setTitle",value:function(t){this.melody.setTitle(t)}},{key:"getTitle",value:function(){return this.melody.getTitle()}},{key:"setBpm",value:function(t){null===t||t<=0||this.melody.setBpm(t)}},{key:"getBpm",value:function(){return this.melody.getBpm()}},{key:"getLastPitch",value:function(t){return t.formatPitch(this.melody.getLastNote(),this.melody.getMajorScale())}},{key:"getSelectedPitch",value:function(t){var e=this.melody.getNoteAtIndex(this.rhythmCursorIndex),n=this.melody.getMajorScale();return t.formatPitch(e,n)}},{key:"getMelody",value:function(){return this.melody}},{key:"setMelody",value:function(t){this.melody=t}},{key:"getMelodyInFormat",value:function(t){return t.formatNotes(this.melody.getNotes(),this.melody.getMajorScale(),this.melody.getTimeSignature())}},{key:"setTimeSignature",value:function(t){this.melody.setTimeSignature(t)}},{key:"getTimeSignature",value:function(){return this.melody.getTimeSignature()}},{key:"toggleTriplets",value:function(t){if(this.getTimeSignature()===o.TimeSignatureFourFour){-1===this.rhythmCursorIndex&&this.rhythmCursorIndex++;var e=this.melody.getNoteAtIndex(this.rhythmCursorIndex);if(e.rhythm.isTriplet){for(var n=this.melody.getNotes(),i=0,r=0;r<this.rhythmCursorIndex;r++)n[r].rhythm.isTriplet&&i++;if(this.rhythmCursorIndex-=i%3,e.rhythm.divisor===t)return void this.melody.removeTripletsStartingOnIndex(this.rhythmCursorIndex)}if(this.melody.getNumNotes()>=this.rhythmCursorIndex+3){var s=this.melody.getNotes();u.default.canPutTripletsAtIndex(s,this.rhythmCursorIndex)&&(this.melody.makeTripletsStartingOnIndex(this.rhythmCursorIndex,t),this.rhythmCursorIndex+=3)}}}},{key:"addRestAtStart",value:function(){this.melody.addRestAtStart()}},{key:"addQuarterNote",value:function(t,e){this.pushDegreeWithRhythm(t,e,!1,new a.default(4,!1,!1))}},{key:"addEighthNote",value:function(t,e){this.pushDegreeWithRhythm(t,e,!1,new a.default(8,!1,!1))}},{key:"addQuarterNoteTiedWithSixteenth",value:function(t,e){this.pushDegreeWithRhythm(t,e,!1,new a.default(4,!1,!1,[16]))}},{key:"addDottedEighth",value:function(t,e){this.pushDegreeWithRhythm(t,e,!1,new a.default(8,!0,!1))}},{key:"addSixteenthNote",value:function(t,e){this.pushDegreeWithRhythm(t,e,!1,new a.default(16,!1,!1))}},{key:"addDottedHalf",value:function(t,e){this.pushDegreeWithRhythm(t,e,!1,new a.default(2,!0,!1))}},{key:"hasValidMelody",value:function(){return u.default.isValid(this.melody.getNotes(),this.getTimeSignature())}},{key:"getIsInInsertMode",value:function(){return this.isInInsertMode}},{key:"setInsertMode",value:function(t){this.isInInsertMode=t}}]),t}();e.default=c},9267:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.degree=e,this.octave=n,this.isFlat=i,this.rhythm=r}return n(t,[{key:"isEighthNote",value:function(){return 8===this.rhythm.divisor}},{key:"dot",value:function(){this.rhythm.isDotted=!0}},{key:"unDot",value:function(){this.rhythm.isDotted=!1}},{key:"setDivisor",value:function(t){this.rhythm.divisor=t}},{key:"makeTriplet",value:function(t){this.rhythm.divisor=t,this.rhythm.isTriplet=!0}},{key:"makeNonTriplet",value:function(){this.rhythm.isTriplet=!1}}]),t}();e.default=i},8281:(t,e)=>{"use strict";var n,i;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.PitchString=void 0,function(t){t[t.C_NATURAL=0]="C_NATURAL",t[t.C_SHARP_D_FLAT=1]="C_SHARP_D_FLAT",t[t.D_NATURAL=2]="D_NATURAL",t[t.D_SHARP_E_FLAT=3]="D_SHARP_E_FLAT",t[t.E_NATURAL=4]="E_NATURAL",t[t.F_NATURAL=5]="F_NATURAL",t[t.F_SHARP_G_FLAT=6]="F_SHARP_G_FLAT",t[t.G_NATURAL=7]="G_NATURAL",t[t.G_SHARP_A_FLAT=8]="G_SHARP_A_FLAT",t[t.A_NATURAL=9]="A_NATURAL",t[t.A_SHARP_B_FLAT=10]="A_SHARP_B_FLAT",t[t.B_NATURAL=11]="B_NATURAL",t[t.__NUM_NOTES=12]="__NUM_NOTES"}(i||(i={})),e.PitchString=(r(n={},i.C_NATURAL,"C"),r(n,i.C_SHARP_D_FLAT,"Db"),r(n,i.D_NATURAL,"D"),r(n,i.D_SHARP_E_FLAT,"Eb"),r(n,i.E_NATURAL,"E"),r(n,i.F_NATURAL,"F"),r(n,i.F_SHARP_G_FLAT,"F#"),r(n,i.G_NATURAL,"G"),r(n,i.G_SHARP_A_FLAT,"Ab"),r(n,i.A_NATURAL,"A"),r(n,i.A_SHARP_B_FLAT,"Bb"),r(n,i.B_NATURAL,"B"),r(n,i.__NUM_NOTES,""),n),e.default=i},3201:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeSignatureTwelveEight=e.TimeSignatureSixEight=e.TimeSignatureFourFour=e.TimeSignature=void 0;var n=function t(e,n,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.outputSubdivisionsPerGroup=e,this.groupsPerMeasure=n,this.stringRep=i,this.defaultNoteDivisor=r};e.TimeSignature=n,e.TimeSignatureFourFour=new n(4,4,"4/4",16),e.TimeSignatureSixEight=new n(2,6,"6/8",16),e.TimeSignatureTwelveEight=new n(3,4,"12/8",8)},8115:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"getNumTicks",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=192,r=4*i;return t*(r/e)*(n?2/3:1)}}]),t}();e.default=i},9334:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(8281),s=n(5931),o=n(8115),a=n(5697),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"formatPitch",value:function(e,n){return t.pitchToToneJsFormat(e,n)}},{key:"formatNotes",value:function(e,n,i){var r=[],u=i.defaultNoteDivisor,c=0,l=!0,h=!1,d=void 0;try{for(var p,f=e[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var g=p.value,m=a.default.getNumDefaultLengthsForRhythm(g.rhythm,i),_=o.default.getNumTicks(m,u,g.rhythm.isTriplet);if(0!==g.degree){var y=new s.default(c,t.pitchToToneJsFormat(g,n),_);r.push(y)}c+=_}}catch(t){h=!0,d=t}finally{try{!l&&f.return&&f.return()}finally{if(h)throw d}}return r}}],[{key:"pitchToToneJsFormat",value:function(t,e){if(0===t.degree)return"z";var n=r.PitchString[e.getPitchAtDegree(t.degree)],i=t.octave+4,s=n;return t.isFlat&&(-1!==s.indexOf("#")?s=s.slice(0,-1):s+="b"),s+i.toString()}}]),t}();e.default=u},5931:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.time=e+"i",this.note=n,this.duration=i+"i"}},5102:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(4179),s=n(2756),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metronomeIsEnabled=!0,this.metronome=new s.Sampler({urls:{C4:"block.mp3"},release:1}).toDestination(),this.metronome.volume.value=4,this.synth=(new s.Synth).toDestination()}return i(t,[{key:"play",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=this;if(this.stopPlayback(),this.metronomeIsEnabled){var o=parseInt(t[t.length-1].time),a=r.default.getClickTimes(o,e).map((function(t){return{time:t+"i",note:"C4",duration:"16n"}}));new s.Part((function(t,e){i.metronome.triggerAttackRelease(e.note,e.duration,t)}),a).start()}new s.Part((function(t,e){i.synth.triggerAttackRelease(e.note,e.duration,t),n()}),t).start(),s.Transport.start()}},{key:"initializeTransport",value:function(t){s.Transport.bpm.value=t}},{key:"stopPlayback",value:function(){s.Transport.stop(),s.Transport.cancel()}},{key:"playNoteInStandardForm",value:function(t){"z"!==t&&this.synth.triggerAttackRelease(t,"16n",s.context.currentTime)}},{key:"setSwing",value:function(t){s.Transport.swing=t}},{key:"swingSixteenths",value:function(t){s.Transport.swingSubdivision=t?"16n":"8n"}},{key:"sixteenthsAreSwung",value:function(){return"16n"===s.Transport.swingSubdivision}},{key:"setBpm",value:function(t){s.Transport.bpm.value=t}},{key:"getSwingSubdivision",value:function(){return s.Transport.swingSubdivision}}]),t}();e.default=o},4179:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(3201),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getClickTimes",value:function(t,e){var n=e.groupsPerMeasure,i=192*(e===r.TimeSignatureFourFour?4:e===r.TimeSignatureSixEight?3:6)/n,s=Math.ceil(t/i);return[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(Array(s).keys())).map((function(t){return t*i}))}}]),t}();e.default=s},9133:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bpm=e,this.taps=[]}return n(t,[{key:"setBpm",value:function(t){this.bpm=t}},{key:"getBpm",value:function(){return this.bpm}},{key:"tapAtTime",value:function(t){t-this.taps[this.taps.length-1]>2e3&&(this.taps=[]),this.taps.push(t),this.setBpmFromTaps()}},{key:"setBpmFromTaps",value:function(){if(!(this.taps.length<2)){for(var t=[],e=0;e+1<this.taps.length;e++){var n=this.taps[e+1]-this.taps[e];t.push(n)}var i=t.reduce((function(t,e){return t+e}),0)/t.length/1e3;this.bpm=Math.round(60/i)}}}]),t}();e.default=i},173:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){return function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function i(r,s){try{var o=e[r](s),a=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(a).then((function(t){i("next",t)}),(function(t){i("throw",t)}));t(a)}("next")}))}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(8736),o=n(6783);n(5666);var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return i(t,[{key:"getDistribution",value:(n=r(regeneratorRuntime.mark((function t(e){var n,i,r,o,a,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.session){t.next=4;break}return t.next=3,this.getInferenceSession();case 3:this.session=t.sent;case 4:return n=["BillyJoel","JohnMayer","Paramore","SZA","TaylorSwift"],i=this.getFeatureValues(e),t.next=8,this.session.run({input:new s.Tensor("bool",i,[1,i.length])});case 8:for(r=t.sent,o=r.probabilities.data,a=new Map,u=0;u<o.length;u++)a.set(n[u],o[u]);return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"getInferenceSession",value:(e=r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.InferenceSession.create("predict/clf.onnx");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"getFeatureValues",value:function(t){return o.default.getFeatureValues(t,"","",!0).map((function(t){return t.value}))}}]),t}();e.default=a},99:(t,e)=>{"use strict";var n,i;function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.ContourString=void 0,function(t){t[t.ASCENDING=0]="ASCENDING",t[t.SAME=1]="SAME",t[t.DESCENDING=2]="DESCENDING"}(i||(i={})),e.ContourString=(r(n={},i.ASCENDING,"Ascending"),r(n,i.SAME,"Same"),r(n,i.DESCENDING,"Descending"),n),e.default=i},6783:(t,e,n)=>{"use strict";var i,r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(991),a=n(4763),u=n(1214),c=n(6392),l=n(99),h=n(1291),d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return r(t,null,[{key:"getFeatureValues",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=i?this.featureFormulas:this.featureFormulasWithArtists;return r.map((function(i){return new h.default(i.name,i.formula(t.getNotes(),t.getKey(),e,t.getTimeSignature()),n)}))}},{key:"getFeatureNames",value:function(){return this.featureFormulasWithArtists.map((function(t){return t.name}))}}]),t}();e.default=d,i=d,d.formulaIsArtist=function(t){return new o.default("isArtist"+t.replace(" ",""),(function(e,n,i){return i===t}))},d.degrees=[1,2,3,4,5,6,7],d.singleDegreeFormulas=i.degrees.map((function(t){return new o.default("containsDegree"+t,(function(e){return e.filter((function(t){return!t.isFlat})).map((function(t){return t.degree})).indexOf(t)>-1}))})),d.phraseEndDegreeFormulas=i.degrees.map((function(t){return new o.default("endsPhraseOn"+t,(function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.degree===t&&!i.isFlat&&(n===e.length-1||0===e[n+1].degree&&e[n+1].rhythm.divisor<=8))return!0}return!1}))})),d.formulaContainsChromatic=new o.default("containsChromatic",(function(t){return t.filter((function(t){return t.isFlat})).length>0})),d.formulaIsAtLeast80PercentPentatonic=new o.default("isAtLeast80PercentPentatonic",(function(t){return t.filter((function(t){return[1,2,3,5,6].indexOf(t.degree)>-1&&!t.isFlat})).length/t.length>=.8})),d.allIntervals=[].concat(s(Array(a.Intervals.__NUM_INTERVALS).keys())),d.singleIntervalFormulas=i.allIntervals.map((function(t){var e=a.IntervalString[t];return new o.default("containsInterval"+e,(function(e,n){return u.default.all(e,n).map((function(t){return t.semitones})).indexOf(t)>-1}))})),d.semitoneSequenceFormulas=i.allIntervals.flatMap((function(t){return i.allIntervals.map((function(e){return new o.default("sequence"+a.IntervalString[t]+"-"+a.IntervalString[e],c.default.containsSemitoneSequence([t,e]))}))})),d.degreePairFormulas=i.degrees.flatMap((function(t){return i.degrees.map((function(e){return new o.default("degree"+t+"-"+e,c.default.containsDegreeSequence([t,e]))}))})),d.threeDegreeFormulas=i.degrees.flatMap((function(t){return i.degrees.flatMap((function(e){return i.degrees.map((function(n){return new o.default("degree"+t+"-"+e+"-"+n,c.default.containsDegreeSequence([t,e,n]))}))}))})),d.allContours=[l.default.ASCENDING,l.default.DESCENDING,l.default.SAME],d.contourFormulas=i.allContours.flatMap((function(t){return i.allContours.map((function(e){return new o.default("hasContour"+l.ContourString[t]+l.ContourString[e],c.default.containsContourSequence([t,e]))}))})),d.hasConsecutiveSyncopatedQuarterNotesFormula=new o.default("hasConsecutiveSyncopatedQuarterNotes",c.default.hasConsecutiveSyncopatedQuarterNotes),d.hasConsecutiveSyncopatedEighthNotesFormula=new o.default("hasConsecutiveSyncopatedEighthNotes",c.default.hasConsecutiveSyncopatedEighthNotes),d.hasConsecutiveStraightEighthNotesFormula=new o.default("hasConsecutiveStraightEighthNotes",c.default.hasConsecutiveStraightEighthNotes),d.hasConsecutiveDottedQuarterNotesFormula=new o.default("hasConsecutiveDottedQuarters",(function(t){for(var e=!1,n=0;n<t.length-1;n++){var i=t[n],r=i.degree>0&&4===i.rhythm.divisor&&i.rhythm.isDotted;if(e&&r)return!0;e=r}return!1})),d.hasEighthNoteTripletsFormula=new o.default("hasEighthNoteTriplets",(function(t){for(var e=0;e<t.length;e++)if(t[e].rhythm.isTriplet&&8===t[e].rhythm.divisor)return!0;return!1})),d.artistLabelFormulas=[i.formulaIsArtist("Paramore"),i.formulaIsArtist("Taylor Swift"),i.formulaIsArtist("John Mayer"),i.formulaIsArtist("Billy Joel"),i.formulaIsArtist("SZA")],d.featureFormulas=[].concat(s(i.singleDegreeFormulas),[i.formulaContainsChromatic,i.formulaIsAtLeast80PercentPentatonic],s(i.singleIntervalFormulas),s(i.semitoneSequenceFormulas),s(i.degreePairFormulas),s(i.threeDegreeFormulas),s(i.contourFormulas),[i.hasConsecutiveSyncopatedQuarterNotesFormula,i.hasConsecutiveSyncopatedEighthNotesFormula,i.hasConsecutiveStraightEighthNotesFormula,i.hasConsecutiveDottedQuarterNotesFormula,i.hasEighthNoteTripletsFormula],s(i.phraseEndDegreeFormulas)),d.featureFormulasWithArtists=[].concat(s(i.artistLabelFormulas),s(i.featureFormulas))},991:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.formula=n}},1291:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.featureName=e,this.value=n,this.songMetadata=i}},6392:(t,e,n)=>{"use strict";var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4468),a=n(1214),u=n(8662),c=n(99),l=n(9334),h=n(1597),d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t};s(this,t),this.transcripts=n(e)}return i(t,[{key:"getNumTranscripts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return this.transcripts.length;var n=t.countTranscriptsByArtist(this.transcripts);return n[e]}},{key:"getPercentOfNotesUsingDegree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.getPercentOfNotesWhere(e,(function(e){return e.degree===t}))}},{key:"getPercentOfChromaticNotesBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getPercentOfNotesWhere(t,(function(t){return t.isFlat}))}},{key:"getPercentOfPentatonicNotesBy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getPercentOfNotesWhere(t,(function(t){return[1,2,3,5,6].indexOf(t.degree)>-1}))}},{key:"getPercentOfSectionsUsingDegree",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.getPercentOfSectionsWhere(e,(function(e){return e.map((function(t){return t.degree})).indexOf(t)>-1}))}},{key:"getPercentOfSectionsWithChromatic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.getPercentOfSectionsWhere(t,(function(t){return t.filter((function(t){return t.isFlat})).length>0}))}},{key:"getPercentPentatonicSections",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.getPercentOfSectionsWhere(t,(function(t){return t.filter((function(t){return[1,2,3,5,6].indexOf(t.degree)>-1})).length/t.length>=e}))}},{key:"getPercentOfSectionsWithInterval",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.getPercentOfSectionsWhere(e,(function(e,n){return a.default.all(e,n).map((function(t){return t.semitones})).indexOf(t)>-1}))}},{key:"getPercentOfSectionsWithSemitoneSequence",value:function(e,n){return this.getPercentOfSectionsWhere(n,t.containsSemitoneSequence(e))}},{key:"getPercentOfSectionsWithDegreeSequence",value:function(e,n){return this.getPercentOfSectionsWhere(n,t.containsDegreeSequence(e))}},{key:"getArtistNames",value:function(){var t=this.transcripts.map((function(t){return t.artist}));return[].concat(r(new Set(t)))}},{key:"getPercentOfNotesWhere",value:function(t,e){var n=this.getAllNotesByArtist(t);return n.filter(e).length/n.length}},{key:"getAllNotesByArtist",value:function(t){for(var e=[],n=0;n<this.transcripts.length;n++){var i=this.transcripts[n];if(""===t||i.artist===t){var s=o.default.parse(i.transcript).getNotes();e.push.apply(e,r(s))}}return e}},{key:"getPercentOfSectionsWhere",value:function(t,e){for(var n=0,i=0,r=0;r<this.transcripts.length;r++){var s=this.transcripts[r];if(""===t||s.artist===t){n++;var a=o.default.parse(s.transcript);e(a.getNotes(),a.getKey())&&i++}}return i/n}}],[{key:"containsSemitoneSequence",value:function(t){return function(e,n){return a.default.allNgrams(e,t.length,n).map((function(t){return t.map((function(t){return t.semitones}))})).filter((function(e){for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0})).length>0}}},{key:"splitIntoPhrases",value:function(t,e){for(var n=[],i=[],r=0;r<t.length;r++){var s=t[r];0===s.degree&&s.rhythm.divisor<e?(n.push(i),i=[]):i.push(s)}return i.length>0&&n.push(i),n}},{key:"containsDegreeSequence",value:function(t){return function(e){var n=e.filter((function(t){return t.degree>0||t.rhythm.divisor<8})).map((function(t){return t.degree}));return u.default.sequenceContainsSequence(n,t)}}},{key:"toContourSequence",value:function(e,n){return u.default.getNgrams(e,2).map((function(e){return t.toContour(e[0],e[1],n)}))}},{key:"toContour",value:function(t,e,n){var i=a.default.getSemitoneDisplacement(t,e,n);return i>0?c.default.ASCENDING:i<0?c.default.DESCENDING:c.default.SAME}},{key:"containsContourSequence",value:function(e){return function(n,i){for(var r=t.splitIntoPhrases(n,8).map((function(t){return t.filter((function(t){return t.degree>0}))})).map((function(e){return t.toContourSequence(e,i)})),s=0;s<r.length;s++){var o=r[s];if(o.length>=e.length&&u.default.sequenceContainsSequence(o,e))return!0}return!1}}},{key:"hasConsecutiveSyncopatedEighthNotes",value:function(e,n,i,r){return t.hasConsecutiveSyncopated(e,n,i,r,8)}},{key:"hasConsecutiveSyncopatedQuarterNotes",value:function(e,n,i,r){return t.hasConsecutiveSyncopated(e,n,i,r,4)}},{key:"hasConsecutiveStraightEighthNotes",value:function(e,n,i,r){return t.hasTwoConsecutiveNotesLike(8,0,e,n,r)}},{key:"hasConsecutiveSyncopated",value:function(e,n,i,r,s){return t.hasTwoConsecutiveNotesLike(s,.5,e,n,r)}},{key:"hasTwoConsecutiveNotesLike",value:function(t,e,n,i,r){for(var s=768/t,o=s*e,a=(new l.default).formatNotes(n,new h.default(i),r),u=!1,c=0;c<a.length;c++){var d=a[c],p=parseInt(d.time),f=parseInt(d.duration)===s,g=p%s===o&&f;if(g&&u)return!0;u=g}return!1}},{key:"countTranscriptsByArtist",value:function(t){var e={};return t.forEach((function(t){e[t.artist]||(e[t.artist]=0),e[t.artist]++})),e}}]),t}();e.default=d,d.countAtLeast=function(t){return function(e){var n=d.countTranscriptsByArtist(e);return e.filter((function(e){return n[e.artist]>=t}))}},d.countLessThan=function(t){return function(e){var n=d.countTranscriptsByArtist(e);return e.filter((function(e){return n[e.artist]<t}))}}},8662:(t,e)=>{"use strict";var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"group",value:function(t,e){for(var n=[],i=[];t.length>0;)n=t.splice(0,e),i.push(n);return i}},{key:"join",value:function(t,e,n){for(var i=[],r=null,s=0;s<t.length;s++)null===r?r=t[s]:e(r,t[s])?r=n(r,t[s]):(i.push(r),r=t[s]);return null!==r&&i.push(r),i}},{key:"fold",value:function(t,e){return function(n){var i=n,r=0,s=!0,o=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var l=u.value;i=e(i,l,r++,t)}}catch(t){o=!0,a=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw a}}return i}}},{key:"roundUp",value:function(t,e){var n=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t)).sort((function(t,e){return t-e})),i=n.filter((function(t){return t>=e}));return i.length>0?i[0]:n[0]}},{key:"getNgrams",value:function(t,e){for(var n=[],i=0;i<=t.length-e;i++){for(var r=[],s=0;s<e;s++)r.push(t[i+s]);n.push(r)}return n}},{key:"sequenceContainsSequence",value:function(e,n){for(var i=t.getNgrams(e,n.length),r=0;r<i.length;r++){var s=i[r];if(s.length===n.length){for(var o=!1,a=0;a<s.length;a++)if(s[a]!==n[a]){o=!0;break}if(!o)return!0}}return!1}}]),t}();e.default=i},7228:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},2858:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},4575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},3913:t=>{function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},3884:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,s=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done)&&(s.push(i.value),!e||s.length!==e);o=!0);}catch(t){a=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}},t.exports.__esModule=!0,t.exports.default=t.exports},521:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},3038:(t,e,n)=>{var i=n(2858),r=n(3884),s=n(379),o=n(521);t.exports=function(t,e){return i(t)||r(t,e)||s(t,e)||o()},t.exports.__esModule=!0,t.exports.default=t.exports},379:(t,e,n)=>{var i=n(7228);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},8577:(t,e,n)=>{"use strict";n.d(e,{$:()=>ce,A:()=>d,B:()=>p,C:()=>f,D:()=>m,E:()=>O,F:()=>u,G:()=>St,H:()=>At,I:()=>Dt,J:()=>Rt,K:()=>Mt,L:()=>st,M:()=>jt,N:()=>Bt,O:()=>h,P:()=>Fn,Q:()=>qt,R:()=>Cn,S:()=>l,T:()=>zt,U:()=>$t,V:()=>Wt,W:()=>Ht,X:()=>Zt,Y:()=>oe,Z:()=>ae,_:()=>ue,a:()=>nn,a0:()=>pe,a1:()=>fe,a2:()=>ge,a3:()=>me,a4:()=>_e,a5:()=>ye,a6:()=>ve,a7:()=>be,a8:()=>we,a9:()=>Te,aA:()=>ui,aB:()=>oi,aC:()=>Qn,aD:()=>Jn,aE:()=>Tt,aI:()=>sn,aL:()=>Gt,aa:()=>xe,ab:()=>Se,ac:()=>Ie,ad:()=>Lt,ae:()=>Ft,af:()=>Ee,ag:()=>Ae,ah:()=>ke,ai:()=>W,aj:()=>H,ak:()=>ee,al:()=>Le,am:()=>tt,an:()=>He,ao:()=>Xe,ap:()=>_t,aq:()=>E,ar:()=>mt,as:()=>pt,at:()=>v,au:()=>Ii,av:()=>hi,aw:()=>b,ax:()=>S,ay:()=>k,az:()=>ot,b:()=>tn,c:()=>Gn,d:()=>Hn,e:()=>Wn,f:()=>ni,g:()=>ri,h:()=>ii,i:()=>yn,j:()=>si,k:()=>Ai,l:()=>Rn,m:()=>Oi,n:()=>Ni,o:()=>c,p:()=>Fe,q:()=>je,r:()=>Nn,s:()=>Pn,t:()=>Ue,u:()=>Ln,v:()=>Ve,w:()=>$e,x:()=>Be,y:()=>qe,z:()=>ze});var i=n(4444),r=n(389),s=n(655),o=n(3333),a=n(8463);const u={PHONE:"phone"},c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},h={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},d={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const p=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},f=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},g=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),m={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized"},_=new o.Yd("@firebase/auth");function y(t,...e){_.logLevel<=o.in.ERROR&&_.error(`Auth (${r.SDK_VERSION}): ${t}`,...e)}function v(t,...e){throw x(t,...e)}function b(t,...e){return x(t,...e)}function w(t,e,n){const r=Object.assign(Object.assign({},f()),{[e]:n});return new i.LL("auth","Firebase",r).create(e,{appName:t.name})}function T(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&v(t,"argument-error"),w(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function x(t,...e){if("string"!=typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return g.create(t,...e)}function S(t,e,...n){if(!t)throw x(e,...n)}function I(t){const e="INTERNAL ASSERTION FAILED: "+t;throw y(e),new Error(e)}function E(t,e){t||I(e)}const A=new Map;function k(t){E(t instanceof Function,"Expected a class definition");let e=A.get(t);return e?(E(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,A.set(t,e),e)}function O(t,e){const n=(0,r._getProvider)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),r=n.getOptions();if((0,i.vZ)(r,null!=e?e:{}))return t;v(t,"already-initialized")}return n.initialize({options:e})}function C(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function D(){return"http:"===P()||"https:"===P()}function P(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class R{constructor(t,e){this.shortDelay=t,this.longDelay=e,E(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(D()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function N(t,e){E(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class M{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void I("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void I("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void I("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},F=new R(3e4,6e4);function j(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function U(t,e,n,r,s={}){return V(t,s,(async()=>{let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=(0,i.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),M.fetch()(B(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))}async function V(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},L),e);try{const e=new q(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw z(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw z(t,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw w(t,a,o);v(t,a)}}catch(e){if(e instanceof i.ZR)throw e;v(t,"network-request-failed")}}async function $(t,e,n,i,r={}){const s=await U(t,e,n,i,r);return"mfaPendingCredential"in s&&v(t,"multi-factor-auth-required",{_serverResponse:s}),s}function B(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?N(t.config,r):`${t.config.apiScheme}://${r}`}class q{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(b(this.auth,"network-request-failed"))),F.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function z(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=b(t,e,i);return r.customData._tokenResponse=n,r}function G(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(t){}}function W(t,e=!1){return(0,i.m9)(t).getIdToken(e)}async function H(t,e=!1){const n=(0,i.m9)(t),r=await n.getIdToken(e),s=Y(r);S(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:G(K(s.auth_time)),issuedAtTime:G(K(s.iat)),expirationTime:G(K(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}function K(t){return 1e3*Number(t)}function Y(t){var e;const[n,r,s]=t.split(".");if(void 0===n||void 0===r||void 0===s)return y("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.tV)(r);return t?JSON.parse(t):(y("Failed to decode base64 JWT payload"),null)}catch(t){return y("Caught error parsing JWT payload as JSON",null===(e=t)||void 0===e?void 0:e.toString()),null}}async function X(t,e,n=!1){if(n)return e;try{return await e}catch(e){throw e instanceof i.ZR&&function({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}(e)&&t.auth.currentUser===t&&await t.auth.signOut(),e}}class Z{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){var t;try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===(t=e)||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}class J{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=G(this.lastLoginAt),this.creationTime=G(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(t){var e;const n=t.auth,i=await t.getIdToken(),r=await X(t,async function(t,e){return U(t,"POST","/v1/accounts:lookup",e)}(n,{idToken:i}));S(null==r?void 0:r.users.length,n,"internal-error");const o=r.users[0];t._notifyReloadListener(o);const a=(null===(e=o.providerUserInfo)||void 0===e?void 0:e.length)?o.providerUserInfo.map((t=>{var{providerId:e}=t,n=(0,s._T)(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=(c=t.providerData,l=a,[...c.filter((t=>!l.some((e=>e.providerId===t.providerId)))),...l]);var c,l;const h=t.isAnonymous,d=!(t.email&&o.passwordHash||(null==u?void 0:u.length)),p=!!h&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new J(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(t,f)}async function tt(t){const e=(0,i.m9)(t);await Q(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}class et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){S(t.idToken,"internal-error"),S(void 0!==t.idToken,"internal-error"),S(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Y(t);return S(e,"internal-error"),S(void 0!==e.exp,"internal-error"),S(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return S(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(t,e){const n=await V(t,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=B(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",M.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(t,e);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new et;return n&&(S("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(S("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(S("number"==typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new et,this.toJSON())}_performRefresh(){return I("not implemented")}}function nt(t,e){S("string"==typeof t||void 0===t,"internal-error",{appName:e})}class it{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=(0,s._T)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new J(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await X(this,this.stsTokenManager.getToken(this.auth,t));return S(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return H(this,t)}reload(){return tt(this)}_assign(t){this!==t&&(S(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new it(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await Q(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await X(this,async function(t,e){return U(t,"POST","/v1/accounts:delete",e)}(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,u,c;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,d=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,p=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=e.createdAt)&&void 0!==u?u:void 0,_=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:v,isAnonymous:b,providerData:w,stsTokenManager:T}=e;S(y&&T,t,"internal-error");const x=et.fromJSON(this.name,T);S("string"==typeof y,t,"internal-error"),nt(l,t.name),nt(h,t.name),S("boolean"==typeof v,t,"internal-error"),S("boolean"==typeof b,t,"internal-error"),nt(d,t.name),nt(p,t.name),nt(f,t.name),nt(g,t.name),nt(m,t.name),nt(_,t.name);const I=new it({uid:y,auth:t,email:h,emailVerified:v,displayName:l,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:x,createdAt:m,lastLoginAt:_});return w&&Array.isArray(w)&&(I.providerData=w.map((t=>Object.assign({},t)))),g&&(I._redirectEventId=g),I}static async _fromIdTokenResponse(t,e,n=!1){const i=new et;i.updateFromServerResponse(e);const r=new it({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await Q(r),r}}class rt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}rt.type="NONE";const st=rt;function ot(t,e,n){return`firebase:${t}:${e}:${n}`}class at{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ot(this.userKey,i.apiKey,r),this.fullPersistenceKey=ot("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?it._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new at(k(st),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||k(st);const s=ot(n,t.config.apiKey,t.name);let o=null;for(const n of e)try{const e=await n._get(s);if(e){const i=it._fromJSON(t,e);n!==r&&(o=i),r=n;break}}catch(t){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(t){}}))),new at(r,t,n)):new at(r,t,n)}}function ut(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ct(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ft(e))return"Blackberry";if(gt(e))return"Webos";if(lt(e))return"Safari";if((e.includes("chrome/")||ht(e))&&!e.includes("edge/"))return"Chrome";if(pt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ct(t=(0,i.z$)()){return/firefox\//i.test(t)}function lt(t=(0,i.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ht(t=(0,i.z$)()){return/crios\//i.test(t)}function dt(t=(0,i.z$)()){return/iemobile/i.test(t)}function pt(t=(0,i.z$)()){return/android/i.test(t)}function ft(t=(0,i.z$)()){return/blackberry/i.test(t)}function gt(t=(0,i.z$)()){return/webos/i.test(t)}function mt(t=(0,i.z$)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _t(t=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function yt(t=(0,i.z$)()){return mt(t)||pt(t)||gt(t)||ft(t)||/windows phone/i.test(t)||dt(t)}function vt(t,e=[]){let n;switch(t){case"Browser":n=ut((0,i.z$)());break;case"Worker":n=`${ut((0,i.z$)())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.SDK_VERSION}/${s}`}class bt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{n(t(e))}catch(t){i(t)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){var e;if(this.auth.currentUser===t)return;const n=[];try{for(const e of this.queue)await e(t),e.onAbort&&n.push(e.onAbort)}catch(t){n.reverse();for(const t of n)try{t()}catch(t){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(e=t)||void 0===e?void 0:e.message})}}}class wt{constructor(t,e,n){this.app=t,this.heartbeatServiceProvider=e,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xt(this),this.idTokenSubscription=new xt(this),this.beforeStateQueue=new bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=k(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await at.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(t){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null==i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null==o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(t){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(t)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return S(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(t){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){var e;try{await Q(t)}catch(t){if("auth/network-request-failed"!==(null===(e=t)||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,i.m9)(t):null;return e&&S(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&S(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(k(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&k(t)||this._popupRedirectResolver;S(e,this,"argument-error"),this.redirectPersistenceManager=await at.create(this,[k(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return S(s,this,"internal-error"),s.then((()=>r(this.currentUser))),"function"==typeof e?t.addObserver(e,n,i):t.addObserver(e)}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());return n&&(e["X-Firebase-Client"]=n),e}}function Tt(t){return(0,i.m9)(t)}class xt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.ne)((t=>this.observer=t))}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function St(t,e,n){const i=Tt(t);S(i._canInitEmulator,i,"emulator-config-failed"),S(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null==n?void 0:n.disableWarnings),s=It(e),{host:o,port:a}=function(t){const e=It(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Et(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Et(e)}}}(e),u=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}function It(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Et(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class At{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return I("not implemented")}_getIdTokenResponse(t){return I("not implemented")}_linkToIdToken(t,e){return I("not implemented")}_getReauthenticationResolver(t){return I("not implemented")}}async function kt(t,e){return U(t,"POST","/v1/accounts:resetPassword",j(t,e))}async function Ot(t,e){return U(t,"POST","/v1/accounts:update",e)}async function Ct(t,e){return U(t,"POST","/v1/accounts:sendOobCode",j(t,e))}class Dt extends At{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Dt(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Dt(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":return async function(t,e){return $(t,"POST","/v1/accounts:signInWithPassword",j(t,e))}(t,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return $(t,"POST","/v1/accounts:signInWithEmailLink",j(t,e))}(t,{email:this._email,oobCode:this._password});default:v(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":return Ot(t,{idToken:e,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(t,e){return $(t,"POST","/v1/accounts:signInWithEmailLink",j(t,e))}(t,{idToken:e,email:this._email,oobCode:this._password});default:v(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function Pt(t,e){return $(t,"POST","/v1/accounts:signInWithIdp",j(t,e))}class Rt extends At{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Rt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):v("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=(0,s._T)(e,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Rt(n,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){return Pt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Pt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Pt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,i.xO)(e)}return t}}const Nt={USER_NOT_FOUND:"user-not-found"};class Mt extends At{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Mt({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Mt({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return async function(t,e){return $(t,"POST","/v1/accounts:signInWithPhoneNumber",j(t,e))}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return async function(t,e){const n=await $(t,"POST","/v1/accounts:signInWithPhoneNumber",j(t,e));if(n.temporaryProof)throw z(t,"account-exists-with-different-credential",n);return n}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return async function(t,e){return $(t,"POST","/v1/accounts:signInWithPhoneNumber",j(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),Nt)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Mt({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Lt{constructor(t){var e,n,r,s,o,a;const u=(0,i.zd)((0,i.pd)(t)),c=null!==(e=u.apiKey)&&void 0!==e?e:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);S(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(s=u.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,i.zd)((0,i.pd)(t)).link,n=e?(0,i.zd)((0,i.pd)(e)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(t)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||e||t}(t);try{return new Lt(e)}catch(t){return null}}}function Ft(t){return Lt.parseLink(t)}class jt{constructor(){this.providerId=jt.PROVIDER_ID}static credential(t,e){return Dt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Lt.parseLink(e);return S(n,"argument-error"),Dt._fromEmailAndCode(t,n.code,n.tenantId)}}jt.PROVIDER_ID="password",jt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",jt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ut{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Vt extends Ut{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class $t extends Vt{static credentialFromJSON(t){const e="string"==typeof t?JSON.parse(t):t;return S("providerId"in e&&"signInMethod"in e,"argument-error"),Rt._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return S(t.idToken||t.accessToken,"argument-error"),Rt._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return $t.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return $t.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=t;if(!(n||i||e||r))return null;if(!o)return null;try{return new $t(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:r})}catch(t){return null}}}class Bt extends Vt{constructor(){super("facebook.com")}static credential(t){return Rt._fromParams({providerId:Bt.PROVIDER_ID,signInMethod:Bt.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bt.credentialFromTaggedObject(t)}static credentialFromError(t){return Bt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Bt.credential(t.oauthAccessToken)}catch(t){return null}}}Bt.FACEBOOK_SIGN_IN_METHOD="facebook.com",Bt.PROVIDER_ID="facebook.com";class qt extends Vt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Rt._fromParams({providerId:qt.PROVIDER_ID,signInMethod:qt.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return qt.credentialFromTaggedObject(t)}static credentialFromError(t){return qt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return qt.credential(e,n)}catch(t){return null}}}qt.GOOGLE_SIGN_IN_METHOD="google.com",qt.PROVIDER_ID="google.com";class zt extends Vt{constructor(){super("github.com")}static credential(t){return Rt._fromParams({providerId:zt.PROVIDER_ID,signInMethod:zt.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zt.credentialFromTaggedObject(t)}static credentialFromError(t){return zt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return zt.credential(t.oauthAccessToken)}catch(t){return null}}}zt.GITHUB_SIGN_IN_METHOD="github.com",zt.PROVIDER_ID="github.com";class Gt extends At{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){return Pt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Pt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Pt(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:r}=e;return n&&i&&r&&n===i?new Gt(n,r):null}static _create(t,e){return new Gt(t,e)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wt extends Ut{constructor(t){S(t.startsWith("saml."),"argument-error"),super(t)}static credentialFromResult(t){return Wt.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Wt.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=Gt.fromJSON(t);return S(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return Gt._create(n,e)}catch(t){return null}}}class Ht extends Vt{constructor(){super("twitter.com")}static credential(t,e){return Rt._fromParams({providerId:Ht.PROVIDER_ID,signInMethod:Ht.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ht.credentialFromTaggedObject(t)}static credentialFromError(t){return Ht.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ht.credential(e,n)}catch(t){return null}}}async function Kt(t,e){return $(t,"POST","/v1/accounts:signUp",j(t,e))}Ht.TWITTER_SIGN_IN_METHOD="twitter.com",Ht.PROVIDER_ID="twitter.com";class Yt{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await it._fromIdTokenResponse(t,n,i),s=Xt(n);return new Yt({user:r,providerId:s,_tokenResponse:n,operationType:e})}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=Xt(n);return new Yt({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function Xt(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function Zt(t){var e;const n=Tt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new Yt({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Kt(n,{returnSecureToken:!0}),r=await Yt._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}class Jt extends i.ZR{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Jt.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new Jt(t,e,n,i)}}function Qt(t,e,n,i){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Jt._fromErrorAndOperation(t,n,e,i);throw n}))}function te(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}async function ee(t,e){const n=(0,i.m9)(t);await ie(!0,n,e);const{providerUserInfo:r}=await async function(t,e){return U(t,"POST","/v1/accounts:update",e)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=te(r||[]);return n.providerData=n.providerData.filter((t=>s.has(t.providerId))),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ne(t,e,n=!1){const i=await X(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Yt._forOperation(t,"link",i)}async function ie(t,e,n){await Q(e);const i=!1===t?"provider-already-linked":"no-such-provider";S(te(e.providerData).has(n)===t,e.auth,i)}async function re(t,e,n=!1){var i;const{auth:r}=t,s="reauthenticate";try{const i=await X(t,Qt(r,s,e,t),n);S(i.idToken,r,"internal-error");const o=Y(i.idToken);S(o,r,"internal-error");const{sub:a}=o;return S(t.uid===a,r,"user-mismatch"),Yt._forOperation(t,s,i)}catch(t){throw"auth/user-not-found"===(null===(i=t)||void 0===i?void 0:i.code)&&v(r,"user-mismatch"),t}}async function se(t,e,n=!1){const i="signIn",r=await Qt(t,i,e),s=await Yt._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function oe(t,e){return se(Tt(t),e)}async function ae(t,e){const n=(0,i.m9)(t);return await ie(!1,n,e.providerId),ne(n,e)}async function ue(t,e){return re((0,i.m9)(t),e)}async function ce(t,e){const n=Tt(t),i=await async function(t,e){return $(t,"POST","/v1/accounts:signInWithCustomToken",j(t,e))}(n,{token:e,returnSecureToken:!0}),r=await Yt._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class le{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?he._fromServerResponse(t,e):v(t,"internal-error")}}class he extends le{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new he(e)}}function de(t,e,n){var i;S((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),S(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(S(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(S(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function pe(t,e,n){const r=(0,i.m9)(t),s={requestType:"PASSWORD_RESET",email:e};n&&de(r,s,n),await async function(t,e){return Ct(t,e)}(r,s)}async function fe(t,e,n){await kt((0,i.m9)(t),{oobCode:e,newPassword:n})}async function ge(t,e){await async function(t,e){return U(t,"POST","/v1/accounts:update",j(t,e))}((0,i.m9)(t),{oobCode:e})}async function me(t,e){const n=(0,i.m9)(t),r=await kt(n,{oobCode:e}),s=r.requestType;switch(S(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":S(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":S(r.mfaInfo,n,"internal-error");default:S(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=le._fromServerResponse(Tt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function _e(t,e){const{data:n}=await me((0,i.m9)(t),e);return n.email}async function ye(t,e,n){const i=Tt(t),r=await Kt(i,{returnSecureToken:!0,email:e,password:n}),s=await Yt._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function ve(t,e,n){return oe((0,i.m9)(t),jt.credential(e,n))}async function be(t,e,n){const r=(0,i.m9)(t),s={requestType:"EMAIL_SIGNIN",email:e};S(n.handleCodeInApp,r,"argument-error"),n&&de(r,s,n),await async function(t,e){return Ct(t,e)}(r,s)}function we(t,e){const n=Lt.parseLink(e);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function Te(t,e,n){const r=(0,i.m9)(t),s=jt.credentialWithLink(e,n||C());return S(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),oe(r,s)}async function xe(t,e){const n={identifier:e,continueUri:D()?C():"http://localhost"},{signinMethods:r}=await async function(t,e){return U(t,"POST","/v1/accounts:createAuthUri",j(t,e))}((0,i.m9)(t),n);return r||[]}async function Se(t,e){const n=(0,i.m9)(t),r={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&de(n.auth,r,e);const{email:s}=await async function(t,e){return Ct(t,e)}(n.auth,r);s!==t.email&&await t.reload()}async function Ie(t,e,n){const r=(0,i.m9)(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&de(r.auth,s,n);const{email:o}=await async function(t,e){return Ct(t,e)}(r.auth,s);o!==t.email&&await t.reload()}async function Ee(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=(0,i.m9)(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await X(r,async function(t,e){return U(t,"POST","/v1/accounts:update",e)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find((({providerId:t})=>"password"===t));a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Ae(t,e){return Oe((0,i.m9)(t),e,null)}function ke(t,e){return Oe((0,i.m9)(t),null,e)}async function Oe(t,e,n){const{auth:i}=t,r={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(r.email=e),n&&(r.password=n);const s=await X(t,Ot(i,r));await t._updateTokensIfNecessary(s,!0)}class Ce{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class De extends Ce{constructor(t,e,n,i){super(t,e,n),this.username=i}}class Pe extends Ce{constructor(t,e){super(t,"facebook.com",e)}}class Re extends De{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class Ne extends Ce{constructor(t,e){super(t,"google.com",e)}}class Me extends De{constructor(t,e,n){super(t,"twitter.com",e,n)}}function Le(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null==t?void 0:t.idToken)){const i=null===(n=null===(e=Y(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Ce(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Pe(s,r);case"github.com":return new Re(s,r);case"google.com":return new Ne(s,r);case"twitter.com":return new Me(s,r,t.screenName||null);case"custom":case"anonymous":return new Ce(s,null);default:return new Ce(s,i,r)}}(n)}function Fe(t,e){return(0,i.m9)(t).setPersistence(e)}function je(t,e,n,r){return(0,i.m9)(t).onIdTokenChanged(e,n,r)}function Ue(t,e,n){return(0,i.m9)(t).beforeAuthStateChanged(e,n)}function Ve(t,e,n,r){return(0,i.m9)(t).onAuthStateChanged(e,n,r)}function $e(t){(0,i.m9)(t).useDeviceLanguage()}function Be(t,e){return(0,i.m9)(t).updateCurrentUser(e)}function qe(t){return(0,i.m9)(t).signOut()}async function ze(t){return(0,i.m9)(t).delete()}class Ge{constructor(t,e){this.type=t,this.credential=e}static _fromIdtoken(t){return new Ge("enroll",t)}static _fromMfaPendingCredential(t){return new Ge("signin",t)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var e,n;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return Ge._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return Ge._fromIdtoken(t.multiFactorSession.idToken)}return null}}class We{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=Tt(t),i=e.customData._serverResponse,r=(i.mfaInfo||[]).map((t=>le._fromServerResponse(n,t)));S(i.mfaPendingCredential,n,"internal-error");const s=Ge._fromMfaPendingCredential(i.mfaPendingCredential);return new We(s,r,(async t=>{const r=await t._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(e.operationType){case"signIn":const t=await Yt._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return S(e.user,n,"internal-error"),Yt._forOperation(e.user,e.operationType,o);default:v(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function He(t,e){var n;const r=(0,i.m9)(t),s=e;return S(e.customData.operationType,r,"argument-error"),S(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),We._fromError(r,s)}class Ke{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>le._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new Ke(t)}async getSession(){return Ge._fromIdtoken(await this.user.getIdToken())}async enroll(t,e){const n=t,i=await this.getSession(),r=await X(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(t){var e;const n="string"==typeof t?t:t.uid,i=await this.user.getIdToken(),r=await X(this.user,(s=this.user.auth,o={idToken:i,mfaEnrollmentId:n},U(s,"POST","/v2/accounts/mfaEnrollment:withdraw",j(s,o))));var s,o;this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==n)),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(t){if("auth/user-token-expired"!==(null===(e=t)||void 0===e?void 0:e.code))throw t}}}const Ye=new WeakMap;function Xe(t){const e=(0,i.m9)(t);return Ye.has(e)||Ye.set(e,Ke._fromUser(e)),Ye.get(e)}const Ze="__sak";class Je{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Ze,"1"),this.storage.removeItem(Ze),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}class Qe extends Je{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,i.z$)();return lt(t)||mt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=yt(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}Qe.type="LOCAL";const tn=Qe;class en extends Je{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}en.type="SESSION";const nn=en;class rn{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new rn(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null==s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await function(t){return Promise.all(t.map((async t=>{try{return{fulfilled:!0,value:await t}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function sn(t="",e=10){let n="";for(let t=0;t<e;t++)n+=Math.floor(10*Math.random());return t+n}rn.receivers=[];class on{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const u=sn("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===u)switch(e.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:u,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function an(){return window}function un(){return void 0!==an().WorkerGlobalScope&&"function"==typeof an().importScripts}const cn="firebaseLocalStorageDb",ln="firebaseLocalStorage",hn="fbase_key";class dn{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function pn(t,e){return t.transaction([ln],e?"readwrite":"readonly").objectStore(ln)}function fn(){const t=indexedDB.open(cn,1);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(ln,{keyPath:hn})}catch(t){n(t)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(ln)?e(n):(n.close(),await function(){const t=indexedDB.deleteDatabase(cn);return new dn(t).toPromise()}(),e(await fn()))}))}))}async function gn(t,e,n){const i=pn(t,!0).put({[hn]:e,value:n});return new dn(i).toPromise()}function mn(t,e){const n=pn(t,!0).delete(e);return new dn(n).toPromise()}class _n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await fn()),this.db}async _withRetries(t){let e=0;for(;;)try{const e=await this._openDb();return await t(e)}catch(t){if(e++>3)throw t;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return un()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rn._getInstance(un()?self:null),this.receiver._subscribe("keyChanged",(async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)}))),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new on(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){var e;if(this.sender&&this.activeServiceWorker&&((null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await fn();return await gn(t,Ze,"1"),await mn(t,Ze),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>gn(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>async function(t,e){const n=pn(t,!1).get(e),i=await new dn(n).toPromise();return void 0===i?null:i.value}(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>mn(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=pn(t,!1).getAll();return new dn(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const t of Object.keys(this.localCache))this.localCache[t]&&!n.has(t)&&(this.notifyListeners(t,null),e.push(t));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const t of Array.from(n))t(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}_n.type="LOCAL";const yn=_n;function vn(t){return new Promise(((e,n)=>{const i=document.createElement("script");var r,s;i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=b("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",(null!==(s=null===(r=document.getElementsByTagName("head"))||void 0===r?void 0:r[0])&&void 0!==s?s:document).appendChild(i)}))}function bn(t){return`__${t}${Math.floor(1e6*Math.random())}`}const wn=1e12;class Tn{constructor(t){this.auth=t,this.counter=wn,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new xn(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||wn;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||wn;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||wn;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class xn{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"==typeof t?document.getElementById(t):t;S(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<50;t++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}();const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(t){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(t){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Sn=bn("rcb"),In=new R(3e4,6e4);class En{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=an().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return S(function(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}(e),t,"argument-error"),this.shouldResolveImmediately(e)?Promise.resolve(an().grecaptcha):new Promise(((n,r)=>{const s=an().setTimeout((()=>{r(b(t,"network-request-failed"))}),In.get());an()[Sn]=()=>{an().clearTimeout(s),delete an()[Sn];const i=an().grecaptcha;if(!i)return void r(b(t,"internal-error"));const o=i.render;i.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(i)},vn(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:Sn,render:"explicit",hl:e})}`).catch((()=>{clearTimeout(s),r(b(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=an().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class An{async load(t){return new Tn(t)}clearedOneInstance(){}}const kn="recaptcha",On={theme:"light",type:"image"};class Cn{constructor(t,e=Object.assign({},On),n){this.parameters=e,this.type=kn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tt(n),this.isInvisible="invisible"===this.parameters.size,S("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"==typeof t?document.getElementById(t):t;S(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new An:new En,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha();return e.getResponse(t)||new Promise((n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){S(!this.parameters.sitekey,this.auth,"argument-error"),S(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),S("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"==typeof t)t(e);else if("string"==typeof t){const n=an()[t];"function"==typeof n&&n(e)}}}assertNotDestroyed(){S(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){S(D()&&!un(),this.auth,"internal-error"),await function(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await async function(t){return(await U(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);S(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return S(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Dn{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=Mt._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function Pn(t,e,n){const r=Tt(t),s=await Mn(r,e,(0,i.m9)(n));return new Dn(s,(t=>oe(r,t)))}async function Rn(t,e,n){const r=(0,i.m9)(t);await ie(!1,r,"phone");const s=await Mn(r.auth,e,(0,i.m9)(n));return new Dn(s,(t=>ae(r,t)))}async function Nn(t,e,n){const r=(0,i.m9)(t),s=await Mn(r.auth,e,(0,i.m9)(n));return new Dn(s,(t=>ue(r,t)))}async function Mn(t,e,n){var i;const r=await n.verify();try{let s;if(S("string"==typeof r,t,"argument-error"),S(n.type===kn,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){S("enroll"===e.type,t,"internal-error");const n=await function(t,e){return U(t,"POST","/v2/accounts/mfaEnrollment:start",j(t,e))}(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{S("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;S(n,t,"missing-multi-factor-info");const o=await function(t,e){return U(t,"POST","/v2/accounts/mfaSignIn:start",j(t,e))}(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await async function(t,e){return U(t,"POST","/v1/accounts:sendVerificationCode",j(t,e))}(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}async function Ln(t,e){await ne((0,i.m9)(t),e)}class Fn{constructor(t){this.providerId=Fn.PROVIDER_ID,this.auth=Tt(t)}verifyPhoneNumber(t,e){return Mn(this.auth,t,(0,i.m9)(e))}static credential(t,e){return Mt._fromVerification(t,e)}static credentialFromResult(t){const e=t;return Fn.credentialFromTaggedObject(e)}static credentialFromError(t){return Fn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Mt._fromTokenResponse(e,n):null}}function jn(t,e){return e?k(e):(S(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}Fn.PROVIDER_ID="phone",Fn.PHONE_SIGN_IN_METHOD="phone";class Un extends At{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Pt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Pt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Pt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Vn(t){return se(t.auth,new Un(t),t.bypassAuthState)}function $n(t){const{auth:e,user:n}=t;return S(n,e,"internal-error"),re(n,new Un(t),t.bypassAuthState)}async function Bn(t){const{auth:e,user:n}=t;return S(n,e,"internal-error"),ne(n,new Un(t),t.bypassAuthState)}class qn{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(t){this.reject(t)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(t){this.reject(t)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Vn;case"linkViaPopup":case"linkViaRedirect":return Bn;case"reauthViaPopup":case"reauthViaRedirect":return $n;default:v(this.auth,"internal-error")}}resolve(t){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){E(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zn=new R(2e3,1e4);async function Gn(t,e,n){const i=Tt(t);T(t,e,Ut);const r=jn(i,n);return new Kn(i,"signInViaPopup",e,r).executeNotNull()}async function Wn(t,e,n){const r=(0,i.m9)(t);T(r.auth,e,Ut);const s=jn(r.auth,n);return new Kn(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function Hn(t,e,n){const r=(0,i.m9)(t);T(r.auth,e,Ut);const s=jn(r.auth,n);return new Kn(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Kn extends qn{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Kn.currentPopupAction&&Kn.currentPopupAction.cancel(),Kn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return S(t,this.auth,"internal-error"),t}async onExecution(){E(1===this.filter.length,"Popup operations only handle one event");const t=sn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(b(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(b(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(b(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(t,zn.get())};t()}}Kn.currentPopupAction=null;const Yn=new Map;class Xn extends qn{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Yn.get(this.auth._key());if(!t){try{const e=await async function(t,e){const n=ei(e),i=ti(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(e)}catch(e){t=()=>Promise.reject(e)}Yn.set(this.auth._key(),t)}return this.bypassAuthState||Yn.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Zn(t,e){return ti(t)._set(ei(e),"true")}function Jn(){Yn.clear()}function Qn(t,e){Yn.set(t._key(),e)}function ti(t){return k(t._redirectPersistence)}function ei(t){return ot("pendingRedirect",t.config.apiKey,t.name)}function ni(t,e,n){return async function(t,e,n){const i=Tt(t);T(t,e,Ut);const r=jn(i,n);return await Zn(r,i),r._openRedirect(i,e,"signInViaRedirect")}(t,e,n)}function ii(t,e,n){return async function(t,e,n){const r=(0,i.m9)(t);T(r.auth,e,Ut);const s=jn(r.auth,n);await Zn(s,r.auth);const o=await ai(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}(t,e,n)}function ri(t,e,n){return async function(t,e,n){const r=(0,i.m9)(t);T(r.auth,e,Ut);const s=jn(r.auth,n);await ie(!1,r,e.providerId),await Zn(s,r.auth);const o=await ai(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}(t,e,n)}async function si(t,e){return await Tt(t)._initializationPromise,oi(t,e,!1)}async function oi(t,e,n=!1){const i=Tt(t),r=jn(i,e),s=new Xn(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function ai(t){const e=sn(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}class ui{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return li(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!li(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(b(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ci(t))}saveEventToCache(t){this.cachedEventUids.add(ci(t)),this.lastProcessedEventTime=Date.now()}}function ci(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function li({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}async function hi(t,e={}){return U(t,"GET","/v1/projects",e)}const di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pi=/^https?/;function fi(t){const e=C(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!pi.test(n))return!1;if(di.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const gi=new R(3e4,6e4);function mi(){const t=an().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let e=0;e<t.CP.length;e++)t.CP[e]=null}let _i=null;function yi(t){return _i=_i||function(t){return new Promise(((e,n)=>{var i,r,s;function o(){mi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mi(),n(b(t,"network-request-failed"))},timeout:gi.get()})}if(null===(r=null===(i=an().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=an().gapi)||void 0===s?void 0:s.load)){const e=bn("iframefcb");return an()[e]=()=>{gapi.load?o():n(b(t,"network-request-failed"))},vn(`https://apis.google.com/js/api.js?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw _i=null,t}))}(t),_i}const vi=new R(5e3,15e3),bi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ti(t){const e=t.config;S(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?N(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,s={apiKey:e.apiKey,appName:t.name,v:r.SDK_VERSION},o=wi.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.xO)(s).slice(1)}`}const xi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Si{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Ii(t,e,n,s,o,a){S(t.config.authDomain,t,"auth-domain-config-required"),S(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:r.SDK_VERSION,eventId:o};if(e instanceof Ut){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",(0,i.xb)(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))u[t]=e}if(e instanceof Vt){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(u.scopes=t.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const t of Object.keys(c))void 0===c[t]&&delete c[t];return`${function({config:t}){return t.emulator?N(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${(0,i.xO)(c).slice(1)}`}const Ei="webStorageSupport",Ai=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nn,this._completeRedirectFn=oi,this._overrideRedirectResult=Qn}async _openPopup(t,e,n,r){var s;return E(null===(s=this.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(t,e,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},xi),{width:r.toString(),height:s.toString(),top:o,left:a}),l=(0,i.z$)().toLowerCase();n&&(u=ht(l)?"_blank":n),ct(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(function(t=(0,i.z$)()){var e;return mt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(e||"",u),new Si(null);const d=window.open(e||"",u,h);S(d,t,"popup-blocked");try{d.focus()}catch(t){}return new Si(d)}(t,Ii(t,e,n,C(),r),sn())}async _openRedirect(t,e,n,i){var r;return await this._originValidation(t),r=Ii(t,e,n,C(),i),an().location.href=r,new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(E(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await async function(t){const e=await yi(t),n=an().gapi;return S(n,t,"internal-error"),e.open({where:document.body,url:Ti(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bi,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=b(t,"network-request-failed"),s=an().setTimeout((()=>{i(r)}),vi.get());function o(){an().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}(t),n=new ui(t);return e.register("authEvent",(e=>(S(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:n.onEvent(e.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Ei,{type:Ei},(n=>{var i;const r=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==r&&e(!!r),v(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hi(t);for(const t of e)try{if(fi(t))return}catch(t){}v(t,"unauthorized-domain")}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return yt()||lt()||mt()}};class ki extends class{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return I("unexpected MultiFactorSessionType")}}}{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new ki(t)}_finalizeEnroll(t,e,n){return function(t,e){return U(t,"POST","/v2/accounts/mfaEnrollment:finalize",j(t,e))}(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return function(t,e){return U(t,"POST","/v2/accounts/mfaSignIn:finalize",j(t,e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Oi{constructor(){}static assertion(t){return ki._fromCredential(t)}}Oi.FACTOR_ID="phone";var Ci,Di="@firebase/auth",Pi="0.20.5";class Ri{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ni(t=(0,r.getApp)()){const e=(0,r._getProvider)(t,"auth");return e.isInitialized()?e.getImmediate():O(t,{popupRedirectResolver:Ai,persistence:[yn,tn,nn]})}Ci="Browser",(0,r._registerComponent)(new a.wA("auth",((t,{options:e})=>{const n=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:r,authDomain:s}=n.options;return((t,n)=>{S(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),S(!(null==s?void 0:s.includes(":")),"argument-error",{appName:t.name});const i={apiKey:r,authDomain:s,clientPlatform:Ci,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vt(Ci)},o=new wt(t,n,i);return function(t,e){const n=(null==e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(k);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null==e?void 0:e.popupRedirectResolver)}(o,e),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{t.getProvider("auth-internal").initialize()}))),(0,r._registerComponent)(new a.wA("auth-internal",(t=>{return e=Tt(t.getProvider("auth").getImmediate()),new Ri(e);var e}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.registerVersion)(Di,Pi,void 0),(0,r.registerVersion)(Di,Pi,"esm2017")},4444:(t,e,n)=>{"use strict";n.d(e,{BH:()=>d,LL:()=>I,ZR:()=>S,gQ:()=>$,hu:()=>i,g5:()=>r,US:()=>o,tV:()=>c,h$:()=>a,L:()=>u,r3:()=>P,Sg:()=>p,ne:()=>B,p$:()=>l,vZ:()=>L,ZB:()=>h,gK:()=>G,pd:()=>V,m9:()=>K,z$:()=>f,GJ:()=>D,jU:()=>_,ru:()=>y,xb:()=>N,w1:()=>b,hl:()=>T,uI:()=>g,UG:()=>m,Yr:()=>w,b$:()=>v,w9:()=>C,cI:()=>A,UI:()=>M,xO:()=>j,zd:()=>U,DV:()=>R,ug:()=>H,dS:()=>W,Pz:()=>k,eu:()=>x});const i=function(t,e){if(!t)throw r(e)},r=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let e=0;e<t.length;e+=3){const r=t[e],s=e+1<t.length,o=s?t[e+1]:0,a=e+2<t.length,u=a?t[e+2]:0,c=r>>2,l=(3&r)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;a||(d=64,s||(h=64)),i.push(n[c],n[l],n[h],n[d])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(s>>10)),e[i++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let e=0;e<t.length;){const r=n[t.charAt(e++)],s=e<t.length?n[t.charAt(e)]:0;++e;const o=e<t.length?n[t.charAt(e)]:64;++e;const a=e<t.length?n[t.charAt(e)]:64;if(++e,null==r||null==s||null==o||null==a)throw Error();const u=r<<2|s>>4;if(i.push(u),64!==o){const t=s<<4&240|o>>2;if(i.push(t),64!==a){const t=o<<6&192|a;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},a=function(t){const e=s(t);return o.encodeByteArray(e,!0)},u=function(t){return a(t).replace(/\./g,"")},c=function(t){try{return o.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function _(){return"object"==typeof self&&self.self===self}function y(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){const t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return!1}function T(){return"object"==typeof indexedDB}function x(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}class S extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,S.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?function(t,e){return t.replace(E,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new S(i,o,n)}}const E=/\{\$([^}]+)}/g;function A(t){return JSON.parse(t)}function k(t){return JSON.stringify(t)}const O=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=A(c(s[0])||""),n=A(c(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:i,signature:r}},C=function(t){const e=O(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},D=function(t){const e=O(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function R(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function N(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function L(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(F(n)&&F(s)){if(!L(n,s))return!1}else if(n!==s)return!1}for(const t of i)if(!n.includes(t))return!1;return!0}function F(t){return null!==t&&"object"==typeof t}function j(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function U(t){const e={};return t.replace(/^\?/,"").split("&").forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function V(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}class ${constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,e){e||(e=0);const n=this.W_;if("string"==typeof t)for(let i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(let i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(let t=16;t<80;t++){const e=n[t-3]^n[t-8]^n[t-14]^n[t-16];n[t]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(let t=0;t<80;t++){t<40?t<20?(i=u^o&(a^u),r=1518500249):(i=o^a^u,r=1859775393):t<60?(i=o&a|u&(o|a),r=2400959708):(i=o^a^u,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[t]&4294967295;c=u,u=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,e){if(null==t)return;void 0===e&&(e=t.length);const n=e-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<e;){if(0===s)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<e;)if(r[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<e;)if(r[s]=t[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=e}digest(){const t=[];let e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let t=this.blockSize-1;t>=56;t--)this.buf_[t]=255&e,e/=256;this.compress_(this.buf_);let n=0;for(let e=0;e<5;e++)for(let i=24;i>=0;i-=8)t[n]=this.chain_[e]>>i&255,++n;return t}}function B(t,e){const n=new q(t,e);return n.subscribe.bind(n)}class q{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=function(t,e){if("object"!=typeof t||null===t)return!1;for(const e of["next","error","complete"])if(e in t&&"function"==typeof t[e])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=z),void 0===i.error&&(i.error=z),void 0===i.complete&&(i.complete=z);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function z(){}function G(t,e){return`${t} failed: ${e} argument `}const W=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const e=s-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),s=65536+(e<<10)+(t.charCodeAt(r)-56320)}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=63&s|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=63&s|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=63&s|128)}return e},H=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};function K(t){return t&&t._delegate?t._delegate:t}},5382:function(t,e,n){!function(t,e,n,i){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=r(e),o=r(n),a=r(i),u=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},c=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},l=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},d=function(t,e,n){var i=n.startTime,r=n.target,s=n.timeConstant;return r+(e-r)*Math.exp((i-t)/s)},p=function(t){return"exponentialRampToValue"===t.type},f=function(t){return"linearRampToValue"===t.type},g=function(t){return p(t)||f(t)},m=function(t){return"setValue"===t.type},_=function(t){return"setValueCurve"===t.type},y=function t(e,n,i,r){var s=e[n];return void 0===s?r:g(s)||m(s)?s.value:_(s)?s.values[s.values.length-1]:d(i,t(e,n-1,s.startTime,r),s)},v=function(t,e,n,i,r){return void 0===n?[i.insertTime,r]:g(n)?[n.endTime,n.value]:m(n)?[n.startTime,n.value]:_(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(t,e-1,n.startTime,r)]},b=function(t){return"cancelAndHold"===t.type},w=function(t){return"cancelScheduledValues"===t.type},T=function(t){return b(t)||w(t)?t.cancelTime:p(t)||f(t)?t.endTime:t.startTime},x=function(t,e,n,i){var r=i.endTime,s=i.value;return n===s?s:0<n&&0<s||n<0&&s<0?n*Math.pow(s/n,(t-e)/(r-e)):0},S=function(t,e,n,i){return n+(t-e)/(i.endTime-e)*(i.value-n)},I=function(t,e){var n=e.duration,i=e.startTime,r=e.values;return function(t,e){var n=Math.floor(e),i=Math.ceil(e);return n===i?t[n]:(1-(e-n))*t[n]+(1-(i-e))*t[i]}(r,(t-i)/n*(r.length-1))},E=function(t){return"setTarget"===t.type},A=function(t){function e(t){o.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return a.default(e,[{key:t,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=T(t);if(b(t)||w(t)){var n=this._automationEvents.findIndex((function(n){return w(t)&&_(n)?n.startTime+n.duration>=e:T(n)>=e})),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),b(t)){var r=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&g(i)){if(E(r))throw new Error("The internal list is malformed.");var s=_(r)?r.startTime+r.duration:T(r),o=_(r)?r.values[r.values.length-1]:r.value,a=p(i)?x(e,s,o,i):S(e,s,o,i),d=p(i)?u(a,e,this._currenTime):c(a,e,this._currenTime);this._automationEvents.push(d)}void 0!==r&&E(r)&&this._automationEvents.push(l(this.getValue(e),e)),void 0!==r&&_(r)&&r.startTime+r.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),r.startTime,e-r.startTime))}}else{var m=this._automationEvents.findIndex((function(t){return T(t)>e})),y=-1===m?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[m-1];if(void 0!==y&&_(y)&&T(y)+y.duration>e)return!1;var v=p(t)?u(t.value,t.endTime,this._currenTime):f(t)?c(t.value,e,this._currenTime):t;if(-1===m)this._automationEvents.push(v);else{if(_(t)&&e+t.duration>T(this._automationEvents[m]))return!1;this._automationEvents.splice(m,0,v)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return T(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),i=n[0];E(i)&&n.unshift(l(y(this._automationEvents,e-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents.findIndex((function(e){return T(e)>t})),n=this._automationEvents[e],i=(-1===e?this._automationEvents.length:e)-1,r=this._automationEvents[i];if(void 0!==r&&E(r)&&(void 0===n||!g(n)||n.insertTime>t))return d(t,y(this._automationEvents,i-1,r.startTime,this._defaultValue),r);if(void 0!==r&&m(r)&&(void 0===n||!g(n)))return r.value;if(void 0!==r&&_(r)&&(void 0===n||!g(n)||r.startTime+r.duration>t))return t<r.startTime+r.duration?I(t,r):r.values[r.values.length-1];if(void 0!==r&&g(r)&&(void 0===n||!g(n)))return r.value;if(void 0!==n&&p(n)){var o=v(this._automationEvents,i,r,n,this._defaultValue),a=s.default(o,2),u=a[0],c=a[1];return x(t,u,c,n)}if(void 0!==n&&f(n)){var l=v(this._automationEvents,i,r,n,this._defaultValue),h=s.default(l,2),b=h[0],w=h[1];return S(t,b,w,n)}return this._defaultValue}}]),e}(Symbol.iterator);t.AutomationEventList=A,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=l,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(3038),n(4575),n(3913))},7211:(t,e,n)=>{var i;!function(){var r=window.CustomEvent;function s(t){for(;t;){if("dialog"===t.localName)return t;t=t.parentElement}return null}function o(t){t&&t.blur&&t!==document.body&&t.blur()}function a(t,e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1}function u(t){return!(!t||!t.hasAttribute("method"))&&"dialog"===t.getAttribute("method").toLowerCase()}function c(t){if(this.dialog_=t,this.replacedStyleTop_=!1,this.openAsModal_=!1,t.hasAttribute("role")||t.setAttribute("role","dialog"),t.show=this.show.bind(this),t.showModal=this.showModal.bind(this),t.close=this.close.bind(this),"returnValue"in t||(t.returnValue=""),"MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(t,{attributes:!0,attributeFilter:["open"]});else{var e,n=!1,i=function(){n?this.downgradeModal():this.maybeHideModal(),n=!1}.bind(this),r=function(r){if(r.target===t){var s="DOMNodeRemoved";n|=r.type.substr(0,s.length)===s,window.clearTimeout(e),e=window.setTimeout(i,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(e){t.addEventListener(e,r)}))}Object.defineProperty(t,"open",{set:this.setOpen.bind(this),get:t.hasAttribute.bind(t,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdrop_.addEventListener("click",this.backdropClick_.bind(this))}r&&"object"!=typeof r||((r=function(t,e){e=e||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!!e.bubbles,!!e.cancelable,e.detail||null),n}).prototype=window.Event.prototype),c.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||this.downgradeModal()},downgradeModal:function(){this.openAsModal_&&(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_),l.dm.removeDialog(this))},setOpen:function(t){t?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(t){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var e=document.createElement("div");this.dialog_.insertBefore(e,this.dialog_.firstChild),e.tabIndex=-1,e.focus(),this.dialog_.removeChild(e)}var n=document.createEvent("MouseEvents");n.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),this.dialog_.dispatchEvent(n),t.stopPropagation()},focus_:function(){var t=this.dialog_.querySelector("[autofocus]:not([disabled])");if(!t&&this.dialog_.tabIndex>=0&&(t=this.dialog_),!t){var e=["button","input","keygen","select","textarea"].map((function(t){return t+":not([disabled])"}));e.push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))}o(document.activeElement),t&&t.focus()},updateZIndex:function(t,e){if(t<e)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=t,this.backdrop_.style.zIndex=e},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!l.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");(function(t){for(;t&&t!==document.body;){var e=window.getComputedStyle(t),n=function(t,n){return!(void 0===e[t]||e[t]===n)};if(e.opacity<1||n("zIndex","auto")||n("transform","none")||n("mixBlendMode","normal")||n("filter","none")||n("perspective","none")||"isolate"===e.isolation||"fixed"===e.position||"touch"===e.webkitOverflowScrolling)return!0;t=t.parentElement}return!1})(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context"),this.setOpen(!0),this.openAsModal_=!0,l.needsCentering(this.dialog_)?(l.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling),this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==t&&(this.dialog_.returnValue=t);var e=new r("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(e)}};var l={reposition:function(t){var e=document.body.scrollTop||document.documentElement.scrollTop,n=e+(window.innerHeight-t.offsetHeight)/2;t.style.top=Math.max(e,n)+"px"},isInlinePositionSetByStylesheet:function(t){for(var e=0;e<document.styleSheets.length;++e){var n=document.styleSheets[e],i=null;try{i=n.cssRules}catch(t){}if(i)for(var r=0;r<i.length;++r){var s=i[r],o=null;try{o=document.querySelectorAll(s.selectorText)}catch(t){}if(o&&a(o,t)){var u=s.style.getPropertyValue("top"),c=s.style.getPropertyValue("bottom");if(u&&"auto"!==u||c&&"auto"!==c)return!0}}}return!1},needsCentering:function(t){return!("absolute"!==window.getComputedStyle(t).position||"auto"!==t.style.top&&""!==t.style.top||"auto"!==t.style.bottom&&""!==t.style.bottom||l.isInlinePositionSetByStylesheet(t))},forceRegisterDialog:function(t){if((window.HTMLDialogElement||t.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",t),"dialog"!==t.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new c(t)},registerDialog:function(t){t.showModal||l.forceRegisterDialog(t)},DialogManager:function(){this.pendingDialogStack=[];var t=this.checkDOM_.bind(this);this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){this.forwardTab_=void 0,e.stopPropagation(),t([])}.bind(this)),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150,this.forwardTab_=void 0,"MutationObserver"in window&&(this.mo_=new MutationObserver((function(e){var n=[];e.forEach((function(t){for(var e,i=0;e=t.removedNodes[i];++i)e instanceof Element&&("dialog"===e.localName&&n.push(e),n=n.concat(e.querySelectorAll("dialog")))})),n.length&&t(n)})))}};if(l.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})},l.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),this.mo_&&this.mo_.disconnect()},l.DialogManager.prototype.updateStacking=function(){for(var t,e=this.zIndexHigh_,n=0;t=this.pendingDialogStack[n];++n)t.updateZIndex(--e,--e),0===n&&(this.overlay.style.zIndex=--e);var i=this.pendingDialogStack[0];i?(i.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)},l.DialogManager.prototype.containedByTopDialog_=function(t){for(;t=s(t);){for(var e,n=0;e=this.pendingDialogStack[n];++n)if(e.dialog===t)return 0===n;t=t.parentElement}return!1},l.DialogManager.prototype.handleFocus_=function(t){if(!this.containedByTopDialog_(t.target)&&(t.preventDefault(),t.stopPropagation(),o(t.target),void 0!==this.forwardTab_)){var e=this.pendingDialogStack[0];return e.dialog.compareDocumentPosition(t.target)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?e.focus_():document.documentElement.focus()),!1}},l.DialogManager.prototype.handleKey_=function(t){if(this.forwardTab_=void 0,27===t.keyCode){t.preventDefault(),t.stopPropagation();var e=new r("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&n.dialog.dispatchEvent(e)&&n.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)},l.DialogManager.prototype.checkDOM_=function(t){this.pendingDialogStack.slice().forEach((function(e){-1!==t.indexOf(e.dialog)?e.downgradeModal():e.maybeHideModal()}))},l.DialogManager.prototype.pushDialog=function(t){var e=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=e||(1===this.pendingDialogStack.unshift(t)&&this.blockDocument(),this.updateStacking(),0))},l.DialogManager.prototype.removeDialog=function(t){var e=this.pendingDialogStack.indexOf(t);-1!==e&&(this.pendingDialogStack.splice(e,1),0===this.pendingDialogStack.length&&this.unblockDocument(),this.updateStacking())},l.dm=new l.DialogManager,l.formSubmitter=null,l.useValue=null,void 0===window.HTMLDialogElement){var h=document.createElement("form");if(h.setAttribute("method","dialog"),"dialog"!==h.method){var d=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(d){var p=d.get;d.get=function(){return u(this)?"dialog":p.call(this)};var f=d.set;d.set=function(t){return"string"==typeof t&&"dialog"===t.toLowerCase()?this.setAttribute("method",t):f.call(this,t)},Object.defineProperty(HTMLFormElement.prototype,"method",d)}}document.addEventListener("click",(function(t){if(l.formSubmitter=null,l.useValue=null,!t.defaultPrevented){var e=t.target;if(e&&u(e.form)){if(!("submit"===e.type&&["button","input"].indexOf(e.localName)>-1)){if("input"!==e.localName||"image"!==e.type)return;l.useValue=t.offsetX+","+t.offsetY}s(e)&&(l.formSubmitter=e)}}}),!1);var g=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){if(!u(this))return g.call(this);var t=s(this);t&&t.close()},document.addEventListener("submit",(function(t){var e=t.target;if(u(e)){t.preventDefault();var n=s(e);if(n){var i=l.formSubmitter;i&&i.form===e?n.close(l.useValue||i.value):n.close(),l.formSubmitter=null}}}),!0)}l.forceRegisterDialog=l.forceRegisterDialog,l.registerDialog=l.registerDialog,"amd"in n.amdD?void 0===(i=function(){return l}.call(e,n,e,t))||(t.exports=i):"object"==typeof t.exports?t.exports=l:window.dialogPolyfill=l}()},5503:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FirebaseError:()=>i.FirebaseError,SDK_VERSION:()=>i.SDK_VERSION,_DEFAULT_ENTRY_NAME:()=>i._DEFAULT_ENTRY_NAME,_addComponent:()=>i._addComponent,_addOrOverwriteComponent:()=>i._addOrOverwriteComponent,_apps:()=>i._apps,_clearComponents:()=>i._clearComponents,_components:()=>i._components,_getProvider:()=>i._getProvider,_registerComponent:()=>i._registerComponent,_removeServiceInstance:()=>i._removeServiceInstance,deleteApp:()=>i.deleteApp,getApp:()=>i.getApp,getApps:()=>i.getApps,initializeApp:()=>i.initializeApp,onLog:()=>i.onLog,registerVersion:()=>i.registerVersion,setLogLevel:()=>i.setLogLevel});var i=n(389);(0,i.registerVersion)("firebase","9.9.3","app")},1369:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ActionCodeOperation:()=>i.A,ActionCodeURL:()=>i.ad,AuthCredential:()=>i.H,AuthErrorCodes:()=>i.D,EmailAuthCredential:()=>i.I,EmailAuthProvider:()=>i.M,FacebookAuthProvider:()=>i.N,FactorId:()=>i.F,GithubAuthProvider:()=>i.T,GoogleAuthProvider:()=>i.Q,OAuthCredential:()=>i.J,OAuthProvider:()=>i.U,OperationType:()=>i.O,PhoneAuthCredential:()=>i.K,PhoneAuthProvider:()=>i.P,PhoneMultiFactorGenerator:()=>i.m,ProviderId:()=>i.o,RecaptchaVerifier:()=>i.R,SAMLAuthProvider:()=>i.V,SignInMethod:()=>i.S,TwitterAuthProvider:()=>i.W,applyActionCode:()=>i.a2,beforeAuthStateChanged:()=>i.t,browserLocalPersistence:()=>i.b,browserPopupRedirectResolver:()=>i.k,browserSessionPersistence:()=>i.a,checkActionCode:()=>i.a3,confirmPasswordReset:()=>i.a1,connectAuthEmulator:()=>i.G,createUserWithEmailAndPassword:()=>i.a5,debugErrorMap:()=>i.B,deleteUser:()=>i.z,fetchSignInMethodsForEmail:()=>i.aa,getAdditionalUserInfo:()=>i.al,getAuth:()=>i.n,getIdToken:()=>i.ai,getIdTokenResult:()=>i.aj,getMultiFactorResolver:()=>i.an,getRedirectResult:()=>i.j,inMemoryPersistence:()=>i.L,indexedDBLocalPersistence:()=>i.i,initializeAuth:()=>i.E,isSignInWithEmailLink:()=>i.a8,linkWithCredential:()=>i.Z,linkWithPhoneNumber:()=>i.l,linkWithPopup:()=>i.d,linkWithRedirect:()=>i.g,multiFactor:()=>i.ao,onAuthStateChanged:()=>i.v,onIdTokenChanged:()=>i.q,parseActionCodeURL:()=>i.ae,prodErrorMap:()=>i.C,reauthenticateWithCredential:()=>i._,reauthenticateWithPhoneNumber:()=>i.r,reauthenticateWithPopup:()=>i.e,reauthenticateWithRedirect:()=>i.h,reload:()=>i.am,sendEmailVerification:()=>i.ab,sendPasswordResetEmail:()=>i.a0,sendSignInLinkToEmail:()=>i.a7,setPersistence:()=>i.p,signInAnonymously:()=>i.X,signInWithCredential:()=>i.Y,signInWithCustomToken:()=>i.$,signInWithEmailAndPassword:()=>i.a6,signInWithEmailLink:()=>i.a9,signInWithPhoneNumber:()=>i.s,signInWithPopup:()=>i.c,signInWithRedirect:()=>i.f,signOut:()=>i.y,unlink:()=>i.ak,updateCurrentUser:()=>i.x,updateEmail:()=>i.ag,updatePassword:()=>i.ah,updatePhoneNumber:()=>i.u,updateProfile:()=>i.af,useDeviceLanguage:()=>i.w,verifyBeforeUpdateEmail:()=>i.ac,verifyPasswordResetCode:()=>i.a4});var i=n(8577);n(4444),n(389),n(3333),n(8463)},2956:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DataSnapshot:()=>Ar,Database:()=>ws,OnDisconnect:()=>wr,QueryConstraint:()=>Kr,TransactionResult:()=>Rs,_QueryImpl:()=>Tr,_QueryParams:()=>_e,_ReferenceImpl:()=>Er,_TEST_ACCESS_forceRestClient:()=>Ls,_TEST_ACCESS_hijackHash:()=>Ms,_repoManagerDatabaseFromApp:()=>bs,_setSDKVersion:()=>l,_validatePathString:()=>Li,_validateWritablePath:()=>Fi,child:()=>Cr,connectDatabaseEmulator:()=>Es,enableLogging:()=>Os,endAt:()=>Xr,endBefore:()=>Jr,equalTo:()=>ms,forceLongPolling:()=>Ss,forceWebSockets:()=>xs,get:()=>jr,getDatabase:()=>Is,goOffline:()=>As,goOnline:()=>ks,increment:()=>Ps,limitToFirst:()=>rs,limitToLast:()=>os,off:()=>Hr,onChildAdded:()=>qr,onChildChanged:()=>zr,onChildMoved:()=>Gr,onChildRemoved:()=>Wr,onDisconnect:()=>Dr,onValue:()=>Br,orderByChild:()=>us,orderByKey:()=>ls,orderByPriority:()=>ds,orderByValue:()=>fs,push:()=>Pr,query:()=>_s,ref:()=>kr,refFromURL:()=>Or,remove:()=>Rr,runTransaction:()=>Ns,serverTimestamp:()=>Ds,set:()=>Nr,setPriority:()=>Mr,setWithPriority:()=>Lr,startAfter:()=>ns,startAt:()=>ts,update:()=>Fr});var i=n(389),r=n(8463),s=n(4444),o=n(3333);const a="@firebase/database",u="0.13.5";let c="";function l(t){c=t}class h{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,s.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,s.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class d{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,s.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const p=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(t){}return new d},f=p("localStorage"),g=p("sessionStorage"),m=new o.Yd("@firebase/database"),_=function(){let t=1;return function(){return t++}}(),y=function(t){const e=(0,s.dS)(t),n=new s.gQ;n.update(e);const i=n.digest();return s.US.encodeByteArray(i)},v=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=v.apply(null,i):e+="object"==typeof i?(0,s.Pz)(i):i,e+=" "}return e};let b=null,w=!0;const T=function(t,e){(0,s.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(m.logLevel=o.in.VERBOSE,b=m.log.bind(m),e&&g.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,g.remove("logging_enabled"))},x=function(...t){if(!0===w&&(w=!1,null===b&&!0===g.get("logging_enabled")&&T(!0)),b){const e=v.apply(null,t);b(e)}},S=function(t){return function(...e){x(t,...e)}},I=function(...t){const e="FIREBASE INTERNAL ERROR: "+v(...t);m.error(e)},E=function(...t){const e=`FIREBASE FATAL ERROR: ${v(...t)}`;throw m.error(e),new Error(e)},A=function(...t){const e="FIREBASE WARNING: "+v(...t);m.warn(e)},k=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},O="[MIN_NAME]",C="[MAX_NAME]",D=function(t,e){if(t===e)return 0;if(t===O||e===C)return-1;if(e===O||t===C)return 1;{const n=U(t),i=U(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1}},P=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,s.Pz)(e))},N=function(t){if("object"!=typeof t||null===t)return(0,s.Pz)(t);const e=[];for(const n in t)e.push(n);e.sort();let n="{";for(let i=0;i<e.length;i++)0!==i&&(n+=","),n+=(0,s.Pz)(e[i]),n+=":",n+=N(t[e[i]]);return n+="}",n},M=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function L(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const F=function(t){(0,s.hu)(!k(t),"Invalid JSON number");let e,n,i,r,o;0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023),n=r+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();const u=a.join("");let c="";for(o=0;o<64;o+=8){let t=parseInt(u.substr(o,8),2).toString(16);1===t.length&&(t="0"+t),c+=t}return c.toLowerCase()},j=new RegExp("^-?(0*)\\d{1,10}$"),U=function(t){if(j.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(t){setTimeout((()=>{const e=t.stack||"";throw A("Exception was thrown by user callback.",e),t}),Math.floor(0))}},$=function(t,e){const n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n};class B{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((t=>this.appCheck=t))}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise(((e,n)=>{setTimeout((()=>{this.appCheck?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((e=>e.addTokenListener(t)))}notifyForInvalidToken(){A(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class q{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((t=>this.auth_=t))}getToken(t){return this.auth_?this.auth_.getToken(t).catch((t=>t&&"auth/token-not-initialized"===t.code?(x("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t))):new Promise(((e,n)=>{setTimeout((()=>{this.auth_?this.getToken(t).then(e,n):e(null)}),0)}))}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((e=>e.addAuthTokenListener(t)))}removeTokenChangeListener(t){this.authProvider_.get().then((e=>e.removeAuthTokenListener(t)))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',A(t)}}class z{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}z.OWNER="owner";const G=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",H="long_polling";class K{constructor(t,e,n,i,r=!1,s="",o=!1){this.secure=e,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}}function Y(t,e,n){let i;if((0,s.hu)("string"==typeof e,"typeof type must == string"),(0,s.hu)("object"==typeof n,"typeof params must == object"),e===W)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const r=[];return L(n,((t,e)=>{r.push(t+"="+e)})),i+r.join("&")}class X{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,s.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,s.p$)(this.counters_)}}const Z={},J={};function Q(t){const e=t.toString();return Z[e]||(Z[e]=new X),Z[e]}class tt{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let e=0;e<t.length;++e)t[e]&&V((()=>{this.onMessage_(t[e])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class et{constructor(t,e,n,i,r,s,o){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(t),this.stats_=Q(e),this.urlFn=t=>(this.appCheckToken&&(t.ac=this.appCheckToken),Y(e,H,t))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new tt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if((0,s.Yr)()||"complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new nt(((...t)=>{const[e,n,i,r,s]=t;if(this.incrementIncomingBytes_(t),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===e)this.id=n,this.password=i;else{if("close"!==e)throw new Error("Unrecognized command received: "+e);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...t)=>{const[e,n]=t;this.incrementIncomingBytes_(t),this.myPacketOrderer.handleResponse(e,n)}),(()=>{this.onClosed_()}),this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&G.test(location.hostname)&&(t.r="f");const e=this.urlFn(t);this.log_("Connecting via long-poll to "+e),this.scriptTagHolder.addTag(e,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){et.forceAllow_=!0}static forceDisallow(){et.forceDisallow_=!0}static isAvailable(){return!((0,s.Yr)()||!et.forceAllow_&&(et.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,s.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=(0,s.h$)(e),i=M(n,1840);for(let t=0;t<i.length;t++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[t]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,s.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,s.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class nt{constructor(t,e,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,s.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=nt.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){x("frame writing exception"),t.stack&&x(t.stack),x(t)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||x("No IE domain setting required")}catch(e){const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),n="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const t=this.pendingSegs.shift();n=n+"&seg"+i+"="+t.seg+"&ts"+i+"="+t.ts+"&d"+i+"="+t.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(t,(()=>{clearTimeout(i),n()}))}addTag(t,e){(0,s.Yr)()?this.doNodeLongPoll(t,e):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const t=n.readyState;t&&"loaded"!==t&&"complete"!==t||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{x("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(t){}}),Math.floor(1))}}let it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);class rt{constructor(t,e,n,i,r,s,o){this.connId=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=Q(e),this.connURL=rt.connectionURL_(e,s,o,i,n),this.nodeAdmin=e.nodeAdmin}static connectionURL_(t,e,n,i,r){const o={v:"5"};return!(0,s.Yr)()&&"undefined"!=typeof location&&location.hostname&&G.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),i&&(o.ac=i),r&&(o.p=r),Y(t,W,o)}open(t,e){this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{let t;if((0,s.Yr)()){const e=this.nodeAdmin?"AdminNode":"Node";t={headers:{"User-Agent":`Firebase/5/${c}/${process.platform}/${e}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(t.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(t.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n=process.env,i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(t.proxy={origin:i})}this.mySock=new it(this.connURL,[],t)}catch(t){this.log_("Error instantiating WebSocket.");const e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=t=>{this.handleIncomingFrame(t)},this.mySock.onerror=t=>{this.log_("WebSocket error.  Closing connection.");const e=t.message||t.data;e&&this.log_(e),this.onClosed_()}}start(){}static forceDisallow(){rt.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(e);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==it&&!rt.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const e=(0,s.cI)(t);this.onMessage(e)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,s.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{const t=this.extractFrameCount_(e);null!==t&&this.appendFrame_(t)}}send(t){this.resetKeepAlive();const e=(0,s.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const n=M(e,16384);n.length>1&&this.sendString_(String(n.length));for(let t=0;t<n.length;t++)this.sendString_(n[t])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}rt.responsesRequiredToBeHealthy=2,rt.healthyTimeout=3e4;class st{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[et,rt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const e=rt&&rt.isAvailable();let n=e&&!rt.previouslyFailed();if(t.webSocketOnly&&(e||A("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[rt];else{const t=this.transports_=[];for(const e of st.ALL_TRANSPORTS)e&&e.isAvailable()&&t.push(e);st.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}st.globalTransportInitialized_=!1;class ot{constructor(t,e,n,i,r,s,o,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(e,n)}),Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=$((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){const e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=R("t",t);if("d"in t){const n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let t=0;t<this.pendingDataMessages.length;++t)this.onDataMessage_(this.pendingDataMessages[t]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&A("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),$((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class at{put(t,e,n,i){}merge(t,e,n,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}}class ut{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,s.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let t=0;t<n.length;t++)n[t].callback.apply(n[t].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});const i=this.getInitialEvent(t);i&&e.apply(n,i)}off(t,e,n){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let t=0;t<i.length;t++)if(i[t].callback===e&&(!n||n===i[t].context))return void i.splice(t,1)}validateEventType_(t){(0,s.hu)(this.allowedEvents_.find((e=>e===t)),"Unknown event: "+t)}}class ct extends ut{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,s.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ct}getInitialEvent(t){return(0,s.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class lt{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let e=0;for(let t=0;t<this.pieces_.length;t++)this.pieces_[t].length>0&&(this.pieces_[e]=this.pieces_[t],e++);this.pieces_.length=e,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function ht(){return new lt("")}function dt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function ft(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new lt(t.pieces_,e)}function gt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mt(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function _t(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new lt(e,0)}function yt(t,e){const n=[];for(let e=t.pieceNum_;e<t.pieces_.length;e++)n.push(t.pieces_[e]);if(e instanceof lt)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{const t=e.split("/");for(let e=0;e<t.length;e++)t[e].length>0&&n.push(t[e])}return new lt(n,0)}function vt(t){return t.pieceNum_>=t.pieces_.length}function bt(t,e){const n=dt(t),i=dt(e);if(null===n)return e;if(n===i)return bt(ft(t),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function wt(t,e){const n=mt(t,0),i=mt(e,0);for(let t=0;t<n.length&&t<i.length;t++){const e=D(n[t],i[t]);if(0!==e)return e}return n.length===i.length?0:n.length<i.length?-1:1}function Tt(t,e){if(pt(t)!==pt(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function xt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class St{constructor(t,e){this.errorPrefix_=e,this.parts_=mt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=(0,s.ug)(this.parts_[t]);It(this)}}function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Et(t))}function Et(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class At extends ut{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,(()=>{const e=!document[t];e!==this.visible_&&(this.visible_=e,this.trigger("visible",e))}),!1)}static getInstance(){return new At}getInitialEvent(t){return(0,s.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const kt=1e3;class Ot extends at{constructor(t,e,n,i,r,o,a,u){if(super(),this.repoInfo_=t,this.applicationId_=e,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=u,this.id=Ot.nextPersistentConnectionId_++,this.log_=S("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kt,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!(0,s.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");At.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ct.getInstance().on("online",this.onOnline_,this)}sendRequest(t,e,n){const i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_((0,s.Pz)(r)),(0,s.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(t){this.initConnection_();const e=new s.BH,n={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:t=>{const n=t.d;"ok"===t.s?e.resolve(n):e.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),e.promise}listen(t,e,n,i){this.initConnection_();const r=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),(0,s.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,s.hu)(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(t){const e=this.outstandingGets_[t];this.sendRequest("g",e.request,(n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),e.onComplete&&e.onComplete(n)}))}sendListen_(t){const e=t.query,n=e._path.toString(),i=e._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};t.tag&&(r.q=e._queryObject,r.t=t.tag),r.h=t.hashFn(),this.sendRequest("q",r,(r=>{const s=r.d,o=r.s;Ot.warnOnListenWarnings_(s,e),(this.listens.get(n)&&this.listens.get(n).get(i))===t&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),t.onComplete&&t.onComplete(o,s))}))}static warnOnListenWarnings_(t,e){if(t&&"object"==typeof t&&(0,s.r3)(t,"w")){const n=(0,s.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',n=e._path.toString();A(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${t} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,s.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,e=(0,s.w9)(t)?"auth":"gauth",n={cred:t};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(e=>{const n=e.s,i=e.d||"error";this.authToken_===t&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(t=>{const e=t.s,n=t.d||"error";"ok"===e?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(e,n)}))}unlisten(t,e){const n=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),(0,s.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t._queryObject,e)}sendUnlisten_(t,e,n,i){this.log_("Unlisten on "+t+" for "+e);const r={p:t};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})}onDisconnectMerge(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})}onDisconnectCancel(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})}sendOnDisconnect_(t,e,n,i){const r={p:e,d:n};this.log_("onDisconnect "+t,r),this.sendRequest(t,r,(t=>{i&&setTimeout((()=>{i(t.s,t.d)}),Math.floor(0))}))}put(t,e,n,i){this.putInternal("p",t,e,n,i)}merge(t,e,n,i){this.putInternal("m",t,e,n,i)}putInternal(t,e,n,i,r){this.initConnection_();const s={p:e,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:t,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+e)}sendPut_(t){const e=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(e,n,(n=>{this.log_(e+" response",n),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)}))}reportStats(t){if(this.connected_){const e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,(t=>{if("ok"!==t.s){const e=t.d;this.log_("reportStats","Error sending stats: "+e)}}))}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,s.Pz)(t));const e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+(0,s.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,s.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Ot.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const u=function(){a?a.close():(o=!0,n())},c=function(t){(0,s.hu)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)};this.realtime_={close:u,sendRequest:c};const l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[s,u]=await Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)]);o?x("getToken() completed but was canceled"):(x("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=u&&u.token,a=new ot(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,(t=>{A(t+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),r))}catch(t){this.log_("Failed to get token: "+t),o||(this.repoInfo_.nodeAdmin&&A(t),u())}}}interrupt(t){x("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){x("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,s.xb)(this.interruptReasons_)&&(this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,e){let n;n=e?e.map((t=>N(t))).join("$"):"default";const i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,e){const n=new lt(t).toString();let i;if(this.listens.has(n)){const t=this.listens.get(n);i=t.get(e),t.delete(e),0===t.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(t,e){x("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,e){x("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const e of t.values())this.sendListen_(e);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let e="js";(0,s.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+c.replace(/\./g,"-")]=1,(0,s.uI)()?t["framework.cordova"]=1:(0,s.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ct.getInstance().currentlyOnline();return(0,s.xb)(this.interruptReasons_)&&t}}Ot.nextPersistentConnectionId_=0,Ot.nextConnectionId_=0;class Ct{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Ct(t,e)}}class Dt{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const n=new Ct(O,t),i=new Ct(O,e);return 0!==this.compare(n,i)}minPost(){return Ct.MIN}}let Pt;class Rt extends Dt{static get __EMPTY_NODE(){return Pt}static set __EMPTY_NODE(t){Pt=t}compare(t,e){return D(t.name,e.name)}isDefinedOn(t){throw(0,s.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Ct.MIN}maxPost(){return new Ct(C,Pt)}makePost(t,e){return(0,s.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ct(t,Pt)}toString(){return".key"}}const Nt=new Rt;class Mt{constructor(t,e,n,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=e?n(t.key,e):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Lt{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Lt.RED,this.left=null!=i?i:Ft.EMPTY_NODE,this.right=null!=r?r:Ft.EMPTY_NODE}copy(t,e,n,i,r){return new Lt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ft.EMPTY_NODE;let t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,e){let n,i;if(n=this,e(t,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ft.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Lt.RED=!0,Lt.BLACK=!1;class Ft{constructor(t,e=Ft.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ft(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Lt.BLACK,null,null))}remove(t){return new Ft(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Lt.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,i=null;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),0===e){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Mt(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new Mt(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new Mt(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new Mt(this.root_,null,this.comparator_,!0,t)}}function jt(t,e){return D(t.name,e.name)}function Ut(t,e){return D(t,e)}let Vt;Ft.EMPTY_NODE=new class{copy(t,e,n,i,r){return this}insert(t,e,n){return new Lt(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $t=function(t){return"number"==typeof t?"number:"+F(t):"string:"+t},Bt=function(t){if(t.isLeafNode()){const e=t.val();(0,s.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,s.r3)(e,".sv"),"Priority must be a string or number.")}else(0,s.hu)(t===Vt||t.isEmpty(),"priority of unexpected type.");(0,s.hu)(t===Vt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qt,zt,Gt;class Wt{constructor(t,e=Wt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=e,this.lazyHash_=null,(0,s.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Bt(this.priorityNode_)}static set __childrenNodeConstructor(t){qt=t}static get __childrenNodeConstructor(){return qt}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Wt(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:Wt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return vt(t)?this:".priority"===dt(t)?this.priorityNode_:Wt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,e){return null}updateImmediateChild(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Wt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)}updateChild(t,e){const n=dt(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:((0,s.hu)(".priority"!==n||1===pt(t),".priority must be the last token in a path"),this.updateImmediateChild(n,Wt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(t),e)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,e){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");const e=typeof this.value_;t+=e+":",t+="number"===e?F(this.value_):this.value_,this.lazyHash_=y(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Wt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Wt.__childrenNodeConstructor?-1:((0,s.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const e=typeof t.value_,n=typeof this.value_,i=Wt.VALUE_TYPE_ORDER.indexOf(e),r=Wt.VALUE_TYPE_ORDER.indexOf(n);return(0,s.hu)(i>=0,"Unknown leaf type: "+e),(0,s.hu)(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1}}Wt.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ht=new class extends Dt{compare(t,e){const n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?D(t.name,e.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Ct.MIN}maxPost(){return new Ct(C,new Wt("[PRIORITY-POST]",Gt))}makePost(t,e){const n=zt(t);return new Ct(e,new Wt("[PRIORITY-POST]",n))}toString(){return".priority"}},Kt=Math.log(2);class Yt{constructor(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Kt,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Xt=function(t,e,n,i){t.sort(e);const r=function(e,i){const s=i-e;let o,a;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new Lt(a,o.node,Lt.BLACK,null,null);{const u=parseInt(s/2,10)+e,c=r(e,u),l=r(u+1,i);return o=t[u],a=n?n(o):o,new Lt(a,o.node,Lt.BLACK,c,l)}},s=function(e){let i=null,s=null,o=t.length;const a=function(e,i){const s=o-e,a=o;o-=e;const c=r(s+1,a),l=t[s],h=n?n(l):l;u(new Lt(h,l.node,i,null,c))},u=function(t){i?(i.left=t,i=t):(s=t,i=t)};for(let t=0;t<e.count;++t){const n=e.nextBitIsOne(),i=Math.pow(2,e.count-(t+1));n?a(i,Lt.BLACK):(a(i,Lt.BLACK),a(i,Lt.RED))}return s}(new Yt(t.length));return new Ft(i||e,s)};let Zt;const Jt={};class Qt{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,s.hu)(Jt&&Ht,"ChildrenNode.ts has not been loaded"),Zt=Zt||new Qt({".priority":Jt},{".priority":Ht}),Zt}get(t){const e=(0,s.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ft?e:null}hasIndex(t){return(0,s.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,s.hu)(t!==Nt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=e.getIterator(Ct.Wrap);let o,a=r.getNext();for(;a;)i=i||t.isDefinedOn(a.node),n.push(a),a=r.getNext();o=i?Xt(n,t.getCompare()):Jt;const u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;const l=Object.assign({},this.indexes_);return l[u]=o,new Qt(l,c)}addToIndexes(t,e){const n=(0,s.UI)(this.indexes_,((n,i)=>{const r=(0,s.DV)(this.indexSet_,i);if((0,s.hu)(r,"Missing index implementation for "+i),n===Jt){if(r.isDefinedOn(t.node)){const n=[],i=e.getIterator(Ct.Wrap);let s=i.getNext();for(;s;)s.name!==t.name&&n.push(s),s=i.getNext();return n.push(t),Xt(n,r.getCompare())}return Jt}{const i=e.get(t.name);let r=n;return i&&(r=r.remove(new Ct(t.name,i))),r.insert(t,t.node)}}));return new Qt(n,this.indexSet_)}removeFromIndexes(t,e){const n=(0,s.UI)(this.indexes_,(n=>{if(n===Jt)return n;{const i=e.get(t.name);return i?n.remove(new Ct(t.name,i)):n}}));return new Qt(n,this.indexSet_)}}let te;class ee{constructor(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Bt(this.priorityNode_),this.children_.isEmpty()&&(0,s.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return te||(te=new ee(new Ft(Ut),null,Qt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||te}updatePriority(t){return this.children_.isEmpty()?this:new ee(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const e=this.children_.get(t);return null===e?te:e}}getChild(t){const e=dt(t);return null===e?this:this.getImmediateChild(e).getChild(ft(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,e){if((0,s.hu)(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);{const n=new Ct(t,e);let i,r;e.isEmpty()?(i=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(t,e),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?te:this.priorityNode_;return new ee(i,s,r)}}updateChild(t,e){const n=dt(t);if(null===n)return e;{(0,s.hu)(".priority"!==dt(t)||1===pt(t),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(ft(t),e);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const e={};let n=0,i=0,r=!0;if(this.forEachChild(Ht,((s,o)=>{e[s]=o.val(t),n++,r&&ee.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1})),!t&&r&&i<2*n){const t=[];for(const n in e)t[n]=e[n];return t}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Ht,((e,n)=>{const i=n.hash();""!==i&&(t+=":"+e+":"+i)})),this.lazyHash_=""===t?"":y(t)}return this.lazyHash_}getPredecessorChildName(t,e,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Ct(t,e));return n?n.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.minKey();return t&&t.name}return this.children_.minKey()}getFirstChild(t){const e=this.getFirstChildName(t);return e?new Ct(e,this.children_.get(e)):null}getLastChildName(t){const e=this.resolveIndex_(t);if(e){const t=e.maxKey();return t&&t.name}return this.children_.maxKey()}getLastChild(t){const e=this.getLastChildName(t);return e?new Ct(e,this.children_.get(e)):null}forEachChild(t,e){const n=this.resolveIndex_(t);return n?n.inorderTraversal((t=>e(t.name,t.node))):this.children_.inorderTraversal(e)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(t=>t));{const n=this.children_.getIteratorFrom(t.name,Ct.Wrap);let i=n.peek();for(;null!=i&&e.compare(i,t)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,e){const n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(t=>t));{const n=this.children_.getReverseIteratorFrom(t.name,Ct.Wrap);let i=n.peek();for(;null!=i&&e.compare(i,t)>0;)n.getNext(),i=n.peek();return n}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ne?-1:0}withIndex(t){if(t===Nt||this.indexMap_.hasIndex(t))return this;{const e=this.indexMap_.addIndex(t,this.children_);return new ee(this.children_,this.priorityNode_,e)}}isIndexed(t){return t===Nt||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){const t=this.getIterator(Ht),n=e.getIterator(Ht);let i=t.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=t.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(t){return t===Nt?null:this.indexMap_.get(t.toString())}}ee.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const ne=new class extends ee{constructor(){super(new Ft(Ut),ee.EMPTY_NODE,Qt.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return ee.EMPTY_NODE}isEmpty(){return!1}};function ie(t,e=null){if(null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,s.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Wt(t,ie(e));if(t instanceof Array){let n=ee.EMPTY_NODE;return L(t,((e,i)=>{if((0,s.r3)(t,e)&&"."!==e.substring(0,1)){const t=ie(i);!t.isLeafNode()&&t.isEmpty()||(n=n.updateImmediateChild(e,t))}})),n.updatePriority(ie(e))}{const n=[];let i=!1;if(L(t,((t,e)=>{if("."!==t.substring(0,1)){const r=ie(e);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Ct(t,r)))}})),0===n.length)return ee.EMPTY_NODE;const r=Xt(n,jt,(t=>t.name),Ut);if(i){const t=Xt(n,Ht.getCompare());return new ee(r,ie(e),new Qt({".priority":t},{".priority":Ht}))}return new ee(r,ie(e),Qt.Default)}}Object.defineProperties(Ct,{MIN:{value:new Ct(O,ee.EMPTY_NODE)},MAX:{value:new Ct(C,ne)}}),Rt.__EMPTY_NODE=ee.EMPTY_NODE,Wt.__childrenNodeConstructor=ee,Vt=ne,Gt=ne,function(t){zt=t}(ie);class re extends Dt{constructor(t){super(),this.indexPath_=t,(0,s.hu)(!vt(t)&&".priority"!==dt(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?D(t.name,e.name):r}makePost(t,e){const n=ie(t),i=ee.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ct(e,i)}maxPost(){const t=ee.EMPTY_NODE.updateChild(this.indexPath_,ne);return new Ct(C,t)}toString(){return mt(this.indexPath_,0).join("/")}}const se=new class extends Dt{compare(t,e){const n=t.node.compareTo(e.node);return 0===n?D(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Ct.MIN}maxPost(){return Ct.MAX}makePost(t,e){const n=ie(t);return new Ct(e,n)}toString(){return".value"}},oe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ae=function(){let t=0;const e=[];return function(n){const i=n===t;let r;t=n;const o=new Array(8);for(r=7;r>=0;r--)o[r]=oe.charAt(n%64),n=Math.floor(n/64);(0,s.hu)(0===n,"Cannot push at time == 0");let a=o.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=oe.charAt(e[r]);return(0,s.hu)(20===a.length,"nextPushId: Length should be 20."),a}}(),ue=function(t){if("2147483647"===t)return"-";const e=U(t);if(null!=e)return""+(e+1);const n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t.charAt(e);if(n.length<786)return n.push("-"),n.join("");let i=n.length-1;for(;i>=0&&"z"===n[i];)i--;if(-1===i)return C;const r=n[i],s=oe.charAt(oe.indexOf(r)+1);return n[i]=s,n.slice(0,i+1).join("")},ce=function(t){if("-2147483648"===t)return O;const e=U(t);if(null!=e)return""+(e-1);const n=new Array(t.length);for(let e=0;e<n.length;e++)n[e]=t.charAt(e);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=oe.charAt(oe.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function le(t){return{type:"value",snapshotNode:t}}function he(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function de(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class fe{constructor(t){this.index_=t}updateChild(t,e,n,i,r,o){(0,s.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(de(e,a)):(0,s.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(he(e,n)):o.trackChildChange(pe(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))}updateFullNode(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,((t,i)=>{e.hasChild(t)||n.trackChildChange(de(t,i))})),e.isLeafNode()||e.forEachChild(Ht,((e,i)=>{if(t.hasChild(e)){const r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(pe(e,i,r))}else n.trackChildChange(he(e,i))}))),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?ee.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ge{constructor(t){this.indexedFilter_=new fe(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ge.getStartPost_(t),this.endPost_=ge.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,n,i,r,s){return this.matches(new Ct(e,n))||(n=ee.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,s)}updateFullNode(t,e,n){e.isLeafNode()&&(e=ee.EMPTY_NODE);let i=e.withIndex(this.index_);i=i.updatePriority(ee.EMPTY_NODE);const r=this;return e.forEachChild(Ht,((t,e)=>{r.matches(new Ct(t,e))||(i=i.updateImmediateChild(t,ee.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class me{constructor(t){this.rangedFilter_=new ge(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,n,i,r,s){return this.rangedFilter_.matches(new Ct(e,n))||(n=ee.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,s):this.fullLimitUpdateChild_(t,e,n,r,s)}updateFullNode(t,e,n){let i;if(e.isLeafNode()||e.isEmpty())i=ee.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let t;i=ee.EMPTY_NODE.withIndex(this.index_),t=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;t.hasNext()&&n<this.limit_;){const e=t.getNext();let r;if(r=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),e)<=0:this.index_.compare(e,this.rangedFilter_.getEndPost())<=0,!r)break;i=i.updateImmediateChild(e.name,e.node),n++}}else{let t,n,r,s;if(i=e.withIndex(this.index_),i=i.updatePriority(ee.EMPTY_NODE),this.reverse_){s=i.getReverseIterator(this.index_),t=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const e=this.index_.getCompare();r=(t,n)=>e(n,t)}else s=i.getIterator(this.index_),t=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),r=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const e=s.getNext();!a&&r(t,e)<=0&&(a=!0),a&&o<this.limit_&&r(e,n)<=0?o++:i=i.updateImmediateChild(e.name,ee.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,i,r){let o;if(this.reverse_){const t=this.index_.getCompare();o=(e,n)=>t(n,e)}else o=this.index_.getCompare();const a=t;(0,s.hu)(a.numChildren()===this.limit_,"");const u=new Ct(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(a.hasChild(e)){const t=a.getImmediateChild(e);let s=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=s&&(s.name===e||a.hasChild(s.name));)s=i.getChildAfterChild(this.index_,s,this.reverse_);const h=null==s?1:o(s,u);if(l&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(pe(e,n,t)),a.updateImmediateChild(e,n);{null!=r&&r.trackChildChange(de(e,t));const n=a.updateImmediateChild(e,ee.EMPTY_NODE);return null!=s&&this.rangedFilter_.matches(s)?(null!=r&&r.trackChildChange(he(s.name,s.node)),n.updateImmediateChild(s.name,s.node)):n}}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=r&&(r.trackChildChange(de(c.name,c.node)),r.trackChildChange(he(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,ee.EMPTY_NODE)):t}}class _e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:C}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,s.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ht}copy(){const t=new _e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function ye(t,e,n){const i=t.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function ve(t,e,n){const i=t.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function be(t,e){const n=t.copy();return n.index_=e,n}function we(t){const e={};if(t.isDefault())return e;let n;return t.index_===Ht?n="$priority":t.index_===se?n="$value":t.index_===Nt?n="$key":((0,s.hu)(t.index_ instanceof re,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=(0,s.Pz)(n),t.startSet_&&(e.startAt=(0,s.Pz)(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+(0,s.Pz)(t.indexStartName_))),t.endSet_&&(e.endAt=(0,s.Pz)(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+(0,s.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Te(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}class xe extends at{constructor(t,e,n,i){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=S("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,s.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,i){const r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);const o=xe.getListenId_(t,n),a={};this.listens_[o]=a;const u=we(t._queryParams);this.restRequest_(r+".json",u,((t,e)=>{let u=e;if(404===t&&(u=null,t=null),null===t&&this.onDataUpdate_(r,u,!1,n),(0,s.DV)(this.listens_,o)===a){let e;e=t?401===t?"permission_denied":"rest_error:"+t:"ok",i(e,null)}}))}unlisten(t,e){const n=xe.getListenId_(t,e);delete this.listens_[n]}get(t){const e=we(t._queryParams),n=t._path.toString(),i=new s.BH;return this.restRequest_(n+".json",e,((t,e)=>{let r=e;404===t&&(r=null,t=null),null===t?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))})),i.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,r])=>{i&&i.accessToken&&(e.auth=i.accessToken),r&&r.token&&(e.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,s.xO)(e);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=(0,s.cI)(a.responseText)}catch(t){A("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&A("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class Se{constructor(){this.rootNode_=ee.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function Ie(){return{value:null,children:new Map}}function Ee(t,e,n){if(vt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const i=dt(e);t.children.has(i)||t.children.set(i,Ie()),Ee(t.children.get(i),e=ft(e),n)}}function Ae(t,e){if(vt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Ht,((e,n)=>{Ee(t,new lt(e),n)})),Ae(t,e)}}if(t.children.size>0){const n=dt(e);return e=ft(e),t.children.has(n)&&Ae(t.children.get(n),e)&&t.children.delete(n),0===t.children.size}return!0}function ke(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(((t,n)=>{e(n,t)}))}(t,((t,i)=>{ke(i,new lt(e.toString()+"/"+t),n)}))}class Oe{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&L(this.last_,((t,n)=>{e[t]=e[t]-n})),this.last_=t,e}}class Ce{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Oe(t);const n=1e4+2e4*Math.random();$(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),e={};let n=!1;L(t,((t,i)=>{i>0&&(0,s.r3)(this.statsToReport_,t)&&(e[t]=i,n=!0)})),n&&this.server_.reportStats(e),$(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var De;function Pe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(De||(De={}));class Re{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(vt(this.path)){if(null!=this.affectedTree.value)return(0,s.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new lt(t));return new Re(ht(),e,this.revert)}}return(0,s.hu)(dt(this.path)===t,"operationForChild called for unrelated child."),new Re(ft(this.path),this.affectedTree,this.revert)}}class Ne{constructor(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}operationForChild(t){return vt(this.path)?new Ne(this.source,ht()):new Ne(this.source,ft(this.path))}}class Me{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}operationForChild(t){return vt(this.path)?new Me(this.source,ht(),this.snap.getImmediateChild(t)):new Me(this.source,ft(this.path),this.snap)}}class Le{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}operationForChild(t){if(vt(this.path)){const e=this.children.subtree(new lt(t));return e.isEmpty()?null:e.value?new Me(this.source,ht(),e.value):new Le(this.source,ht(),e)}return(0,s.hu)(dt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Le(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Fe{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(vt(t))return this.isFullyInitialized()&&!this.filtered_;const e=dt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class je{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function Ue(t,e,n,i,r,o){const a=i.filter((t=>t.type===n));a.sort(((e,n)=>function(t,e,n){if(null==e.childName||null==n.childName)throw(0,s.g5)("Should only compare child_ events.");const i=new Ct(e.childName,e.snapshotNode),r=new Ct(n.childName,n.snapshotNode);return t.index_.compare(i,r)}(t,e,n))),a.forEach((n=>{const i=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);r.forEach((r=>{r.respondsTo(n.type)&&e.push(r.createEvent(i,t.query_))}))}))}function Ve(t,e){return{eventCache:t,serverCache:e}}function $e(t,e,n,i){return Ve(new Fe(e,n,i),t.serverCache)}function Be(t,e,n,i){return Ve(t.eventCache,new Fe(e,n,i))}function qe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ze(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let Ge;class We{constructor(t,e=(()=>(Ge||(Ge=new Ft(P)),Ge))()){this.value=t,this.children=e}static fromObject(t){let e=new We(null);return L(t,((t,n)=>{e=e.set(new lt(t),n)})),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:ht(),value:this.value};if(vt(t))return null;{const n=dt(t),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(ft(t),e);return null!=r?{path:yt(new lt(n),r.path),value:r.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,(()=>!0))}subtree(t){if(vt(t))return this;{const e=dt(t),n=this.children.get(e);return null!==n?n.subtree(ft(t)):new We(null)}}set(t,e){if(vt(t))return new We(e,this.children);{const n=dt(t),i=(this.children.get(n)||new We(null)).set(ft(t),e),r=this.children.insert(n,i);return new We(this.value,r)}}remove(t){if(vt(t))return this.children.isEmpty()?new We(null):new We(null,this.children);{const e=dt(t),n=this.children.get(e);if(n){const i=n.remove(ft(t));let r;return r=i.isEmpty()?this.children.remove(e):this.children.insert(e,i),null===this.value&&r.isEmpty()?new We(null):new We(this.value,r)}return this}}get(t){if(vt(t))return this.value;{const e=dt(t),n=this.children.get(e);return n?n.get(ft(t)):null}}setTree(t,e){if(vt(t))return e;{const n=dt(t),i=(this.children.get(n)||new We(null)).setTree(ft(t),e);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new We(this.value,r)}}fold(t){return this.fold_(ht(),t)}fold_(t,e){const n={};return this.children.inorderTraversal(((i,r)=>{n[i]=r.fold_(yt(t,i),e)})),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,ht(),e)}findOnPath_(t,e,n){const i=!!this.value&&n(e,this.value);if(i)return i;if(vt(t))return null;{const i=dt(t),r=this.children.get(i);return r?r.findOnPath_(ft(t),yt(e,i),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,ht(),e)}foreachOnPath_(t,e,n){if(vt(t))return this;{this.value&&n(e,this.value);const i=dt(t),r=this.children.get(i);return r?r.foreachOnPath_(ft(t),yt(e,i),n):new We(null)}}foreach(t){this.foreach_(ht(),t)}foreach_(t,e){this.children.inorderTraversal(((n,i)=>{i.foreach_(yt(t,n),e)})),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal(((e,n)=>{n.value&&t(e,n.value)}))}}class He{constructor(t){this.writeTree_=t}static empty(){return new He(new We(null))}}function Ke(t,e,n){if(vt(e))return new He(new We(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const o=bt(r,e);return s=s.updateChild(o,n),new He(t.writeTree_.set(r,s))}{const i=new We(n),r=t.writeTree_.setTree(e,i);return new He(r)}}}function Ye(t,e,n){let i=t;return L(n,((t,n)=>{i=Ke(i,yt(e,t),n)})),i}function Xe(t,e){if(vt(e))return He.empty();{const n=t.writeTree_.setTree(e,new We(null));return new He(n)}}function Ze(t,e){return null!=Je(t,e)}function Je(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(bt(n.path,e)):null}function Qe(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,((t,n)=>{e.push(new Ct(t,n))})):t.writeTree_.children.inorderTraversal(((t,n)=>{null!=n.value&&e.push(new Ct(t,n.value))})),e}function tn(t,e){if(vt(e))return t;{const n=Je(t,e);return new He(null!=n?new We(n):t.writeTree_.subtree(e))}}function en(t){return t.writeTree_.isEmpty()}function nn(t,e){return rn(ht(),t.writeTree_,e)}function rn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal(((e,r)=>{".priority"===e?((0,s.hu)(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=rn(yt(t,e),r,n)})),n.getChild(t).isEmpty()||null===i||(n=n.updateChild(yt(t,".priority"),i)),n}}function sn(t,e){return mn(e,t)}function on(t,e){if(t.snap)return xt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&xt(yt(t.path,n),e))return!0;return!1}function an(t){return t.visible}function un(t,e,n){let i=He.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const t=o.path;let e;if(o.snap)xt(n,t)?(e=bt(n,t),i=Ke(i,e,o.snap)):xt(t,n)&&(e=bt(t,n),i=Ke(i,ht(),o.snap.getChild(e)));else{if(!o.children)throw(0,s.g5)("WriteRecord should have .snap or .children");if(xt(n,t))e=bt(n,t),i=Ye(i,e,o.children);else if(xt(t,n))if(e=bt(t,n),vt(e))i=Ye(i,ht(),o.children);else{const t=(0,s.DV)(o.children,dt(e));if(t){const n=t.getChild(ft(e));i=Ke(i,ht(),n)}}}}}return i}function cn(t,e,n,i,r){if(i||r){const s=tn(t.visibleWrites,e);if(!r&&en(s))return n;if(r||null!=n||Ze(s,ht())){const s=function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(xt(t.path,e)||xt(e,t.path))};return nn(un(t.allWrites,s,e),n||ee.EMPTY_NODE)}return null}{const i=Je(t.visibleWrites,e);if(null!=i)return i;{const i=tn(t.visibleWrites,e);return en(i)?n:null!=n||Ze(i,ht())?nn(i,n||ee.EMPTY_NODE):null}}}function ln(t,e,n,i){return cn(t.writeTree,t.treePath,e,n,i)}function hn(t,e){return function(t,e,n){let i=ee.EMPTY_NODE;const r=Je(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ht,((t,e)=>{i=i.updateImmediateChild(t,e)})),i;if(n){const r=tn(t.visibleWrites,e);return n.forEachChild(Ht,((t,e)=>{const n=nn(tn(r,new lt(t)),e);i=i.updateImmediateChild(t,n)})),Qe(r).forEach((t=>{i=i.updateImmediateChild(t.name,t.node)})),i}return Qe(tn(t.visibleWrites,e)).forEach((t=>{i=i.updateImmediateChild(t.name,t.node)})),i}(t.writeTree,t.treePath,e)}function dn(t,e,n,i){return function(t,e,n,i,r){(0,s.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=yt(e,n);if(Ze(t.visibleWrites,o))return null;{const e=tn(t.visibleWrites,o);return en(e)?r.getChild(n):nn(e,r.getChild(n))}}(t.writeTree,t.treePath,e,n,i)}function pn(t,e){return function(t,e){return Je(t.visibleWrites,e)}(t.writeTree,yt(t.treePath,e))}function fn(t,e,n){return function(t,e,n,i){const r=yt(e,n),s=Je(t.visibleWrites,r);return null!=s?s:i.isCompleteForChild(n)?nn(tn(t.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function gn(t,e){return mn(yt(t.treePath,e),t.writeTree)}function mn(t,e){return{treePath:t,writeTree:e}}class _n{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,n=t.childName;(0,s.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,s.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===e&&"child_removed"===r)this.changeMap.set(n,pe(n,t.snapshotNode,i.snapshotNode));else if("child_removed"===e&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===r)this.changeMap.set(n,de(n,i.oldSnap));else if("child_changed"===e&&"child_added"===r)this.changeMap.set(n,he(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==r)throw(0,s.g5)("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(n,pe(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}const yn=new class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}};class vn{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const e=null!=this.optCompleteServerCache_?new Fe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fn(this.writes_,t,e)}}getChildAfterChild(t,e,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ze(this.viewCache_),r=function(t,e,n,i,r,s){return function(t,e,n,i,r,s,o){let a;const u=tn(t.visibleWrites,e),c=Je(u,ht());if(null!=c)a=c;else{if(null==n)return[];a=nn(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const t=[],e=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let u=n.getNext();for(;u&&t.length<r;)0!==e(u,i)&&t.push(u),u=n.getNext();return t}}(t.writeTree,t.treePath,e,n,i,r,s)}(this.writes_,i,e,1,n,t);return 0===r.length?null:r[0]}}function bn(t,e,n,i,r,o){const a=e.eventCache;if(null!=pn(i,n))return e;{let u,c;if(vt(n))if((0,s.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const n=ze(e),r=hn(i,n instanceof ee?n:ee.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),r,o)}else{const n=ln(i,ze(e));u=t.filter.updateFullNode(e.eventCache.getNode(),n,o)}else{const l=dt(n);if(".priority"===l){(0,s.hu)(1===pt(n),"Can't have a priority with additional path components");const r=a.getNode();c=e.serverCache.getNode();const o=dn(i,n,r,c);u=null!=o?t.filter.updatePriority(r,o):a.getNode()}else{const s=ft(n);let h;if(a.isCompleteForChild(l)){c=e.serverCache.getNode();const t=dn(i,n,a.getNode(),c);h=null!=t?a.getNode().getImmediateChild(l).updateChild(s,t):a.getNode().getImmediateChild(l)}else h=fn(i,l,e.serverCache);u=null!=h?t.filter.updateChild(a.getNode(),l,h,s,r,o):a.getNode()}}return $e(e,u,a.isFullyInitialized()||vt(n),t.filter.filtersNodes())}}function wn(t,e,n,i,r,s,o,a){const u=e.serverCache;let c;const l=o?t.filter:t.filter.getIndexedFilter();if(vt(n))c=l.updateFullNode(u.getNode(),i,null);else if(l.filtersNodes()&&!u.isFiltered()){const t=u.getNode().updateChild(n,i);c=l.updateFullNode(u.getNode(),t,null)}else{const t=dt(n);if(!u.isCompleteForPath(n)&&pt(n)>1)return e;const r=ft(n),s=u.getNode().getImmediateChild(t).updateChild(r,i);c=".priority"===t?l.updatePriority(u.getNode(),s):l.updateChild(u.getNode(),t,s,r,yn,null)}const h=Be(e,c,u.isFullyInitialized()||vt(n),l.filtersNodes());return bn(t,h,n,r,new vn(r,h,s),a)}function Tn(t,e,n,i,r,s,o){const a=e.eventCache;let u,c;const l=new vn(r,e,s);if(vt(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),u=$e(e,c,!0,t.filter.filtersNodes());else{const r=dt(n);if(".priority"===r)c=t.filter.updatePriority(e.eventCache.getNode(),i),u=$e(e,c,a.isFullyInitialized(),a.isFiltered());else{const s=ft(n),c=a.getNode().getImmediateChild(r);let h;if(vt(s))h=i;else{const t=l.getCompleteChild(r);h=null!=t?".priority"===gt(s)&&t.getChild(_t(s)).isEmpty()?t:t.updateChild(s,i):ee.EMPTY_NODE}u=c.equals(h)?e:$e(e,t.filter.updateChild(a.getNode(),r,h,s,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function xn(t,e){return t.eventCache.isCompleteForChild(e)}function Sn(t,e,n){return n.foreach(((t,n)=>{e=e.updateChild(t,n)})),e}function In(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u,c=e;u=vt(n)?i:new We(null).setTree(n,i);const l=e.serverCache.getNode();return u.children.inorderTraversal(((n,i)=>{if(l.hasChild(n)){const u=Sn(0,e.serverCache.getNode().getImmediateChild(n),i);c=wn(t,c,new lt(n),u,r,s,o,a)}})),u.children.inorderTraversal(((n,i)=>{const u=!e.serverCache.isCompleteForChild(n)&&null===i.value;if(!l.hasChild(n)&&!u){const u=Sn(0,e.serverCache.getNode().getImmediateChild(n),i);c=wn(t,c,new lt(n),u,r,s,o,a)}})),c}class En{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new fe(n.getIndex()),r=(s=n).loadsAllData()?new fe(s.getIndex()):s.hasLimit()?new me(s):new ge(s);var s;this.processor_=function(t){return{filter:t}}(r);const o=e.serverCache,a=e.eventCache,u=i.updateFullNode(ee.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),l=new Fe(u,o.isFullyInitialized(),i.filtersNodes()),h=new Fe(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Ve(h,l),this.eventGenerator_=new je(this.query_)}get query(){return this.query_}}function An(t,e){const n=ze(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!vt(e)&&!n.getImmediateChild(dt(e)).isEmpty())?n.getChild(e):null}function kn(t){return 0===t.eventRegistrations_.length}function On(t,e,n){const i=[];if(n){(0,s.hu)(null==e,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach((t=>{const e=t.createCancelEvent(n,r);e&&i.push(e)}))}if(e){let n=[];for(let i=0;i<t.eventRegistrations_.length;++i){const r=t.eventRegistrations_[i];if(r.matches(e)){if(e.hasAnyCallback()){n=n.concat(t.eventRegistrations_.slice(i+1));break}}else n.push(r)}t.eventRegistrations_=n}else t.eventRegistrations_=[];return i}function Cn(t,e,n,i){e.type===De.MERGE&&null!==e.source.queryId&&((0,s.hu)(ze(t.viewCache_),"We should always have a full cache before handling merges"),(0,s.hu)(qe(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=function(t,e,n,i,r){const o=new _n;let a,u;if(n.type===De.OVERWRITE){const c=n;c.source.fromUser?a=Tn(t,e,c.path,c.snap,i,r,o):((0,s.hu)(c.source.fromServer,"Unknown source."),u=c.source.tagged||e.serverCache.isFiltered()&&!vt(c.path),a=wn(t,e,c.path,c.snap,i,r,u,o))}else if(n.type===De.MERGE){const c=n;c.source.fromUser?a=function(t,e,n,i,r,s,o){let a=e;return i.foreach(((i,u)=>{const c=yt(n,i);xn(e,dt(c))&&(a=Tn(t,a,c,u,r,s,o))})),i.foreach(((i,u)=>{const c=yt(n,i);xn(e,dt(c))||(a=Tn(t,a,c,u,r,s,o))})),a}(t,e,c.path,c.children,i,r,o):((0,s.hu)(c.source.fromServer,"Unknown source."),u=c.source.tagged||e.serverCache.isFiltered(),a=In(t,e,c.path,c.children,i,r,u,o))}else if(n.type===De.ACK_USER_WRITE){const u=n;a=u.revert?function(t,e,n,i,r,o){let a;if(null!=pn(i,n))return e;{const u=new vn(i,e,r),c=e.eventCache.getNode();let l;if(vt(n)||".priority"===dt(n)){let n;if(e.serverCache.isFullyInitialized())n=ln(i,ze(e));else{const t=e.serverCache.getNode();(0,s.hu)(t instanceof ee,"serverChildren would be complete if leaf node"),n=hn(i,t)}n=n,l=t.filter.updateFullNode(c,n,o)}else{const r=dt(n);let s=fn(i,r,e.serverCache);null==s&&e.serverCache.isCompleteForChild(r)&&(s=c.getImmediateChild(r)),l=null!=s?t.filter.updateChild(c,r,s,ft(n),u,o):e.eventCache.getNode().hasChild(r)?t.filter.updateChild(c,r,ee.EMPTY_NODE,ft(n),u,o):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(a=ln(i,ze(e)),a.isLeafNode()&&(l=t.filter.updateFullNode(l,a,o)))}return a=e.serverCache.isFullyInitialized()||null!=pn(i,ht()),$e(e,l,a,t.filter.filtersNodes())}}(t,e,u.path,i,r,o):function(t,e,n,i,r,s,o){if(null!=pn(r,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=i.value){if(vt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return wn(t,e,n,u.getNode().getChild(n),r,s,a,o);if(vt(n)){let i=new We(null);return u.getNode().forEachChild(Nt,((t,e)=>{i=i.set(new lt(t),e)})),In(t,e,n,i,r,s,a,o)}return e}{let c=new We(null);return i.foreach(((t,e)=>{const i=yt(n,t);u.isCompleteForPath(i)&&(c=c.set(t,u.getNode().getChild(i)))})),In(t,e,n,c,r,s,a,o)}}(t,e,u.path,u.affectedTree,i,r,o)}else{if(n.type!==De.LISTEN_COMPLETE)throw(0,s.g5)("Unknown operation type: "+n.type);a=function(t,e,n,i,r){const s=e.serverCache;return bn(t,Be(e,s.getNode(),s.isFullyInitialized()||vt(n),s.isFiltered()),n,i,yn,r)}(t,e,n.path,i,o)}const c=o.getChanges();return function(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=qe(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(le(qe(e)))}}(e,a,c),{viewCache:a,changes:c}}(t.processor_,r,e,n,i);var a,u;return a=t.processor_,u=o.viewCache,(0,s.hu)(u.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,s.hu)(u.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,s.hu)(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Dn(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Dn(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return function(t,e,n,i){const r=[],s=[];return e.forEach((e=>{var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&s.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Ue(t,r,"child_removed",e,i,n),Ue(t,r,"child_added",e,i,n),Ue(t,r,"child_moved",s,i,n),Ue(t,r,"child_changed",e,i,n),Ue(t,r,"value",e,i,n),r}(t.eventGenerator_,e,n,r)}let Pn,Rn;class Nn{constructor(){this.views=new Map}}function Mn(t,e,n,i){const r=e.source.queryId;if(null!==r){const o=t.views.get(r);return(0,s.hu)(null!=o,"SyncTree gave us an op for an invalid query."),Cn(o,e,n,i)}{let r=[];for(const s of t.views.values())r=r.concat(Cn(s,e,n,i));return r}}function Ln(t,e,n,i,r){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let t=ln(n,r?i:null),s=!1;t?s=!0:i instanceof ee?(t=hn(n,i),s=!1):(t=ee.EMPTY_NODE,s=!1);const o=Ve(new Fe(t,s,!1),new Fe(i,r,!1));return new En(e,o)}return o}function Fn(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function jn(t,e){let n=null;for(const i of t.views.values())n=n||An(i,e);return n}function Un(t,e){if(e._queryParams.loadsAllData())return Bn(t);{const n=e._queryIdentifier;return t.views.get(n)}}function Vn(t,e){return null!=Un(t,e)}function $n(t){return null!=Bn(t)}function Bn(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let qn=1;class zn{constructor(t){this.listenProvider_=t,this.syncPointTree_=new We(null),this.pendingWriteTree_={visibleWrites:He.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Gn(t,e,n,i,r){return function(t,e,n,i,r){(0,s.hu)(i>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Ke(t.visibleWrites,e,n)),t.lastWriteId=i}(t.pendingWriteTree_,e,n,i,r),r?Jn(t,new Me({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Wn(t,e,n=!1){const i=function(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}(t.pendingWriteTree_,e);if(function(t,e){const n=t.allWrites.findIndex((t=>t.writeId===e));(0,s.hu)(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,a=t.allWrites.length-1;for(;r&&a>=0;){const e=t.allWrites[a];e.visible&&(a>=n&&on(e,i.path)?r=!1:xt(i.path,e.path)&&(o=!0)),a--}return!!r&&(o?(function(t){t.visibleWrites=un(t.allWrites,an,ht()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0):(i.snap?t.visibleWrites=Xe(t.visibleWrites,i.path):L(i.children,(e=>{t.visibleWrites=Xe(t.visibleWrites,yt(i.path,e))})),!0))}(t.pendingWriteTree_,e)){let e=new We(null);return null!=i.snap?e=e.set(ht(),!0):L(i.children,(t=>{e=e.set(new lt(t),!0)})),Jn(t,new Re(i.path,e,n))}return[]}function Hn(t,e,n){return Jn(t,new Me({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Kn(t,e,n,i,r=!1){const o=e._path,a=t.syncPointTree_.get(o);let u=[];if(a&&("default"===e._queryIdentifier||Vn(a,e))){const c=function(t,e,n,i){const r=e._queryIdentifier,o=[];let a=[];const u=$n(t);if("default"===r)for(const[e,r]of t.views.entries())a=a.concat(On(r,n,i)),kn(r)&&(t.views.delete(e),r.query._queryParams.loadsAllData()||o.push(r.query));else{const e=t.views.get(r);e&&(a=a.concat(On(e,n,i)),kn(e)&&(t.views.delete(r),e.query._queryParams.loadsAllData()||o.push(e.query)))}return u&&!$n(t)&&o.push(new((0,s.hu)(Pn,"Reference.ts has not been loaded"),Pn)(e._repo,e._path)),{removed:o,events:a}}(a,e,n,i);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(o));const l=c.removed;if(u=c.events,!r){const n=-1!==l.findIndex((t=>t._queryParams.loadsAllData())),r=t.syncPointTree_.findOnPath(o,((t,e)=>$n(e)));if(n&&!r){const e=t.syncPointTree_.subtree(o);if(!e.isEmpty()){const n=function(t){return t.fold(((t,e,n)=>{if(e&&$n(e))return[Bn(e)];{let t=[];return e&&(t=Fn(e)),L(n,((e,n)=>{t=t.concat(n)})),t}}))}(e);for(let e=0;e<n.length;++e){const i=n[e],r=i.query,s=ei(t,i);t.listenProvider_.startListening(ai(r),ni(t,r),s.hashFn,s.onComplete)}}}if(!r&&l.length>0&&!i)if(n){const n=null;t.listenProvider_.stopListening(ai(e),n)}else l.forEach((e=>{const n=t.queryToTagMap.get(ii(e));t.listenProvider_.stopListening(ai(e),n)}))}!function(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const e=ii(i),n=t.queryToTagMap.get(e);t.queryToTagMap.delete(e),t.tagToQueryMap.delete(n)}}}(t,l)}return u}function Yn(t,e,n,i){const r=ri(t,i);if(null!=r){const i=si(r),s=i.path,o=i.queryId,a=bt(s,e);return oi(t,s,new Me(Pe(o),a,n))}return[]}function Xn(t,e,n,i=!1){const r=e._path;let o=null,a=!1;t.syncPointTree_.foreachOnPath(r,((t,e)=>{const n=bt(t,r);o=o||jn(e,n),a=a||$n(e)}));let u,c=t.syncPointTree_.get(r);c?(a=a||$n(c),o=o||jn(c,ht())):(c=new Nn,t.syncPointTree_=t.syncPointTree_.set(r,c)),null!=o?u=!0:(u=!1,o=ee.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(((t,e)=>{const n=jn(e,ht());n&&(o=o.updateImmediateChild(t,n))})));const l=Vn(c,e);if(!l&&!e._queryParams.loadsAllData()){const n=ii(e);(0,s.hu)(!t.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=qn++;t.queryToTagMap.set(n,i),t.tagToQueryMap.set(i,n)}let h=function(t,e,n,i,r,s){const o=Ln(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),function(t,e){t.eventRegistrations_.push(e)}(o,n),function(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ht,((t,e)=>{i.push(he(t,e))})),n.isFullyInitialized()&&i.push(le(n.getNode())),Dn(t,i,n.getNode(),e)}(o,n)}(c,e,n,sn(t.pendingWriteTree_,r),o,u);if(!l&&!a&&!i){const n=Un(c,e);h=h.concat(function(t,e,n){const i=e._path,r=ni(t,e),o=ei(t,n),a=t.listenProvider_.startListening(ai(e),r,o.hashFn,o.onComplete),u=t.syncPointTree_.subtree(i);if(r)(0,s.hu)(!$n(u.value),"If we're adding a query, it shouldn't be shadowed");else{const e=u.fold(((t,e,n)=>{if(!vt(t)&&e&&$n(e))return[Bn(e).query];{let t=[];return e&&(t=t.concat(Fn(e).map((t=>t.query)))),L(n,((e,n)=>{t=t.concat(n)})),t}}));for(let n=0;n<e.length;++n){const i=e[n];t.listenProvider_.stopListening(ai(i),ni(t,i))}}return a}(t,e,n))}return h}function Zn(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,((t,n)=>{const i=jn(n,bt(t,e));if(i)return i}));return cn(i,e,r,n,!0)}function Jn(t,e){return Qn(e,t.syncPointTree_,null,sn(t.pendingWriteTree_,ht()))}function Qn(t,e,n,i){if(vt(t.path))return ti(t,e,n,i);{const r=e.get(ht());null==n&&null!=r&&(n=jn(r,ht()));let s=[];const o=dt(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const t=n?n.getImmediateChild(o):null,e=gn(i,o);s=s.concat(Qn(a,u,t,e))}return r&&(s=s.concat(Mn(r,t,i,n))),s}}function ti(t,e,n,i){const r=e.get(ht());null==n&&null!=r&&(n=jn(r,ht()));let s=[];return e.children.inorderTraversal(((e,r)=>{const o=n?n.getImmediateChild(e):null,a=gn(i,e),u=t.operationForChild(e);u&&(s=s.concat(ti(u,r,o,a)))})),r&&(s=s.concat(Mn(r,t,i,n))),s}function ei(t,e){const n=e.query,i=ni(t,n);return{hashFn:()=>{const t=function(t){return t.viewCache_.serverCache.getNode()}(e)||ee.EMPTY_NODE;return t.hash()},onComplete:e=>{if("ok"===e)return i?function(t,e,n){const i=ri(t,n);if(i){const n=si(i),r=n.path,s=n.queryId,o=bt(r,e);return oi(t,r,new Ne(Pe(s),o))}return[]}(t,n._path,i):function(t,e){return Jn(t,new Ne({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);{const i=function(t,e){let n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}(e,n);return Kn(t,n,null,i)}}}}function ni(t,e){const n=ii(e);return t.queryToTagMap.get(n)}function ii(t){return t._path.toString()+"$"+t._queryIdentifier}function ri(t,e){return t.tagToQueryMap.get(e)}function si(t){const e=t.indexOf("$");return(0,s.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new lt(t.substr(0,e))}}function oi(t,e,n){const i=t.syncPointTree_.get(e);return(0,s.hu)(i,"Missing sync point for query tag that we're tracking"),Mn(i,n,sn(t.pendingWriteTree_,e),null)}function ai(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,s.hu)(Rn,"Reference.ts has not been loaded"),Rn)(t._repo,t._path):t}class ui{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new ui(e)}node(){return this.node_}}class ci{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=yt(this.path_,t);return new ci(this.syncTree_,e)}node(){return Zn(this.syncTree_,this.path_)}}const li=function(t,e,n){return t&&"object"==typeof t?((0,s.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?hi(t[".sv"],e,n):"object"==typeof t[".sv"]?di(t[".sv"],e):void(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},hi=function(t,e,n){if("timestamp"===t)return n.timestamp;(0,s.hu)(!1,"Unexpected server value: "+t)},di=function(t,e,n){t.hasOwnProperty("increment")||(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;"number"!=typeof i&&(0,s.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,s.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return"number"!=typeof o?i:o+i},pi=function(t,e,n,i){return gi(e,new ci(n,t),i)},fi=function(t,e,n){return gi(t,new ui(e),n)};function gi(t,e,n){const i=t.getPriority().val(),r=li(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const i=t,s=li(i.getValue(),e,n);return s!==i.getValue()||r!==i.getPriority().val()?new Wt(s,ie(r)):t}{const i=t;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new Wt(r))),i.forEachChild(Ht,((t,i)=>{const r=gi(i,e.getImmediateChild(t),n);r!==i&&(s=s.updateImmediateChild(t,r))})),s}}class mi{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}}function _i(t,e){let n=e instanceof lt?e:new lt(e),i=t,r=dt(n);for(;null!==r;){const t=(0,s.DV)(i.node.children,r)||{children:{},childCount:0};i=new mi(r,i,t),n=ft(n),r=dt(n)}return i}function yi(t){return t.node.value}function vi(t,e){t.node.value=e,Si(t)}function bi(t){return t.node.childCount>0}function wi(t,e){L(t.node.children,((n,i)=>{e(new mi(n,t,i))}))}function Ti(t,e,n,i){n&&!i&&e(t),wi(t,(t=>{Ti(t,e,!0,i)})),n&&i&&e(t)}function xi(t){return new lt(null===t.parent?t.name:xi(t.parent)+"/"+t.name)}function Si(t){null!==t.parent&&function(t,e,n){const i=function(t){return void 0===yi(t)&&!bi(t)}(n),r=(0,s.r3)(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,Si(t)):i||r||(t.node.children[e]=n.node,t.node.childCount++,Si(t))}(t.parent,t.name,t)}const Ii=/[\[\].#$\/\u0000-\u001F\u007F]/,Ei=/[\[\].#$\u0000-\u001F\u007F]/,Ai=10485760,ki=function(t){return"string"==typeof t&&0!==t.length&&!Ii.test(t)},Oi=function(t){return"string"==typeof t&&0!==t.length&&!Ei.test(t)},Ci=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!k(t)||t&&"object"==typeof t&&(0,s.r3)(t,".sv")},Di=function(t,e,n,i){i&&void 0===e||Pi((0,s.gK)(t,"value"),e,n)},Pi=function(t,e,n){const i=n instanceof lt?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Et(i));if("function"==typeof e)throw new Error(t+"contains a function "+Et(i)+" with contents = "+e.toString());if(k(e))throw new Error(t+"contains "+e.toString()+" "+Et(i));if("string"==typeof e&&e.length>Ai/3&&(0,s.ug)(e)>Ai)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Et(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let n=!1,r=!1;if(L(e,((e,o)=>{if(".value"===e)n=!0;else if(".priority"!==e&&".sv"!==e&&(r=!0,!ki(e)))throw new Error(t+" contains an invalid key ("+e+") "+Et(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,s.ug)(e),It(t)}(i,e),Pi(t,o,i),function(t){const e=t.parts_.pop();t.byteLength_-=(0,s.ug)(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)})),n&&r)throw new Error(t+' contains ".value" child '+Et(i)+" in addition to actual children.")}},Ri=function(t,e,n,i){if(i&&void 0===e)return;const r=(0,s.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];L(e,((t,e)=>{const i=new lt(t);if(Pi(r,e,yt(n,i)),".priority"===gt(i)&&!Ci(e))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(i)})),function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const r=mt(i);for(let e=0;e<r.length;e++)if(".priority"===r[e]&&e===r.length-1);else if(!ki(r[e]))throw new Error(t+"contains an invalid key ("+r[e]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(wt);let r=null;for(n=0;n<e.length;n++){if(i=e[n],null!==r&&xt(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,o)},Ni=function(t,e,n){if(!n||void 0!==e){if(k(e))throw new Error((0,s.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ci(e))throw new Error((0,s.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Mi=function(t,e,n,i){if(!(i&&void 0===n||ki(n)))throw new Error((0,s.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Li=function(t,e,n,i){if(!(i&&void 0===n||Oi(n)))throw new Error((0,s.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Fi=function(t,e){if(".info"===dt(e))throw new Error(t+" failed = Can't modify data under /.info/")},ji=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!ki(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Oi(t)}(n))throw new Error((0,s.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ui{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vi(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null===n||Tt(s,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function $i(t,e,n){Vi(t,n),qi(t,(t=>Tt(t,e)))}function Bi(t,e,n){Vi(t,n),qi(t,(t=>xt(t,e)||xt(e,t)))}function qi(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];r&&(e(r.path)?(zi(t.eventLists_[i]),t.eventLists_[i]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function zi(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const i=n.getEventRunner();b&&x("event: "+n.toString()),V(i)}}}const Gi="repo_interrupt";class Wi{constructor(t,e,n,i){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ui,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ie(),this.transactionQueueTree_=new mi,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Hi(t,e,n){if(t.stats_=Q(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new xe(t.repoInfo_,((e,n,i,r)=>{Xi(t,e,n,i,r)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((()=>Zi(t,!0)),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,s.Pz)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new Ot(t.repoInfo_,e,((e,n,i,r)=>{Xi(t,e,n,i,r)}),(e=>{Zi(t,e)}),(e=>{!function(t,e){L(e,((e,n)=>{Ji(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((e=>{t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((e=>{t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(e,n){const i=e.toString();return J[i]||(J[i]=new Ce(t.stats_,t.server_)),J[i]}(t.repoInfo_),t.infoData_=new Se,t.infoSyncTree_=new zn({startListening:(e,n,i,r)=>{let s=[];const o=t.infoData_.getNode(e._path);return o.isEmpty()||(s=Hn(t.infoSyncTree_,e._path,o),setTimeout((()=>{r("ok")}),0)),s},stopListening:()=>{}}),Ji(t,"connected",!1),t.serverSyncTree_=new zn({startListening:(e,n,i,r)=>(t.server_.listen(e,i,n,((n,i)=>{const s=r(n,i);Bi(t.eventQueue_,e._path,s)})),[]),stopListening:(e,n)=>{t.server_.unlisten(e,n)}})}function Ki(t){const e=t.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Yi(t){return(e=(e={timestamp:Ki(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Xi(t,e,n,i,r){t.dataUpdateCount++;const o=new lt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let a=[];if(r)if(i){const e=(0,s.UI)(n,(t=>ie(t)));a=function(t,e,n,i){const r=ri(t,i);if(r){const i=si(r),s=i.path,o=i.queryId,a=bt(s,e),u=We.fromObject(n);return oi(t,s,new Le(Pe(o),a,u))}return[]}(t.serverSyncTree_,o,e,r)}else{const e=ie(n);a=Yn(t.serverSyncTree_,o,e,r)}else if(i){const e=(0,s.UI)(n,(t=>ie(t)));a=function(t,e,n){const i=We.fromObject(n);return Jn(t,new Le({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,o,e)}else{const e=ie(n);a=Hn(t.serverSyncTree_,o,e)}let u=o;a.length>0&&(u=cr(t,o)),Bi(t.eventQueue_,u,a)}function Zi(t,e){Ji(t,"connected",e),!1===e&&function(t){sr(t,"onDisconnectEvents");const e=Yi(t),n=Ie();ke(t.onDisconnect_,ht(),((i,r)=>{const s=pi(i,r,t.serverSyncTree_,e);Ee(n,i,s)}));let i=[];ke(n,ht(),((e,n)=>{i=i.concat(Hn(t.serverSyncTree_,e,n));const r=fr(t,e);cr(t,r)})),t.onDisconnect_=Ie(),Bi(t.eventQueue_,ht(),i)}(t)}function Ji(t,e,n){const i=new lt("/.info/"+e),r=ie(n);t.infoData_.updateSnapshot(i,r);const s=Hn(t.infoSyncTree_,i,r);Bi(t.eventQueue_,i,s)}function Qi(t){return t.nextWriteId_++}function tr(t,e,n,i,r){sr(t,"set",{path:e.toString(),value:n,priority:i});const s=Yi(t),o=ie(n,i),a=Zn(t.serverSyncTree_,e),u=fi(o,a,s),c=Qi(t),l=Gn(t.serverSyncTree_,e,u,c,!0);Vi(t.eventQueue_,l),t.server_.put(e.toString(),o.val(!0),((n,i)=>{const s="ok"===n;s||A("set at "+e+" failed: "+n);const o=Wn(t.serverSyncTree_,c,!s);Bi(t.eventQueue_,e,o),or(0,r,n,i)}));const h=fr(t,e);cr(t,h),Bi(t.eventQueue_,h,[])}function er(t,e,n){t.server_.onDisconnectCancel(e.toString(),((i,r)=>{"ok"===i&&Ae(t.onDisconnect_,e),or(0,n,i,r)}))}function nr(t,e,n,i){const r=ie(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),((n,s)=>{"ok"===n&&Ee(t.onDisconnect_,e,r),or(0,i,n,s)}))}function ir(t,e,n){let i;i=".info"===dt(e._path)?Kn(t.infoSyncTree_,e,n):Kn(t.serverSyncTree_,e,n),$i(t.eventQueue_,e._path,i)}function rr(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Gi)}function sr(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),x(n,...e)}function or(t,e,n,i){e&&V((()=>{if("ok"===n)e(null);else{const t=(n||"error").toUpperCase();let r=t;i&&(r+=": "+i);const s=new Error(r);s.code=t,e(s)}}))}function ar(t,e,n){return Zn(t.serverSyncTree_,e,n)||ee.EMPTY_NODE}function ur(t,e=t.transactionQueueTree_){if(e||pr(t,e),yi(e)){const n=hr(t,e);(0,s.hu)(n.length>0,"Sending zero length transaction queue"),n.every((t=>0===t.status))&&function(t,e,n){const i=n.map((t=>t.currentWriteId)),r=ar(t,e,i);let o=r;const a=r.hash();for(let t=0;t<n.length;t++){const i=n[t];(0,s.hu)(0===i.status,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=1,i.retryCount++;const r=bt(e,i.path);o=o.updateChild(r,i.currentOutputSnapshotRaw)}const u=o.val(!0),c=e;t.server_.put(c.toString(),u,(i=>{sr(t,"transaction put response",{path:c.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let e=0;e<n.length;e++)n[e].status=2,r=r.concat(Wn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&i.push((()=>n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved))),n[e].unwatcher();pr(t,_i(t.transactionQueueTree_,e)),ur(t,t.transactionQueueTree_),Bi(t.eventQueue_,e,r);for(let t=0;t<i.length;t++)V(i[t])}else{if("datastale"===i)for(let t=0;t<n.length;t++)3===n[t].status?n[t].status=4:n[t].status=0;else{A("transaction at "+c.toString()+" failed: "+i);for(let t=0;t<n.length;t++)n[t].status=4,n[t].abortReason=i}cr(t,e)}}),a)}(t,xi(e),n)}else bi(e)&&wi(e,(e=>{ur(t,e)}))}function cr(t,e){const n=lr(t,e),i=xi(n);return function(t,e,n){if(0===e.length)return;const i=[];let r=[];const o=e.filter((t=>0===t.status)).map((t=>t.currentWriteId));for(let u=0;u<e.length;u++){const c=e[u],l=bt(n,c.path);let h,d=!1;if((0,s.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)d=!0,h=c.abortReason,r=r.concat(Wn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)d=!0,h="maxretry",r=r.concat(Wn(t.serverSyncTree_,c.currentWriteId,!0));else{const n=ar(t,c.path,o);c.currentInputSnapshot=n;const i=e[u].update(n.val());if(void 0!==i){Pi("transaction failed: Data returned ",i,c.path);let e=ie(i);"object"==typeof i&&null!=i&&(0,s.r3)(i,".priority")||(e=e.updatePriority(n.getPriority()));const a=c.currentWriteId,u=Yi(t),l=fi(e,n,u);c.currentOutputSnapshotRaw=e,c.currentOutputSnapshotResolved=l,c.currentWriteId=Qi(t),o.splice(o.indexOf(a),1),r=r.concat(Gn(t.serverSyncTree_,c.path,l,c.currentWriteId,c.applyLocally)),r=r.concat(Wn(t.serverSyncTree_,a,!0))}else d=!0,h="nodata",r=r.concat(Wn(t.serverSyncTree_,c.currentWriteId,!0))}Bi(t.eventQueue_,n,r),r=[],d&&(e[u].status=2,a=e[u].unwatcher,setTimeout(a,Math.floor(0)),e[u].onComplete&&("nodata"===h?i.push((()=>e[u].onComplete(null,!1,e[u].currentInputSnapshot))):i.push((()=>e[u].onComplete(new Error(h),!1,null)))))}var a;pr(t,t.transactionQueueTree_);for(let t=0;t<i.length;t++)V(i[t]);ur(t,t.transactionQueueTree_)}(t,hr(t,n),i),i}function lr(t,e){let n,i=t.transactionQueueTree_;for(n=dt(e);null!==n&&void 0===yi(i);)i=_i(i,n),n=dt(e=ft(e));return i}function hr(t,e){const n=[];return dr(t,e,n),n.sort(((t,e)=>t.order-e.order)),n}function dr(t,e,n){const i=yi(e);if(i)for(let t=0;t<i.length;t++)n.push(i[t]);wi(e,(e=>{dr(t,e,n)}))}function pr(t,e){const n=yi(e);if(n){let t=0;for(let e=0;e<n.length;e++)2!==n[e].status&&(n[t]=n[e],t++);n.length=t,vi(e,n.length>0?n:void 0)}wi(e,(e=>{pr(t,e)}))}function fr(t,e){const n=xi(lr(t,e)),i=_i(t.transactionQueueTree_,e);return function(t,e,n){let i=t.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,(e=>{gr(t,e)})),gr(t,i),Ti(i,(e=>{gr(t,e)})),n}function gr(t,e){const n=yi(e);if(n){const i=[];let r=[],o=-1;for(let e=0;e<n.length;e++)3===n[e].status||(1===n[e].status?((0,s.hu)(o===e-1,"All SENT items should be at beginning of queue."),o=e,n[e].status=3,n[e].abortReason="set"):((0,s.hu)(0===n[e].status,"Unexpected transaction status in abort"),n[e].unwatcher(),r=r.concat(Wn(t.serverSyncTree_,n[e].currentWriteId,!0)),n[e].onComplete&&i.push(n[e].onComplete.bind(null,new Error("set"),!1,null))));-1===o?vi(e,void 0):n.length=o+1,Bi(t.eventQueue_,xi(e),r);for(let t=0;t<i.length;t++)V(i[t])}}const mr=function(t,e){const n=_r(t),i=n.namespace;"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&A("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new K(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new lt(n.pathString)}},_r=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",u=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(r=function(t){let e="";const n=t.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let i=n[t];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));const d=function(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):A(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const t=e.indexOf(".");i=e.substring(0,t).toLowerCase(),n=e.substring(t+1),s=i}"ns"in d&&(s=d.ns)}return{host:e,port:u,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};class yr{constructor(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,s.Pz)(this.snapshot.exportVal())}}class vr{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class br{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,s.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class wr{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new s.BH;return er(this._repo,this._path,t.wrapCallback((()=>{}))),t.promise}remove(){Fi("OnDisconnect.remove",this._path);const t=new s.BH;return nr(this._repo,this._path,null,t.wrapCallback((()=>{}))),t.promise}set(t){Fi("OnDisconnect.set",this._path),Di("OnDisconnect.set",t,this._path,!1);const e=new s.BH;return nr(this._repo,this._path,t,e.wrapCallback((()=>{}))),e.promise}setWithPriority(t,e){Fi("OnDisconnect.setWithPriority",this._path),Di("OnDisconnect.setWithPriority",t,this._path,!1),Ni("OnDisconnect.setWithPriority",e,!1);const n=new s.BH;return function(t,e,n,i,r){const s=ie(n,i);t.server_.onDisconnectPut(e.toString(),s.val(!0),((n,i)=>{"ok"===n&&Ee(t.onDisconnect_,e,s),or(0,r,n,i)}))}(this._repo,this._path,t,e,n.wrapCallback((()=>{}))),n.promise}update(t){Fi("OnDisconnect.update",this._path),Ri("OnDisconnect.update",t,this._path,!1);const e=new s.BH;return function(t,e,n,i){if((0,s.xb)(n))return x("onDisconnect().update() called with empty data.  Don't do anything."),void or(0,i,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,((r,s)=>{"ok"===r&&L(n,((n,i)=>{const r=ie(i);Ee(t.onDisconnect_,yt(e,n),r)})),or(0,i,r,s)}))}(this._repo,this._path,t,e.wrapCallback((()=>{}))),e.promise}}class Tr{constructor(t,e,n,i){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=i}get key(){return vt(this._path)?null:gt(this._path)}get ref(){return new Er(this._repo,this._path)}get _queryIdentifier(){const t=Te(this._queryParams),e=N(t);return"{}"===e?"default":e}get _queryObject(){return Te(this._queryParams)}isEqual(t){if(!((t=(0,s.m9)(t))instanceof Tr))return!1;const e=this._repo===t._repo,n=Tt(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return e&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}function xr(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Sr(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Nt){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==O)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==C)throw new Error(i);if("string"!=typeof n)throw new Error(r)}}else if(t.getIndex()===Ht){if(null!=e&&!Ci(e)||null!=n&&!Ci(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,s.hu)(t.getIndex()instanceof re||t.getIndex()===se,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ir(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Er extends Tr{constructor(t,e){super(t,e,new _e,!1)}get parent(){const t=_t(this._path);return null===t?null:new Er(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class Ar{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new lt(t),n=Cr(this.ref,t);return new Ar(this._node.getChild(e),n,Ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,((e,n)=>t(new Ar(n,Cr(this.ref,e),Ht))))}hasChild(t){const e=new lt(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kr(t,e){return(t=(0,s.m9)(t))._checkNotDeleted("ref"),void 0!==e?Cr(t._root,e):t._root}function Or(t,e){(t=(0,s.m9)(t))._checkNotDeleted("refFromURL");const n=mr(e,t._repo.repoInfo_.nodeAdmin);ji("refFromURL",n);const i=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||i.host===t._repo.repoInfo_.host||E("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+t._repo.repoInfo_.host+")"),kr(t,n.path.toString())}function Cr(t,e){var n;return null===dt((t=(0,s.m9)(t))._path)?("child","path",!1,(n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Li("child","path",n,false)):Li("child","path",e,!1),new Er(t._repo,yt(t._path,e))}function Dr(t){return t=(0,s.m9)(t),new wr(t._repo,t._path)}function Pr(t,e){t=(0,s.m9)(t),Fi("push",t._path),Di("push",e,t._path,!0);const n=Ki(t._repo),i=ae(n),r=Cr(t,i),o=Cr(t,i);let a;return a=null!=e?Nr(o,e).then((()=>o)):Promise.resolve(o),r.then=a.then.bind(a),r.catch=a.then.bind(a,void 0),r}function Rr(t){return Fi("remove",t._path),Nr(t,null)}function Nr(t,e){t=(0,s.m9)(t),Fi("set",t._path),Di("set",e,t._path,!1);const n=new s.BH;return tr(t._repo,t._path,e,null,n.wrapCallback((()=>{}))),n.promise}function Mr(t,e){t=(0,s.m9)(t),Fi("setPriority",t._path),Ni("setPriority",e,!1);const n=new s.BH;return tr(t._repo,yt(t._path,".priority"),e,null,n.wrapCallback((()=>{}))),n.promise}function Lr(t,e,n){if(Fi("setWithPriority",t._path),Di("setWithPriority",e,t._path,!1),Ni("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";const i=new s.BH;return tr(t._repo,t._path,e,n,i.wrapCallback((()=>{}))),i.promise}function Fr(t,e){Ri("update",e,t._path,!1);const n=new s.BH;return function(t,e,n,i){sr(t,"update",{path:e.toString(),value:n});let r=!0;const o=Yi(t),a={};if(L(n,((n,i)=>{r=!1,a[n]=pi(yt(e,n),ie(i),t.serverSyncTree_,o)})),r)x("update() called with empty data.  Don't do anything."),or(0,i,"ok",void 0);else{const r=Qi(t),o=function(t,e,n,i){!function(t,e,n,i){(0,s.hu)(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Ye(t.visibleWrites,e,n),t.lastWriteId=i}(t.pendingWriteTree_,e,n,i);const r=We.fromObject(n);return Jn(t,new Le({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,e,a,r);Vi(t.eventQueue_,o),t.server_.merge(e.toString(),n,((n,s)=>{const o="ok"===n;o||A("update at "+e+" failed: "+n);const a=Wn(t.serverSyncTree_,r,!o),u=a.length>0?cr(t,e):e;Bi(t.eventQueue_,u,a),or(0,i,n,s)})),L(n,(n=>{const i=fr(t,yt(e,n));cr(t,i)})),Bi(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((()=>{}))),n.promise}function jr(t){t=(0,s.m9)(t);const e=new br((()=>{})),n=new Ur(e);return function(t,e,n){const i=function(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,((t,e)=>{const r=bt(t,n);i=i||jn(e,r)}));let r=t.syncPointTree_.get(n);r?i=i||jn(r,ht()):(r=new Nn,t.syncPointTree_=t.syncPointTree_.set(n,r));const s=null!=i,o=s?new Fe(i,!0,!1):null;return qe(Ln(r,e,sn(t.pendingWriteTree_,e._path),s?o.getNode():ee.EMPTY_NODE,s).viewCache_)}(t.serverSyncTree_,e);return null!=i?Promise.resolve(i):t.server_.get(e).then((i=>{const r=ie(i).withIndex(e._queryParams.getIndex());let s;if(Xn(t.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())s=Hn(t.serverSyncTree_,e._path,r);else{const n=ni(t.serverSyncTree_,e);s=Yn(t.serverSyncTree_,e._path,r,n)}return Bi(t.eventQueue_,e._path,s),Kn(t.serverSyncTree_,e,n,null,!0),r}),(n=>(sr(t,"get for query "+(0,s.Pz)(e)+" failed: "+n),Promise.reject(new Error(n)))))}(t._repo,t,n).then((e=>new Ar(e,new Er(t._repo,t._path),t._queryParams.getIndex())))}class Ur{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const n=e._queryParams.getIndex();return new yr("value",this,new Ar(t.snapshotNode,new Er(e._repo,e._path),n))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new vr(this,t,e):null}matches(t){return t instanceof Ur&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Vr{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new vr(this,t,e):null}createEvent(t,e){(0,s.hu)(null!=t.childName,"Child events should have a childName.");const n=Cr(new Er(e._repo,e._path),t.childName),i=e._queryParams.getIndex();return new yr(t.type,this,new Ar(t.snapshotNode,n,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Vr&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $r(t,e,n,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const e=n,i=(n,i)=>{ir(t._repo,t,a),e(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new br(n,s||void 0),a="value"===e?new Ur(o):new Vr(e,o);return function(t,e,n){let i;i=".info"===dt(e._path)?Xn(t.infoSyncTree_,e,n):Xn(t.serverSyncTree_,e,n),$i(t.eventQueue_,e._path,i)}(t._repo,t,a),()=>ir(t._repo,t,a)}function Br(t,e,n,i){return $r(t,"value",e,n,i)}function qr(t,e,n,i){return $r(t,"child_added",e,n,i)}function zr(t,e,n,i){return $r(t,"child_changed",e,n,i)}function Gr(t,e,n,i){return $r(t,"child_moved",e,n,i)}function Wr(t,e,n,i){return $r(t,"child_removed",e,n,i)}function Hr(t,e,n){let i=null;const r=n?new br(n):null;"value"===e?i=new Ur(r):e&&(i=new Vr(e,r)),ir(t._repo,t,i)}class Kr{}class Yr extends Kr{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Di("endAt",this._value,t._path,!0);const e=ve(t._queryParams,this._value,this._key);if(Ir(e),Sr(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tr(t._repo,t._path,e,t._orderByCalled)}}function Xr(t,e){return Mi("endAt","key",e,!0),new Yr(t,e)}class Zr extends Kr{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Di("endBefore",this._value,t._path,!1);const e=function(t,e,n){let i,r;return t.index_===Nt?("string"==typeof e&&(e=ce(e)),r=ve(t,e,n)):(i=null==n?O:ce(n),r=ve(t,e,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(Ir(e),Sr(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tr(t._repo,t._path,e,t._orderByCalled)}}function Jr(t,e){return Mi("endBefore","key",e,!0),new Zr(t,e)}class Qr extends Kr{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Di("startAt",this._value,t._path,!0);const e=ye(t._queryParams,this._value,this._key);if(Ir(e),Sr(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Tr(t._repo,t._path,e,t._orderByCalled)}}function ts(t=null,e){return Mi("startAt","key",e,!0),new Qr(t,e)}class es extends Kr{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Di("startAfter",this._value,t._path,!1);const e=function(t,e,n){let i;if(t.index_===Nt)"string"==typeof e&&(e=ue(e)),i=ye(t,e,n);else{let r;r=null==n?C:ue(n),i=ye(t,e,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(Ir(e),Sr(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Tr(t._repo,t._path,e,t._orderByCalled)}}function ns(t,e){return Mi("startAfter","key",e,!0),new es(t,e)}class is extends Kr{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tr(t._repo,t._path,function(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(t._queryParams,this._limit),t._orderByCalled)}}function rs(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new is(t)}class ss extends Kr{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tr(t._repo,t._path,function(t,e){const n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(t._queryParams,this._limit),t._orderByCalled)}}function os(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ss(t)}class as extends Kr{constructor(t){super(),this._path=t}_apply(t){xr(t,"orderByChild");const e=new lt(this._path);if(vt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new re(e),i=be(t._queryParams,n);return Sr(i),new Tr(t._repo,t._path,i,!0)}}function us(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Li("orderByChild","path",t,!1),new as(t)}class cs extends Kr{_apply(t){xr(t,"orderByKey");const e=be(t._queryParams,Nt);return Sr(e),new Tr(t._repo,t._path,e,!0)}}function ls(){return new cs}class hs extends Kr{_apply(t){xr(t,"orderByPriority");const e=be(t._queryParams,Ht);return Sr(e),new Tr(t._repo,t._path,e,!0)}}function ds(){return new hs}class ps extends Kr{_apply(t){xr(t,"orderByValue");const e=be(t._queryParams,se);return Sr(e),new Tr(t._repo,t._path,e,!0)}}function fs(){return new ps}class gs extends Kr{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Di("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Yr(this._value,this._key)._apply(new Qr(this._value,this._key)._apply(t))}}function ms(t,e){return Mi("equalTo","key",e,!0),new gs(t,e)}function _s(t,...e){let n=(0,s.m9)(t);for(const t of e)n=t._apply(n);return n}!function(t){(0,s.hu)(!Pn,"__referenceConstructor has already been defined"),Pn=t}(Er),function(t){(0,s.hu)(!Rn,"__referenceConstructor has already been defined"),Rn=t}(Er);const ys={};let vs=!1;function bs(t,e,n,i,r){let s=i||t.options.databaseURL;void 0===s&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),x("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o,a,u=mr(s,r),c=u.repoInfo;"undefined"!=typeof process&&process.env&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${c.namespace}`,u=mr(s,r),c=u.repoInfo):o=!u.repoInfo.secure;const l=r&&o?new z(z.OWNER):new q(t.name,t.options,e);ji("Invalid Firebase Database URL",u),vt(u.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(t,e,n,i){let r=ys[e.name];r||(r={},ys[e.name]=r);let s=r[t.toURLString()];return s&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Wi(t,vs,n,i),r[t.toURLString()]=s,s}(c,t,l,new B(t.name,n));return new ws(h,t)}class ws{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Hi(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Er(this._repo,ht())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(t,e){const n=ys[e];n&&n[t.key]===t||E(`Database ${e}(${t.repoInfo_}) has already been deleted.`),rr(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&E("Cannot call "+t+" on a deleted database.")}}function Ts(){st.IS_TRANSPORT_INITIALIZED&&A("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function xs(){Ts(),et.forceDisallow()}function Ss(){Ts(),rt.forceDisallow(),et.forceAllow()}function Is(t=(0,i.getApp)(),e){return(0,i._getProvider)(t,"database").getImmediate({identifier:e})}function Es(t,e,n,i={}){(t=(0,s.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");const r=t._repoInternal;let o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new z(z.OWNER);else if(i.mockUserToken){const e="string"==typeof i.mockUserToken?i.mockUserToken:(0,s.Sg)(i.mockUserToken,t.app.options.projectId);o=new z(e)}!function(t,e,n,i){t.repoInfo_=new K(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),i&&(t.authTokenProvider_=i)}(r,e,n,o)}function As(t){(t=(0,s.m9)(t))._checkNotDeleted("goOffline"),rr(t._repo)}function ks(t){var e;(t=(0,s.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Gi)}function Os(t,e){T(t,e)}const Cs={".sv":"timestamp"};function Ds(){return Cs}function Ps(t){return{".sv":{increment:t}}}class Rs{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function Ns(t,e,n){var i;if(t=(0,s.m9)(t),Fi("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";const r=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i,o=new s.BH,a=Br(t,(()=>{}));return function(e,n,i,r,a,u){sr(e,"transaction on "+n);const c={path:n,update:i,onComplete:(e,n,i)=>{let r=null;e?o.reject(e):(r=new Ar(i,new Er(t._repo,t._path),Ht),o.resolve(new Rs(n,r)))},status:null,order:_(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=ar(e,n,void 0);c.currentInputSnapshot=l;const h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Pi("transaction failed: Data returned ",h,c.path),c.status=0;const t=_i(e.transactionQueueTree_,n),i=yi(t)||[];let r;i.push(c),vi(t,i),"object"==typeof h&&null!==h&&(0,s.r3)(h,".priority")?(r=(0,s.DV)(h,".priority"),(0,s.hu)(Ci(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(Zn(e.serverSyncTree_,n)||ee.EMPTY_NODE).getPriority().val();const o=Yi(e),a=ie(h,r),u=fi(a,l,o);c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=Qi(e);const d=Gn(e.serverSyncTree_,n,u,c.currentWriteId,c.applyLocally);Bi(e.eventQueue_,n,d),ur(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,r),o.promise}Ot.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ot.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};const Ms=function(t){const e=Ot.prototype.put;return Ot.prototype.put=function(n,i,r,s){void 0!==s&&(s=t()),e.call(this,n,i,r,s)},function(){Ot.prototype.put=e}},Ls=function(t){!function(t){vs=t}(t)};l(i.SDK_VERSION),(0,i._registerComponent)(new r.wA("database",((t,{instanceIdentifier:e})=>bs(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e)),"PUBLIC").setMultipleInstances(!0)),(0,i.registerVersion)(a,u,undefined),(0,i.registerVersion)(a,u,"esm2017")},7753:(t,e,n)=>{"use strict";n.r(e),n.d(e,{auth:()=>Y});var i=n(4444),r=n(8463),s=n(389),o=n(3333);class a{constructor(t,e){this._delegate=t,this.firebase=e,(0,s._addComponent)(t,new r.wA("app-compat",(()=>this),"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((t=>{this._delegate.checkDestroyed(),t()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate))))}_getService(t,e=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(t);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:e})}_removeServiceInstance(t,e=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,s._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,s._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new i.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function t(){const e=function(t){const e={},n={__esModule:!0,initializeApp:function(r,o={}){const a=s.initializeApp(r,o);if((0,i.r3)(e,a.name))return e[a.name];const u=new t(a,n);return e[a.name]=u,u},app:r,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(e){const o=e.name,a=o.replace("-compat","");if(s._registerComponent(e)&&"PUBLIC"===e.type){const s=(t=r())=>{if("function"!=typeof t[a])throw u.create("invalid-app-argument",{appName:o});return t[a]()};void 0!==e.serviceProps&&(0,i.ZB)(s,e.serviceProps),n[a]=s,t.prototype[a]=function(...t){return this._getService.bind(this,o).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null},removeApp:function(t){delete e[t]},useAsService:function(t,e){return"serverAuth"===e?null:e},modularAPIs:s}};function r(t){if(t=t||s._DEFAULT_ENTRY_NAME,!(0,i.r3)(e,t))throw u.create("no-app",{appName:t});return e[t]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(e).map((t=>e[t]))}}),r.App=t,n}(a);return e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,i.ZB)(e,t)},createSubscribe:i.ne,ErrorFactory:i.LL,deepExtend:i.ZB}),e}(),l=new o.Yd("@firebase/app-compat");if((0,i.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.32",undefined),h.registerVersion("firebase","9.9.3","app-compat");var d=n(8577);function p(){return window}class f extends d.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((t=>{this.resolveInialized=t}))}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInialized(),this.passiveListeners.forEach((e=>e(t))),super.onEvent(t)}async initialized(){await this.initPromise}}async function g(t){const e=await _()._get(y(t));return e&&await _()._remove(y(t)),e}function m(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function _(){return(0,d.ay)(d.b)}function y(t){return(0,d.az)("authEvent",t.config.apiKey,t.name)}function v(t){if(!(null==t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return(0,i.zd)(n.join("?"))}function b(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,d.aw)("no-auth-event")}}function w(){var t;return(null===(t=null===self||void 0===self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function T(t=(0,i.z$)()){return!("file:"!==w()&&"ionic:"!==w()&&"capacitor:"!==w()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function x(){try{const t=self.localStorage,e=d.aI();if(t)return t.setItem(e,"1"),t.removeItem(e),!function(t=(0,i.z$)()){return(0,i.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(t=(0,i.z$)()){return/Edge\/\d+/.test(t)}(t)}()||(0,i.hl)()}catch(t){return S()&&(0,i.hl)()}return!1}function S(){return void 0!==n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function I(){return("http:"===w()||"https:"===w()||(0,i.ru)()||T())&&!((0,i.b$)()||(0,i.UG)())&&x()&&!S()}function E(){return T()&&"undefined"!=typeof document}const A={LOCAL:"local",NONE:"none",SESSION:"session"},k=d.ax,O="persistence";async function C(t){await t._initializationPromise;const e=D(),n=d.az(O,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function D(){var t;try{return(null===(t="undefined"!=typeof window?window:null)||void 0===t?void 0:t.sessionStorage)||null}catch(t){return null}}const P=d.ax;class R{constructor(){this.browserResolver=d.ay(d.k),this.cordovaResolver=d.ay(class{constructor(){this._redirectPersistence=d.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=d.aB,this._overrideRedirectResult=d.aC}async _initialize(t){const e=t._key();let n=this.eventManagers.get(e);return n||(n=new f(t),this.eventManagers.set(e,n),this.attachCallbackListeners(t,n)),n}_openPopup(t){(0,d.at)(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,e,n,i){!function(t){var e,n,i,r,s,o,a,u,c,l;const h=p();(0,d.ax)("function"==typeof(null===(e=null==h?void 0:h.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,d.ax)(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,d.ax)("function"==typeof(null===(s=null===(r=null===(i=null==h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,d.ax)("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,d.ax)("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t);const r=await this._initialize(t);await r.initialized(),r.resetRedirect(),(0,d.aD)(),await this._originValidation(t);const s=function(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:m(),postBody:null,tenantId:t.tenantId,error:(0,d.aw)(t,"no-auth-event")}}(t,n,i);await function(t,e){return _()._set(y(t),e)}(t,s);const o=await async function(t,e,n){var i;const{BuildInfo:r}=p();(0,d.aq)(e.sessionId,"AuthEvent did not contain a session ID");const s=await async function(t){const e=function(t){if((0,d.aq)(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map((t=>t.toString(16).padStart(2,"0"))).join("")}(e.sessionId),o={};return(0,d.ar)()?o.ibi=r.packageName:(0,d.as)()?o.apn=r.packageName:(0,d.at)(t,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,(0,d.au)(t,n,e.type,void 0,null!==(i=e.eventId)&&void 0!==i?i:void 0,o)}(t,s,e);return async function(t,e,n){const{cordova:i}=p();let r=()=>{};try{await new Promise(((s,o)=>{let a=null;function u(){var t;s();const e=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof e&&e(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o((0,d.aw)(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}e.addPassiveListener(u),document.addEventListener("resume",c,!1),(0,d.as)()&&document.addEventListener("visibilitychange",l,!1),r=()=>{e.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}))}finally{r()}}(t,r,await function(t){const{cordova:e}=p();return new Promise((n=>{e.plugins.browsertab.isAvailable((i=>{let r=null;i?e.plugins.browsertab.openUrl(t):r=e.InAppBrowser.open(t,(0,d.ap)()?"_blank":"_system","location=yes"),n(r)}))}))}(o))}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=async function(t){const{BuildInfo:e}=p(),n={};(0,d.ar)()?n.iosBundleId=e.packageName:(0,d.as)()?n.androidPackageName=e.packageName:(0,d.at)(t,"operation-not-supported-in-this-environment"),await(0,d.av)(t,n)}(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:i,BuildInfo:r}=p(),s=setTimeout((async()=>{await g(t),e.onEvent(b())}),500),o=async n=>{clearTimeout(s);const i=await g(t);let r=null;i&&(null==n?void 0:n.url)&&(r=function(t,e){var n,i;const r=function(t){const e=v(t),n=e.link?decodeURIComponent(e.link):void 0,i=v(n).link,r=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return v(r).link||r||i||n||t}(e);if(r.includes("/__/auth/callback")){const e=v(r),s=e.firebaseError?function(t){try{return JSON.parse(t)}catch(t){return null}}(decodeURIComponent(e.firebaseError)):null,o=null===(i=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?(0,d.aw)(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:r,postBody:null}}return null}(i,n.url)),e.onEvent(r||b())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=i,u=`${r.packageName.toLowerCase()}://`;p().handleOpenURL=async t=>{if(t.toLowerCase().startsWith(u)&&o({url:t}),"function"==typeof a)try{a(t)}catch(t){console.error(t)}}}}),this.underlyingResolver=null,this._redirectPersistence=d.a,this._completeRedirectFn=d.aB,this._overrideRedirectResult=d.aC}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,e,n,i)}async _openRedirect(t,e,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,e,n,i)}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return E()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return P(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await async function(){return!!E()&&new Promise((t=>{const e=setTimeout((()=>{t(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(e),t(!0)}))}))}();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}function N(t){return t.unwrap()}function M(t){const{_tokenResponse:e}=t instanceof i.ZR?t.customData:t;if(!e)return null;if(!(t instanceof i.ZR)&&"temporaryProof"in e&&"phoneNumber"in e)return d.P.credentialFromResult(t);const n=e.providerId;if(!n||n===d.o.PASSWORD)return null;let r;switch(n){case d.o.GOOGLE:r=d.Q;break;case d.o.FACEBOOK:r=d.N;break;case d.o.GITHUB:r=d.T;break;case d.o.TWITTER:r=d.W;break;default:const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=e;return i||s||t||o?o?n.startsWith("saml.")?d.aL._create(n,o):d.J._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:t,accessToken:i}):new d.U(n).credential({idToken:t,accessToken:i,rawNonce:a}):null}return t instanceof i.ZR?r.credentialFromError(t):r.credentialFromResult(t)}function L(t,e){return e.catch((e=>{throw e instanceof i.ZR&&function(t,e){var n,i;const r=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(i=e)||void 0===i?void 0:i.code))e.resolver=new j(t,d.an(t,e));else if(r){const t=M(e),n=e;t&&(n.credential=t,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(t,e),e})).then((t=>{const e=t.operationType,n=t.user;return{operationType:e,credential:(i=t,M(i)),additionalUserInfo:d.al(t),user:U.getOrCreate(n)};var i}))}async function F(t,e){const n=await e;return{verificationId:n.verificationId,confirm:e=>L(t,n.confirm(e))}}class j{constructor(t,e){this.resolver=e,this.auth=t.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return L(N(this.auth),this.resolver.resolveSignIn(t))}}class U{constructor(t){this._delegate=t,this.multiFactor=d.ao(t)}static getOrCreate(t){return U.USER_MAP.has(t)||U.USER_MAP.set(t,new U(t)),U.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return L(this.auth,d.Z(this._delegate,t))}async linkWithPhoneNumber(t,e){return F(this.auth,d.l(this._delegate,t,e))}async linkWithPopup(t){return L(this.auth,d.d(this._delegate,t,R))}async linkWithRedirect(t){return await C(d.aE(this.auth)),d.g(this._delegate,t,R)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return L(this.auth,d._(this._delegate,t))}reauthenticateWithPhoneNumber(t,e){return F(this.auth,d.r(this._delegate,t,e))}reauthenticateWithPopup(t){return L(this.auth,d.e(this._delegate,t,R))}async reauthenticateWithRedirect(t){return await C(d.aE(this.auth)),d.h(this._delegate,t,R)}sendEmailVerification(t){return d.ab(this._delegate,t)}async unlink(t){return await d.ak(this._delegate,t),this}updateEmail(t){return d.ag(this._delegate,t)}updatePassword(t){return d.ah(this._delegate,t)}updatePhoneNumber(t){return d.u(this._delegate,t)}updateProfile(t){return d.af(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return d.ac(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}U.USER_MAP=new WeakMap;const V=d.ax;class ${constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;V(n,"invalid-api-key",{appName:t.name}),V(n,"invalid-api-key",{appName:t.name});const i="undefined"!=typeof window?R:void 0;this._delegate=e.initialize({options:{persistence:q(n,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(d.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?U.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){d.G(this._delegate,t,e)}applyActionCode(t){return d.a2(this._delegate,t)}checkActionCode(t){return d.a3(this._delegate,t)}confirmPasswordReset(t,e){return d.a1(this._delegate,t,e)}async createUserWithEmailAndPassword(t,e){return L(this._delegate,d.a5(this._delegate,t,e))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return d.aa(this._delegate,t)}isSignInWithEmailLink(t){return d.a8(this._delegate,t)}async getRedirectResult(){V(I(),this._delegate,"operation-not-supported-in-this-environment");const t=await d.j(this._delegate,R);return t?L(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){!function(t,e){(0,d.aE)(t)._logFramework(e)}(this._delegate,t)}onAuthStateChanged(t,e,n){const{next:i,error:r,complete:s}=B(t,e,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(t,e,n){const{next:i,error:r,complete:s}=B(t,e,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(t,e){return d.a7(this._delegate,t,e)}sendPasswordResetEmail(t,e){return d.a0(this._delegate,t,e||void 0)}async setPersistence(t){let e;switch(function(t,e){k(Object.values(A).includes(e),t,"invalid-persistence-type"),(0,i.b$)()?k(e!==A.SESSION,t,"unsupported-persistence-type"):(0,i.UG)()?k(e===A.NONE,t,"unsupported-persistence-type"):S()?k(e===A.NONE||e===A.LOCAL&&(0,i.hl)(),t,"unsupported-persistence-type"):k(e===A.NONE||x(),t,"unsupported-persistence-type")}(this._delegate,t),t){case A.SESSION:e=d.a;break;case A.LOCAL:e=await d.ay(d.i)._isAvailable()?d.i:d.b;break;case A.NONE:e=d.L;break;default:return d.at("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(e)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return L(this._delegate,d.X(this._delegate))}signInWithCredential(t){return L(this._delegate,d.Y(this._delegate,t))}signInWithCustomToken(t){return L(this._delegate,d.$(this._delegate,t))}signInWithEmailAndPassword(t,e){return L(this._delegate,d.a6(this._delegate,t,e))}signInWithEmailLink(t,e){return L(this._delegate,d.a9(this._delegate,t,e))}signInWithPhoneNumber(t,e){return F(this._delegate,d.s(this._delegate,t,e))}async signInWithPopup(t){return V(I(),this._delegate,"operation-not-supported-in-this-environment"),L(this._delegate,d.c(this._delegate,t,R))}async signInWithRedirect(t){return V(I(),this._delegate,"operation-not-supported-in-this-environment"),await C(this._delegate),d.f(this._delegate,t,R)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return d.a4(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function B(t,e,n){let i=t;"function"!=typeof t&&({next:i,error:e,complete:n}=t);const r=i;return{next:t=>r(t&&U.getOrCreate(t)),error:e,complete:n}}function q(t,e){const n=function(t,e){const n=D();if(!n)return[];const i=d.az(O,t,e);switch(n.getItem(i)){case A.NONE:return[d.L];case A.LOCAL:return[d.i,d.a];case A.SESSION:return[d.a];default:return[]}}(t,e);if("undefined"==typeof self||n.includes(d.i)||n.push(d.i),"undefined"!=typeof window)for(const t of[d.b,d.a])n.includes(t)||n.push(t);return n.includes(d.L)||n.push(d.L),n}$.Persistence=A;class z{constructor(){this.providerId="phone",this._delegate=new d.P(N(h.auth()))}static credential(t,e){return d.P.credential(t,e)}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}z.PHONE_SIGN_IN_METHOD=d.P.PHONE_SIGN_IN_METHOD,z.PROVIDER_ID=d.P.PROVIDER_ID;const G=d.ax;var W;(W=h).INTERNAL.registerComponent(new r.wA("auth-compat",(t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new $(e,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:d.A.EMAIL_SIGNIN,PASSWORD_RESET:d.A.PASSWORD_RESET,RECOVER_EMAIL:d.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:d.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:d.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:d.A.VERIFY_EMAIL}},EmailAuthProvider:d.M,FacebookAuthProvider:d.N,GithubAuthProvider:d.T,GoogleAuthProvider:d.Q,OAuthProvider:d.U,SAMLAuthProvider:d.V,PhoneAuthProvider:z,PhoneMultiFactorGenerator:d.m,RecaptchaVerifier:class{constructor(t,e,n=h.app()){var i;G(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new d.R(t,e,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:d.W,Auth:$,AuthCredential:d.H,Error:i.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),W.registerVersion("@firebase/auth-compat","0.2.18");var H=n(7211),K=n.n(H);n(3544),n(4997),n(4210),n(5634),n(6573),function(){(function(){var t,e,i="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var r;t:{var s={};try{s.__proto__={xb:!0},r=s.xb;break t}catch(Xt){}r=!1}e=r?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var o=e;function a(t,e){if(t.prototype=i(e.prototype),t.prototype.constructor=t,o)o(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.K=e.prototype}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},c="undefined"!=typeof window&&window===this?this:void 0!==n.g&&null!=n.g?n.g:this;function l(t,e){if(e){var n=c;t=t.split(".");for(var i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&u(n,t,{configurable:!0,writable:!0,value:e})}}l("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),l("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(e=e||0)&&(e=Math.max(e+i,0));e<i;e++){var r=n[e];if(r===t||Object.is(r,t))return!0}return!1}}));var d=this;function p(t){return void 0!==t}function f(t){return"string"==typeof t}var g=/^[\w+/_-]+[=]{0,2}$/,m=null;function _(){}function y(t){t.W=void 0,t.Xa=function(){return t.W?t.W:t.W=new t}}function v(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function b(t){return"array"==v(t)}function w(t){var e=v(t);return"array"==e||"object"==e&&"number"==typeof t.length}function T(t){return"function"==v(t)}function x(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var S="closure_uid_"+(1e9*Math.random()>>>0),I=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function A(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function k(t,e,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:A).apply(null,arguments)}function O(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function C(t,e){for(var n in e)t[n]=e[n]}var D,P=Date.now||function(){return+new Date};function R(t,e){t=t.split(".");var n,i=d;t[0]in i||void 0===i.execScript||i.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)!t.length&&p(e)?i[n]=e:i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}}function N(t,e){function n(){}n.prototype=e.prototype,t.K=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.vc=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function M(t){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");M.call(this,n+t[i])}function F(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}N(M,Error),M.prototype.name="CustomError",N(L,M),L.prototype.name="AssertionError";var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(f(t))return f(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=f(t)?t.split(""):t,s=0;s<i;s++)s in r&&e.call(n,r[s],s,t)},V=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=[],r=0,s=f(t)?t.split(""):t,o=0;o<n;o++)if(o in s){var a=s[o];e.call(void 0,a,o,t)&&(i[r++]=a)}return i},$=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r=f(t)?t.split(""):t,s=0;s<n;s++)s in r&&(i[s]=e.call(void 0,r[s],s,t));return i},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=f(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function q(t,e){return 0<=j(t,e)}function z(t,e){var n;return(n=0<=(e=j(t,e)))&&G(t,e),n}function G(t,e){return 1==Array.prototype.splice.call(t,e,1).length}function W(t){return Array.prototype.concat.apply([],arguments)}function H(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}function K(t,e,n){return 2>=arguments.length?Array.prototype.slice.call(t,e):Array.prototype.slice.call(t,e,n)}var Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Z=/</g,J=/>/g,Q=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function it(t,e){return t<e?-1:t>e?1:0}function rt(t){return nt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Q,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(tt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function st(t,e,n){for(var i in t)e.call(n,t[i],i,t)}function ot(t){var e,n={};for(e in t)n[e]=t[e];return n}var at="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ut(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var s=0;s<at.length;s++)n=at[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}var ct="StopIteration"in d?d.StopIteration:{message:"StopIteration",stack:""};function lt(){}function ht(t){if(t instanceof lt)return t;if("function"==typeof t.ha)return t.ha(!1);if(w(t)){var e=0,n=new lt;return n.next=function(){for(;;){if(e>=t.length)throw ct;if(e in t)return t[e++];e++}},n}throw Error("Not implemented")}function dt(t,e){this.g={},this.a=[],this.j=this.h=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof dt)for(n=t.ja(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function pt(t){if(t.h!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];ft(t.g,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.h!=t.a.length){var r={};for(n=e=0;e<t.a.length;)ft(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function ft(t,e){return Object.prototype.hasOwnProperty.call(t,e)}lt.prototype.next=function(){throw ct},lt.prototype.ha=function(){return this},(t=dt.prototype).la=function(){pt(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.g[this.a[e]]);return t},t.ja=function(){return pt(this),this.a.concat()},t.clear=function(){this.g={},this.j=this.h=this.a.length=0},t.get=function(t,e){return ft(this.g,t)?this.g[t]:e},t.set=function(t,e){ft(this.g,t)||(this.h++,this.a.push(t),this.j++),this.g[t]=e},t.forEach=function(t,e){for(var n=this.ja(),i=0;i<n.length;i++){var r=n[i],s=this.get(r);t.call(e,s,r,this)}},t.ha=function(t){pt(this);var e=0,n=this.j,i=this,r=new lt;return r.next=function(){if(n!=i.j)throw Error("The map has changed since the iterator was created");if(e>=i.a.length)throw ct;var r=i.a[e++];return t?r:i.g[r]},r};var gt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mt(t,e,n,i){for(var r=n.length;0<=(e=t.indexOf(n,e))&&e<i;){var s=t.charCodeAt(e-1);if(!(38!=s&&63!=s||(s=t.charCodeAt(e+r))&&61!=s&&38!=s&&35!=s))return e;e+=r+1}return-1}var _t=/#|$/;function yt(t,e){var n=t.search(_t),i=mt(t,0,e,n);if(0>i)return null;var r=t.indexOf("&",i);return(0>r||r>n)&&(r=n),i+=e.length+1,decodeURIComponent(t.substr(i,r-i).replace(/\+/g," "))}var vt=/[?&]($|#)/;function bt(t,e){var n;this.h=this.A=this.j="",this.C=null,this.s=this.g="",this.i=!1,t instanceof bt?(this.i=p(e)?e:t.i,wt(this,t.j),this.A=t.A,this.h=t.h,Tt(this,t.C),this.g=t.g,xt(this,Ft(t.a)),this.s=t.s):t&&(n=String(t).match(gt))?(this.i=!!e,wt(this,n[1]||"",!0),this.A=It(n[2]||""),this.h=It(n[3]||"",!0),Tt(this,n[4]),this.g=It(n[5]||"",!0),xt(this,n[6]||"",!0),this.s=It(n[7]||"")):(this.i=!!e,this.a=new Rt(null,this.i))}function wt(t,e,n){t.j=n?It(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Tt(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.C=e}else t.C=null}function xt(t,e,n){e instanceof Rt?(t.a=e,function(t,e){e&&!t.j&&(Nt(t),t.h=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Mt(this,e),Mt(this,n),0<t.length&&(this.h=null,this.a.set(jt(this,n),H(t)),this.g+=t.length))}),t)),t.j=e}(t.a,t.i)):(n||(e=Et(e,Dt)),t.a=new Rt(e,t.i))}function St(t){return t instanceof bt?new bt(t):new bt(t,void 0)}function It(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Et(t,e,n){return f(t)?(t=encodeURI(t).replace(e,At),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function At(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Et(e,kt,!0),":");var n=this.h;return(n||"file"==e)&&(t.push("//"),(e=this.A)&&t.push(Et(e,kt,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.C)&&t.push(":",String(n))),(n=this.g)&&(this.h&&"/"!=n.charAt(0)&&t.push("/"),t.push(Et(n,"/"==n.charAt(0)?Ct:Ot,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.s)&&t.push("#",Et(n,Pt)),t.join("")};var kt=/[#\/\?@]/g,Ot=/[#\?:]/g,Ct=/[#\?]/g,Dt=/[#\?@]/g,Pt=/#/g;function Rt(t,e){this.g=this.a=null,this.h=t||null,this.j=!!e}function Nt(t){t.a||(t.a=new dt,t.g=0,t.h&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(t.h,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Mt(t,e){Nt(t),e=jt(t,e),ft(t.a.g,e)&&(t.h=null,t.g-=t.a.get(e).length,ft((t=t.a).g,e)&&(delete t.g[e],t.h--,t.j++,t.a.length>2*t.h&&pt(t)))}function Lt(t,e){return Nt(t),e=jt(t,e),ft(t.a.g,e)}function Ft(t){var e=new Rt;return e.h=t.h,t.a&&(e.a=new dt(t.a),e.g=t.g),e}function jt(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Ut(t){this.a=St(t)}function Vt(t){return t.a.a.get(qt.Pa)||null}function $t(t,e){e?t.a.a.set(qt.PROVIDER_ID,e):Mt(t.a.a,qt.PROVIDER_ID)}(t=Rt.prototype).add=function(t,e){Nt(this),this.h=null,t=jt(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.g+=1,this},t.clear=function(){this.a=this.h=null,this.g=0},t.forEach=function(t,e){Nt(this),this.a.forEach((function(n,i){U(n,(function(n){t.call(e,n,i,this)}),this)}),this)},t.ja=function(){Nt(this);for(var t=this.a.la(),e=this.a.ja(),n=[],i=0;i<e.length;i++)for(var r=t[i],s=0;s<r.length;s++)n.push(e[i]);return n},t.la=function(t){Nt(this);var e=[];if(f(t))Lt(this,t)&&(e=W(e,this.a.get(jt(this,t))));else{t=this.a.la();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return Nt(this),this.h=null,Lt(this,t=jt(this,t))&&(this.g-=this.a.get(t).length),this.a.set(t,[e]),this.g+=1,this},t.get=function(t,e){return t&&0<(t=this.la(t)).length?String(t[0]):e},t.toString=function(){if(this.h)return this.h;if(!this.a)return"";for(var t=[],e=this.a.ja(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.la(i);for(var s=0;s<i.length;s++){var o=r;""!==i[s]&&(o+="="+encodeURIComponent(String(i[s]))),t.push(o)}}return this.h=t.join("&")},Ut.prototype.toString=function(){return this.a.toString()};var Bt,qt={Pa:"ui_auid",lc:"apiKey",Qa:"ui_sd",ub:"mode",$a:"oobCode",PROVIDER_ID:"ui_pid",Sa:"ui_sid",vb:"tenantId"};t:{var zt=d.navigator;if(zt){var Gt=zt.userAgent;if(Gt){Bt=Gt;break t}}Bt=""}function Wt(t){return-1!=Bt.indexOf(t)}function Ht(){return(Wt("Chrome")||Wt("CriOS"))&&!Wt("Edge")}function Kt(t){return Kt[" "](t),t}Kt[" "]=_;var Yt,Xt,Zt=Wt("Opera"),Jt=Wt("Trident")||Wt("MSIE"),Qt=Wt("Edge"),te=Qt||Jt,ee=Wt("Gecko")&&!(-1!=Bt.toLowerCase().indexOf("webkit")&&!Wt("Edge"))&&!(Wt("Trident")||Wt("MSIE"))&&!Wt("Edge"),ne=-1!=Bt.toLowerCase().indexOf("webkit")&&!Wt("Edge"),ie=ne&&Wt("Mobile"),re=Wt("Macintosh");function se(){var t=d.document;return t?t.documentMode:void 0}t:{var oe="",ae=(Xt=Bt,ee?/rv:([^\);]+)(\)|;)/.exec(Xt):Qt?/Edge\/([\d\.]+)/.exec(Xt):Jt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):ne?/WebKit\/(\S+)/.exec(Xt):Zt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(ae&&(oe=ae?ae[1]:""),Jt){var ue=se();if(null!=ue&&ue>parseFloat(oe)){Yt=String(ue);break t}}Yt=oe}var ce,le={};function he(t){return function(t,e){var n=le;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Y(String(Yt)).split("."),i=Y(String(t)).split("."),r=Math.max(n.length,i.length),s=0;0==e&&s<r;s++){var o=n[s]||"",a=i[s]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=it(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||it(0==o[2].length,0==a[2].length)||it(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}))}var de=d.document;function pe(t,e){this.a=t===ge&&e||"",this.g=fe}ce=de&&Jt?se()||("CSS1Compat"==de.compatMode?parseInt(Yt,10):5):void 0,pe.prototype.ma=!0,pe.prototype.ka=function(){return this.a},pe.prototype.toString=function(){return"Const{"+this.a+"}"};var fe={},ge={};function me(){this.a="",this.h=ye}function _e(t){return t instanceof me&&t.constructor===me&&t.h===ye?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+v(t)),"type_error:TrustedResourceUrl")}me.prototype.ma=!0,me.prototype.ka=function(){return this.a.toString()},me.prototype.g=function(){return 1},me.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ye={};function ve(){this.a="",this.h=Se}function be(t){return t instanceof ve&&t.constructor===ve&&t.h===Se?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+v(t)),"type_error:SafeUrl")}ve.prototype.ma=!0,ve.prototype.ka=function(){return this.a.toString()},ve.prototype.g=function(){return 1},ve.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var we=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Te(t){return t instanceof ve?t:(t="object"==typeof t&&t.ma?t.ka():String(t),we.test(t)||(t="about:invalid#zClosurez"),Ie(t))}function xe(t){return t instanceof ve?t:(t="object"==typeof t&&t.ma?t.ka():String(t),we.test(t)||(t="about:invalid#zClosurez"),Ie(t))}var Se={};function Ie(t){var e=new ve;return e.a=t,e}function Ee(){this.a="",this.g=Ae}Ie("about:blank"),Ee.prototype.ma=!0;var Ae={};function ke(){this.a="",this.j=Ce,this.h=null}function Oe(t){return t instanceof ke&&t.constructor===ke&&t.j===Ce?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+v(t)),"type_error:SafeHtml")}Ee.prototype.ka=function(){return this.a},Ee.prototype.toString=function(){return"SafeStyle{"+this.a+"}"},ke.prototype.g=function(){return this.h},ke.prototype.ma=!0,ke.prototype.ka=function(){return this.a.toString()},ke.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ce={};function De(t,e){var n=new ke;return n.a=t,n.h=e,n}De("<!DOCTYPE html>",0);var Pe=De("",0);De("<br>",0);var Re,Ne,Me=(Ne=!1,function(){return Ne||(Re=function(){if("undefined"==typeof document)return!1;var t=document.createElement("div"),e=document.createElement("div");return e.appendChild(document.createElement("div")),t.appendChild(e),!!t.firstChild&&(e=t.firstChild.firstChild,t.innerHTML=Oe(Pe),!e.parentElement)}(),Ne=!0),Re});function Le(t,e){e=e instanceof ve?e:xe(e),t.assign(be(e))}function Fe(t,e){this.a=p(t)?t:0,this.g=p(e)?e:0}function je(t,e){this.width=t,this.height=e}function Ue(t){return t?new Ye(We(t)):D||(D=new Ye)}function Ve(t,e){var n=e||document;return n.querySelectorAll&&n.querySelector?n.querySelectorAll("."+t):Be(document,t,e)}function $e(t,e){var n=e||document;if(n.getElementsByClassName)t=n.getElementsByClassName(t)[0];else{n=document;var i=e||n;t=i.querySelectorAll&&i.querySelector&&t?i.querySelector(t?"."+t:""):Be(n,t,e)[0]||null}return t||null}function Be(t,e,n){var i;if((t=n||t).querySelectorAll&&t.querySelector&&e)return t.querySelectorAll(e?"."+e:"");if(e&&t.getElementsByClassName){var r=t.getElementsByClassName(e);return r}if(r=t.getElementsByTagName("*"),e){var s={};for(n=i=0;t=r[n];n++){var o=t.className;"function"==typeof o.split&&q(o.split(/\s+/),e)&&(s[i++]=t)}return s.length=i,s}return r}Fe.prototype.toString=function(){return"("+this.a+", "+this.g+")"},Fe.prototype.ceil=function(){return this.a=Math.ceil(this.a),this.g=Math.ceil(this.g),this},Fe.prototype.floor=function(){return this.a=Math.floor(this.a),this.g=Math.floor(this.g),this},Fe.prototype.round=function(){return this.a=Math.round(this.a),this.g=Math.round(this.g),this},(t=je.prototype).toString=function(){return"("+this.width+" x "+this.height+")"},t.aspectRatio=function(){return this.width/this.height},t.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},t.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},t.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var qe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ze(t){return t.scrollingElement?t.scrollingElement:(ne||"CSS1Compat"!=t.compatMode)&&t.body||t.documentElement}function Ge(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function We(t){return 9==t.nodeType?t:t.ownerDocument||t.document}function He(t,e){if("textContent"in t)t.textContent=e;else if(3==t.nodeType)t.data=String(e);else if(t.firstChild&&3==t.firstChild.nodeType){for(;t.lastChild!=t.firstChild;)t.removeChild(t.lastChild);t.firstChild.data=String(e)}else{for(var n;n=t.firstChild;)t.removeChild(n);t.appendChild(We(t).createTextNode(String(e)))}}function Ke(t,e){return e?function(t,e){for(;t;){if(e(t))return t;t=t.parentNode}return null}(t,(function(t){return!e||f(t.className)&&q(t.className.split(/\s+/),e)})):null}function Ye(t){this.a=t||d.document||document}Ye.prototype.N=function(){return f(void 0)?this.a.getElementById(void 0):void 0};var Xe={Fc:!0},Ze={Hc:!0},Je={Ec:!0},Qe={Gc:!0};function tn(){throw Error("Do not instantiate directly")}function en(t,e,n,i){if(t=t(e||rn,void 0,n),i=(i||Ue()).a.createElement("DIV"),(t=function(t){if(!x(t))return rt(String(t));if(t instanceof tn){if(t.fa===Xe)return t.content;if(t.fa===Qe)return rt(t.content)}return F("Soy template output is unsafe for use as HTML: "+t),"zSoyz"}(t)).match(nn),t=De(t,null),Me())for(;i.lastChild;)i.removeChild(i.lastChild);return i.innerHTML=Oe(t),1==i.childNodes.length&&1==(t=i.firstChild).nodeType&&(i=t),i}tn.prototype.va=null,tn.prototype.toString=function(){return this.content};var nn=/^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i,rn={};function sn(){tn.call(this)}function on(t){return null!=t&&t.fa===Xe?t:t instanceof ke?ln(Oe(t).toString(),t.g()):ln(rt(String(String(t))),function(t){if(null!=t)switch(t.va){case 1:return 1;case-1:return-1;case 0:return 0}return null}(t))}function an(){tn.call(this)}function un(t,e){this.content=String(t),this.va=null!=e?e:null}function cn(t){return new un(t,void 0)}N(sn,tn),sn.prototype.fa=Xe,N(an,tn),an.prototype.fa=Ze,an.prototype.va=1,N(un,tn),un.prototype.fa=Qe;var ln=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return t=new e(String(t)),void 0!==n&&(t.va=n),t}}(sn),hn=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t){return new e(String(t))}}(an);function dn(t){return(t=String(t))?new un(t,void 0):""}var pn=function(t){function e(t){this.content=t}return e.prototype=t.prototype,function(t,n){return(t=String(t))?(t=new e(t),void 0!==n&&(t.va=n),t):""}}(sn);function fn(t){return null!=t&&t.fa===Xe?String(String(t.content).replace(In,"").replace(En,"&lt;")).replace(wn,yn):rt(String(t))}function gn(t){return null!=t&&t.fa===Ze?t=String(t).replace(Tn,bn):t instanceof ve?t=String(be(t).toString()).replace(Tn,bn):(t=String(t),Sn.test(t)?t=t.replace(Tn,bn):(F("Bad value `%s` for |filterNormalizeUri",[t]),t="#zSoyz")),t}function mn(t){return null!=t&&t.fa===Je?t=t.content:null==t?t="":t instanceof Ee?t instanceof Ee&&t.constructor===Ee&&t.g===Ae?t=t.a:(F("expected object of type SafeStyle, got '"+t+"' of type "+v(t)),t="type_error:SafeStyle"):(t=String(t),xn.test(t)||(F("Bad value `%s` for |filterCssValue",[t]),t="zSoyz")),t}var _n={"\0":"&#0;","\t":"&#9;","\n":"&#10;","\v":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;",'"':"&quot;","&":"&amp;","'":"&#39;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","`":"&#96;","":"&#133;","":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function yn(t){return _n[t]}var vn={"\0":"%00","":"%01","":"%02","":"%03","":"%04","":"%05","":"%06","":"%07","\b":"%08","\t":"%09","\n":"%0A","\v":"%0B","\f":"%0C","\r":"%0D","":"%0E","":"%0F","":"%10","":"%11","":"%12","":"%13","":"%14","":"%15","":"%16","":"%17","":"%18","":"%19","":"%1A","":"%1B","":"%1C","":"%1D","":"%1E","":"%1F"," ":"%20",'"':"%22","'":"%27","(":"%28",")":"%29","<":"%3C",">":"%3E","\\":"%5C","{":"%7B","}":"%7D","":"%7F","":"%C2%85","":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","":"%EF%BC%81","":"%EF%BC%83","":"%EF%BC%84","":"%EF%BC%86","":"%EF%BC%87","":"%EF%BC%88","":"%EF%BC%89","":"%EF%BC%8A","":"%EF%BC%8B","":"%EF%BC%8C","":"%EF%BC%8F","":"%EF%BC%9A","":"%EF%BC%9B","":"%EF%BC%9D","":"%EF%BC%9F","":"%EF%BC%A0","":"%EF%BC%BB","":"%EF%BC%BD"};function bn(t){return vn[t]}var wn=/[\x00\x22\x27\x3c\x3e]/g,Tn=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g,xn=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i,Sn=/^(?![^#?]*\/(?:\.|%2E){2}(?:[\/?#]|$))(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i,In=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g,En=/</g;function An(){return cn("Enter a valid phone number")}function kn(){return cn("Unable to send password reset code to specified email")}function On(){return cn("Something went wrong. Please try again.")}function Cn(){return cn("This email already exists without any means of sign-in. Please reset the password to recover.")}function Dn(t){var e="";switch((t=t||{}).code){case"invalid-argument":e+="Client specified an invalid argument.";break;case"invalid-configuration":e+="Client specified an invalid project configuration.";break;case"failed-precondition":e+="Request can not be executed in the current system state.";break;case"out-of-range":e+="Client specified an invalid range.";break;case"unauthenticated":e+="Request not authenticated due to missing, invalid, or expired OAuth token.";break;case"permission-denied":e+="Client does not have sufficient permission.";break;case"not-found":e+="Specified resource is not found.";break;case"aborted":e+="Concurrency conflict, such as read-modify-write conflict.";break;case"already-exists":e+="The resource that a client tried to create already exists.";break;case"resource-exhausted":e+="Either out of resource quota or reaching rate limiting.";break;case"cancelled":e+="Request cancelled by the client.";break;case"data-loss":e+="Unrecoverable data loss or data corruption.";break;case"unknown":e+="Unknown server error.";break;case"internal":e+="Internal server error.";break;case"not-implemented":e+="API method not implemented by the server.";break;case"unavailable":e+="Service unavailable.";break;case"deadline-exceeded":e+="Request deadline exceeded.";break;case"auth/user-disabled":e+="The user account has been disabled by an administrator.";break;case"auth/timeout":e+="The operation has timed out.";break;case"auth/too-many-requests":e+="We have blocked all requests from this device due to unusual activity. Try again later.";break;case"auth/quota-exceeded":e+="The quota for this operation has been exceeded. Try again later.";break;case"auth/network-request-failed":e+="A network error has occurred. Try again later.";break;case"restart-process":e+="An issue was encountered when authenticating your request. Please visit the URL that redirected you to this page again to restart the authentication process.";break;case"no-matching-tenant-for-email":e+="No sign-in provider is available for the given email, please try with a different email."}return cn(e)}function Pn(t,e,n){var i=Error.call(this);this.message=i.message,"stack"in i&&(this.stack=i.stack),this.code=Rn+t,(t=e)||(t="","firebaseui/merge-conflict"===this.code?t+="The current anonymous user failed to upgrade. The non-anonymous credential is already associated with a different user account.":t+=On(),t=cn(t).toString()),this.message=t||"",this.credential=n||null}a(Pn,Error),Pn.prototype.toJSON=function(){return{code:this.code,message:this.message}};var Rn="firebaseui/";function Nn(){0!=Mn&&(Ln[this[S]||(this[S]=++I)]=this),this.T=this.T,this.C=this.C}var Mn=0,Ln={};function Fn(t,e){t.T?p(void 0)?e.call(void 0):e():(t.C||(t.C=[]),t.C.push(p(void 0)?k(e,void 0):e))}function jn(t){t&&"function"==typeof t.m&&t.m()}Nn.prototype.T=!1,Nn.prototype.m=function(){if(!this.T&&(this.T=!0,this.o(),0!=Mn)){var t=this[S]||(this[S]=++I);if(0!=Mn&&this.C&&0<this.C.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ln[t]}},Nn.prototype.o=function(){if(this.C)for(;this.C.length;)this.C.shift()()};var Un=Object.freeze||function(t){return t},Vn=!Jt||9<=Number(ce),$n=Jt&&!he("9"),Bn=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{d.addEventListener("test",_,e),d.removeEventListener("test",_,e)}catch(t){}return t}();function qn(t,e){this.type=t,this.g=this.target=e,this.h=!1,this.qb=!0}function zn(t,e){if(qn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.j=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ee){t:{try{Kt(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.keyCode=t.keyCode||0,this.key=t.key||"",this.j=t.charCode||("keypress"==n?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=f(t.pointerType)?t.pointerType:Gn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}qn.prototype.stopPropagation=function(){this.h=!0},qn.prototype.preventDefault=function(){this.qb=!1},N(zn,qn);var Gn=Un({2:"touch",3:"pen",4:"mouse"});zn.prototype.stopPropagation=function(){zn.K.stopPropagation.call(this),this.a.stopPropagation?this.a.stopPropagation():this.a.cancelBubble=!0},zn.prototype.preventDefault=function(){zn.K.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$n)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var Wn="closure_listenable_"+(1e6*Math.random()|0),Hn=0;function Kn(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.La=r,this.key=++Hn,this.sa=this.Ia=!1}function Yn(t){t.sa=!0,t.listener=null,t.proxy=null,t.src=null,t.La=null}function Xn(t){this.src=t,this.a={},this.g=0}function Zn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(Yn(e),0==t.a[n].length&&(delete t.a[n],t.g--))}function Jn(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.sa&&s.listener==e&&s.capture==!!n&&s.La==i)return r}return-1}Xn.prototype.add=function(t,e,n,i,r){var s=t.toString();(t=this.a[s])||(t=this.a[s]=[],this.g++);var o=Jn(t,e,i,r);return-1<o?(e=t[o],n||(e.Ia=!1)):((e=new Kn(e,this.src,s,!!i,r)).Ia=n,t.push(e)),e};var Qn="closure_lm_"+(1e6*Math.random()|0),ti={};function ei(t,e,n,i,r){if(i&&i.once)return ii(t,e,n,i,r);if(b(e)){for(var s=0;s<e.length;s++)ei(t,e[s],n,i,r);return null}return n=di(n),t&&t[Wn]?t.J.add(String(e),n,!1,x(i)?!!i.capture:!!i,r):ni(t,e,n,!1,i,r)}function ni(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=x(r)?!!r.capture:!!r,a=li(t);if(a||(t[Qn]=a=new Xn(t)),(n=a.add(e,n,i,o,s)).proxy)return n;if(i=function(){var t=ci,e=Vn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Bn||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(oi(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function ii(t,e,n,i,r){if(b(e)){for(var s=0;s<e.length;s++)ii(t,e[s],n,i,r);return null}return n=di(n),t&&t[Wn]?t.J.add(String(e),n,!0,x(i)?!!i.capture:!!i,r):ni(t,e,n,!0,i,r)}function ri(t,e,n,i,r){if(b(e))for(var s=0;s<e.length;s++)ri(t,e[s],n,i,r);else i=x(i)?!!i.capture:!!i,n=di(n),t&&t[Wn]?(t=t.J,(e=String(e).toString())in t.a&&-1<(n=Jn(s=t.a[e],n,i,r))&&(Yn(s[n]),G(s,n),0==s.length&&(delete t.a[e],t.g--))):t&&(t=li(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Jn(e,n,i,r)),(n=-1<t?e[t]:null)&&si(n))}function si(t){if("number"!=typeof t&&t&&!t.sa){var e=t.src;if(e&&e[Wn])Zn(e.J,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(oi(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=li(e))?(Zn(n,t),0==n.g&&(n.src=null,e[Qn]=null)):Yn(t)}}}function oi(t){return t in ti?ti[t]:ti[t]="on"+t}function ai(t,e,n,i){var r=!0;if((t=li(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var s=e[t];s&&s.capture==n&&!s.sa&&(s=ui(s,i),r=r&&!1!==s)}return r}function ui(t,e){var n=t.listener,i=t.La||t.src;return t.Ia&&si(t),n.call(i,e)}function ci(t,e){if(t.sa)return!0;if(!Vn){if(!e)t:{e=["window","event"];for(var n=d,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new zn(i=e,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.g;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;!e.h&&0<=r;r--){e.g=i[r];var s=ai(i[r],t,!0,e);n=n&&s}for(r=0;!e.h&&r<i.length;r++)e.g=i[r],s=ai(i[r],t,!1,e),n=n&&s}return n}return ui(t,new zn(e,this))}function li(t){return(t=t[Qn])instanceof Xn?t:null}var hi="__closure_events_fn_"+(1e9*Math.random()>>>0);function di(t){return T(t)?t:(t[hi]||(t[hi]=function(e){return t.handleEvent(e)}),t[hi])}function pi(){Nn.call(this),this.J=new Xn(this),this.wb=this,this.Ha=null}function fi(t,e){var n,i=t.Ha;if(i)for(n=[];i;i=i.Ha)n.push(i);if(t=t.wb,i=e.type||e,f(e))e=new qn(e,t);else if(e instanceof qn)e.target=e.target||t;else{var r=e;ut(e=new qn(i,t),r)}if(r=!0,n)for(var s=n.length-1;!e.h&&0<=s;s--){var o=e.g=n[s];r=gi(o,i,!0,e)&&r}if(e.h||(r=gi(o=e.g=t,i,!0,e)&&r,e.h||(r=gi(o,i,!1,e)&&r)),n)for(s=0;!e.h&&s<n.length;s++)r=gi(o=e.g=n[s],i,!1,e)&&r;return r}function gi(t,e,n,i){if(!(e=t.J.a[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.sa&&o.capture==n){var a=o.listener,u=o.La||o.src;o.Ia&&Zn(t.J,o),r=!1!==a.call(u,i)&&r}}return r&&0!=i.qb}N(pi,Nn),pi.prototype[Wn]=!0,pi.prototype.Za=function(t){this.Ha=t},pi.prototype.removeEventListener=function(t,e,n,i){ri(this,t,e,n,i)},pi.prototype.o=function(){if(pi.K.o.call(this),this.J){var t,e=this.J;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)Yn(n[i]);delete e.a[t],e.g--}}this.Ha=null};var mi={},_i=0;function yi(t,e){if(!t)throw Error("Event target element must be provided!");if(t=vi(t),mi[t]&&mi[t].length)for(var n=0;n<mi[t].length;n++)fi(mi[t][n],e)}function vi(t){return void 0===t.a&&(t.a=_i,_i++),t.a}function bi(t){if(!t)throw Error("Event target element must be provided!");pi.call(this),this.a=t}function wi(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function Ti(t,e){this.h=t,this.j=e,this.g=0,this.a=null}function xi(t,e){t.j(e),100>t.g&&(t.g++,e.next=t.a,t.a=e)}function Si(){this.g=this.a=null}a(bi,pi),bi.prototype.N=function(){return this.a},bi.prototype.register=function(){var t=vi(this.N());mi[t]?q(mi[t],this)||mi[t].push(this):mi[t]=[this]},Ti.prototype.get=function(){if(0<this.g){this.g--;var t=this.a;this.a=t.next,t.next=null}else t=this.h();return t};var Ii,Ei,Ai=new Ti((function(){return new Oi}),(function(t){t.reset()}));function ki(){var t=Ri,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.g=null),e.next=null),e}function Oi(){this.next=this.g=this.a=null}function Ci(t){d.setTimeout((function(){throw t}),0)}function Di(t,e){Ei||function(){if(d.Promise&&d.Promise.resolve){var t=d.Promise.resolve(void 0);Ei=function(){t.then(Ni)}}else Ei=function(){var t=Ni;!T(d.setImmediate)||d.Window&&d.Window.prototype&&!Wt("Edge")&&d.Window.prototype.setImmediate==d.setImmediate?(Ii||(Ii=function(){var t=d.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Wt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(""),t.close();var n="callImmediate"+Math.random(),i="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=k((function(t){"*"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!Wt("Trident")&&!Wt("MSIE")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(p(n.next)){var t=(n=n.next).gb;n.gb=null,t()}},function(t){i.next={gb:t},i=i.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){d.setTimeout(t,0)}}()),Ii(t)):d.setImmediate(t)}}(),Pi||(Ei(),Pi=!0),Ri.add(t,e)}Si.prototype.add=function(t,e){var n=Ai.get();n.set(t,e),this.g?this.g.next=n:this.a=n,this.g=n},Oi.prototype.set=function(t,e){this.a=t,this.g=e,this.next=null},Oi.prototype.reset=function(){this.next=this.g=this.a=null};var Pi=!1,Ri=new Si;function Ni(){for(var t;t=ki();){try{t.a.call(t.g)}catch(t){Ci(t)}xi(Ai,t)}Pi=!1}function Mi(t){if(this.a=Li,this.A=void 0,this.j=this.g=this.h=null,this.s=this.i=!1,t!=_)try{var e=this;t.call(void 0,(function(t){Hi(e,Fi,t)}),(function(t){if(!(t instanceof Qi))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Hi(e,ji,t)}))}catch(t){Hi(this,ji,t)}}var Li=0,Fi=2,ji=3;function Ui(){this.next=this.j=this.g=this.s=this.a=null,this.h=!1}Ui.prototype.reset=function(){this.j=this.g=this.s=this.a=null,this.h=!1};var Vi=new Ti((function(){return new Ui}),(function(t){t.reset()}));function $i(t,e,n){var i=Vi.get();return i.s=t,i.g=e,i.j=n,i}function Bi(t){if(t instanceof Mi)return t;var e=new Mi(_);return Hi(e,Fi,t),e}function qi(t){return new Mi((function(e,n){n(t)}))}function zi(t,e){if(t.a==Li)if(t.h){var n=t.h;if(n.g){for(var i=0,r=null,s=null,o=n.g;o&&(o.h||(i++,o.a==t&&(r=o),!(r&&1<i)));o=o.next)r||(s=o);r&&(n.a==Li&&1==i?zi(n,e):(s?((i=s).next==n.j&&(n.j=i),i.next=i.next.next):Yi(n),Xi(n,r,ji,e)))}t.h=null}else Hi(t,ji,e)}function Gi(t,e){t.g||t.a!=Fi&&t.a!=ji||Ki(t),t.j?t.j.next=e:t.g=e,t.j=e}function Wi(t,e,n,i){var r=$i(null,null,null);return r.a=new Mi((function(t,s){r.s=e?function(n){try{var r=e.call(i,n);t(r)}catch(t){s(t)}}:t,r.g=n?function(e){try{var r=n.call(i,e);!p(r)&&e instanceof Qi?s(e):t(r)}catch(t){s(t)}}:s})),r.a.h=t,Gi(t,r),r.a}function Hi(t,e,n){if(t.a==Li){t===n&&(e=ji,n=new TypeError("Promise cannot resolve to itself")),t.a=1;t:{var i=n,r=t.hc,s=t.ic;if(i instanceof Mi){Gi(i,$i(r||_,s||null,t));var o=!0}else if(wi(i))i.then(r,s,t),o=!0;else{if(x(i))try{var a=i.then;if(T(a)){!function(t,e,n,i,r){function s(t){o||(o=!0,i.call(r,t))}var o=!1;try{e.call(t,(function(t){o||(o=!0,n.call(r,t))}),s)}catch(t){s(t)}}(i,a,r,s,t),o=!0;break t}}catch(e){s.call(t,e),o=!0;break t}o=!1}}o||(t.A=n,t.a=e,t.h=null,Ki(t),e!=ji||n instanceof Qi||function(t,e){t.s=!0,Di((function(){t.s&&Ji.call(null,e)}))}(t,n))}}function Ki(t){t.i||(t.i=!0,Di(t.Hb,t))}function Yi(t){var e=null;return t.g&&(e=t.g,t.g=e.next,e.next=null),t.g||(t.j=null),e}function Xi(t,e,n,i){if(n==ji&&e.g&&!e.h)for(;t&&t.s;t=t.h)t.s=!1;if(e.a)e.a.h=null,Zi(e,n,i);else try{e.h?e.s.call(e.j):Zi(e,n,i)}catch(t){Ji.call(null,t)}xi(Vi,e)}function Zi(t,e,n){e==Fi?t.s.call(t.j,n):t.g&&t.g.call(t.j,n)}Mi.prototype.then=function(t,e,n){return Wi(this,T(t)?t:null,T(e)?e:null,n)},Mi.prototype.$goog_Thenable=!0,(t=Mi.prototype).fc=function(t,e){return(t=$i(t,t,e)).h=!0,Gi(this,t),this},t.Ca=function(t,e){return Wi(this,null,t,e)},t.cancel=function(t){this.a==Li&&Di((function(){zi(this,new Qi(t))}),this)},t.hc=function(t){this.a=Li,Hi(this,Fi,t)},t.ic=function(t){this.a=Li,Hi(this,ji,t)},t.Hb=function(){for(var t;t=Yi(this);)Xi(this,t,this.a,this.A);this.i=!1};var Ji=Ci;function Qi(t){M.call(this,t)}function tr(t,e,n){e||(e={}),n=n||window;var i=t instanceof ve?t:Te(void 0!==t.href?t.href:String(t));t=e.target||t.target;var r=[];for(s in e)switch(s){case"width":case"height":case"top":case"left":r.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(s+"="+(e[s]?1:0))}var s=r.join(",");return(Wt("iPhone")&&!Wt("iPod")&&!Wt("iPad")||Wt("iPad")||Wt("iPod"))&&n.navigator&&n.navigator.standalone&&t&&"_self"!=t?(s=n.document.createElement("A"),i=i instanceof ve?i:xe(i),s.href=be(i),s.setAttribute("target",t),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,n,1),s.dispatchEvent(e),n={}):e.noreferrer?(n=n.open("",t,s),e=be(i).toString(),n&&(te&&-1!=e.indexOf(";")&&(e="'"+e.replace(/'/g,"%27")+"'"),n.opener=null,e=De('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+rt(e)+'">',null),n.document.write(Oe(e)),n.document.close())):(n=n.open(be(i).toString(),t,s))&&e.noopener&&(n.opener=null),n}function er(){try{return!(!window.opener||!window.opener.location||window.opener.location.hostname!==window.location.hostname||window.opener.location.protocol!==window.location.protocol)}catch(t){}return!1}function nr(t){tr(t,{target:window.cordova&&window.cordova.InAppBrowser?"_system":"_blank"},void 0)}function ir(t,e){if(null==(t=x(t)&&1==t.nodeType?t:document.querySelector(String(t))))throw Error(e||"Cannot find element.");return t}function rr(){return window.location.href}function sr(t){var e=gr;this.s=[],this.T=e,this.O=t||null,this.j=this.a=!1,this.h=void 0,this.J=this.l=this.A=!1,this.i=0,this.g=null,this.C=0}function or(t,e,n){t.a=!0,t.h=n,t.j=!e,lr(t)}function ar(t){if(t.a){if(!t.J)throw new hr(t);t.J=!1}}function ur(t,e,n){t.s.push([e,n,void 0]),t.a&&lr(t)}function cr(t){return B(t.s,(function(t){return T(t[1])}))}function lr(t){if(t.i&&t.a&&cr(t)){var e=t.i,n=fr[e];n&&(d.clearTimeout(n.a),delete fr[e]),t.i=0}t.g&&(t.g.C--,delete t.g),e=t.h;for(var i=n=!1;t.s.length&&!t.A;){var r=t.s.shift(),s=r[0],o=r[1];if(r=r[2],s=t.j?o:s)try{var a=s.call(r||t.O,e);p(a)&&(t.j=t.j&&(a==e||a instanceof Error),t.h=e=a),(wi(e)||"function"==typeof d.Promise&&e instanceof d.Promise)&&(i=!0,t.A=!0)}catch(i){e=i,t.j=!0,cr(t)||(n=!0)}}t.h=e,i&&(a=k(t.L,t,!0),i=k(t.L,t,!1),e instanceof sr?(ur(e,a,i),e.l=!0):e.then(a,i)),n&&(e=new pr(e),fr[e.a]=e,t.i=e.a)}function hr(){M.call(this)}function dr(){M.call(this)}function pr(t){this.a=d.setTimeout(k(this.h,this),0),this.g=t}N(Qi,M),Qi.prototype.name="cancel",sr.prototype.cancel=function(t){if(this.a)this.h instanceof sr&&this.h.cancel();else{if(this.g){var e=this.g;delete this.g,t?e.cancel(t):(e.C--,0>=e.C&&e.cancel())}this.T?this.T.call(this.O,this):this.J=!0,this.a||(t=new dr(this),ar(this),or(this,!1,t))}},sr.prototype.L=function(t,e){this.A=!1,or(this,t,e)},sr.prototype.callback=function(t){ar(this),or(this,!0,t)},sr.prototype.then=function(t,e,n){var i,r,s=new Mi((function(t,e){i=t,r=e}));return ur(this,i,(function(t){t instanceof dr?s.cancel():r(t)})),s.then(t,e,n)},sr.prototype.$goog_Thenable=!0,N(hr,M),hr.prototype.message="Deferred has already fired",hr.prototype.name="AlreadyCalledError",N(dr,M),dr.prototype.message="Deferred was canceled",dr.prototype.name="CanceledError",pr.prototype.h=function(){throw delete fr[this.a],this.g};var fr={};function gr(){if(this&&this.rb){var t=this.rb;t&&"SCRIPT"==t.tagName&&mr(t,!0,this.sb)}}function mr(t,e,n){null!=n&&d.clearTimeout(n),t.onload=_,t.onerror=_,t.onreadystatechange=_,e&&window.setTimeout((function(){Ge(t)}),0)}var _r=0,yr=1;function vr(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),M.call(this,n),this.code=t}function br(){return d.google&&d.google.accounts&&d.google.accounts.id||null}function wr(t){this.a=t||br(),this.h=!1,this.g=null}function Tr(t,e,n){return t.a&&e?(t.h=!0,new Mi((function(i){t.g=i,t.a.initialize({client_id:e,callback:i,auto_select:!n}),t.a.prompt()}))):Bi(e?Sr.Xa().load().then((function(){return t.a=br(),Tr(t,e,n)})).Ca((function(){return null})):null)}N(vr,M),wr.prototype.cancel=function(){this.a&&this.h&&(this.g&&this.g(null),this.a.cancel())},y(wr);var xr=new pe(ge,"https://accounts.google.com/gsi/client");function Sr(){this.a=null}function Ir(t,e){this.a=t,this.g=e||function(t){throw t}}function Er(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ar(t){this.s=t,this.a=this.h=this.j=this.g=null}function kr(t,e){this.name=t,this.value=e}Sr.prototype.load=function(){var t=this;if(this.a)return this.a;var e=function(){var t=xr;t instanceof pe&&t.constructor===pe&&t.g===fe?t=t.a:(F("expected object of type Const, got '"+t+"'"),t="type_error:Const");var e=new me;return e.a=t,e}();return br()?Bi():this.a=function(){var t=null;return new Mi((function(e){"complete"==d.document.readyState?e():(t=function(){e()},ii(window,"load",t))})).Ca((function(e){throw ri(window,"load",t),e}))}().then((function(){if(!br())return new Mi((function(n,i){var r=setTimeout((function(){t.a=null,i(Error("Network error!"))}),1e4);d.onGoogleLibraryLoad=function(){clearTimeout(r),n()},Bi(function(t){var e={},n=e.document||document,i=_e(t).toString(),r=document.createElement("SCRIPT"),s={rb:r,sb:void 0},o=new sr(s),a=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(a=window.setTimeout((function(){mr(r,!0);var t=new vr(yr,"Timeout reached for loading script "+i);ar(o),or(o,!1,t)}),u),s.sb=a),r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(mr(r,e.xc||!1,a),o.callback(null))},r.onerror=function(){mr(r,!0,a);var t=new vr(_r,"Error while loading script "+i);ar(o),or(o,!1,t)},ut(s=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),function(t,e){st(e,(function(e,n){e&&"object"==typeof e&&e.ma&&(e=e.ka()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:qe.hasOwnProperty(n)?t.setAttribute(qe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}(r,s),function(t,e){t.src=_e(e),null===m&&(m=(e=(e=d.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&g.test(e)?e:""),(e=m)&&t.setAttribute("nonce",e)}(r,t),function(t){var e=(t||document).getElementsByTagName("HEAD");return e&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),o}(e)).then((function(){br()&&n()})).Ca((function(e){clearTimeout(r),t.a=null,i(e)}))}))}))},y(Sr),Ir.prototype.confirm=function(t){return Bi(this.a.confirm(t)).Ca(this.g)},Er.prototype.a=null,Er.prototype.reset=function(t,e,n,i,r){this.h=i||P(),this.j=t,this.s=e,this.g=n,delete this.a},kr.prototype.toString=function(){return this.name};var Or=new kr("SEVERE",1e3),Cr=new kr("WARNING",900),Dr=new kr("CONFIG",700);function Pr(t){return t.j?t.j:t.g?Pr(t.g):(F("Root logger has no level set."),null)}Ar.prototype.log=function(t,e,n){if(t.value>=Pr(this).value)for(T(e)&&(e=e()),t=new Er(t,String(e),this.s),n&&(t.a=n),n=this;n;){var i=n,r=t;if(i.a)for(var s=0;e=i.a[s];s++)e(r);n=n.g}};var Rr={},Nr=null;function Mr(){Nr||(Nr=new Ar(""),Rr[""]=Nr,Nr.j=Dr)}function Lr(){this.a=P()}var Fr=null;function jr(t){this.j=t||"",Fr||(Fr=new Lr),this.s=Fr}function Ur(t){return 10>t?"0"+t:String(t)}function Vr(t){jr.call(this,t)}function $r(){this.s=k(this.h,this),this.a=new Vr,this.a.g=!1,this.a.h=!1,this.g=this.a.a=!1,this.j={}}Lr.prototype.set=function(t){this.a=t},Lr.prototype.reset=function(){this.set(P())},Lr.prototype.get=function(){return this.a},jr.prototype.a=!0,jr.prototype.g=!0,jr.prototype.h=!1,N(Vr,jr),$r.prototype.h=function(t){if(!this.j[t.g]){var e=function(t,e){var n=[];if(n.push(t.j," "),t.g){var i=new Date(e.h);n.push("[",Ur(i.getFullYear()-2e3)+Ur(i.getMonth()+1)+Ur(i.getDate())+" "+Ur(i.getHours())+":"+Ur(i.getMinutes())+":"+Ur(i.getSeconds())+"."+Ur(Math.floor(i.getMilliseconds()/10)),"] ")}return n.push("[",function(t,e){e=(t=(t.h-e)/1e3).toFixed(3);var n=0;if(1>t)n=2;else for(;100>t;)n++,t*=10;for(;0<n--;)e=" "+e;return e}(e,t.s.get()),"s] "),n.push("[",e.g,"] "),n.push(e.s),t.h&&(e=e.a)&&n.push("\n",e instanceof Error?e.message:e.toString()),t.a&&n.push("\n"),n.join("")}(this.a,t);qr&&function(t,e,n,i){t[e]?t[e](n,i||""):t.log(n,i||"")}(qr,function(t){if(t){if(t.value>=Or.value)return"error";if(t.value>=Cr.value)return"warn";if(t.value>=Dr.value)return"log"}return"debug"}(t.j),e,t.a)}};var Br,qr=d.console;function zr(t,e){Br&&Br.log(Or,t,e)}Br=function t(e){var n;if(Mr(),!(n=Rr[e])){n=new Ar(e);var i=e.lastIndexOf("."),r=e.substr(i+1);(i=t(e.substr(0,i))).h||(i.h={}),i.h[r]=n,n.g=i,Rr[e]=n}return n}("firebaseui");var Gr=new $r;if(1!=Gr.g){var Wr;Mr(),Wr=Nr;var Hr=Gr.s;Wr.a||(Wr.a=[]),Wr.a.push(Hr),Gr.g=!0}function Kr(t){Br&&Br.log(Cr,t,void 0)}function Yr(){this.a=("undefined"==typeof document?null:document)||{cookie:""}}function Xr(t){t=(t.a.cookie||"").split(";");for(var e,n,i=[],r=[],s=0;s<t.length;s++)-1==(e=(n=Y(t[s])).indexOf("="))?(i.push(""),r.push(n)):(i.push(n.substring(0,e)),r.push(n.substring(e+1)));return{keys:i,values:r}}(t=Yr.prototype).set=function(t,e,n,i,r,s){if(/[;=\s]/.test(t))throw Error('Invalid cookie name "'+t+'"');if(/[;\r\n]/.test(e))throw Error('Invalid cookie value "'+e+'"');p(n)||(n=-1),r=r?";domain="+r:"",i=i?";path="+i:"",s=s?";secure":"",n=0>n?"":0==n?";expires="+new Date(1970,1,1).toUTCString():";expires="+new Date(P()+1e3*n).toUTCString(),this.a.cookie=t+"="+e+r+i+n+s},t.get=function(t,e){for(var n,i=t+"=",r=(this.a.cookie||"").split(";"),s=0;s<r.length;s++){if(0==(n=Y(r[s])).lastIndexOf(i,0))return n.substr(i.length);if(n==t)return""}return e},t.ja=function(){return Xr(this).keys},t.la=function(){return Xr(this).values},t.clear=function(){for(var t=Xr(this).keys,e=t.length-1;0<=e;e--){var n=t[e];this.get(n),this.set(n,"",0,void 0,void 0)}};var Zr=new Yr;function Jr(){}function Qr(t,e,n,i){this.h=null!=t?t:-1,this.g=e||null,this.a=n||null,this.j=!!i}function ts(t,e){this.g=t,this.a=e||null}function es(t){return{email:t.g,credential:t.a&&t.a.toJSON()}}function ns(t){if(t&&t.email){var e=t.credential&&h.auth.AuthCredential.fromJSON(t.credential);return new ts(t.email,e)}return null}function is(t){this.a=t||null}function rs(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);255<r&&(e[n++]=255&r,r>>=8),e[n++]=r}return e}function ss(t){return $(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}function os(t){for(this.i=t,this.g=this.i.length/4,this.j=this.g+6,this.h=[[],[],[],[]],this.s=[[],[],[],[]],this.a=Array(as*(this.j+1)),t=0;t<this.g;t++)this.a[t]=[this.i[4*t],this.i[4*t+1],this.i[4*t+2],this.i[4*t+3]];var e=Array(4);for(t=this.g;t<as*(this.j+1);t++){if(e[0]=this.a[t-1][0],e[1]=this.a[t-1][1],e[2]=this.a[t-1][2],e[3]=this.a[t-1][3],0==t%this.g){var n=e,i=n[0];n[0]=n[1],n[1]=n[2],n[2]=n[3],n[3]=i,fs(e),e[0]^=_s[t/this.g][0],e[1]^=_s[t/this.g][1],e[2]^=_s[t/this.g][2],e[3]^=_s[t/this.g][3]}else 6<this.g&&4==t%this.g&&fs(e);this.a[t]=Array(4),this.a[t][0]=this.a[t-this.g][0]^e[0],this.a[t][1]=this.a[t-this.g][1]^e[1],this.a[t][2]=this.a[t-this.g][2]^e[2],this.a[t][3]=this.a[t-this.g][3]^e[3]}}a(Qr,Jr),Qr.prototype.set=function(t,e){Zr.set(t,e,this.h,this.g,this.a,this.j)},Qr.prototype.get=function(t){return Zr.get(t)||null},Qr.prototype.ra=function(t){var e=this.g,n=this.a;Zr.get(t),Zr.set(t,"",0,e,n)},os.prototype.A=16;var as=os.prototype.A/4;function us(t,e){for(var n,i=0;i<as;i++)for(var r=0;4>r;r++)n=e[n=4*r+i],t.h[i][r]=n}function cs(t){for(var e=[],n=0;n<as;n++)for(var i=0;4>i;i++)e[4*i+n]=t.h[n][i];return e}function ls(t,e){for(var n=0;4>n;n++)for(var i=0;4>i;i++)t.h[n][i]^=t.a[4*e+i][n]}function hs(t,e){for(var n=0;4>n;n++)for(var i=0;4>i;i++)t.h[n][i]=e[t.h[n][i]]}function ds(t){for(var e=1;4>e;e++)for(var n=0;4>n;n++)t.s[e][n]=t.h[e][n];for(e=1;4>e;e++)for(n=0;4>n;n++)t.h[e][n]=t.s[e][(n+e)%as]}function ps(t){for(var e=1;4>e;e++)for(var n=0;4>n;n++)t.s[e][(n+e)%as]=t.h[e][n];for(e=1;4>e;e++)for(n=0;4>n;n++)t.h[e][n]=t.s[e][n]}function fs(t){t[0]=gs[t[0]],t[1]=gs[t[1]],t[2]=gs[t[2]],t[3]=gs[t[3]]}var gs=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ms=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],_s=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],ys=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],vs=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26],bs=[0,9,18,27,36,45,54,63,72,65,90,83,108,101,126,119,144,153,130,139,180,189,166,175,216,209,202,195,252,245,238,231,59,50,41,32,31,22,13,4,115,122,97,104,87,94,69,76,171,162,185,176,143,134,157,148,227,234,241,248,199,206,213,220,118,127,100,109,82,91,64,73,62,55,44,37,26,19,8,1,230,239,244,253,194,203,208,217,174,167,188,181,138,131,152,145,77,68,95,86,105,96,123,114,5,12,23,30,33,40,51,58,221,212,207,198,249,240,235,226,149,156,135,142,177,184,163,170,236,229,254,247,200,193,218,211,164,173,182,191,128,137,146,155,124,117,110,103,88,81,74,67,52,61,38,47,16,25,2,11,215,222,197,204,243,250,225,232,159,150,141,132,187,178,169,160,71,78,85,92,99,106,113,120,15,6,29,20,43,34,57,48,154,147,136,129,190,183,172,165,210,219,192,201,246,255,228,237,10,3,24,17,46,39,60,53,66,75,80,89,102,111,116,125,161,168,179,186,133,140,151,158,233,224,251,242,205,196,223,214,49,56,35,42,21,28,7,14,121,112,107,98,93,84,79,70],ws=[0,11,22,29,44,39,58,49,88,83,78,69,116,127,98,105,176,187,166,173,156,151,138,129,232,227,254,245,196,207,210,217,123,112,109,102,87,92,65,74,35,40,53,62,15,4,25,18,203,192,221,214,231,236,241,250,147,152,133,142,191,180,169,162,246,253,224,235,218,209,204,199,174,165,184,179,130,137,148,159,70,77,80,91,106,97,124,119,30,21,8,3,50,57,36,47,141,134,155,144,161,170,183,188,213,222,195,200,249,242,239,228,61,54,43,32,17,26,7,12,101,110,115,120,73,66,95,84,247,252,225,234,219,208,205,198,175,164,185,178,131,136,149,158,71,76,81,90,107,96,125,118,31,20,9,2,51,56,37,46,140,135,154,145,160,171,182,189,212,223,194,201,248,243,238,229,60,55,42,33,16,27,6,13,100,111,114,121,72,67,94,85,1,10,23,28,45,38,59,48,89,82,79,68,117,126,99,104,177,186,167,172,157,150,139,128,233,226,255,244,197,206,211,216,122,113,108,103,86,93,64,75,34,41,52,63,14,5,24,19,202,193,220,215,230,237,240,251,146,153,132,143,190,181,168,163],Ts=[0,13,26,23,52,57,46,35,104,101,114,127,92,81,70,75,208,221,202,199,228,233,254,243,184,181,162,175,140,129,150,155,187,182,161,172,143,130,149,152,211,222,201,196,231,234,253,240,107,102,113,124,95,82,69,72,3,14,25,20,55,58,45,32,109,96,119,122,89,84,67,78,5,8,31,18,49,60,43,38,189,176,167,170,137,132,147,158,213,216,207,194,225,236,251,246,214,219,204,193,226,239,248,245,190,179,164,169,138,135,144,157,6,11,28,17,50,63,40,37,110,99,116,121,90,87,64,77,218,215,192,205,238,227,244,249,178,191,168,165,134,139,156,145,10,7,16,29,62,51,36,41,98,111,120,117,86,91,76,65,97,108,123,118,85,88,79,66,9,4,19,30,61,48,39,42,177,188,171,166,133,136,159,146,217,212,195,206,237,224,247,250,183,186,173,160,131,142,153,148,223,210,197,200,235,230,241,252,103,106,125,112,83,94,73,68,15,2,21,24,59,54,33,44,12,1,22,27,56,53,34,47,100,105,126,115,80,93,74,71,220,209,198,203,232,229,242,255,180,185,174,163,128,141,154,151],xs=[0,14,28,18,56,54,36,42,112,126,108,98,72,70,84,90,224,238,252,242,216,214,196,202,144,158,140,130,168,166,180,186,219,213,199,201,227,237,255,241,171,165,183,185,147,157,143,129,59,53,39,41,3,13,31,17,75,69,87,89,115,125,111,97,173,163,177,191,149,155,137,135,221,211,193,207,229,235,249,247,77,67,81,95,117,123,105,103,61,51,33,47,5,11,25,23,118,120,106,100,78,64,82,92,6,8,26,20,62,48,34,44,150,152,138,132,174,160,178,188,230,232,250,244,222,208,194,204,65,79,93,83,121,119,101,107,49,63,45,35,9,7,21,27,161,175,189,179,153,151,133,139,209,223,205,195,233,231,245,251,154,148,134,136,162,172,190,176,234,228,246,248,210,220,206,192,122,116,102,104,66,76,94,80,10,4,22,24,50,60,46,32,236,226,240,254,212,218,200,198,156,146,128,142,164,170,184,182,12,2,16,30,52,58,40,38,124,114,96,110,68,74,88,86,55,57,43,37,15,1,19,29,71,73,91,85,127,113,99,109,215,217,203,197,239,225,243,253,167,169,187,181,159,145,131,141];function Ss(t,e){t=new os(Es(t));for(var n,i=(e=rs(e)).splice(0,16),r="";i.length;){n=16-i.length;for(var s=0;s<n;s++)i.push(0);for(us(n=t,i),ls(n,0),i=1;i<n.j;++i){hs(n,gs),ds(n),s=n.h;for(var o=n.s[0],a=0;4>a;a++)o[0]=s[0][a],o[1]=s[1][a],o[2]=s[2][a],o[3]=s[3][a],s[0][a]=ys[o[0]]^vs[o[1]]^o[2]^o[3],s[1][a]=o[0]^ys[o[1]]^vs[o[2]]^o[3],s[2][a]=o[0]^o[1]^ys[o[2]]^vs[o[3]],s[3][a]=vs[o[0]]^o[1]^o[2]^ys[o[3]];ls(n,i)}hs(n,gs),ds(n),ls(n,n.j),r+=ss(cs(n)),i=e.splice(0,16)}return r}function Is(t,e){t=new os(Es(t));for(var n=[],i=0;i<e.length;i+=2)n.push(parseInt(e.substring(i,i+2),16));var r=n.splice(0,16);for(e="";r.length;){for(us(i=t,r),ls(i,i.j),r=1;r<i.j;++r){ps(i),hs(i,ms),ls(i,i.j-r);for(var s=i.h,o=i.s[0],a=0;4>a;a++)o[0]=s[0][a],o[1]=s[1][a],o[2]=s[2][a],o[3]=s[3][a],s[0][a]=xs[o[0]]^ws[o[1]]^Ts[o[2]]^bs[o[3]],s[1][a]=bs[o[0]]^xs[o[1]]^ws[o[2]]^Ts[o[3]],s[2][a]=Ts[o[0]]^bs[o[1]]^xs[o[2]]^ws[o[3]],s[3][a]=ws[o[0]]^Ts[o[1]]^bs[o[2]]^xs[o[3]]}if(ps(i),hs(i,ms),ls(i,0),8192>=(i=cs(i)).length)i=String.fromCharCode.apply(null,i);else{for(r="",s=0;s<i.length;s+=8192)r+=String.fromCharCode.apply(null,K(i,s,s+8192));i=r}e+=i,r=n.splice(0,16)}return e.replace(/(\x00)+$/,"")}function Es(t){for(var e=32-(t=rs(t.substring(0,32))).length,n=0;n<e;n++)t.push(0);return t}function As(t){var e=[];return Os(new ks,t,e),e.join("")}function ks(){}function Os(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(b(e)){var i=e;e=i.length,n.push("[");for(var r="",s=0;s<e;s++)n.push(r),Os(t,i[s],n),r=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(i in n.push("{"),r="",e)Object.prototype.hasOwnProperty.call(e,i)&&"function"!=typeof(s=e[i])&&(n.push(r),Ps(i,n),n.push(":"),Os(t,s,n),r=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":Ps(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}var Cs={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Ds=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Ps(t,e){e.push('"',t.replace(Ds,(function(t){var e=Cs[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Cs[t]=e),e})),'"')}function Rs(t){this.a=t}function Ns(){}function Ms(t){this.a=t}function Ls(t){if(!t.a)return!1;try{return t.a.setItem("__sak","1"),t.a.removeItem("__sak"),!0}catch(t){return!1}}function Fs(){var t=null;try{t=window.localStorage||null}catch(t){}this.a=t}function js(){var t=null;try{t=window.sessionStorage||null}catch(t){}this.a=t}function Us(t,e){this.g=t,this.a=e+"::"}Rs.prototype.set=function(t,e){p(e)?this.a.set(t,As(e)):this.a.ra(t)},Rs.prototype.get=function(t){try{var e=this.a.get(t)}catch(t){return}if(null!==e)try{return JSON.parse(e)}catch(t){throw"Storage: Invalid value was encountered"}},N(Ns,Jr),Ns.prototype.clear=function(){var t=function(t){if(w(t))return H(t);t=ht(t);var e=[];return function(t,e){if(w(t))try{U(t,e,void 0)}catch(t){if(t!==ct)throw t}else{t=ht(t);try{for(;;)e.call(void 0,t.next(),void 0,t)}catch(t){if(t!==ct)throw t}}}(t,(function(t){e.push(t)})),e}(this.ha(!0)),e=this;U(t,(function(t){e.ra(t)}))},N(Ms,Ns),(t=Ms.prototype).set=function(t,e){try{this.a.setItem(t,e)}catch(t){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded"}},t.get=function(t){if(!f(t=this.a.getItem(t))&&null!==t)throw"Storage mechanism: Invalid value was encountered";return t},t.ra=function(t){this.a.removeItem(t)},t.ha=function(t){var e=0,n=this.a,i=new lt;return i.next=function(){if(e>=n.length)throw ct;var i=n.key(e++);if(t)return i;if(!f(i=n.getItem(i)))throw"Storage mechanism: Invalid value was encountered";return i},i},t.clear=function(){this.a.clear()},t.key=function(t){return this.a.key(t)},N(Fs,Ms),N(js,Ms),N(Us,Ns),Us.prototype.set=function(t,e){this.g.set(this.a+t,e)},Us.prototype.get=function(t){return this.g.get(this.a+t)},Us.prototype.ra=function(t){this.g.ra(this.a+t)},Us.prototype.ha=function(t){var e=this.g.ha(!0),n=this,i=new lt;return i.next=function(){for(var i=e.next();i.substr(0,n.a.length)!=n.a;)i=e.next();return t?i.substr(n.a.length):n.g.get(i)},i},Ls(new Fs);var Vs=new js,$s=new Rs(Ls(Vs)?new Us(Vs,"firebaseui"):null),Bs={name:"pendingEmailCredential",storage:$s},qs={name:"redirectStatus",storage:$s},zs={name:"redirectUrl",storage:$s},Gs={name:"emailForSignIn",storage:new Rs(new Qr(3600,"/"))},Ws={name:"pendingEncryptedCredential",storage:new Rs(new Qr(3600,"/"))};function Hs(t,e){return t.storage.get(e?t.name+":"+e:t.name)}function Ks(t,e){t.storage.a.ra(e?t.name+":"+e:t.name)}function Ys(t,e,n){t.storage.set(n?t.name+":"+n:t.name,e)}function Xs(t){return Hs(zs,t)||null}function Zs(t){return ns(t=Hs(Bs,t)||null)}function Js(t){Ks(Bs,t)}function Qs(t,e){Ys(Bs,es(t),e)}function to(t){return(t=Hs(qs,t)||null)&&void 0!==t.tenantId?new is(t.tenantId):null}function eo(){this.W={}}function no(t,e,n){if(e.toLowerCase()in t.W)throw Error("Configuration "+e+" has already been defined.");t.W[e.toLowerCase()]=n}function io(t,e,n){if(!(e.toLowerCase()in t.W))throw Error("Configuration "+e+" is not defined.");t.W[e.toLowerCase()]=n}function ro(t,e){if(!(t=t.get(e)))throw Error("Configuration "+e+" is required.");return t}function so(){this.g=void 0,this.a={}}function oo(t,e,n,i){for(var r=0;r<e.length;r++){var s=e.charAt(r);t.a[s]||(t.a[s]=new so),t=t.a[s]}if(i&&void 0!==t.g)throw Error('The collection already contains the key "'+e+'"');t.g=n}function ao(t,e){for(var n in void 0!==t.g&&e.push(t.g),t.a)ao(t.a[n],e)}function uo(t,e,n){for(var i in void 0!==t.g&&n.push(e),t.a)uo(t.a[i],e+i,n)}function co(t){for(this.a=t,this.g=new so,t=0;t<this.a.length;t++){var e=this.g.get("+"+this.a[t].b);e?e.push(this.a[t]):this.g.add("+"+this.a[t].b,[this.a[t]])}}function lo(t,e){var n={},i=0;for(void 0!==(t=t.g).g&&(n[i]=t.g);i<e.length;i++){var r=e.charAt(i);if(!(r in t.a))break;void 0!==(t=t.a[r]).g&&(n[i]=t.g)}for(var s in n)if(n.hasOwnProperty(s))return n[s];return[]}function ho(t){for(var e=0;e<mo.length;e++)if(mo[e].c===t)return mo[e];return null}function po(t){t=t.toUpperCase();for(var e=[],n=0;n<mo.length;n++)mo[n].f===t&&e.push(mo[n]);return e}function fo(t){if(0<t.length&&"+"==t.charAt(0)){t=t.substring(1);for(var e=[],n=0;n<mo.length;n++)mo[n].b==t&&e.push(mo[n]);t=e}else t=po(t);return t}function go(t){t.sort((function(t,e){return t.name.localeCompare(e.name,"en")}))}eo.prototype.get=function(t){if(!(t.toLowerCase()in this.W))throw Error("Configuration "+t+" is not defined.");return this.W[t.toLowerCase()]},(t=so.prototype).set=function(t,e){oo(this,t,e,!1)},t.add=function(t,e){oo(this,t,e,!0)},t.get=function(t){t:{for(var e=this,n=0;n<t.length;n++)if(!(e=e.a[t.charAt(n)])){t=void 0;break t}t=e}return t?t.g:void 0},t.la=function(){var t=[];return ao(this,t),t},t.ja=function(){var t=[];return uo(this,"",t),t},t.clear=function(){this.a={},this.g=void 0};var mo=[{name:"Afghanistan",c:"93-AF-0",b:"93",f:"AF"},{name:"land Islands",c:"358-AX-0",b:"358",f:"AX"},{name:"Albania",c:"355-AL-0",b:"355",f:"AL"},{name:"Algeria",c:"213-DZ-0",b:"213",f:"DZ"},{name:"American Samoa",c:"1-AS-0",b:"1",f:"AS"},{name:"Andorra",c:"376-AD-0",b:"376",f:"AD"},{name:"Angola",c:"244-AO-0",b:"244",f:"AO"},{name:"Anguilla",c:"1-AI-0",b:"1",f:"AI"},{name:"Antigua and Barbuda",c:"1-AG-0",b:"1",f:"AG"},{name:"Argentina",c:"54-AR-0",b:"54",f:"AR"},{name:"Armenia",c:"374-AM-0",b:"374",f:"AM"},{name:"Aruba",c:"297-AW-0",b:"297",f:"AW"},{name:"Ascension Island",c:"247-AC-0",b:"247",f:"AC"},{name:"Australia",c:"61-AU-0",b:"61",f:"AU"},{name:"Austria",c:"43-AT-0",b:"43",f:"AT"},{name:"Azerbaijan",c:"994-AZ-0",b:"994",f:"AZ"},{name:"Bahamas",c:"1-BS-0",b:"1",f:"BS"},{name:"Bahrain",c:"973-BH-0",b:"973",f:"BH"},{name:"Bangladesh",c:"880-BD-0",b:"880",f:"BD"},{name:"Barbados",c:"1-BB-0",b:"1",f:"BB"},{name:"Belarus",c:"375-BY-0",b:"375",f:"BY"},{name:"Belgium",c:"32-BE-0",b:"32",f:"BE"},{name:"Belize",c:"501-BZ-0",b:"501",f:"BZ"},{name:"Benin",c:"229-BJ-0",b:"229",f:"BJ"},{name:"Bermuda",c:"1-BM-0",b:"1",f:"BM"},{name:"Bhutan",c:"975-BT-0",b:"975",f:"BT"},{name:"Bolivia",c:"591-BO-0",b:"591",f:"BO"},{name:"Bosnia and Herzegovina",c:"387-BA-0",b:"387",f:"BA"},{name:"Botswana",c:"267-BW-0",b:"267",f:"BW"},{name:"Brazil",c:"55-BR-0",b:"55",f:"BR"},{name:"British Indian Ocean Territory",c:"246-IO-0",b:"246",f:"IO"},{name:"British Virgin Islands",c:"1-VG-0",b:"1",f:"VG"},{name:"Brunei",c:"673-BN-0",b:"673",f:"BN"},{name:"Bulgaria",c:"359-BG-0",b:"359",f:"BG"},{name:"Burkina Faso",c:"226-BF-0",b:"226",f:"BF"},{name:"Burundi",c:"257-BI-0",b:"257",f:"BI"},{name:"Cambodia",c:"855-KH-0",b:"855",f:"KH"},{name:"Cameroon",c:"237-CM-0",b:"237",f:"CM"},{name:"Canada",c:"1-CA-0",b:"1",f:"CA"},{name:"Cape Verde",c:"238-CV-0",b:"238",f:"CV"},{name:"Caribbean Netherlands",c:"599-BQ-0",b:"599",f:"BQ"},{name:"Cayman Islands",c:"1-KY-0",b:"1",f:"KY"},{name:"Central African Republic",c:"236-CF-0",b:"236",f:"CF"},{name:"Chad",c:"235-TD-0",b:"235",f:"TD"},{name:"Chile",c:"56-CL-0",b:"56",f:"CL"},{name:"China",c:"86-CN-0",b:"86",f:"CN"},{name:"Christmas Island",c:"61-CX-0",b:"61",f:"CX"},{name:"Cocos [Keeling] Islands",c:"61-CC-0",b:"61",f:"CC"},{name:"Colombia",c:"57-CO-0",b:"57",f:"CO"},{name:"Comoros",c:"269-KM-0",b:"269",f:"KM"},{name:"Democratic Republic Congo",c:"243-CD-0",b:"243",f:"CD"},{name:"Republic of Congo",c:"242-CG-0",b:"242",f:"CG"},{name:"Cook Islands",c:"682-CK-0",b:"682",f:"CK"},{name:"Costa Rica",c:"506-CR-0",b:"506",f:"CR"},{name:"Cte d'Ivoire",c:"225-CI-0",b:"225",f:"CI"},{name:"Croatia",c:"385-HR-0",b:"385",f:"HR"},{name:"Cuba",c:"53-CU-0",b:"53",f:"CU"},{name:"Curaao",c:"599-CW-0",b:"599",f:"CW"},{name:"Cyprus",c:"357-CY-0",b:"357",f:"CY"},{name:"Czech Republic",c:"420-CZ-0",b:"420",f:"CZ"},{name:"Denmark",c:"45-DK-0",b:"45",f:"DK"},{name:"Djibouti",c:"253-DJ-0",b:"253",f:"DJ"},{name:"Dominica",c:"1-DM-0",b:"1",f:"DM"},{name:"Dominican Republic",c:"1-DO-0",b:"1",f:"DO"},{name:"East Timor",c:"670-TL-0",b:"670",f:"TL"},{name:"Ecuador",c:"593-EC-0",b:"593",f:"EC"},{name:"Egypt",c:"20-EG-0",b:"20",f:"EG"},{name:"El Salvador",c:"503-SV-0",b:"503",f:"SV"},{name:"Equatorial Guinea",c:"240-GQ-0",b:"240",f:"GQ"},{name:"Eritrea",c:"291-ER-0",b:"291",f:"ER"},{name:"Estonia",c:"372-EE-0",b:"372",f:"EE"},{name:"Ethiopia",c:"251-ET-0",b:"251",f:"ET"},{name:"Falkland Islands [Islas Malvinas]",c:"500-FK-0",b:"500",f:"FK"},{name:"Faroe Islands",c:"298-FO-0",b:"298",f:"FO"},{name:"Fiji",c:"679-FJ-0",b:"679",f:"FJ"},{name:"Finland",c:"358-FI-0",b:"358",f:"FI"},{name:"France",c:"33-FR-0",b:"33",f:"FR"},{name:"French Guiana",c:"594-GF-0",b:"594",f:"GF"},{name:"French Polynesia",c:"689-PF-0",b:"689",f:"PF"},{name:"Gabon",c:"241-GA-0",b:"241",f:"GA"},{name:"Gambia",c:"220-GM-0",b:"220",f:"GM"},{name:"Georgia",c:"995-GE-0",b:"995",f:"GE"},{name:"Germany",c:"49-DE-0",b:"49",f:"DE"},{name:"Ghana",c:"233-GH-0",b:"233",f:"GH"},{name:"Gibraltar",c:"350-GI-0",b:"350",f:"GI"},{name:"Greece",c:"30-GR-0",b:"30",f:"GR"},{name:"Greenland",c:"299-GL-0",b:"299",f:"GL"},{name:"Grenada",c:"1-GD-0",b:"1",f:"GD"},{name:"Guadeloupe",c:"590-GP-0",b:"590",f:"GP"},{name:"Guam",c:"1-GU-0",b:"1",f:"GU"},{name:"Guatemala",c:"502-GT-0",b:"502",f:"GT"},{name:"Guernsey",c:"44-GG-0",b:"44",f:"GG"},{name:"Guinea Conakry",c:"224-GN-0",b:"224",f:"GN"},{name:"Guinea-Bissau",c:"245-GW-0",b:"245",f:"GW"},{name:"Guyana",c:"592-GY-0",b:"592",f:"GY"},{name:"Haiti",c:"509-HT-0",b:"509",f:"HT"},{name:"Heard Island and McDonald Islands",c:"672-HM-0",b:"672",f:"HM"},{name:"Honduras",c:"504-HN-0",b:"504",f:"HN"},{name:"Hong Kong",c:"852-HK-0",b:"852",f:"HK"},{name:"Hungary",c:"36-HU-0",b:"36",f:"HU"},{name:"Iceland",c:"354-IS-0",b:"354",f:"IS"},{name:"India",c:"91-IN-0",b:"91",f:"IN"},{name:"Indonesia",c:"62-ID-0",b:"62",f:"ID"},{name:"Iran",c:"98-IR-0",b:"98",f:"IR"},{name:"Iraq",c:"964-IQ-0",b:"964",f:"IQ"},{name:"Ireland",c:"353-IE-0",b:"353",f:"IE"},{name:"Isle of Man",c:"44-IM-0",b:"44",f:"IM"},{name:"Israel",c:"972-IL-0",b:"972",f:"IL"},{name:"Italy",c:"39-IT-0",b:"39",f:"IT"},{name:"Jamaica",c:"1-JM-0",b:"1",f:"JM"},{name:"Japan",c:"81-JP-0",b:"81",f:"JP"},{name:"Jersey",c:"44-JE-0",b:"44",f:"JE"},{name:"Jordan",c:"962-JO-0",b:"962",f:"JO"},{name:"Kazakhstan",c:"7-KZ-0",b:"7",f:"KZ"},{name:"Kenya",c:"254-KE-0",b:"254",f:"KE"},{name:"Kiribati",c:"686-KI-0",b:"686",f:"KI"},{name:"Kosovo",c:"377-XK-0",b:"377",f:"XK"},{name:"Kosovo",c:"381-XK-0",b:"381",f:"XK"},{name:"Kosovo",c:"386-XK-0",b:"386",f:"XK"},{name:"Kuwait",c:"965-KW-0",b:"965",f:"KW"},{name:"Kyrgyzstan",c:"996-KG-0",b:"996",f:"KG"},{name:"Laos",c:"856-LA-0",b:"856",f:"LA"},{name:"Latvia",c:"371-LV-0",b:"371",f:"LV"},{name:"Lebanon",c:"961-LB-0",b:"961",f:"LB"},{name:"Lesotho",c:"266-LS-0",b:"266",f:"LS"},{name:"Liberia",c:"231-LR-0",b:"231",f:"LR"},{name:"Libya",c:"218-LY-0",b:"218",f:"LY"},{name:"Liechtenstein",c:"423-LI-0",b:"423",f:"LI"},{name:"Lithuania",c:"370-LT-0",b:"370",f:"LT"},{name:"Luxembourg",c:"352-LU-0",b:"352",f:"LU"},{name:"Macau",c:"853-MO-0",b:"853",f:"MO"},{name:"Macedonia",c:"389-MK-0",b:"389",f:"MK"},{name:"Madagascar",c:"261-MG-0",b:"261",f:"MG"},{name:"Malawi",c:"265-MW-0",b:"265",f:"MW"},{name:"Malaysia",c:"60-MY-0",b:"60",f:"MY"},{name:"Maldives",c:"960-MV-0",b:"960",f:"MV"},{name:"Mali",c:"223-ML-0",b:"223",f:"ML"},{name:"Malta",c:"356-MT-0",b:"356",f:"MT"},{name:"Marshall Islands",c:"692-MH-0",b:"692",f:"MH"},{name:"Martinique",c:"596-MQ-0",b:"596",f:"MQ"},{name:"Mauritania",c:"222-MR-0",b:"222",f:"MR"},{name:"Mauritius",c:"230-MU-0",b:"230",f:"MU"},{name:"Mayotte",c:"262-YT-0",b:"262",f:"YT"},{name:"Mexico",c:"52-MX-0",b:"52",f:"MX"},{name:"Micronesia",c:"691-FM-0",b:"691",f:"FM"},{name:"Moldova",c:"373-MD-0",b:"373",f:"MD"},{name:"Monaco",c:"377-MC-0",b:"377",f:"MC"},{name:"Mongolia",c:"976-MN-0",b:"976",f:"MN"},{name:"Montenegro",c:"382-ME-0",b:"382",f:"ME"},{name:"Montserrat",c:"1-MS-0",b:"1",f:"MS"},{name:"Morocco",c:"212-MA-0",b:"212",f:"MA"},{name:"Mozambique",c:"258-MZ-0",b:"258",f:"MZ"},{name:"Myanmar [Burma]",c:"95-MM-0",b:"95",f:"MM"},{name:"Namibia",c:"264-NA-0",b:"264",f:"NA"},{name:"Nauru",c:"674-NR-0",b:"674",f:"NR"},{name:"Nepal",c:"977-NP-0",b:"977",f:"NP"},{name:"Netherlands",c:"31-NL-0",b:"31",f:"NL"},{name:"New Caledonia",c:"687-NC-0",b:"687",f:"NC"},{name:"New Zealand",c:"64-NZ-0",b:"64",f:"NZ"},{name:"Nicaragua",c:"505-NI-0",b:"505",f:"NI"},{name:"Niger",c:"227-NE-0",b:"227",f:"NE"},{name:"Nigeria",c:"234-NG-0",b:"234",f:"NG"},{name:"Niue",c:"683-NU-0",b:"683",f:"NU"},{name:"Norfolk Island",c:"672-NF-0",b:"672",f:"NF"},{name:"North Korea",c:"850-KP-0",b:"850",f:"KP"},{name:"Northern Mariana Islands",c:"1-MP-0",b:"1",f:"MP"},{name:"Norway",c:"47-NO-0",b:"47",f:"NO"},{name:"Oman",c:"968-OM-0",b:"968",f:"OM"},{name:"Pakistan",c:"92-PK-0",b:"92",f:"PK"},{name:"Palau",c:"680-PW-0",b:"680",f:"PW"},{name:"Palestinian Territories",c:"970-PS-0",b:"970",f:"PS"},{name:"Panama",c:"507-PA-0",b:"507",f:"PA"},{name:"Papua New Guinea",c:"675-PG-0",b:"675",f:"PG"},{name:"Paraguay",c:"595-PY-0",b:"595",f:"PY"},{name:"Peru",c:"51-PE-0",b:"51",f:"PE"},{name:"Philippines",c:"63-PH-0",b:"63",f:"PH"},{name:"Poland",c:"48-PL-0",b:"48",f:"PL"},{name:"Portugal",c:"351-PT-0",b:"351",f:"PT"},{name:"Puerto Rico",c:"1-PR-0",b:"1",f:"PR"},{name:"Qatar",c:"974-QA-0",b:"974",f:"QA"},{name:"Runion",c:"262-RE-0",b:"262",f:"RE"},{name:"Romania",c:"40-RO-0",b:"40",f:"RO"},{name:"Russia",c:"7-RU-0",b:"7",f:"RU"},{name:"Rwanda",c:"250-RW-0",b:"250",f:"RW"},{name:"Saint Barthlemy",c:"590-BL-0",b:"590",f:"BL"},{name:"Saint Helena",c:"290-SH-0",b:"290",f:"SH"},{name:"St. Kitts",c:"1-KN-0",b:"1",f:"KN"},{name:"St. Lucia",c:"1-LC-0",b:"1",f:"LC"},{name:"Saint Martin",c:"590-MF-0",b:"590",f:"MF"},{name:"Saint Pierre and Miquelon",c:"508-PM-0",b:"508",f:"PM"},{name:"St. Vincent",c:"1-VC-0",b:"1",f:"VC"},{name:"Samoa",c:"685-WS-0",b:"685",f:"WS"},{name:"San Marino",c:"378-SM-0",b:"378",f:"SM"},{name:"So Tom and Prncipe",c:"239-ST-0",b:"239",f:"ST"},{name:"Saudi Arabia",c:"966-SA-0",b:"966",f:"SA"},{name:"Senegal",c:"221-SN-0",b:"221",f:"SN"},{name:"Serbia",c:"381-RS-0",b:"381",f:"RS"},{name:"Seychelles",c:"248-SC-0",b:"248",f:"SC"},{name:"Sierra Leone",c:"232-SL-0",b:"232",f:"SL"},{name:"Singapore",c:"65-SG-0",b:"65",f:"SG"},{name:"Sint Maarten",c:"1-SX-0",b:"1",f:"SX"},{name:"Slovakia",c:"421-SK-0",b:"421",f:"SK"},{name:"Slovenia",c:"386-SI-0",b:"386",f:"SI"},{name:"Solomon Islands",c:"677-SB-0",b:"677",f:"SB"},{name:"Somalia",c:"252-SO-0",b:"252",f:"SO"},{name:"South Africa",c:"27-ZA-0",b:"27",f:"ZA"},{name:"South Georgia and the South Sandwich Islands",c:"500-GS-0",b:"500",f:"GS"},{name:"South Korea",c:"82-KR-0",b:"82",f:"KR"},{name:"South Sudan",c:"211-SS-0",b:"211",f:"SS"},{name:"Spain",c:"34-ES-0",b:"34",f:"ES"},{name:"Sri Lanka",c:"94-LK-0",b:"94",f:"LK"},{name:"Sudan",c:"249-SD-0",b:"249",f:"SD"},{name:"Suriname",c:"597-SR-0",b:"597",f:"SR"},{name:"Svalbard and Jan Mayen",c:"47-SJ-0",b:"47",f:"SJ"},{name:"Swaziland",c:"268-SZ-0",b:"268",f:"SZ"},{name:"Sweden",c:"46-SE-0",b:"46",f:"SE"},{name:"Switzerland",c:"41-CH-0",b:"41",f:"CH"},{name:"Syria",c:"963-SY-0",b:"963",f:"SY"},{name:"Taiwan",c:"886-TW-0",b:"886",f:"TW"},{name:"Tajikistan",c:"992-TJ-0",b:"992",f:"TJ"},{name:"Tanzania",c:"255-TZ-0",b:"255",f:"TZ"},{name:"Thailand",c:"66-TH-0",b:"66",f:"TH"},{name:"Togo",c:"228-TG-0",b:"228",f:"TG"},{name:"Tokelau",c:"690-TK-0",b:"690",f:"TK"},{name:"Tonga",c:"676-TO-0",b:"676",f:"TO"},{name:"Trinidad/Tobago",c:"1-TT-0",b:"1",f:"TT"},{name:"Tunisia",c:"216-TN-0",b:"216",f:"TN"},{name:"Turkey",c:"90-TR-0",b:"90",f:"TR"},{name:"Turkmenistan",c:"993-TM-0",b:"993",f:"TM"},{name:"Turks and Caicos Islands",c:"1-TC-0",b:"1",f:"TC"},{name:"Tuvalu",c:"688-TV-0",b:"688",f:"TV"},{name:"U.S. Virgin Islands",c:"1-VI-0",b:"1",f:"VI"},{name:"Uganda",c:"256-UG-0",b:"256",f:"UG"},{name:"Ukraine",c:"380-UA-0",b:"380",f:"UA"},{name:"United Arab Emirates",c:"971-AE-0",b:"971",f:"AE"},{name:"United Kingdom",c:"44-GB-0",b:"44",f:"GB"},{name:"United States",c:"1-US-0",b:"1",f:"US"},{name:"Uruguay",c:"598-UY-0",b:"598",f:"UY"},{name:"Uzbekistan",c:"998-UZ-0",b:"998",f:"UZ"},{name:"Vanuatu",c:"678-VU-0",b:"678",f:"VU"},{name:"Vatican City",c:"379-VA-0",b:"379",f:"VA"},{name:"Venezuela",c:"58-VE-0",b:"58",f:"VE"},{name:"Vietnam",c:"84-VN-0",b:"84",f:"VN"},{name:"Wallis and Futuna",c:"681-WF-0",b:"681",f:"WF"},{name:"Western Sahara",c:"212-EH-0",b:"212",f:"EH"},{name:"Yemen",c:"967-YE-0",b:"967",f:"YE"},{name:"Zambia",c:"260-ZM-0",b:"260",f:"ZM"},{name:"Zimbabwe",c:"263-ZW-0",b:"263",f:"ZW"}];go(mo);var _o=new co(mo);function yo(t,e){this.a=t,this.Aa=e}function vo(t){t=Y(t);var e=lo(_o,t);return 0<e.length?new yo("1"==e[0].b?"1-US-0":e[0].c,Y(t.substr(e[0].b.length+1))):null}function bo(t){var e=ho(t.a);if(!e)throw Error("Country ID "+t.a+" not found.");return"+"+e.b+t.Aa}function wo(t,e){for(var n=0;n<t.length;n++)if(!q(To,t[n])&&(null!==xo&&t[n]in xo||q(e,t[n])))return t[n];return null}var To=["emailLink","password","phone"],xo={"facebook.com":"FacebookAuthProvider","github.com":"GithubAuthProvider","google.com":"GoogleAuthProvider",password:"EmailAuthProvider","twitter.com":"TwitterAuthProvider",phone:"PhoneAuthProvider"};function So(){this.a=new eo,no(this.a,"autoUpgradeAnonymousUsers"),no(this.a,"callbacks"),no(this.a,"credentialHelper",Qo),no(this.a,"immediateFederatedRedirect",!1),no(this.a,"popupMode",!1),no(this.a,"privacyPolicyUrl"),no(this.a,"queryParameterForSignInSuccessUrl","signInSuccessUrl"),no(this.a,"queryParameterForWidgetMode","mode"),no(this.a,"signInFlow"),no(this.a,"signInOptions"),no(this.a,"signInSuccessUrl"),no(this.a,"siteName"),no(this.a,"tosUrl"),no(this.a,"widgetUrl"),no(this.a,"adminRestrictedOperation")}function Io(t){var e=!!t.a.get("autoUpgradeAnonymousUsers");return e&&!Wo(t)&&zr('Missing "signInFailure" callback: "signInFailure" callback needs to be provided when "autoUpgradeAnonymousUsers" is set to true.',void 0),e}function Eo(t){t=t.a.get("signInOptions")||[];for(var e=[],n=0;n<t.length;n++){var i=t[n];(i=x(i)?i:{provider:i}).provider&&e.push(i)}return e}function Ao(t,e){t=Eo(t);for(var n=0;n<t.length;n++)if(t[n].provider===e)return t[n];return null}function ko(t){return Eo(t).map((function(t){return t.provider}))}function Oo(t,e){t=Co(t);for(var n=0;n<t.length;n++)if(t[n].providerId===e)return t[n];return null}function Co(t){return Eo(t).map((function(t){if(xo[t.provider]||q(ra,t.provider)){for(var e in t={providerId:t.provider,S:t.providerName||null,V:t.fullLabel||null,ta:t.buttonColor||null,za:t.iconUrl?be(Te(t.iconUrl)).toString():null})null===t[e]&&delete t[e];return t}return{providerId:t.provider,S:t.providerName||null,V:t.fullLabel||null,ta:t.buttonColor||null,za:t.iconUrl?be(Te(t.iconUrl)).toString():null,Ob:t.loginHintKey||null}}))}function Do(t){var e,n=Ao(t,h.auth.GoogleAuthProvider.PROVIDER_ID);if(e=n&&n.clientId){t:{if("http:"===(window.location&&window.location.protocol)||"https:"===(window.location&&window.location.protocol))for(i in t=t.a.get("credentialHelper"),ta)if(ta[i]===t){var i=ta[i];break t}i=Qo}e=i===Jo}return e&&n.clientId||null}function Po(t){return!!((t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))&&t.disableSignUp&&t.disableSignUp.status)}function Ro(t){return!(!(t=t.a.get("adminRestrictedOperation")||null)||!t.status)}function No(t,e){return t=(t=Ao(t,e))&&t.scopes,Array.isArray(t)?t:[]}function Mo(t,e){return x(t=(t=Ao(t,e))&&t.customParameters)?(t=ot(t),e===h.auth.GoogleAuthProvider.PROVIDER_ID&&delete t.login_hint,e===h.auth.GithubAuthProvider.PROVIDER_ID&&delete t.login,t):null}function Lo(t){if(!(t=Ao(t,h.auth.PhoneAuthProvider.PROVIDER_ID)))return null;var e=t.whitelistedCountries,n=t.blacklistedCountries;if(void 0!==e&&(!Array.isArray(e)||0==e.length))throw Error("WhitelistedCountries must be a non-empty array.");if(void 0!==n&&!Array.isArray(n))throw Error("BlacklistedCountries must be an array.");if(e&&n)throw Error("Both whitelistedCountries and blacklistedCountries are provided.");if(!e&&!n)return mo;if(t=[],e){n={};for(var i=0;i<e.length;i++)for(var r=fo(e[i]),s=0;s<r.length;s++)n[r[s].c]=r[s];for(var o in n)n.hasOwnProperty(o)&&t.push(n[o])}else{for(o={},e=0;e<n.length;e++)for(r=fo(n[e]),i=0;i<r.length;i++)o[r[i].c]=r[i];for(r=0;r<mo.length;r++)null!==o&&mo[r].c in o||t.push(mo[r])}return t}function Fo(t){return ro(t.a,"queryParameterForWidgetMode")}function jo(t){var e=t.a.get("tosUrl")||null;if(t=t.a.get("privacyPolicyUrl")||null,e&&!t&&Kr("Privacy Policy URL is missing, the link will not be displayed."),e&&t){if("function"==typeof e)return e;if("string"==typeof e)return function(){nr(e)}}return null}function Uo(t){var e=t.a.get("tosUrl")||null,n=t.a.get("privacyPolicyUrl")||null;if(n&&!e&&Kr("Term of Service URL is missing, the link will not be displayed."),e&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){nr(n)}}return null}function Vo(t){return!(t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))||void 0===t.requireDisplayName||!!t.requireDisplayName}function $o(t){return!(!(t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))||t.signInMethod!==h.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD)}function Bo(t){var e=!!t.a.get("immediateFederatedRedirect"),n=ko(t);return t=qo(t),e&&1==n.length&&!q(To,n[0])&&t==ea}function qo(t){for(var e in t=t.a.get("signInFlow"),na)if(na[e]==t)return na[e];return ea}function zo(t){return Ho(t).signInSuccess||null}function Go(t){return Ho(t).signInSuccessWithAuthResult||null}function Wo(t){return Ho(t).signInFailure||null}function Ho(t){return t.a.get("callbacks")||{}}var Ko,Yo,Xo,Zo,Jo="googleyolo",Qo="none",ta={nc:Jo,NONE:Qo},ea="redirect",na={qc:"popup",rc:ea},ia={mc:"callback",RECOVER_EMAIL:"recoverEmail",sc:"resetPassword",REVERT_SECOND_FACTOR_ADDITION:"revertSecondFactorAddition",tc:"select",uc:"signIn",VERIFY_AND_CHANGE_EMAIL:"verifyAndChangeEmail",VERIFY_EMAIL:"verifyEmail"},ra=["anonymous"],sa=["sitekey","tabindex","callback","expired-callback"],oa={};function aa(t,e,n,i){oa[t].apply(null,Array.prototype.slice.call(arguments,1))}function ua(t){return t.classList?t.classList:f(t=t.className)&&t.match(/\S+/g)||[]}function ca(t,e){return t.classList?t.classList.contains(e):q(ua(t),e)}function la(t,e){t.classList?t.classList.add(e):ca(t,e)||(t.className+=0<t.className.length?" "+e:e)}function ha(t,e){t.classList?t.classList.remove(e):ca(t,e)&&(t.className=V(ua(t),(function(t){return t!=e})).join(" "))}function da(t){var e=t.type;switch(f(e)&&e.toLowerCase()){case"checkbox":case"radio":return t.checked?t.value:null;case"select-one":return 0<=(e=t.selectedIndex)?t.options[e].value:null;case"select-multiple":e=[];for(var n,i=0;n=t.options[i];i++)n.selected&&e.push(n.value);return e.length?e:null;default:return null!=t.value?t.value:null}}function pa(t,e){var n=t.type;switch(f(n)&&n.toLowerCase()){case"checkbox":case"radio":t.checked=e;break;case"select-one":if(t.selectedIndex=-1,f(e))for(var i=0;n=t.options[i];i++)if(n.value==e){n.selected=!0;break}break;case"select-multiple":for(f(e)&&(e=[e]),i=0;n=t.options[i];i++)if(n.selected=!1,e)for(var r,s=0;r=e[s];s++)n.value==r&&(n.selected=!0);break;default:t.value=null!=e?e:""}}function fa(t,e,n,i,r,s){if(ne&&!he("525"))return!0;if(re&&r)return ga(t);if(r&&!i)return!1;if(!ee&&("number"==typeof e&&(e=ma(e)),(!n||re)&&(17==e||18==e||re&&91==e)||re&&16==e&&(i||s)))return!1;if((ne||Qt)&&i&&n)switch(t){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(Jt&&i&&e==t)return!1;switch(t){case 13:return!(ee&&(s||r||n&&i));case 27:return!(ne||Qt||ee)}return(!ee||!(i||r||s))&&ga(t)}function ga(t){if(48<=t&&57>=t||96<=t&&106>=t||65<=t&&90>=t||(ne||Qt)&&0==t)return!0;switch(t){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;case 173:return ee;default:return!1}}function ma(t){return ee?t=function(t){switch(t){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return t}}(t):re&&ne&&93===t&&(t=91),t}function _a(t){pi.call(this),this.a=t,ei(t,"keydown",this.g,!1,this),ei(t,"click",this.h,!1,this)}function ya(t,e){var n=new ba(e);if(fi(t,n)){n=new va(e);try{fi(t,n)}finally{e.stopPropagation()}}}function va(t){zn.call(this,t.a),this.type="action"}function ba(t){zn.call(this,t.a),this.type="beforeaction"}function wa(t){pi.call(this),this.a=t,t=Jt?"focusout":"blur",this.g=ei(this.a,Jt?"focusin":"focus",this,!Jt),this.h=ei(this.a,t,this,!Jt)}function Ta(t,e){pi.call(this),this.g=t||1,this.a=e||d,this.h=k(this.gc,this),this.j=P()}function xa(t){t.Ka=!1,t.aa&&(t.a.clearTimeout(t.aa),t.aa=null)}function Sa(t){Nn.call(this),this.g=t,this.a={}}N(_a,pi),_a.prototype.g=function(t){(13==t.keyCode||ne&&3==t.keyCode)&&ya(this,t)},_a.prototype.h=function(t){ya(this,t)},_a.prototype.o=function(){_a.K.o.call(this),ri(this.a,"keydown",this.g,!1,this),ri(this.a,"click",this.h,!1,this),delete this.a},N(va,zn),N(ba,zn),N(wa,pi),wa.prototype.handleEvent=function(t){var e=new zn(t.a);e.type="focusin"==t.type||"focus"==t.type?"focusin":"focusout",fi(this,e)},wa.prototype.o=function(){wa.K.o.call(this),si(this.g),si(this.h),delete this.a},N(Ta,pi),(t=Ta.prototype).Ka=!1,t.aa=null,t.gc=function(){if(this.Ka){var t=P()-this.j;0<t&&t<.8*this.g?this.aa=this.a.setTimeout(this.h,this.g-t):(this.aa&&(this.a.clearTimeout(this.aa),this.aa=null),fi(this,"tick"),this.Ka&&(xa(this),this.start()))}},t.start=function(){this.Ka=!0,this.aa||(this.aa=this.a.setTimeout(this.h,this.g),this.j=P())},t.o=function(){Ta.K.o.call(this),xa(this),delete this.a},N(Sa,Nn);var Ia=[];function Ea(t,e,n,i){b(n)||(n&&(Ia[0]=n.toString()),n=Ia);for(var r=0;r<n.length;r++){var s=ei(e,n[r],i||t.handleEvent,!1,t.g||t);if(!s)break;t.a[s.key]=s}}function Aa(t){st(t.a,(function(t,e){this.a.hasOwnProperty(e)&&si(t)}),t),t.a={}}function ka(t){pi.call(this),this.a=null,this.g=t,t=Jt||Qt||ne&&!he("531")&&"TEXTAREA"==t.tagName,this.h=new Sa(this),Ea(this.h,this.g,t?["keydown","paste","cut","drop","input"]:"input",this)}function Oa(t){null!=t.a&&(d.clearTimeout(t.a),t.a=null)}function Ca(t){return(t=new zn(t.a)).type="input",t}function Da(t,e){pi.call(this),t&&(this.Oa&&La(this),this.qa=t,this.Na=ei(this.qa,"keypress",this,e),this.Ya=ei(this.qa,"keydown",this.Jb,e,this),this.Oa=ei(this.qa,"keyup",this.Kb,e,this))}Sa.prototype.o=function(){Sa.K.o.call(this),Aa(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},N(ka,pi),ka.prototype.handleEvent=function(t){if("input"==t.type)Jt&&he(10)&&0==t.keyCode&&0==t.j||(Oa(this),fi(this,Ca(t)));else if("keydown"!=t.type||function(t){if(t.altKey&&!t.ctrlKey||t.metaKey||112<=t.keyCode&&123>=t.keyCode)return!1;if(ga(t.keyCode))return!0;switch(t.keyCode){case 18:case 20:case 93:case 17:case 40:case 35:case 27:case 36:case 45:case 37:case 224:case 91:case 144:case 12:case 34:case 33:case 19:case 255:case 44:case 39:case 145:case 16:case 38:case 252:case 224:case 92:return!1;case 0:return!ee;default:return 166>t.keyCode||183<t.keyCode}}(t)){var e="keydown"==t.type?this.g.value:null;Jt&&229==t.keyCode&&(e=null);var n=Ca(t);Oa(this),this.a=function(t,e){if(T(t))e&&(t=k(t,e));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=k(t.handleEvent,t)}return 2147483647<Number(0)?-1:d.setTimeout(t,0)}((function(){this.a=null,this.g.value!=e&&fi(this,n)}),this)}},ka.prototype.o=function(){ka.K.o.call(this),this.h.m(),Oa(this),delete this.g},N(Da,pi),(t=Da.prototype).qa=null,t.Na=null,t.Ya=null,t.Oa=null,t.R=-1,t.X=-1,t.Ua=!1;var Pa={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ra={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Na=!ne||he("525"),Ma=re&&ee;function La(t){t.Na&&(si(t.Na),si(t.Ya),si(t.Oa),t.Na=null,t.Ya=null,t.Oa=null),t.qa=null,t.R=-1,t.X=-1}function Fa(t,e,n,i){zn.call(this,i),this.type="key",this.keyCode=t,this.j=e,this.repeat=n}function ja(t,e,n,i){this.top=t,this.right=e,this.bottom=n,this.left=i}function Ua(t,e){var n=We(t);return n.defaultView&&n.defaultView.getComputedStyle&&(t=n.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""}function Va(t){try{var e=t.getBoundingClientRect()}catch(t){return{left:0,top:0,right:0,bottom:0}}return Jt&&t.ownerDocument.body&&(t=t.ownerDocument,e.left-=t.documentElement.clientLeft+t.body.clientLeft,e.top-=t.documentElement.clientTop+t.body.clientTop),e}function $a(t){var e=We(t),n=new Fe(0,0),i=e?We(e):document;return t==(i=!Jt||9<=Number(ce)||"CSS1Compat"==Ue(i).a.compatMode?i.documentElement:i.body)||(t=Va(t),e=ze(i=Ue(e).a),i=i.parentWindow||i.defaultView,e=Jt&&he("10")&&i.pageYOffset!=e.scrollTop?new Fe(e.scrollLeft,e.scrollTop):new Fe(i.pageXOffset||e.scrollLeft,i.pageYOffset||e.scrollTop),n.a=t.left+e.a,n.g=t.top+e.g),n}(t=Da.prototype).Jb=function(t){(ne||Qt)&&(17==this.R&&!t.ctrlKey||18==this.R&&!t.altKey||re&&91==this.R&&!t.metaKey)&&(this.X=this.R=-1),-1==this.R&&(t.ctrlKey&&17!=t.keyCode?this.R=17:t.altKey&&18!=t.keyCode?this.R=18:t.metaKey&&91!=t.keyCode&&(this.R=91)),Na&&!fa(t.keyCode,this.R,t.shiftKey,t.ctrlKey,t.altKey,t.metaKey)?this.handleEvent(t):(this.X=ma(t.keyCode),Ma&&(this.Ua=t.altKey))},t.Kb=function(t){this.X=this.R=-1,this.Ua=t.altKey},t.handleEvent=function(t){var e=t.a,n=e.altKey;if(Jt&&"keypress"==t.type)var i=this.X,r=13!=i&&27!=i?e.keyCode:0;else(ne||Qt)&&"keypress"==t.type?(i=this.X,r=0<=e.charCode&&63232>e.charCode&&ga(i)?e.charCode:0):Zt&&!ne?r=ga(i=this.X)?e.keyCode:0:("keypress"==t.type?(Ma&&(n=this.Ua),e.keyCode==e.charCode?32>e.keyCode?(i=e.keyCode,r=0):(i=this.X,r=e.charCode):(i=e.keyCode||this.X,r=e.charCode||0)):(i=e.keyCode||this.X,r=e.charCode||0),re&&63==r&&224==i&&(i=191));var s=i=ma(i);i?63232<=i&&i in Pa?s=Pa[i]:25==i&&t.shiftKey&&(s=9):e.keyIdentifier&&e.keyIdentifier in Ra&&(s=Ra[e.keyIdentifier]),ee&&Na&&"keypress"==t.type&&!fa(s,this.R,t.shiftKey,t.ctrlKey,n,t.metaKey)||(t=s==this.R,this.R=s,(e=new Fa(s,r,t,e)).altKey=n,fi(this,e))},t.N=function(){return this.qa},t.o=function(){Da.K.o.call(this),La(this)},N(Fa,zn),ja.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},ja.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},ja.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},ja.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var Ba={thin:2,medium:4,thick:6};function qa(t,e){if("none"==(t.currentStyle?t.currentStyle[e+"Style"]:null))return 0;var n=t.currentStyle?t.currentStyle[e+"Width"]:null;if(n in Ba)t=Ba[n];else if(/^\d+px?$/.test(n))t=parseInt(n,10);else{e=t.style.left;var i=t.runtimeStyle.left;t.runtimeStyle.left=t.currentStyle.left,t.style.left=n,n=t.style.pixelLeft,t.style.left=e,t.runtimeStyle.left=i,t=+n}return t}function za(){}function Ga(t){pi.call(this),this.s=t||Ue(),this.cb=null,this.na=!1,this.g=null,this.L=void 0,this.oa=this.Ea=this.Y=null}function Wa(t,e){return t.g?$e(e,t.g||t.s.a):null}function Ha(t){return t.L||(t.L=new Sa(t)),t.L}function Ka(t,e){t.Ea&&U(t.Ea,e,void 0)}function Ya(t,e){var n=Ke(t,"firebaseui-textfield");e?(ha(t,"firebaseui-input-invalid"),la(t,"firebaseui-input"),n&&ha(n,"firebaseui-textfield-invalid")):(ha(t,"firebaseui-input"),la(t,"firebaseui-input-invalid"),n&&la(n,"firebaseui-textfield-invalid"))}function Xa(t,e,n){Fn(t,O(jn,e=new ka(e))),Ea(Ha(t),e,"input",n)}function Za(t,e,n){Fn(t,O(jn,e=new Da(e))),Ea(Ha(t),e,"key",(function(t){13==t.keyCode&&(t.stopPropagation(),t.preventDefault(),n(t))}))}function Ja(t,e,n){Fn(t,O(jn,e=new _a(e))),Ea(Ha(t),e,"action",(function(t){t.stopPropagation(),t.preventDefault(),n(t)}))}function Qa(t){la(t,"firebaseui-hidden")}function tu(t,e){e&&He(t,e),ha(t,"firebaseui-hidden")}function eu(t){return!ca(t,"firebaseui-hidden")&&"none"!=t.style.display}function nu(t){var e=(t=t||{}).email,n=t.disabled,i='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-email-input">';return i=t.wc?i+"Enter new email address":i+"Email",i+='</label><input type="email" name="email" id="ui-sign-in-email-input" autocomplete="username" class="mdl-textfield__input firebaseui-input firebaseui-id-email" value="'+fn(null!=e?e:"")+'"'+(n?"disabled":"")+'></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-email-error"></p></div>',ln(i)}function iu(t){var e='<button type="submit" class="firebaseui-id-submit firebaseui-button mdl-button mdl-js-button mdl-button--raised mdl-button--colored">';return e=(t=(t=t||{}).label)?e+on(t):e+"Next",ln(e+"</button>")}function ru(){var t=""+iu({label:dn("Sign In")});return ln(t)}function su(){var t=""+iu({label:dn("Save")});return ln(t)}function ou(){var t=""+iu({label:dn("Continue")});return ln(t)}function au(t){var e='<div class="firebaseui-new-password-component"><div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-new-password-input">';return e=(t=(t=t||{}).label)?e+on(t):e+"Choose password",ln(e+'</label><input type="password" name="newPassword" id="ui-sign-in-new-password-input" autocomplete="new-password" class="mdl-textfield__input firebaseui-input firebaseui-id-new-password"></div><a href="javascript:void(0)" class="firebaseui-input-floating-button firebaseui-id-password-toggle firebaseui-input-toggle-on firebaseui-input-toggle-blur"></a><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-new-password-error"></p></div></div>')}function uu(){var t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-password-input">';return ln((t={}.current?t+"Current password":t+"Password")+'</label><input type="password" name="password" id="ui-sign-in-password-input" autocomplete="current-password" class="mdl-textfield__input firebaseui-input firebaseui-id-password"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-password-error"></p></div>')}function cu(){return ln('<a class="firebaseui-link firebaseui-id-secondary-link" href="javascript:void(0)">Trouble signing in?</a>')}function lu(t){var e='<button class="firebaseui-id-secondary-link firebaseui-button mdl-button mdl-js-button mdl-button--primary">';return e=(t=(t=t||{}).label)?e+on(t):e+"Cancel",ln(e+"</button>")}function hu(t){var e="";return t.F&&t.D&&(e+='<ul class="firebaseui-tos-list firebaseui-tos"><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a></li><li class="firebaseui-inline-list-item"><a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a></li></ul>'),ln(e)}function du(t){var e="";return t.F&&t.D&&(e+='<p class="firebaseui-tos firebaseui-tospp-full-message">By continuing, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>.</p>'),ln(e)}function pu(t){return t='<div class="firebaseui-info-bar firebaseui-id-info-bar"><p class="firebaseui-info-bar-message">'+on(t.message)+'&nbsp;&nbsp;<a href="javascript:void(0)" class="firebaseui-link firebaseui-id-dismiss-info-bar">Dismiss</a></p></div>',ln(t)}function fu(t){var e=t.content;return t=t.Ab,ln('<dialog class="mdl-dialog firebaseui-dialog firebaseui-id-dialog'+(t?" "+fn(t):"")+'">'+on(e)+"</dialog>")}function gu(t){var e=t.message;return ln(fu({content:pn('<div class="firebaseui-dialog-icon-wrapper"><div class="'+fn(t.Ma)+' firebaseui-dialog-icon"></div></div><div class="firebaseui-progress-dialog-message">'+on(e)+"</div>")}))}function mu(t){for(var e='<div class="firebaseui-list-box-actions">',n=(t=t.items).length,i=0;i<n;i++){var r=t[i];e+='<button type="button" data-listboxid="'+fn(r.id)+'" class="mdl-button firebaseui-id-list-box-dialog-button firebaseui-list-box-dialog-button">'+(r.Ma?'<div class="firebaseui-list-box-icon-wrapper"><div class="firebaseui-list-box-icon '+fn(r.Ma)+'"></div></div>':"")+'<div class="firebaseui-list-box-label-wrapper">'+on(r.label)+"</div></button>"}return e=""+fu({Ab:dn("firebaseui-list-box-dialog"),content:pn(e+"</div>")}),ln(e)}function _u(t){return ln((t=t||{}).tb?'<div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>':'<div class="mdl-progress mdl-js-progress mdl-progress__indeterminate firebaseui-busy-indicator firebaseui-id-busy-indicator"></div>')}function yu(t,e){return cn((t=(t=t||{}).ga).S?t.S:e.hb[t.providerId]?""+e.hb[t.providerId]:t.providerId&&0==t.providerId.indexOf("saml.")||t.providerId&&0==t.providerId.indexOf("oidc.")?t.providerId.substring(5):""+t.providerId)}function vu(t){Tu(t,"upgradeElement")}function bu(t){Tu(t,"downgradeElements")}y(za),za.prototype.a=0,N(Ga,pi),(t=Ga.prototype).Lb=za.Xa(),t.N=function(){return this.g},t.Za=function(t){if(this.Y&&this.Y!=t)throw Error("Method not supported");Ga.K.Za.call(this,t)},t.kb=function(){this.g=this.s.a.createElement("DIV")},t.render=function(t){if(this.na)throw Error("Component already rendered");this.g||this.kb(),t?t.insertBefore(this.g,null):this.s.a.body.appendChild(this.g),this.Y&&!this.Y.na||this.v()},t.v=function(){this.na=!0,Ka(this,(function(t){!t.na&&t.N()&&t.v()}))},t.ya=function(){Ka(this,(function(t){t.na&&t.ya()})),this.L&&Aa(this.L),this.na=!1},t.o=function(){this.na&&this.ya(),this.L&&(this.L.m(),delete this.L),Ka(this,(function(t){t.m()})),this.g&&Ge(this.g),this.Y=this.g=this.oa=this.Ea=null,Ga.K.o.call(this)},t.removeChild=function(t,e){if(t){var n=f(t)?t:t.cb||(t.cb=":"+(t.Lb.a++).toString(36));if(t=this.oa&&n&&(null!==(t=this.oa)&&n in t?t[n]:void 0)||null,n&&t){var i=this.oa;if(n in i&&delete i[n],z(this.Ea,t),e&&(t.ya(),t.g&&Ge(t.g)),null==(e=t))throw Error("Unable to set parent component");e.Y=null,Ga.K.Za.call(e,null)}}if(!t)throw Error("Child is not in parent component");return t},pu.a="firebaseui.auth.soy2.element.infoBar",gu.a="firebaseui.auth.soy2.element.progressDialog",mu.a="firebaseui.auth.soy2.element.listBoxDialog",_u.a="firebaseui.auth.soy2.element.busyIndicator";var wu=["mdl-js-textfield","mdl-js-progress","mdl-js-spinner","mdl-js-button"];function Tu(t,e){t&&window.componentHandler&&window.componentHandler[e]&&wu.forEach((function(n){ca(t,n)&&window.componentHandler[e](t),U(Ve(n,t),(function(t){window.componentHandler[e](t)}))}))}function xu(t,e,n){if(Su.call(this),document.body.appendChild(t),t.showModal||window.dialogPolyfill.registerDialog(t),t.showModal(),vu(t),e&&Ja(this,t,(function(e){var n=t.getBoundingClientRect();(e.clientX<n.left||n.left+n.width<e.clientX||e.clientY<n.top||n.top+n.height<e.clientY)&&Su.call(this)})),!n){var i=this.N().parentElement||this.N().parentNode;if(i){var r=this;this.da=function(){if(t.open){var e=t.getBoundingClientRect().height,n=i.getBoundingClientRect().height,s=i.getBoundingClientRect().top-document.body.getBoundingClientRect().top,o=i.getBoundingClientRect().left-document.body.getBoundingClientRect().left,a=t.getBoundingClientRect().width,u=i.getBoundingClientRect().width;t.style.top=(s+(n-e)/2).toString()+"px",e=o+(u-a)/2,t.style.left=e.toString()+"px",t.style.right=(document.body.getBoundingClientRect().width-e-a).toString()+"px"}else window.removeEventListener("resize",r.da)},this.da(),window.addEventListener("resize",this.da,!1)}}}function Su(){var t=Iu.call(this);t&&(bu(t),t.open&&t.close(),Ge(t),this.da&&window.removeEventListener("resize",this.da))}function Iu(){return $e("firebaseui-id-dialog")}function Eu(){Ge(Au.call(this))}function Au(){return Wa(this,"firebaseui-id-info-bar")}function ku(){return Wa(this,"firebaseui-id-dismiss-info-bar")}var Ou={xa:{"google.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg","github.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/github.svg","facebook.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/facebook.svg","twitter.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/twitter.svg",password:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/mail.svg",phone:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/phone.svg",anonymous:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/anonymous.png","microsoft.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/microsoft.svg","yahoo.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/yahoo.svg","apple.com":"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/apple.png",saml:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/saml.svg",oidc:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/oidc.svg"},wa:{"google.com":"#ffffff","github.com":"#333333","facebook.com":"#3b5998","twitter.com":"#55acee",password:"#db4437",phone:"#02bd7e",anonymous:"#f4b400","microsoft.com":"#2F2F2F","yahoo.com":"#720E9E","apple.com":"#000000",saml:"#007bff",oidc:"#007bff"},hb:{"google.com":"Google","github.com":"GitHub","facebook.com":"Facebook","twitter.com":"Twitter",password:"Password",phone:"Phone",anonymous:"Guest","microsoft.com":"Microsoft","yahoo.com":"Yahoo","apple.com":"Apple"}};function Cu(t,e,n){for(var i in qn.call(this,t,e),n)this[i]=n[i]}function Du(t,e,n,i,r){Ga.call(this,n),this.fb=t,this.eb=e,this.Fa=!1,this.Ga=i||null,this.A=this.ca=null,this.Z=ot(Ou),ut(this.Z,r||{})}function Pu(t){return t.N().parentElement||t.N().parentNode}function Ru(t,e,n){Za(t,e,(function(){n.focus()}))}function Nu(t,e,n){Za(t,e,(function(){n()}))}function Mu(t,e,n){e=(t=t||{}).Va;var i=t.ia;return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in with email</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+nu(t)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?lu(null):"")+iu(null)+'</div></div><div class="firebaseui-card-footer">'+(i?du(n):hu(n))+"</div></form></div>",ln(t)}function Lu(t,e,n){return e=(t=t||{}).ia,t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-in"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content">'+nu(t)+uu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+cu()+'</div><div class="firebaseui-form-actions">'+ru()+'</div></div><div class="firebaseui-card-footer">'+(e?du(n):hu(n))+"</div></form></div>",ln(t)}function Fu(t,e,n){var i=(t=t||{}).Tb;e=t.Ta;var r=t.ia,s='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-sign-up"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Create account</h1></div><div class="firebaseui-card-content">'+nu(t);return i?(t='<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-name-input">First &amp; last name</label><input type="text" name="name" id="ui-sign-in-name-input" autocomplete="name" class="mdl-textfield__input firebaseui-input firebaseui-id-name" value="'+fn(null!=(t=(t=t||{}).name)?t:"")+'"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-name-error"></p></div>',t=ln(t)):t="",n=s+t+au(null)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?lu(null):"")+su()+'</div></div><div class="firebaseui-card-footer">'+(r?du(n):hu(n))+"</div></form></div>",ln(n)}function ju(t,e,n){return e=(t=t||{}).Ta,t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Recover password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Get instructions sent to this email that explain how to reset your password</p>'+nu(t)+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(e?lu(null):"")+iu({label:dn("Send")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(t)}function Uu(t,e,n){e=t.G;var i="";return i+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-recovery-email-sent"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Check your email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="Follow the instructions sent to <strong>"+on(t.email)+"</strong> to recover your password")+'</p></div><div class="firebaseui-card-actions">',e&&(i+='<div class="firebaseui-form-actions">'+iu({label:dn("Done")})+"</div>"),i+='</div><div class="firebaseui-card-footer">'+hu(n)+"</div></div>",ln(i)}function Vu(t,e,n){return ln('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-callback"><div class="firebaseui-callback-indicator-container">'+_u(null)+"</div></div>")}function $u(t,e,n){return ln('<div class="firebaseui-container firebaseui-id-page-spinner">'+_u({tb:!0})+"</div>")}function Bu(){return ln('<div class="firebaseui-container firebaseui-id-page-blank firebaseui-use-spinner"></div>')}function qu(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-sent"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign-in email sent</h1></div><div class="firebaseui-card-content"><div class="firebaseui-email-sent"></div><p class="firebaseui-text">'+(t="A sign-in email with additional instructions was sent to <strong>"+on(t.email)+"</strong>. Check your email to complete sign-in.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ln('<a class="firebaseui-link firebaseui-id-trouble-getting-email-link" href="javascript:void(0)">Trouble getting email?</a>')+'</div><div class="firebaseui-form-actions">'+lu({label:dn("Back")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function zu(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-not-received"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Trouble getting email?</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try these common fixes:<ul><li>Check if the email was marked as spam or filtered.</li><li>Check your internet connection.</li><li>Check that you did not misspell your email.</li><li>Check that your inbox space is not running out or other inbox settings related issues.</li></ul></p><p class="firebaseui-text">If the steps above didn\'t work, you can resend the email. Note that this will deactivate the link in the older email.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+ln('<a class="firebaseui-link firebaseui-id-resend-email-link" href="javascript:void(0)">Resend</a>')+'</div><div class="firebaseui-form-actions">'+lu({label:dn("Back")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(t)}function Gu(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-confirmation"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Confirm email</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Confirm your email to complete sign in</p><div class="firebaseui-relative-wrapper">'+nu(t)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu(null)+iu(null)+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(t)}function Wu(){var t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-different-device-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">New device or browser detected</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Try opening the link using the same device or browser where you started the sign-in process.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu({label:dn("Dismiss")})+"</div></div></div>";return ln(t)}function Hu(){var t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-anonymous-user-mismatch"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Session ended</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">The session associated with this sign-in request has either expired or was cleared.</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu({label:dn("Dismiss")})+"</div></div></div>";return ln(t)}function Ku(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(t="Youve already used <strong>"+on(t.email)+"</strong> to sign in. Enter your password for that account.")+"</p>"+uu()+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">'+cu()+'</div><div class="firebaseui-form-actions">'+ru()+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function Yu(t,e,n){var i=t.email;return e="",t=dn(t=""+yu(t,n)),e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text firebaseui-text-justify">'+(i="Youve already used <strong>"+on(i)+"</strong>. You can connect your <strong>"+on(t)+"</strong> account with <strong>"+on(i)+"</strong> by signing in with email link below.")+'<p class="firebaseui-text firebaseui-text-justify">'+(t="For this flow to successfully connect your "+on(t)+" account with this email, you have to open the link on the same device or browser.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ru()+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function Xu(t,e,n){e="";var i=""+yu(t,n);return e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-link-sign-in-linking-different-device"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text firebaseui-text-justify">'+(t="You originally intended to connect <strong>"+on(i=dn(i))+"</strong> to your email account but have opened the link on a different device where you are not signed in.")+'</p><p class="firebaseui-text firebaseui-text-justify">'+(i="If you still want to connect your <strong>"+on(i)+"</strong> account, open the link on the same device where you started sign-in. Otherwise, tap Continue to sign-in on this device.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+ou()+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function Zu(t,e,n){var i=t.email;return e="",t=dn(t=""+yu(t,n)),e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-federated-linking"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">You already have an account</h2><p class="firebaseui-text">'+(i="Youve already used <strong>"+on(i)+"</strong>. Sign in with "+on(t)+" to continue.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+iu({label:dn("Sign in with "+t)})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function Ju(t,e,n){var i=(t=t||{}).kc;e=t.yb,t=t.Eb;var r='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unauthorized-user"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Not Authorized</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return r+=i?i="<strong>"+on(i)+"</strong> is not authorized to view the requested page.":"User is not authorized to view the requested page.",r+="</p>",e&&(r+='<p class="firebaseui-text firebaseui-id-unauthorized-user-admin-email">'+(e="Please contact <strong>"+on(e)+"</strong> for authorization.")+"</p>"),r+='</div><div class="firebaseui-card-actions"><div class="firebaseui-form-links">',t&&(r+='<a class="firebaseui-link firebaseui-id-unauthorized-user-help-link" href="javascript:void(0)" target="_blank">Learn More</a>'),r+='</div><div class="firebaseui-form-actions">'+lu({label:dn("Back")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(r)}function Qu(t,e,n){return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unsupported-provider"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="To continue sign in with <strong>"+on(t.email)+"</strong> on this device, you have to recover the password.")+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu(null)+iu({label:dn("Recover password")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function tc(t){var e="";return e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Reset your password</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">for <strong>'+on(t.email)+"</strong></p>"+au(function(t){function e(){}var n={label:dn("New password")};for(var i in e.prototype=t,t=new e,n)t[i]=n[i];return t}(t))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+su()+"</div></div></form></div>",ln(e)}function ec(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Password changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new password</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function nc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-password-reset-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try resetting your password again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to reset your password has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function ic(t){var e=t.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Updated email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="Your sign-in email address has been changed back to <strong>"+on(t.email)+"</strong>.")+'</p><p class="firebaseui-text">If you didnt ask to change your sign-in email, its possible someone is trying to access your account and you should <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">change your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></form></div>",ln(n)}function rc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-change-revoke-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Unable to update your email address</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">There was a problem changing your sign-in email back.</p><p class="firebaseui-text">If you try again and still cant reset your email, try asking your administrator for help.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function sc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You can now sign in with your new account</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function oc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-verification-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try verifying your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify your email has expired or the link has already been used</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function ac(t){var e=t.G,n="";return n+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-success"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Your email has been verified and changed</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+(t="You can now sign in with your new email <strong>"+on(t.email)+"</strong>.")+'</p></div><div class="firebaseui-card-actions">'+(e?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(n)}function uc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-verify-and-change-email-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Try updating your email again</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Your request to verify and update your email has expired or the link has already been used.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function cc(t){var e=t.factorId,n=t.phoneNumber;t=t.G;var i='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-success"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Removed second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">';return i+="phone"===e?e="The <strong>"+on(e)+" "+on(n)+"</strong> was removed as a second authentication step.":"The device or app was removed as a second authentication step.",i+='</p><p class="firebaseui-text">If you don\'t recognize this device, someone might be trying to access your account. Consider <a class="firebaseui-link firebaseui-id-reset-password-link" href="javascript:void(0)">changing your password right away</a>.</p></div><div class="firebaseui-card-actions">'+(t?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></form></div>",ln(i)}function lc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-revert-second-factor-addition-failure"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Couldn\'t remove your second factor</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">Something went wrong removing your second factor.</p><p class="firebaseui-text">Try removing it again. If that doesn\'t work, contact support for assistance.</p></div><div class="firebaseui-card-actions">'+((t=t||{}).G?'<div class="firebaseui-form-actions">'+ou()+"</div>":"")+"</div></div>",ln(t)}function hc(t){var e=t.zb;return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-recoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+on(t.errorMessage)+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">',e&&(t+=iu({label:dn("Retry")})),ln(t+"</div></div></div>")}function dc(t){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-unrecoverable-error"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Error encountered</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+on(t.errorMessage)+"</p></div></div>",ln(t)}function pc(t,e,n){var i=t.Qb;return e="",e+='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-email-mismatch"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><h2 class="firebaseui-subtitle">'+(t="Continue with "+on(t.jc)+"?")+'</h2><p class="firebaseui-text">'+(i="You originally wanted to sign in with "+on(i))+'</p></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu(null)+iu({label:dn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form></div>",ln(e)}function fc(t,e,n){var i='<div class="firebaseui-container firebaseui-page-provider-sign-in firebaseui-id-page-provider-sign-in firebaseui-use-spinner"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-idp-list">';e=(t=t.Sb).length;for(var r=0;r<e;r++){var s={ga:t[r]},o=n,a=(s=s||{}).ga,u=s,c="";switch((u=u||{}).ga.providerId){case"google.com":c+="firebaseui-idp-google";break;case"github.com":c+="firebaseui-idp-github";break;case"facebook.com":c+="firebaseui-idp-facebook";break;case"twitter.com":c+="firebaseui-idp-twitter";break;case"phone":c+="firebaseui-idp-phone";break;case"anonymous":c+="firebaseui-idp-anonymous";break;case"password":c+="firebaseui-idp-password";break;default:c+="firebaseui-idp-generic"}u=(u='<button class="firebaseui-idp-button mdl-button mdl-js-button mdl-button--raised '+fn(cn(c))+' firebaseui-id-idp-button" data-provider-id="'+fn(a.providerId)+'" style="background-color:')+fn(mn(cn((c=(c=(c=s)||{}).ga).ta?c.ta:o.wa[c.providerId]?""+o.wa[c.providerId]:0==c.providerId.indexOf("saml.")?""+o.wa.saml:0==c.providerId.indexOf("oidc.")?""+o.wa.oidc:""+o.wa.password)))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="';var l=s;c=o,l=(l=l||{}).ga,c=hn(l.za?gn(l.za):c.xa[l.providerId]?gn(c.xa[l.providerId]):0==l.providerId.indexOf("saml.")?gn(c.xa.saml):0==l.providerId.indexOf("oidc.")?gn(c.xa.oidc):gn(c.xa.password)),u=u+fn(gn(c))+'"></span>',"password"==a.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?u+=on(a.V):a.S?u+=s="Sign in with "+on(yu(s,o)):u+="Sign in with email",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=a.S?u+on(a.S):u+"Email",u+="</span>"):"phone"==a.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?u+=on(a.V):a.S?u+=s="Sign in with "+on(yu(s,o)):u+="Sign in with phone",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=a.S?u+on(a.S):u+"Phone",u+="</span>"):"anonymous"==a.providerId?(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?u+=on(a.V):a.S?u+=s="Sign in with "+on(yu(s,o)):u+="Continue as guest",u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">',u=a.S?u+on(a.S):u+"Guest",u+="</span>"):(u+='<span class="firebaseui-idp-text firebaseui-idp-text-long">',a.V?u+=on(a.V):u+=c="Sign in with "+on(yu(s,o)),u+='</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+(a.S?on(a.S):on(yu(s,o)))+"</span>"),i+='<li class="firebaseui-list-item">'+(a=ln(u+"</button>"))+"</li>"}return i+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+du(n)+"</div></div>",ln(i)}function gc(t,e,n){var i,r=(t=t||{}).Gb,s=t.Va;return e=t.ia,t='<div class="firebaseui-phone-number"><button class="firebaseui-id-country-selector firebaseui-country-selector mdl-button mdl-js-button"><span class="firebaseui-flag firebaseui-country-selector-flag firebaseui-id-country-selector-flag"></span><span class="firebaseui-id-country-selector-code"></span></button><div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label firebaseui-textfield firebaseui-phone-input-wrapper"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-number-input">Phone number</label><input type="tel" name="phoneNumber" id="ui-sign-in-phone-number-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-number" value="'+fn(null!=(t=(t=t||{}).Aa)?t:"")+'"></div></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-phone-number-error firebaseui-id-phone-number-error"></p></div>',i=(t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-start"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Enter your phone number</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+ln(t))+(i=r?ln('<div class="firebaseui-recaptcha-wrapper"><div class="firebaseui-recaptcha-container"></div><div class="firebaseui-error-wrapper firebaseui-recaptcha-error-wrapper"><p class="firebaseui-error firebaseui-hidden firebaseui-id-recaptcha-error"></p></div></div>'):"")+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+(s?lu(null):"")+iu({label:dn("Verify")})+'</div></div><div class="firebaseui-card-footer">',e?(e='<p class="firebaseui-tos firebaseui-phone-tos">',e=n.F&&n.D?e+'By tapping Verify, you are indicating that you accept our <a href="javascript:void(0)" class="firebaseui-link firebaseui-tos-link" target="_blank">Terms of Service</a> and <a href="javascript:void(0)" class="firebaseui-link firebaseui-pp-link" target="_blank">Privacy Policy</a>. An SMS may be sent. Message &amp; data rates may apply.':e+"By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.",n=ln(e+"</p>")):n=ln('<p class="firebaseui-tos firebaseui-phone-sms-notice">By tapping Verify, an SMS may be sent. Message &amp; data rates may apply.</p>')+hu(n),ln(i+n+"</div></form></div>")}function mc(t,e,n){var i="";return t='Enter the 6-digit code we sent to <a class="firebaseui-link firebaseui-change-phone-number-link firebaseui-id-change-phone-number-link" href="javascript:void(0)">&lrm;'+on(e=(t=t||{}).phoneNumber)+"</a>",on(e),e=i,n='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-phone-sign-in-finish"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Verify your phone number</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">'+t+"</p>"+(i=ln('<div class="firebaseui-textfield mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label class="mdl-textfield__label firebaseui-label" for="ui-sign-in-phone-confirmation-code-input">6-digit code</label><input type="number" name="phoneConfirmationCode" id="ui-sign-in-phone-confirmation-code-input" class="mdl-textfield__input firebaseui-input firebaseui-id-phone-confirmation-code"></div><div class="firebaseui-error-wrapper"><p class="firebaseui-error firebaseui-text-input-error firebaseui-hidden firebaseui-id-phone-confirmation-code-error"></p></div>'))+'</div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+lu(null)+iu({label:dn("Continue")})+'</div></div><div class="firebaseui-card-footer">'+hu(n)+"</div></form>",t=ln('<div class="firebaseui-resend-container"><span class="firebaseui-id-resend-countdown"></span><a href="javascript:void(0)" class="firebaseui-id-resend-link firebaseui-hidden firebaseui-link">Resend</a></div>'),ln(e+(n+t+"</div>"))}function _c(){return ln('<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-sign-out"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign Out</h1></div><div class="firebaseui-card-content"><p class="firebaseui-text">You are now successfully signed out.</p></div></div>')}function yc(t,e,n){var i='<div class="firebaseui-container firebaseui-page-select-tenant firebaseui-id-page-select-tenant"><div class="firebaseui-card-content"><form onsubmit="return false;"><ul class="firebaseui-tenant-list">';e=(t=t.ec).length;for(var r=0;r<e;r++){var s=t[r],o="",a=on(s.displayName),u=s.tenantId?s.tenantId:"top-level-project";o+='<button class="firebaseui-tenant-button mdl-button mdl-js-button mdl-button--raised firebaseui-tenant-selection-'+fn(u=dn(u))+' firebaseui-id-tenant-selection-button"'+(s.tenantId?'data-tenant-id="'+fn(s.tenantId)+'"':"")+'style="background-color:'+fn(mn(s.ta))+'"><span class="firebaseui-idp-icon-wrapper"><img class="firebaseui-idp-icon" alt="" src="'+fn(gn(s.za))+'"></span><span class="firebaseui-idp-text firebaseui-idp-text-long">',s.V?o+=on(s.V):o+=s="Sign in to "+on(s.displayName),i+='<li class="firebaseui-list-item">'+(o=ln(o+'</span><span class="firebaseui-idp-text firebaseui-idp-text-short">'+a+"</span></button>"))+"</li>"}return i+='</ul></form></div><div class="firebaseui-card-footer firebaseui-provider-sign-in-footer">'+du(n)+"</div></div>",ln(i)}function vc(t,e,n){return t='<div class="mdl-card mdl-shadow--2dp firebaseui-container firebaseui-id-page-provider-match-by-email"><form onsubmit="return false;"><div class="firebaseui-card-header"><h1 class="firebaseui-title">Sign in</h1></div><div class="firebaseui-card-content"><div class="firebaseui-relative-wrapper">'+nu(null)+'</div></div><div class="firebaseui-card-actions"><div class="firebaseui-form-actions">'+iu(null)+'</div></div><div class="firebaseui-card-footer">'+du(n)+"</div></form></div>",ln(t)}function bc(){return Wa(this,"firebaseui-id-submit")}function wc(){return Wa(this,"firebaseui-id-secondary-link")}function Tc(t,e){Ja(this,bc.call(this),(function(e){t(e)}));var n=wc.call(this);n&&e&&Ja(this,n,(function(t){e(t)}))}function xc(){return Wa(this,"firebaseui-id-password")}function Sc(){return Wa(this,"firebaseui-id-password-error")}function Ic(){var t=xc.call(this),e=Sc.call(this);Xa(this,t,(function(){eu(e)&&(Ya(t,!0),Qa(e))}))}function Ec(){var t=xc.call(this),e=Sc.call(this);return da(t)?(Ya(t,!0),Qa(e),e=!0):(Ya(t,!1),tu(e,cn("Enter your password").toString()),e=!1),e?da(t):null}function Ac(t,e,n,i,r,s){Du.call(this,Ku,{email:t},s,"passwordLinking",{F:i,D:r}),this.w=e,this.H=n}N(Cu,qn),N(Du,Ga),(t=Du.prototype).kb=function(){var t=en(this.fb,this.eb,this.Z,this.s);vu(t),this.g=t},t.v=function(){if(Du.K.v.call(this),yi(Pu(this),new Cu("pageEnter",Pu(this),{pageId:this.Ga})),this.bb()&&this.Z.F){var t=this.Z.F;Ja(this,this.bb(),(function(){t()}))}if(this.ab()&&this.Z.D){var e=this.Z.D;Ja(this,this.ab(),(function(){e()}))}},t.ya=function(){yi(Pu(this),new Cu("pageExit",Pu(this),{pageId:this.Ga})),Du.K.ya.call(this)},t.o=function(){window.clearTimeout(this.ca),this.eb=this.fb=this.ca=null,this.Fa=!1,this.A=null,bu(this.N()),Du.K.o.call(this)},t.I=function(t,e,n,i){function r(){if(s.T)return null;s.Fa=!1,window.clearTimeout(s.ca),s.ca=null,s.A&&(bu(s.A),Ge(s.A),s.A=null)}var s=this;return s.Fa?null:(function(t){t.Fa=!0;var e=ca(t.N(),"firebaseui-use-spinner");t.ca=window.setTimeout((function(){t.N()&&null===t.A&&(t.A=en(_u,{tb:e},null,t.s),t.N().appendChild(t.A),vu(t.A))}),500)}(s),t.apply(null,e).then(n,i).then(r,r))},C(Du.prototype,{a:function(t){Eu.call(this);var e=en(pu,{message:t},null,this.s);this.N().appendChild(e),Ja(this,ku.call(this),(function(){Ge(e)}))},yc:Eu,Ac:Au,zc:ku,$:function(t,e){t=en(gu,{Ma:t,message:e},null,this.s),xu.call(this,t)},h:Su,Cb:Iu,Cc:function(){return Wa(this,"firebaseui-tos")},bb:function(){return Wa(this,"firebaseui-tos-link")},ab:function(){return Wa(this,"firebaseui-pp-link")},Dc:function(){return Wa(this,"firebaseui-tos-list")}}),Mu.a="firebaseui.auth.soy2.page.signIn",Lu.a="firebaseui.auth.soy2.page.passwordSignIn",Fu.a="firebaseui.auth.soy2.page.passwordSignUp",ju.a="firebaseui.auth.soy2.page.passwordRecovery",Uu.a="firebaseui.auth.soy2.page.passwordRecoveryEmailSent",Vu.a="firebaseui.auth.soy2.page.callback",$u.a="firebaseui.auth.soy2.page.spinner",Bu.a="firebaseui.auth.soy2.page.blank",qu.a="firebaseui.auth.soy2.page.emailLinkSignInSent",zu.a="firebaseui.auth.soy2.page.emailNotReceived",Gu.a="firebaseui.auth.soy2.page.emailLinkSignInConfirmation",Wu.a="firebaseui.auth.soy2.page.differentDeviceError",Hu.a="firebaseui.auth.soy2.page.anonymousUserMismatch",Ku.a="firebaseui.auth.soy2.page.passwordLinking",Yu.a="firebaseui.auth.soy2.page.emailLinkSignInLinking",Xu.a="firebaseui.auth.soy2.page.emailLinkSignInLinkingDifferentDevice",Zu.a="firebaseui.auth.soy2.page.federatedLinking",Ju.a="firebaseui.auth.soy2.page.unauthorizedUser",Qu.a="firebaseui.auth.soy2.page.unsupportedProvider",tc.a="firebaseui.auth.soy2.page.passwordReset",ec.a="firebaseui.auth.soy2.page.passwordResetSuccess",nc.a="firebaseui.auth.soy2.page.passwordResetFailure",ic.a="firebaseui.auth.soy2.page.emailChangeRevokeSuccess",rc.a="firebaseui.auth.soy2.page.emailChangeRevokeFailure",sc.a="firebaseui.auth.soy2.page.emailVerificationSuccess",oc.a="firebaseui.auth.soy2.page.emailVerificationFailure",ac.a="firebaseui.auth.soy2.page.verifyAndChangeEmailSuccess",uc.a="firebaseui.auth.soy2.page.verifyAndChangeEmailFailure",cc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionSuccess",lc.a="firebaseui.auth.soy2.page.revertSecondFactorAdditionFailure",hc.a="firebaseui.auth.soy2.page.recoverableError",dc.a="firebaseui.auth.soy2.page.unrecoverableError",pc.a="firebaseui.auth.soy2.page.emailMismatch",fc.a="firebaseui.auth.soy2.page.providerSignIn",gc.a="firebaseui.auth.soy2.page.phoneSignInStart",mc.a="firebaseui.auth.soy2.page.phoneSignInFinish",_c.a="firebaseui.auth.soy2.page.signOut",yc.a="firebaseui.auth.soy2.page.selectTenant",vc.a="firebaseui.auth.soy2.page.providerMatchByEmail",a(Ac,Du),Ac.prototype.v=function(){this.P(),this.M(this.w,this.H),Nu(this,this.i(),this.w),this.i().focus(),Du.prototype.v.call(this)},Ac.prototype.o=function(){this.w=null,Du.prototype.o.call(this)},Ac.prototype.j=function(){return da(Wa(this,"firebaseui-id-email"))},C(Ac.prototype,{i:xc,B:Sc,P:Ic,u:Ec,ea:bc,ba:wc,M:Tc});var kc=/^[+a-zA-Z0-9_.!#$%&'*\/=?^`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z0-9]{2,63}$/;function Oc(){return Wa(this,"firebaseui-id-email")}function Cc(){return Wa(this,"firebaseui-id-email-error")}function Dc(t){var e=Oc.call(this),n=Cc.call(this);Xa(this,e,(function(){eu(n)&&(Ya(e,!0),Qa(n))})),t&&Za(this,e,(function(){t()}))}function Pc(){return Y(da(Oc.call(this))||"")}function Rc(){var t=Oc.call(this),e=Cc.call(this),n=da(t)||"";return n?kc.test(n)?(Ya(t,!0),Qa(e),e=!0):(Ya(t,!1),tu(e,cn("That email address isn't correct").toString()),e=!1):(Ya(t,!1),tu(e,cn("Enter your email address to continue").toString()),e=!1),e?Y(da(t)):null}function Nc(t,e,n,i,r,s,o){Du.call(this,Lu,{email:n,ia:!!s},o,"passwordSignIn",{F:i,D:r}),this.w=t,this.H=e}function Mc(t,e,n,i,r,s){Du.call(this,t,e,i,r||"notice",s),this.i=n||null}function Lc(t,e,n,i,r){Mc.call(this,Uu,{email:t,G:!!e},e,r,"passwordRecoveryEmailSent",{F:n,D:i})}function Fc(t,e){Mc.call(this,sc,{G:!!t},t,e,"emailVerificationSuccess")}function jc(t,e){Mc.call(this,oc,{G:!!t},t,e,"emailVerificationFailure")}function Uc(t,e,n){Mc.call(this,ac,{email:t,G:!!e},e,n,"verifyAndChangeEmailSuccess")}function Vc(t,e){Mc.call(this,uc,{G:!!t},t,e,"verifyAndChangeEmailFailure")}function $c(t,e){Mc.call(this,lc,{G:!!t},t,e,"revertSecondFactorAdditionFailure")}function Bc(t){Mc.call(this,_c,void 0,void 0,t,"signOut")}function qc(t,e){Mc.call(this,ec,{G:!!t},t,e,"passwordResetSuccess")}function zc(t,e){Mc.call(this,nc,{G:!!t},t,e,"passwordResetFailure")}function Gc(t,e){Mc.call(this,rc,{G:!!t},t,e,"emailChangeRevokeFailure")}function Wc(t,e,n){Mc.call(this,hc,{errorMessage:t,zb:!!e},e,n,"recoverableError")}function Hc(t,e){Mc.call(this,dc,{errorMessage:t},void 0,e,"unrecoverableError")}function Kc(t){if("auth/invalid-credential"===t.code&&t.message&&-1!==t.message.indexOf("error=consent_required"))return{code:"auth/user-cancelled"};if(t.message&&-1!==t.message.indexOf("HTTP Cloud Function returned an error:")){var e=JSON.parse(t.message.substring(t.message.indexOf("{"),t.message.lastIndexOf("}")+1));return{code:t.code,message:e&&e.error&&e.error.message||t.message}}return t}function Yc(t,e,n,i){function r(n){if(!n.name||"cancel"!=n.name){t:{var i=n.message;try{var r=((JSON.parse(i).error||{}).message||"").toLowerCase().match(/invalid.+(access|id)_token/);if(r&&r.length){var s=!0;break t}}catch(t){}s=!1}if(s)n=Pu(e),e.m(),nl(t,n,void 0,cn("Your sign-in session has expired. Please try again.").toString());else{if(s=n&&n.message||"",n.code){if("auth/email-already-in-use"==n.code||"auth/credential-already-in-use"==n.code)return;s=Jc(n)}e.a(s)}}}if(Eh(t),i)return Xc(t,n),Bi();if(!n.credential)throw Error("No credential found!");if(!mh(t).currentUser&&!n.user)throw Error("User not logged in.");try{var s=function(t,e){return Oh(t),xh(t,(function(n){if(t.j&&!t.j.isAnonymous&&Io(kh(t))&&!mh(t).currentUser)return Dh(t).then((function(){return"password"==e.credential.providerId&&(e.credential=null),e}));if(n)return Dh(t).then((function(){return n.linkWithCredential(e.credential)})).then((function(t){return e.user=t.user,e.credential=t.credential,e.operationType=t.operationType,e.additionalUserInfo=t.additionalUserInfo,e}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Ph(t,n,e.credential)}));if(!e.user)throw Error('Internal error: An incompatible or outdated version of "firebase.js" may be used.');return Dh(t).then((function(){return _h(t).updateCurrentUser(e.user)})).then((function(){return e.user=_h(t).currentUser,e.operationType="signIn",e.credential&&e.credential.providerId&&"password"==e.credential.providerId&&(e.credential=null),e}))}))}(t,n)}catch(t){return zr(t.code||t.message,t),e.a(t.code||t.message),Bi()}return n=s.then((function(e){Xc(t,e)}),r).then(void 0,r),Ih(t,s),Bi(n)}function Xc(t,e){if(!e.user)throw Error("No user found");var n=Go(kh(t));if(zo(kh(t))&&n&&Kr("Both signInSuccess and signInSuccessWithAuthResult callbacks are provided. Only signInSuccessWithAuthResult callback will be invoked."),n){n=Go(kh(t));var i=Xs(yh(t))||void 0;Ks(zs,yh(t));var r=!1;er()?(n&&!n(e,i)||(r=!0,Le(window.opener.location,Zc(t,i))),n||window.close()):n&&!n(e,i)||(r=!0,Le(window.location,Zc(t,i))),r||t.reset()}else{n=e.user,e=e.credential,i=zo(kh(t)),r=Xs(yh(t))||void 0,Ks(zs,yh(t));var s=!1;er()?(i&&!i(n,e,r)||(s=!0,Le(window.opener.location,Zc(t,r))),i||window.close()):i&&!i(n,e,r)||(s=!0,Le(window.location,Zc(t,r))),s||t.reset()}}function Zc(t,e){if(!(t=e||kh(t).a.get("signInSuccessUrl")))throw Error("No redirect URL has been found. You must either specify a signInSuccessUrl in the configuration, pass in a redirect URL to the widget URL, or return false from the callback.");return t}function Jc(t){var e={code:t.code},n="";switch((e=e||{}).code){case"auth/email-already-in-use":n+="The email address is already used by another account";break;case"auth/requires-recent-login":case"auth/user-token-expired":n+=cn("Please login again to perform this operation");break;case"auth/too-many-requests":n+="You have entered an incorrect password too many times. Please try again in a few minutes.";break;case"auth/user-cancelled":n+="Please authorize the required permissions to sign in to the application";break;case"auth/user-not-found":n+="That email address doesn't match an existing account";break;case"auth/weak-password":n+="Strong passwords have at least 6 characters and a mix of letters and numbers";break;case"auth/wrong-password":n+="The email and password you entered don't match";break;case"auth/network-request-failed":n+="A network error has occurred";break;case"auth/invalid-phone-number":n+=An();break;case"auth/invalid-verification-code":n+=cn("Wrong code. Try again.");break;case"auth/code-expired":n+="This code is no longer valid";break;case"auth/expired-action-code":n+="This code has expired.";break;case"auth/invalid-action-code":n+="The action code is invalid. This can happen if the code is malformed, expired, or has already been used."}if(e=cn(n).toString())return e;try{return JSON.parse(t.message),zr("Internal error: "+t.message,void 0),On().toString()}catch(e){return t.message}}function Qc(t,e,n,i){function r(){!function(t,e){Ys(qs,{tenantId:t.a},e)}(new is(t.h.tenantId||null),yh(t)),Ih(t,e.I(k(t.dc,t),[u],(function(){if("file:"===(window.location&&window.location.protocol))return Ih(t,ph(t).then((function(n){e.m(),Ks(qs,yh(t)),aa("callback",t,a,Bi(n))}),s))}),o))}function s(i){if(Ks(qs,yh(t)),!i.name||"cancel"!=i.name)switch(i=Kc(i),i.code){case"auth/popup-blocked":r();break;case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":case"auth/credential-already-in-use":break;case"auth/network-request-failed":case"auth/too-many-requests":case"auth/user-cancelled":e.a(Jc(i));break;case"auth/admin-restricted-operation":e.m(),Ro(kh(t))?aa("handleUnauthorizedUser",t,a,null,n):aa("callback",t,a,qi(i));break;default:e.m(),aa("callback",t,a,qi(i))}}function o(n){Ks(qs,yh(t)),n.name&&"cancel"==n.name||(zr("signInWithRedirect: "+n.code,void 0),n=Jc(n),"blank"==e.Ga&&Bo(kh(t))?(e.m(),aa("providerSignIn",t,a,n)):e.a(n))}var a=Pu(e),u=function(t,e,n){var i=xo[e]&&h.auth[xo[e]]?new h.auth[xo[e]]:0==e.indexOf("saml.")?new h.auth.SAMLAuthProvider(e):new h.auth.OAuthProvider(e);if(!i)throw Error("Invalid Firebase Auth provider!");var r=No(kh(t),e);if(i.addScope)for(var s=0;s<r.length;s++)i.addScope(r[s]);return r=Mo(kh(t),e)||{},n&&(t=e==h.auth.GoogleAuthProvider.PROVIDER_ID?"login_hint":e==h.auth.GithubAuthProvider.PROVIDER_ID?"login":(t=Oo(kh(t),e))&&t.Ob)&&(r[t]=n),i.setCustomParameters&&i.setCustomParameters(r),i}(t,n,i);qo(kh(t))==ea?r():Ih(t,function(t,e){return Oh(t),xh(t,(function(n){return n&&!Zs(yh(t))?n.linkWithPopup(e).then((function(t){return t}),(function(e){if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential)throw e;return Ph(t,e)})):mh(t).signInWithPopup(e)}))}(t,u).then((function(n){e.m(),aa("callback",t,a,Bi(n))}),s))}function tl(t){return 1==(t=ko(kh(t))).length&&t[0]==h.auth.EmailAuthProvider.PROVIDER_ID}function el(t){return 1==(t=ko(kh(t))).length&&t[0]==h.auth.PhoneAuthProvider.PROVIDER_ID}function nl(t,e,n,i){tl(t)?i?aa("signIn",t,e,n,i):ol(t,e,n):t&&el(t)&&!i?aa("phoneSignInStart",t,e):t&&Bo(kh(t))&&!i?aa("federatedRedirect",t,e,n):aa("providerSignIn",t,e,i,n)}function il(t,e,n,i){var r=Pu(e);Ih(t,e.I(k(mh(t).fetchSignInMethodsForEmail,mh(t)),[n],(function(s){e.m(),rl(t,r,s,n,i)}),(function(t){t=Jc(t),e.a(t)})))}function rl(t,e,n,i,r,s){n.length||$o(kh(t))&&!$o(kh(t))?q(n,h.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?aa("passwordSignIn",t,e,i,s):1==n.length&&n[0]===h.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?$o(kh(t))?aa("sendEmailLinkForSignIn",t,e,i,(function(){aa("signIn",t,e)})):aa("unsupportedProvider",t,e,i):(n=wo(n,ko(kh(t))))?(Qs(new ts(i),yh(t)),aa("federatedSignIn",t,e,i,n,r)):aa("unsupportedProvider",t,e,i):Po(kh(t))?aa("handleUnauthorizedUser",t,e,i,h.auth.EmailAuthProvider.PROVIDER_ID):$o(kh(t))?aa("sendEmailLinkForSignIn",t,e,i,(function(){aa("signIn",t,e)})):aa("passwordSignUp",t,e,i,void 0,void 0,s)}function sl(t,e,n,i,r,s){var o=Pu(e);Ih(t,e.I(k(t.Ib,t),[n,s],(function(){e.m(),aa("emailLinkSignInSent",t,o,n,i,s)}),r))}function ol(t,e,n){n?aa("prefilledEmailSignIn",t,e,n):aa("signIn",t,e)}function al(){return yt(rr(),"oobCode")}function ul(){var t=yt(rr(),"continueUrl");return t?function(){Le(window.location,t)}:null}function cl(t,e){Du.call(this,Hu,void 0,e,"anonymousUserMismatch"),this.i=t}function ll(t){Du.call(this,Vu,void 0,t,"callback")}function hl(t,e,n){if(n.user){var i={user:n.user,credential:n.credential,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},r=Zs(yh(t)),s=r&&r.g;if(s&&!function(t,e){if(e==t.email)return!0;if(t.providerData)for(var n=0;n<t.providerData.length;n++)if(e==t.providerData[n].email)return!0;return!1}(n.user,s))!function(t,e,n){var i=Pu(e);Ih(t,Dh(t).then((function(){e.m(),aa("emailMismatch",t,i,n)}),(function(t){t.name&&"cancel"==t.name||(t=Jc(t.code),e.a(t))})))}(t,e,i);else{var o=r&&r.a;o?Ih(t,n.user.linkWithCredential(o).then((function(n){i={user:n.user,credential:o,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo},dl(t,e,i)}),(function(n){pl(t,e,n)}))):dl(t,e,i)}}else n=Pu(e),e.m(),Js(yh(t)),nl(t,n)}function dl(t,e,n){Js(yh(t)),Yc(t,e,n)}function pl(t,e,n){var i=Pu(e);Js(yh(t)),n=Jc(n),e.m(),nl(t,i,void 0,n)}function fl(t,e,n,i){var r=Pu(e);Ih(t,mh(t).fetchSignInMethodsForEmail(n).then((function(s){e.m(),s.length?q(s,h.auth.EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD)?aa("passwordLinking",t,r,n):1==s.length&&s[0]===h.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD?aa("emailLinkSignInLinking",t,r,n):(s=wo(s,ko(kh(t))))?aa("federatedLinking",t,r,n,s,i):(Js(yh(t)),aa("unsupportedProvider",t,r,n)):(Js(yh(t)),aa("passwordRecovery",t,r,n,!1,Cn().toString()))}),(function(n){pl(t,e,n)})))}function gl(t,e){Du.call(this,Wu,void 0,e,"differentDeviceError"),this.i=t}function ml(t,e,n,i){Du.call(this,ic,{email:t,G:!!n},i,"emailChangeRevoke"),this.l=e,this.i=n||null}function _l(){return Wa(this,"firebaseui-id-new-password")}function yl(){return Wa(this,"firebaseui-id-password-toggle")}function vl(){this.Ra=!this.Ra;var t=yl.call(this),e=_l.call(this);this.Ra?(e.type="text",la(t,"firebaseui-input-toggle-off"),ha(t,"firebaseui-input-toggle-on")):(e.type="password",la(t,"firebaseui-input-toggle-on"),ha(t,"firebaseui-input-toggle-off")),e.focus()}function bl(){return Wa(this,"firebaseui-id-new-password-error")}function wl(){this.Ra=!1;var t=_l.call(this);t.type="password";var e=bl.call(this);Xa(this,t,(function(){eu(e)&&(Ya(t,!0),Qa(e))}));var n=yl.call(this);la(n,"firebaseui-input-toggle-on"),ha(n,"firebaseui-input-toggle-off"),function(t,e,n){Fn(t,O(jn,e=new wa(e))),Ea(Ha(t),e,"focusin",n)}(this,t,(function(){la(n,"firebaseui-input-toggle-focus"),ha(n,"firebaseui-input-toggle-blur")})),function(t,e,n){Fn(t,O(jn,e=new wa(e))),Ea(Ha(t),e,"focusout",n)}(this,t,(function(){la(n,"firebaseui-input-toggle-blur"),ha(n,"firebaseui-input-toggle-focus")})),Ja(this,n,k(vl,this))}function Tl(){var t=_l.call(this),e=bl.call(this);return da(t)?(Ya(t,!0),Qa(e),e=!0):(Ya(t,!1),tu(e,cn("Enter your password").toString()),e=!1),e?da(t):null}function xl(t,e,n){Du.call(this,tc,{email:t},n,"passwordReset"),this.l=e}function Sl(t,e,n,i,r){Du.call(this,cc,{factorId:t,phoneNumber:n||null,G:!!i},r,"revertSecondFactorAdditionSuccess"),this.l=e,this.i=i||null}function Il(t,e,n,i){"auth/weak-password"==(i&&i.code)?(t=Jc(i),Ya(n.i(),!1),tu(n.w(),t),n.i().focus()):(n&&n.m(),(n=new zc).render(e),fh(t,n))}function El(t,e){try{var n="number"==typeof t.selectionStart}catch(t){n=!1}n?(t.selectionStart=e,t.selectionEnd=e):Jt&&!he("9")&&("textarea"==t.type&&(e=t.value.substring(0,e).replace(/(\r\n|\r|\n)/g,"\n").length),(t=t.createTextRange()).collapse(!0),t.move("character",e),t.select())}function Al(t,e,n,i,r,s){Du.call(this,Gu,{email:n},s,"emailLinkSignInConfirmation",{F:i,D:r}),this.l=t,this.u=e}function kl(t,e,n,i,r){Du.call(this,Xu,{ga:t},r,"emailLinkSignInLinkingDifferentDevice",{F:n,D:i}),this.i=e}function Ol(t){Du.call(this,Bu,void 0,t,"blank")}function Cl(t,e,n,i,r){var s=new Ol,o=new Ut(n),a=o.a.a.get(qt.$a)||"",u=o.a.a.get(qt.Sa)||"",c="1"===o.a.a.get(qt.Qa),l=Vt(o),d=o.a.a.get(qt.PROVIDER_ID)||null;o=o.a.a.get(qt.vb)||null,Ah(t,o);var p=!Hs(Gs,yh(t)),f=i||function(t,e){var n=null;if(e=Hs(Gs,e))try{var i=Is(t,e),r=JSON.parse(i);n=r&&r.email||null}catch(t){}return n}(u,yh(t)),g=(i=function(t,e){var n=null;if(e=Hs(Ws,e))try{var i=Is(t,e);n=JSON.parse(i)}catch(t){}return ns(n||null)}(u,yh(t)))&&i.a;d&&g&&g.providerId!==d&&(g=null),s.render(e),fh(t,s),Ih(t,s.I((function(){var e=Bi(null);e=l&&p||p&&c?qi(Error("anonymous-user-not-found")):function(t,e){var n=Vt(new Ut(e));return n?(e=new Mi((function(e,i){var r=_h(t).onAuthStateChanged((function(t){r(),t&&t.isAnonymous&&t.uid===n?e(t):t&&t.isAnonymous&&t.uid!==n?i(Error("anonymous-user-mismatch")):i(Error("anonymous-user-not-found"))}));Ih(t,r)})),Ih(t,e),e):Bi(null)}(t,n).then((function(t){if(d&&!g)throw Error("pending-credential-not-found");return t}));var i=null;return e.then((function(e){return i=e,r?null:mh(t).checkActionCode(a)})).then((function(){return i}))}),[],(function(i){f?function(t,e,n,i,r,s){var o=Pu(e);e.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Signing in...").toString());var a=null;r=(s?function(t,e,n,i,r){Oh(t);var s=r||null,o=h.auth.EmailAuthProvider.credentialWithLink(n,i);return n=s?mh(t).signInWithEmailLink(n,i).then((function(t){return t.user.linkWithCredential(s)})).then((function(){return Dh(t)})).then((function(){return Ph(t,{code:"auth/email-already-in-use"},s)})):mh(t).fetchSignInMethodsForEmail(n).then((function(n){return n.length?Ph(t,{code:"auth/email-already-in-use"},o):e.linkWithCredential(o)})),Ih(t,n),n}(t,s,n,i,r):function(t,e,n,i){Oh(t);var r,s=i||null;return e=mh(t).signInWithEmailLink(e,n).then((function(t){if(r={user:t.user,credential:null,operationType:t.operationType,additionalUserInfo:t.additionalUserInfo},s)return t.user.linkWithCredential(s).then((function(t){r={user:t.user,credential:s,operationType:r.operationType,additionalUserInfo:t.additionalUserInfo}}))})).then((function(){Dh(t)})).then((function(){return _h(t).updateCurrentUser(r.user)})).then((function(){return r.user=_h(t).currentUser,r})),Ih(t,e),e}(t,n,i,r)).then((function(n){Ks(Ws,yh(t)),Ks(Gs,yh(t)),e.h(),e.$("firebaseui-icon-done",cn("Signed in!").toString()),a=setTimeout((function(){e.h(),Yc(t,e,n,!0)}),1e3),Ih(t,(function(){e&&(e.h(),e.m()),clearTimeout(a)}))}),(function(r){if(e.h(),e.m(),!r.name||"cancel"!=r.name){var s=Jc(r=Kc(r));"auth/email-already-in-use"==r.code||"auth/credential-already-in-use"==r.code?(Ks(Ws,yh(t)),Ks(Gs,yh(t))):"auth/invalid-email"==r.code?(s=cn("The email provided does not match the current sign-in session.").toString(),aa("emailLinkConfirmation",t,o,i,Dl,null,s)):nl(t,o,n,s)}})),Ih(t,r)}(t,s,f,n,g,i):c?(s.m(),aa("differentDeviceError",t,e)):(s.m(),aa("emailLinkConfirmation",t,e,n,Dl))}),(function(i){var r=void 0;if(!i||!i.name||"cancel"!=i.name)switch(s.m(),i&&i.message){case"anonymous-user-not-found":aa("differentDeviceError",t,e);break;case"anonymous-user-mismatch":aa("anonymousUserMismatch",t,e);break;case"pending-credential-not-found":aa("emailLinkNewDeviceLinking",t,e,n,Pl);break;default:i&&(r=Jc(i)),nl(t,e,void 0,r)}})))}function Dl(t,e,n,i){Cl(t,e,i,n,!0)}function Pl(t,e,n){Cl(t,e,n)}function Rl(t,e,n,i,r,s){Du.call(this,Yu,{email:t,ga:e},s,"emailLinkSignInLinking",{F:i,D:r}),this.i=n}function Nl(t,e,n,i,r,s){Du.call(this,qu,{email:t},s,"emailLinkSignInSent",{F:i,D:r}),this.u=e,this.i=n}function Ml(t,e,n,i,r,s,o){Du.call(this,pc,{jc:t,Qb:e},o,"emailMismatch",{F:r,D:s}),this.l=n,this.i=i}function Ll(t,e,n,i,r){Du.call(this,zu,void 0,r,"emailNotReceived",{F:n,D:i}),this.l=t,this.i=e}function Fl(t,e,n,i,r,s){Du.call(this,Zu,{email:t,ga:e},s,"federatedLinking",{F:i,D:r}),this.i=n}function jl(t,e,n,i,r,s){Du.call(this,ju,{email:n,Ta:!!e},s,"passwordRecovery",{F:i,D:r}),this.l=t,this.u=e}function Ul(){return Wa(this,"firebaseui-id-name")}function Vl(){return Wa(this,"firebaseui-id-name-error")}function $l(t,e,n,i,r,s,o,a,u){Du.call(this,Fu,{email:i,Tb:t,name:r,Ta:!!n,ia:!!a},u,"passwordSignUp",{F:s,D:o}),this.w=e,this.H=n,this.B=t}function Bl(){return Wa(this,"firebaseui-id-phone-confirmation-code")}function ql(){return Wa(this,"firebaseui-id-phone-confirmation-code-error")}function zl(){return Wa(this,"firebaseui-id-resend-countdown")}function Gl(t,e,n,i,r,s,o,a,u){Du.call(this,mc,{phoneNumber:r},u,"phoneSignInFinish",{F:o,D:a}),this.jb=s,this.i=new Ta(1e3),this.B=s,this.P=t,this.l=e,this.H=n,this.M=i}a(Nc,Du),Nc.prototype.v=function(){this.P(),this.ea(),this.ba(this.w,this.H),Ru(this,this.l(),this.i()),Nu(this,this.i(),this.w),da(this.l())?this.i().focus():this.l().focus(),Du.prototype.v.call(this)},Nc.prototype.o=function(){this.H=this.w=null,Du.prototype.o.call(this)},C(Nc.prototype,{l:Oc,U:Cc,P:Dc,M:Pc,j:Rc,i:xc,B:Sc,ea:Ic,u:Ec,ua:bc,pa:wc,ba:Tc}),N(Mc,Du),Mc.prototype.v=function(){this.i&&(this.u(this.i),this.l().focus()),Mc.K.v.call(this)},Mc.prototype.o=function(){this.i=null,Mc.K.o.call(this)},C(Mc.prototype,{l:bc,w:wc,u:Tc}),N(Lc,Mc),N(Fc,Mc),N(jc,Mc),N(Uc,Mc),N(Vc,Mc),N($c,Mc),N(Bc,Mc),N(qc,Mc),N(zc,Mc),N(Gc,Mc),N(Wc,Mc),N(Hc,Mc),a(cl,Du),cl.prototype.v=function(){var t=this;Ja(this,this.l(),(function(){t.i()})),this.l().focus(),Du.prototype.v.call(this)},cl.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(cl.prototype,{l:wc}),oa.anonymousUserMismatch=function(t,e){var n=new cl((function(){n.m(),nl(t,e)}));n.render(e),fh(t,n)},a(ll,Du),ll.prototype.I=function(t,e,n,i){return t.apply(null,e).then(n,i)},oa.callback=function(t,e,n){var i=new ll;i.render(e),fh(t,i),n=n||ph(t),Ih(t,n.then((function(e){hl(t,i,e)}),(function(n){if((n=Kc(n))&&("auth/account-exists-with-different-credential"==n.code||"auth/email-already-in-use"==n.code)&&n.email&&n.credential)Qs(new ts(n.email,n.credential),yh(t)),fl(t,i,n.email);else if(n&&"auth/user-cancelled"==n.code){var r=Zs(yh(t)),s=Jc(n);r&&r.a?fl(t,i,r.g,s):r?il(t,i,r.g,s):pl(t,i,n)}else n&&"auth/credential-already-in-use"==n.code||(n&&"auth/operation-not-supported-in-this-environment"==n.code&&tl(t)?hl(t,i,{user:null,credential:null}):n&&"auth/admin-restricted-operation"==n.code&&Ro(kh(t))?(i.m(),Js(yh(t)),aa("handleUnauthorizedUser",t,e,null,null)):pl(t,i,n))})))},a(gl,Du),gl.prototype.v=function(){var t=this;Ja(this,this.l(),(function(){t.i()})),this.l().focus(),Du.prototype.v.call(this)},gl.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(gl.prototype,{l:wc}),oa.differentDeviceError=function(t,e){var n=new gl((function(){n.m(),nl(t,e)}));n.render(e),fh(t,n)},a(ml,Du),ml.prototype.v=function(){var t=this;Ja(this,Wa(this,"firebaseui-id-reset-password-link"),(function(){t.l()})),this.i&&(this.w(this.i),this.u().focus()),Du.prototype.v.call(this)},ml.prototype.o=function(){this.l=this.i=null,Du.prototype.o.call(this)},C(ml.prototype,{u:bc,B:wc,w:Tc}),a(xl,Du),xl.prototype.v=function(){this.H(),this.B(this.l),Nu(this,this.i(),this.l),this.i().focus(),Du.prototype.v.call(this)},xl.prototype.o=function(){this.l=null,Du.prototype.o.call(this)},C(xl.prototype,{i:_l,w:bl,M:yl,H:wl,u:Tl,U:bc,P:wc,B:Tc}),a(Sl,Du),Sl.prototype.v=function(){var t=this;Ja(this,Wa(this,"firebaseui-id-reset-password-link"),(function(){t.l()})),this.i&&(this.w(this.i),this.u().focus()),Du.prototype.v.call(this)},Sl.prototype.o=function(){this.l=this.i=null,Du.prototype.o.call(this)},C(Sl.prototype,{u:bc,B:wc,w:Tc}),oa.passwordReset=function(t,e,n,i){Ih(t,mh(t).verifyPasswordResetCode(n).then((function(r){var s=new xl(r,(function(){!function(t,e,n,i,r){var s=n.u();s&&Ih(t,n.I(k(mh(t).confirmPasswordReset,mh(t)),[i,s],(function(){n.m();var i=new qc(r);i.render(e),fh(t,i)}),(function(i){Il(t,e,n,i)})))}(t,e,s,n,i)}));s.render(e),fh(t,s)}),(function(){Il(t,e)})))},oa.emailChangeRevocation=function(t,e,n){var i=null;Ih(t,mh(t).checkActionCode(n).then((function(e){return i=e.data.email,mh(t).applyActionCode(n)})).then((function(){!function(t,e,n){var i=new ml(n,(function(){Ih(t,i.I(k(mh(t).sendPasswordResetEmail,mh(t)),[n],(function(){i.m(),(i=new Lc(n,void 0,jo(kh(t)),Uo(kh(t)))).render(e),fh(t,i)}),(function(){i.a(kn().toString())})))}));i.render(e),fh(t,i)}(t,e,i)}),(function(){var n=new Gc;n.render(e),fh(t,n)})))},oa.emailVerification=function(t,e,n,i){Ih(t,mh(t).applyActionCode(n).then((function(){var n=new Fc(i);n.render(e),fh(t,n)}),(function(){var n=new jc;n.render(e),fh(t,n)})))},oa.revertSecondFactorAddition=function(t,e,n){var i=null,r=null;Ih(t,mh(t).checkActionCode(n).then((function(e){return i=e.data.email,r=e.data.multiFactorInfo,mh(t).applyActionCode(n)})).then((function(){!function(t,e,n,i){var r=new Sl(i.factorId,(function(){r.I(k(mh(t).sendPasswordResetEmail,mh(t)),[n],(function(){r.m(),(r=new Lc(n,void 0,jo(kh(t)),Uo(kh(t)))).render(e),fh(t,r)}),(function(){r.a(kn().toString())}))}),i.phoneNumber);r.render(e),fh(t,r)}(t,e,i,r)}),(function(){var n=new $c;n.render(e),fh(t,n)})))},oa.verifyAndChangeEmail=function(t,e,n,i){var r=null;Ih(t,mh(t).checkActionCode(n).then((function(e){return r=e.data.email,mh(t).applyActionCode(n)})).then((function(){var n=new Uc(r,i);n.render(e),fh(t,n)}),(function(){var n=new Vc;n.render(e),fh(t,n)})))},a(Al,Du),Al.prototype.v=function(){this.w(this.l),this.B(this.l,this.u),this.i().focus(),El(this.i(),(this.i().value||"").length),Du.prototype.v.call(this)},Al.prototype.o=function(){this.u=this.l=null,Du.prototype.o.call(this)},C(Al.prototype,{i:Oc,M:Cc,w:Dc,H:Pc,j:Rc,U:bc,P:wc,B:Tc}),oa.emailLinkConfirmation=function(t,e,n,i,r,s){var o=new Al((function(){var r=o.j();r?(o.m(),i(t,e,r,n)):o.i().focus()}),(function(){o.m(),nl(t,e,r||void 0)}),r||void 0,jo(kh(t)),Uo(kh(t)));o.render(e),fh(t,o),s&&o.a(s)},a(kl,Du),kl.prototype.v=function(){this.u(this.i),this.l().focus(),Du.prototype.v.call(this)},kl.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(kl.prototype,{l:bc,u:Tc}),oa.emailLinkNewDeviceLinking=function(t,e,n,i){var r=new Ut(n);if(n=r.a.a.get(qt.PROVIDER_ID)||null,$t(r,null),n){var s=new kl(Oo(kh(t),n),(function(){s.m(),i(t,e,r.toString())}),jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s)}else nl(t,e)},a(Ol,Du),oa.emailLinkSignInCallback=Cl,a(Rl,Du),Rl.prototype.v=function(){this.u(this.i),this.l().focus(),Du.prototype.v.call(this)},Rl.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(Rl.prototype,{l:bc,u:Tc}),oa.emailLinkSignInLinking=function(t,e,n){var i=Zs(yh(t));if(Js(yh(t)),i){var r=i.a.providerId,s=new Rl(n,Oo(kh(t),r),(function(){!function(t,e,n,i){var r=Pu(e);sl(t,e,n,(function(){nl(t,r,n)}),(function(i){if(!i.name||"cancel"!=i.name){var s=Jc(i);i&&"auth/network-request-failed"==i.code?e.a(s):(e.m(),nl(t,r,n,s))}}),i)}(t,s,n,i)}),jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s)}else nl(t,e)},a(Nl,Du),Nl.prototype.v=function(){var t=this;Ja(this,this.l(),(function(){t.i()})),Ja(this,Wa(this,"firebaseui-id-trouble-getting-email-link"),(function(){t.u()})),this.l().focus(),Du.prototype.v.call(this)},Nl.prototype.o=function(){this.i=this.u=null,Du.prototype.o.call(this)},C(Nl.prototype,{l:wc}),oa.emailLinkSignInSent=function(t,e,n,i,r){var s=new Nl(n,(function(){s.m(),aa("emailNotReceived",t,e,n,i,r)}),(function(){s.m(),i()}),jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s)},a(Ml,Du),Ml.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Du.prototype.v.call(this)},Ml.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(Ml.prototype,{u:bc,B:wc,w:Tc}),oa.emailMismatch=function(t,e,n){var i=Zs(yh(t));if(i){var r=new Ml(n.user.email,i.g,(function(){var e=r;Js(yh(t)),Yc(t,e,n)}),(function(){var e=n.credential.providerId,s=Pu(r);r.m(),i.a?aa("federatedLinking",t,s,i.g,e):aa("federatedSignIn",t,s,i.g,e)}),jo(kh(t)),Uo(kh(t)));r.render(e),fh(t,r)}else nl(t,e)},a(Ll,Du),Ll.prototype.v=function(){var t=this;Ja(this,this.u(),(function(){t.i()})),Ja(this,this.Da(),(function(){t.l()})),this.u().focus(),Du.prototype.v.call(this)},Ll.prototype.Da=function(){return Wa(this,"firebaseui-id-resend-email-link")},Ll.prototype.o=function(){this.i=this.l=null,Du.prototype.o.call(this)},C(Ll.prototype,{u:wc}),oa.emailNotReceived=function(t,e,n,i,r){var s=new Ll((function(){sl(t,s,n,i,(function(t){t=Jc(t),s.a(t)}),r)}),(function(){s.m(),nl(t,e,n)}),jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s)},a(Fl,Du),Fl.prototype.v=function(){this.u(this.i),this.l().focus(),Du.prototype.v.call(this)},Fl.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(Fl.prototype,{l:bc,u:Tc}),oa.federatedLinking=function(t,e,n,i,r){var s=Zs(yh(t));if(s&&s.a){var o=new Fl(n,Oo(kh(t),i),(function(){Qc(t,o,i,n)}),jo(kh(t)),Uo(kh(t)));o.render(e),fh(t,o),r&&o.a(r)}else nl(t,e)},oa.federatedRedirect=function(t,e,n){var i=new Ol;i.render(e),fh(t,i),Qc(t,i,e=ko(kh(t))[0],n)},oa.federatedSignIn=function(t,e,n,i,r){var s=new Fl(n,Oo(kh(t),i),(function(){Qc(t,s,i,n)}),jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s),r&&s.a(r)},oa.passwordLinking=function(t,e,n){var i=Zs(yh(t));Js(yh(t));var r=i&&i.a;if(r){var s=new Ac(n,(function(){!function(t,e,n,i){var r=e.u();r?Ih(t,e.I(k(t.Xb,t),[n,r],(function(n){return n=n.user.linkWithCredential(i).then((function(n){return Yc(t,e,{user:n.user,credential:i,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})})),Ih(t,n),n}),(function(t){if(!t.name||"cancel"!=t.name)switch(t.code){case"auth/wrong-password":Ya(e.i(),!1),tu(e.B(),Jc(t));break;case"auth/too-many-requests":e.a(Jc(t));break;default:zr("signInWithEmailAndPassword: "+t.message,void 0),e.a(Jc(t))}}))):e.i().focus()}(t,s,n,r)}),(function(){s.m(),aa("passwordRecovery",t,e,n)}),jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s)}else nl(t,e)},a(jl,Du),jl.prototype.v=function(){this.B(),this.H(this.l,this.u),da(this.i())||this.i().focus(),Nu(this,this.i(),this.l),Du.prototype.v.call(this)},jl.prototype.o=function(){this.u=this.l=null,Du.prototype.o.call(this)},C(jl.prototype,{i:Oc,w:Cc,B:Dc,M:Pc,j:Rc,U:bc,P:wc,H:Tc}),oa.passwordRecovery=function(t,e,n,i,r){var s=new jl((function(){!function(t,e){var n=e.j();if(n){var i=Pu(e);Ih(t,e.I(k(mh(t).sendPasswordResetEmail,mh(t)),[n],(function(){e.m();var r=new Lc(n,(function(){r.m(),nl(t,i)}),jo(kh(t)),Uo(kh(t)));r.render(i),fh(t,r)}),(function(t){Ya(e.i(),!1),tu(e.w(),Jc(t))})))}else e.i().focus()}(t,s)}),i?void 0:function(){s.m(),nl(t,e)},n,jo(kh(t)),Uo(kh(t)));s.render(e),fh(t,s),r&&s.a(r)},oa.passwordSignIn=function(t,e,n,i){var r=new Nc((function(){!function(t,e){var n=e.j(),i=e.u();if(n)if(i){var r=h.auth.EmailAuthProvider.credential(n,i);Ih(t,e.I(k(t.bc,t),[n,i],(function(n){return Yc(t,e,{user:n.user,credential:r,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo})}),(function(t){if(!t.name||"cancel"!=t.name)switch(t.code){case"auth/email-already-in-use":break;case"auth/email-exists":Ya(e.l(),!1),tu(e.U(),Jc(t));break;case"auth/too-many-requests":case"auth/wrong-password":Ya(e.i(),!1),tu(e.B(),Jc(t));break;default:zr("verifyPassword: "+t.message,void 0),e.a(Jc(t))}})))}else e.i().focus();else e.l().focus()}(t,r)}),(function(){var n=r.M();r.m(),aa("passwordRecovery",t,e,n)}),n,jo(kh(t)),Uo(kh(t)),i);r.render(e),fh(t,r)},a($l,Du),$l.prototype.v=function(){this.ea(),this.B&&this.Ja(),this.ua(),this.pa(this.w,this.H),this.B?(Ru(this,this.i(),this.u()),Ru(this,this.u(),this.l())):Ru(this,this.i(),this.l()),this.w&&Nu(this,this.l(),this.w),da(this.i())?this.B&&!da(this.u())?this.u().focus():this.l().focus():this.i().focus(),Du.prototype.v.call(this)},$l.prototype.o=function(){this.H=this.w=null,Du.prototype.o.call(this)},C($l.prototype,{i:Oc,U:Cc,ea:Dc,jb:Pc,j:Rc,u:Ul,Bc:Vl,Ja:function(){var t=Ul.call(this),e=Vl.call(this);Xa(this,t,(function(){eu(e)&&(Ya(t,!0),Qa(e))}))},M:function(){var t=Ul.call(this),e=Vl.call(this),n=da(t);return Ya(t,n=!/^[\s\xa0]*$/.test(null==n?"":String(n))),n?(Qa(e),e=!0):(tu(e,cn("Enter your account name").toString()),e=!1),e?Y(da(t)):null},l:_l,ba:bl,lb:yl,ua:wl,P:Tl,Nb:bc,Mb:wc,pa:Tc}),oa.passwordSignUp=function(t,e,n,i,r,s){var o=new $l(Vo(kh(t)),(function(){!function(t,e){var n=Vo(kh(t)),i=e.j(),r=null;n&&(r=e.M());var s=e.P();if(i){if(n){if(!r)return void e.u().focus();r=rt(r)}if(s){var o=h.auth.EmailAuthProvider.credential(i,s);Ih(t,e.I(k(t.Yb,t),[i,s],(function(i){var s={user:i.user,credential:o,operationType:i.operationType,additionalUserInfo:i.additionalUserInfo};return n?(i=i.user.updateProfile({displayName:r}).then((function(){return Yc(t,e,s)})),Ih(t,i),i):Yc(t,e,s)}),(function(n){if(!n.name||"cancel"!=n.name){var r=Kc(n);switch(n=Jc(r),r.code){case"auth/email-already-in-use":return function(t,e,n,i){function r(){var t=Jc(i);Ya(e.i(),!1),tu(e.U(),t),e.i().focus()}var s=mh(t).fetchSignInMethodsForEmail(n).then((function(i){i.length?r():(i=Pu(e),e.m(),aa("passwordRecovery",t,i,n,!1,Cn().toString()))}),(function(){r()}));return Ih(t,s),s}(t,e,i,r);case"auth/too-many-requests":n=cn("Too many account requests are coming from your IP address. Try again in a few minutes.").toString();case"auth/operation-not-allowed":case"auth/weak-password":Ya(e.l(),!1),tu(e.ba(),n);break;case"auth/admin-restricted-operation":Ro(kh(t))?(n=Pu(e),e.m(),aa("handleUnauthorizedUser",t,n,i,h.auth.EmailAuthProvider.PROVIDER_ID)):e.a(n);break;default:zr(r="setAccountInfo: "+As(r),void 0),e.a(n)}}})))}else e.l().focus()}else e.i().focus()}(t,o)}),r?void 0:function(){o.m(),nl(t,e)},n,i,jo(kh(t)),Uo(kh(t)),s);o.render(e),fh(t,o)},a(Gl,Du),Gl.prototype.v=function(){var t=this;this.U(this.jb),ei(this.i,"tick",this.w,!1,this),this.i.start(),Ja(this,Wa(this,"firebaseui-id-change-phone-number-link"),(function(){t.P()})),Ja(this,this.Da(),(function(){t.M()})),this.Ja(this.l),this.ea(this.l,this.H),this.u().focus(),Du.prototype.v.call(this)},Gl.prototype.o=function(){this.M=this.H=this.l=this.P=null,xa(this.i),ri(this.i,"tick",this.w),this.i=null,Du.prototype.o.call(this)},Gl.prototype.w=function(){--this.B,0<this.B?this.U(this.B):(xa(this.i),ri(this.i,"tick",this.w),this.ua(),this.lb())},C(Gl.prototype,{u:Bl,pa:ql,Ja:function(t){var e=Bl.call(this),n=ql.call(this);Xa(this,e,(function(){eu(n)&&(Ya(e,!0),Qa(n))})),t&&Za(this,e,(function(){t()}))},ba:function(){var t=Y(da(Bl.call(this))||"");return/^\d{6}$/.test(t)?t:null},Fb:zl,U:function(t){He(zl.call(this),cn("Resend code in "+(9<t?"0:":"0:0")+t).toString())},ua:function(){Qa(this.Fb())},Da:function(){return Wa(this,"firebaseui-id-resend-link")},lb:function(){tu(this.Da())},Nb:bc,Mb:wc,ea:Tc}),oa.phoneSignInFinish=function(t,e,n,i,r,s){var o=new Gl((function(){o.m(),aa("phoneSignInStart",t,e,n)}),(function(){!function(t,e,n,i){function r(t){e.u().focus(),Ya(e.u(),!1),tu(e.pa(),t)}var s=e.ba();s?(e.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Verifying...").toString()),Ih(t,e.I(k(i.confirm,i),[s],(function(n){e.h(),e.$("firebaseui-icon-done",cn("Verified!").toString());var i=setTimeout((function(){e.h(),e.m();var i={user:_h(t).currentUser,credential:null,operationType:n.operationType,additionalUserInfo:n.additionalUserInfo};Yc(t,e,i,!0)}),1e3);Ih(t,(function(){e&&e.h(),clearTimeout(i)}))}),(function(i){if(i.name&&"cancel"==i.name)e.h();else{var s=Kc(i);switch(i=Jc(s),s.code){case"auth/credential-already-in-use":e.h();break;case"auth/code-expired":s=Pu(e),e.h(),e.m(),aa("phoneSignInStart",t,s,n,i);break;case"auth/missing-verification-code":case"auth/invalid-verification-code":e.h(),r(i);break;default:e.h(),e.a(i)}}})))):r(cn("Wrong code. Try again.").toString())}(t,o,n,r)}),(function(){o.m(),nl(t,e)}),(function(){o.m(),aa("phoneSignInStart",t,e,n)}),bo(n),i,jo(kh(t)),Uo(kh(t)));o.render(e),fh(t,o),s&&o.a(s)};var Wl=!(Jt||Wt("Safari")&&!(Ht()||Wt("Coast")||Wt("Opera")||Wt("Edge")||Wt("Firefox")||Wt("FxiOS")||Wt("Silk")||Wt("Android")));function Hl(t,e){return/-[a-z]/.test(e)?null:Wl&&t.dataset?!Wt("Android")||Ht()||Wt("Firefox")||Wt("FxiOS")||Wt("Opera")||Wt("Silk")||e in t.dataset?void 0===(t=t.dataset[e])?null:t:null:t.getAttribute("data-"+String(e).replace(/([A-Z])/g,"-$1").toLowerCase())}function Kl(t,e,n){var i=this;t=en(mu,{items:t},null,this.s),xu.call(this,t,!0,!0),n&&(n=function(t,e){t=(t||document).getElementsByTagName("BUTTON");for(var n=0;n<t.length;n++)if(Hl(t[n],"listboxid")===e)return t[n];return null}(t,n))&&(n.focus(),function(t,e){var n=(e=e||ze(document))||ze(document),i=$a(t),r=$a(n);if(!Jt||9<=Number(ce)){o=Ua(n,"borderLeftWidth");var s=Ua(n,"borderRightWidth");a=Ua(n,"borderTopWidth"),u=Ua(n,"borderBottomWidth"),s=new ja(parseFloat(a),parseFloat(s),parseFloat(u),parseFloat(o))}else{var o=qa(n,"borderLeft");s=qa(n,"borderRight");var a=qa(n,"borderTop"),u=qa(n,"borderBottom");s=new ja(a,s,u,o)}n==ze(document)?(o=i.a-n.scrollLeft,i=i.g-n.scrollTop,!Jt||10<=Number(ce)||(o+=s.left,i+=s.top)):(o=i.a-r.a-s.left,i=i.g-r.g-s.top),r=t.offsetWidth,s=t.offsetHeight,a=ne&&!r&&!s,t=p(r)&&!a||!t.getBoundingClientRect?new je(r,s):new je((t=Va(t)).right-t.left,t.bottom-t.top),r=n.clientHeight-t.height,s=n.scrollLeft,a=n.scrollTop,n=new Fe(s+=Math.min(o,Math.max(o-(n.clientWidth-t.width),0)),a+=Math.min(i,Math.max(i-r,0))),e.scrollLeft=n.a,e.scrollTop=n.g}(n,t)),Ja(this,t,(function(t){(t=(t=Ke(t.target,"firebaseui-id-list-box-dialog-button"))&&Hl(t,"listboxid"))&&(Su.call(i),e(t))}))}function Yl(){return Wa(this,"firebaseui-id-phone-number")}function Xl(){return Wa(this,"firebaseui-id-country-selector")}function Zl(){return Wa(this,"firebaseui-id-phone-number-error")}function Jl(t,e){var n,i=t.a,r=Ql("1-US-0",i);if(!(n=e&&Ql(e,i)?e:r?"1-US-0":0<i.length?i[0].c:null))throw Error("No available default country");nh.call(this,n,t)}function Ql(t,e){return!(!(t=ho(t))||!q(e,t))}function th(t){return"firebaseui-flag-"+t.f}function eh(t){var e=this;Kl.call(this,function(t){return t.map((function(t){return{id:t.c,Ma:"firebaseui-flag "+th(t),label:t.name+" +"+t.b}}))}(t.a),(function(n){nh.call(e,n,t,!0),e.O().focus()}),this.Ba)}function nh(t,e,n){var i=ho(t);i&&(n&&(e=lo(e,n=Y(da(Yl.call(this))||""))).length&&e[0].b!=i.b&&(n="+"+i.b+n.substr(e[0].b.length+1),pa(Yl.call(this),n)),e=ho(this.Ba),this.Ba=t,t=Wa(this,"firebaseui-id-country-selector-flag"),e&&ha(t,th(e)),la(t,th(i)),He(Wa(this,"firebaseui-id-country-selector-code"),"+"+i.b))}function ih(t,e,n,i,r,s,o,a,u,c){Du.call(this,gc,{Gb:e,Aa:u||null,Va:!!n,ia:!!s},c,"phoneSignInStart",{F:i,D:r}),this.H=a||null,this.M=e,this.l=t,this.w=n||null,this.pa=o||null}function rh(t,e,n,i){try{var r=e.U(Xo)}catch(t){return}r?Ko?(e.$("mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active firebaseui-progress-dialog-loading-icon",cn("Verifying...").toString()),Ih(t,e.I(k(t.cc,t),[bo(r),n],(function(n){var i=Pu(e);e.$("firebaseui-icon-done",cn("Code sent!").toString());var s=setTimeout((function(){e.h(),e.m(),aa("phoneSignInFinish",t,i,r,15,n)}),1e3);Ih(t,(function(){e&&e.h(),clearTimeout(s)}))}),(function(n){if(e.h(),!n.name||"cancel"!=n.name){grecaptcha.reset(Zo),Ko=null;var i=n&&n.message||"";if(n.code)switch(n.code){case"auth/too-many-requests":i=cn("This phone number has been used too many times").toString();break;case"auth/invalid-phone-number":case"auth/missing-phone-number":return e.O().focus(),void tu(e.B(),An().toString());case"auth/admin-restricted-operation":if(Ro(kh(t)))return n=Pu(e),e.m(),void aa("handleUnauthorizedUser",t,n,bo(r),h.auth.PhoneAuthProvider.PROVIDER_ID);i=Jc(n);break;default:i=Jc(n)}e.a(i)}})))):Yo?tu(e.u(),cn("Solve the reCAPTCHA").toString()):!Yo&&i&&e.i().click():(e.O().focus(),tu(e.B(),An().toString()))}function sh(t,e,n,i,r){Du.call(this,fc,{Sb:e},r,"providerSignIn",{F:n,D:i}),this.i=t}function oh(t,e,n,i,r,s,o){Du.call(this,Mu,{email:n,Va:!!e,ia:!!s},o,"signIn",{F:i,D:r}),this.i=t,this.u=e}function ah(t,e,n,i,r,s,o){Du.call(this,Ju,{kc:t,yb:n,Eb:!!i},o,"unauthorizedUser",{F:r,D:s}),this.l=e,this.i=i}function uh(t,e,n,i,r,s){Du.call(this,Qu,{email:t},s,"unsupportedProvider",{F:i,D:r}),this.l=e,this.i=n}function ch(t,e){this.$=!1;var n=dh(e);if(hh[n])throw Error('An AuthUI instance already exists for the key "'+n+'"');hh[n]=this,this.a=t,this.u=null,this.Y=!1,lh(this.a),this.h=h.initializeApp({apiKey:t.app.options.apiKey,authDomain:t.app.options.authDomain},t.app.name+"-firebaseui-temp").auth(),(t=t.emulatorConfig)&&(n=t.port,this.h.useEmulator(t.protocol+"://"+t.host+(null===n?"":":"+n),t.options)),lh(this.h),this.h.setPersistence&&this.h.setPersistence(h.auth.Auth.Persistence.SESSION),this.oa=e,this.ca=new So,this.g=this.T=this.i=this.J=this.O=null,this.s=[],this.Z=!1,this.l=wr.Xa(),this.j=this.C=null,this.da=this.A=!1}function lh(t){t&&t.INTERNAL&&t.INTERNAL.logFramework&&t.INTERNAL.logFramework("FirebaseUI-web")}a(ih,Du),ih.prototype.v=function(){this.ea(this.pa,this.H),this.P(this.l,this.w||void 0),this.M||Ru(this,this.O(),this.i()),Nu(this,this.i(),this.l),this.O().focus(),El(this.O(),(this.O().value||"").length),Du.prototype.v.call(this)},ih.prototype.o=function(){this.w=this.l=null,Du.prototype.o.call(this)},C(ih.prototype,{Cb:Iu,O:Yl,B:Zl,ea:function(t,e,n){var i=this,r=Yl.call(this),s=Xl.call(this),o=Zl.call(this),a=t||_o,u=a.a;if(0==u.length)throw Error("No available countries provided.");Jl.call(i,a,e),Ja(this,s,(function(){eh.call(i,a)})),Xa(this,r,(function(){eu(o)&&(Ya(r,!0),Qa(o));var t=Y(da(r)||""),e=ho(this.Ba),n=lo(a,t);t=Ql("1-US-0",u),n.length&&n[0].b!=e.b&&(e=n[0],nh.call(i,"1"==e.b&&t?"1-US-0":e.c,a))})),n&&Za(this,r,(function(){n()}))},U:function(t){var e=Y(da(Yl.call(this))||""),n=(t=t||_o).a,i=lo(_o,e);if(i.length&&!q(n,i[0]))throw pa(Yl.call(this)),Yl.call(this).focus(),tu(Zl.call(this),cn("The country code provided is not supported.").toString()),Error("The country code provided is not supported.");return n=ho(this.Ba),i.length&&i[0].b!=n.b&&nh.call(this,i[0].c,t),i.length&&(e=e.substr(i[0].b.length+1)),e?new yo(this.Ba,e):null},Ja:Xl,ba:function(){return Wa(this,"firebaseui-recaptcha-container")},u:function(){return Wa(this,"firebaseui-id-recaptcha-error")},i:bc,ua:wc,P:Tc}),oa.phoneSignInStart=function(t,e,n,i){var r=function(t){var e=null;if(Eo(t).forEach((function(t){t.provider==h.auth.PhoneAuthProvider.PROVIDER_ID&&x(t.recaptchaParameters)&&!Array.isArray(t.recaptchaParameters)&&(e=ot(t.recaptchaParameters))})),e){var n=[];sa.forEach((function(t){void 0!==e[t]&&(n.push(t),delete e[t])})),n.length&&Kr('The following provided "recaptchaParameters" keys are not allowed: '+n.join(", "))}return e}(kh(t))||{};Ko=null,Yo=!(r&&"invisible"===r.size);var s=el(t),o=function(t){var e=(t=Ao(t,h.auth.PhoneAuthProvider.PROVIDER_ID))&&t.defaultCountry||null;e=e&&po(e);var n=null;return t&&"string"==typeof t.loginHint&&(n=vo(t.loginHint)),e&&e[0]||n&&ho(n.a)||null}(kh(t)),a=s?function(t){var e=null;return(t=Ao(t,h.auth.PhoneAuthProvider.PROVIDER_ID))&&"string"==typeof t.loginHint&&(e=vo(t.loginHint)),t&&t.defaultNationalNumber||e&&e.Aa||null}(kh(t)):null;o=n&&n.a||o&&o.c||null,n=n&&n.Aa||a,(a=Lo(kh(t)))&&go(a),Xo=a?new co(Lo(kh(t))):_o;var u=new ih((function(e){rh(t,u,c,!(!e||!e.keyCode))}),Yo,s?null:function(){c.clear(),u.m(),nl(t,e)},jo(kh(t)),Uo(kh(t)),s,Xo,o,n);u.render(e),fh(t,u),i&&u.a(i),r.callback=function(e){u.u()&&Qa(u.u()),Ko=e,Yo||rh(t,u,c)},r["expired-callback"]=function(){Ko=null};var c=new h.auth.RecaptchaVerifier(Yo?u.ba():u.i(),r,_h(t).app);Ih(t,u.I(k(c.render,c),[],(function(t){Zo=t}),(function(n){n.name&&"cancel"==n.name||(n=Jc(n),u.m(),nl(t,e,void 0,n))})))},oa.prefilledEmailSignIn=function(t,e,n){var i=new Ol;i.render(e),fh(t,i),Ih(t,i.I(k(mh(t).fetchSignInMethodsForEmail,mh(t)),[n],(function(r){i.m();var s=!(!tl(t)||!vh(t));rl(t,e,r,n,void 0,s)}),(function(r){r=Jc(r),i.m(),aa("signIn",t,e,n,r)})))},a(sh,Du),sh.prototype.v=function(){this.l(this.i),Du.prototype.v.call(this)},sh.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(sh.prototype,{l:function(t){function e(e){t(e)}for(var n=this.g?Ve("firebaseui-id-idp-button",this.g||this.s.a):[],i=0;i<n.length;i++){var r=n[i];Ja(this,r,O(e,Hl(r,"providerId")))}}}),oa.providerSignIn=function(t,e,n,i){var r=new sh((function(n){n==h.auth.EmailAuthProvider.PROVIDER_ID?(r.m(),ol(t,e,i)):n==h.auth.PhoneAuthProvider.PROVIDER_ID?(r.m(),aa("phoneSignInStart",t,e)):"anonymous"==n?function(t,e){Ih(t,e.I(k(t.$b,t),[],(function(n){return e.m(),Yc(t,e,n,!0)}),(function(t){t.name&&"cancel"==t.name||(zr("ContinueAsGuest: "+t.code,void 0),t=Jc(t),e.a(t))})))}(t,r):Qc(t,r,n,i),Oh(t),t.l.cancel()}),Co(kh(t)),jo(kh(t)),Uo(kh(t)));r.render(e),fh(t,r),n&&r.a(n),function(t){Oh(t);try{Tr(t.l,Do(kh(t)),function(t){var e;return Oh(t),(e=t.Z)||(e=!(!(t=Mo(t=kh(t),h.auth.GoogleAuthProvider.PROVIDER_ID))||"select_account"!==t.prompt)),e}(t)).then((function(e){return!!t.g&&function(t,e,n){if(n&&n.credential&&n.clientId===Do(kh(t))){if(No(kh(t),h.auth.GoogleAuthProvider.PROVIDER_ID).length){try{var i=JSON.parse(atob(n.credential.split(".")[1])).email}catch(r){}return Qc(t,e,h.auth.GoogleAuthProvider.PROVIDER_ID,i),Bi(!0)}return r=h.auth.GoogleAuthProvider.credential(n.credential),s=!1,r=e.I(k(t.ac,t),[r],(function(n){var i=Pu(e);e.m(),aa("callback",t,i,Bi(n)),s=!0}),(function(n){if(!(n.name&&"cancel"==n.name||n&&"auth/credential-already-in-use"==n.code))if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential){var i=Pu(e);e.m(),aa("callback",t,i,qi(n))}else n&&"auth/admin-restricted-operation"==n.code&&Ro(kh(t))?(n=Pu(e),e.m(),aa("handleUnauthorizedUser",t,n,null,h.auth.GoogleAuthProvider.PROVIDER_ID)):(n=Jc(n),e.a(n))})),Ih(t,r),r.then((function(){return s}),(function(){return!1}))}var r,s;return n&&e.a(cn("The selected credential for the authentication provider is not supported!").toString()),Bi(!1)}(t,t.g,e)}))}catch(t){}}(t)},oa.sendEmailLinkForSignIn=function(t,e,n,i){var r=new ll;r.render(e),fh(t,r),sl(t,r,n,i,(function(i){r.m(),i&&"auth/admin-restricted-operation"==i.code&&Ro(kh(t))?aa("handleUnauthorizedUser",t,e,n,h.auth.EmailAuthProvider.PROVIDER_ID):(i=Jc(i),aa("signIn",t,e,n,i))}))},a(oh,Du),oh.prototype.v=function(){this.w(this.i),this.B(this.i,this.u||void 0),this.l().focus(),El(this.l(),(this.l().value||"").length),Du.prototype.v.call(this)},oh.prototype.o=function(){this.u=this.i=null,Du.prototype.o.call(this)},C(oh.prototype,{l:Oc,M:Cc,w:Dc,H:Pc,j:Rc,U:bc,P:wc,B:Tc}),oa.signIn=function(t,e,n,i){var r=tl(t),s=new oh((function(){var e=s,n=e.j()||"";n&&il(t,e,n)}),r?null:function(){s.m(),nl(t,e,n)},n,jo(kh(t)),Uo(kh(t)),r);s.render(e),fh(t,s),i&&s.a(i)},a(ah,Du),ah.prototype.v=function(){var t=this,e=Wa(this,"firebaseui-id-unauthorized-user-help-link");this.i&&e&&Ja(this,e,(function(){t.i()})),Ja(this,this.u(),(function(){t.l()})),this.u().focus(),Du.prototype.v.call(this)},ah.prototype.o=function(){this.i=this.l=null,Du.prototype.o.call(this)},C(ah.prototype,{u:wc}),oa.handleUnauthorizedUser=function(t,e,n,i){function r(){nl(t,e)}i===h.auth.EmailAuthProvider.PROVIDER_ID?r=function(){ol(t,e)}:i===h.auth.PhoneAuthProvider.PROVIDER_ID&&(r=function(){aa("phoneSignInStart",t,e)});var s=null,o=null;i===h.auth.EmailAuthProvider.PROVIDER_ID&&Po(kh(t))?(s=function(t){return(t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))&&t.disableSignUp&&t.disableSignUp.adminEmail||null}(kh(t)),o=function(t){if((t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))&&t.disableSignUp){var e=t.disableSignUp.helpLink||null;if(e&&"string"==typeof e)return function(){nr(e)}}return null}(kh(t))):Ro(kh(t))&&(s=function(t){return(t=t.a.get("adminRestrictedOperation"))&&t.adminEmail?t.adminEmail:null}(kh(t)),o=function(t){if(t=t.a.get("adminRestrictedOperation")||null){var e=t.helpLink||null;if(e&&"string"==typeof e)return function(){nr(e)}}return null}(kh(t)));var a=new ah(n,(function(){a.m(),r()}),s,o,jo(kh(t)),Uo(kh(t)));a.render(e),fh(t,a)},a(uh,Du),uh.prototype.v=function(){this.w(this.l,this.i),this.u().focus(),Du.prototype.v.call(this)},uh.prototype.o=function(){this.i=this.l=null,Du.prototype.o.call(this)},C(uh.prototype,{u:bc,B:wc,w:Tc}),oa.unsupportedProvider=function(t,e,n){var i=new uh(n,(function(){i.m(),aa("passwordRecovery",t,e,n)}),(function(){i.m(),nl(t,e,n)}),jo(kh(t)),Uo(kh(t)));i.render(e),fh(t,i)};var hh={};function dh(t){return t||"[DEFAULT]"}function ph(t){return Oh(t),t.i||(t.i=xh(t,(function(e){return e&&!Zs(yh(t))?Bi(_h(t).getRedirectResult().then((function(t){return t}),(function(e){if(e&&"auth/email-already-in-use"==e.code&&e.email&&e.credential)throw e;return Ph(t,e)}))):Bi(mh(t).getRedirectResult().then((function(e){return Io(kh(t))&&!e.user&&t.j&&!t.j.isAnonymous?_h(t).getRedirectResult():e})))}))),t.i}function fh(t,e){Oh(t),t.g=e}var gh=null;function mh(t){return Oh(t),t.h}function _h(t){return Oh(t),t.a}function yh(t){return Oh(t),t.oa}function vh(t){return Oh(t),t.O?t.O.emailHint:void 0}function bh(t){return"signIn"===((t=new Ut(t)).a.a.get(qt.ub)||null)&&!!t.a.a.get(qt.$a)}function wh(t,e,n,i){Oh(t),void 0!==t.a.languageCode&&(t.u=t.a.languageCode);var r="en".replace(/_/g,"-");t.a.languageCode=r,t.h.languageCode=r,t.Y=!0,void 0!==t.a.tenantId&&(t.h.tenantId=t.a.tenantId),t.ib(n),t.O=i||null;var s=d.document;t.C?t.C.then((function(){"complete"==s.readyState?Th(t,e):ii(window,"load",(function(){Th(t,e)}))})):"complete"==s.readyState?Th(t,e):ii(window,"load",(function(){Th(t,e)}))}function Th(t,e){var n=ir(e,"Could not find the FirebaseUI widget element on the page.");if(n.setAttribute("lang","en".replace(/_/g,"-")),gh){var i=gh;Oh(i),Zs(yh(i))&&Kr("UI Widget is already rendered on the page and is pending some user interaction. Only one widget instance can be rendered per page. The previous instance has been automatically reset."),gh.reset()}if(gh=t,t.T=n,function(t,e){t.L=null,t.J=new bi(e),t.J.register(),ei(t.J,"pageEnter",(function(e){if(e=e&&e.pageId,t.L!=e){var n=kh(t);(n=Ho(n).uiChanged||null)&&n(t.L,e),t.L=e}}))}(t,n),Ls(new Fs)&&Ls(new js)){e=ir(e,"Could not find the FirebaseUI widget element on the page."),n=(n=yt(n=rr(),i=ro(kh(t).a,"queryParameterForSignInSuccessUrl")))?be(Te(n)).toString():null;t:{i=rr();var r=Fo(kh(t));for(s in i=yt(i,r)||"",ia)if(ia[s].toLowerCase()==i.toLowerCase()){var s=ia[s];break t}s="callback"}switch(s){case"callback":n&&(s=yh(t),Ys(zs,n,s)),t.nb()?aa("callback",t,e):nl(t,e,vh(t));break;case"resetPassword":aa("passwordReset",t,e,al(),ul());break;case"recoverEmail":aa("emailChangeRevocation",t,e,al());break;case"revertSecondFactorAddition":aa("revertSecondFactorAddition",t,e,al());break;case"verifyEmail":aa("emailVerification",t,e,al(),ul());break;case"verifyAndChangeEmail":aa("verifyAndChangeEmail",t,e,al(),ul());break;case"signIn":aa("emailLinkSignInCallback",t,e,rr()),Ch();break;case"select":n&&(s=yh(t),Ys(zs,n,s)),nl(t,e);break;default:throw Error("Unhandled widget operation.")}(e=Ho(e=kh(t)).uiShown||null)&&e()}else e=ir(e,"Could not find the FirebaseUI widget element on the page."),(s=new Hc(cn("The browser you are using does not support Web Storage. Please try again in a different browser.").toString())).render(e),fh(t,s);e=t.g&&"blank"==t.g.Ga&&Bo(kh(t)),to(yh(t))&&!e&&(Ah(t,(e=to(yh(t))).a),Ks(qs,yh(t)))}function xh(t,e){if(t.A)return e(Sh(t));if(Ih(t,(function(){t.A=!1})),Io(kh(t))){var n=new Mi((function(n){Ih(t,t.a.onAuthStateChanged((function(i){t.j=i,t.A||(t.A=!0,n(e(Sh(t))))})))}));return Ih(t,n),n}return t.A=!0,e(null)}function Sh(t){return Oh(t),Io(kh(t))&&t.j&&t.j.isAnonymous?t.j:null}function Ih(t,e){if(Oh(t),e){t.s.push(e);var n=function(){!function(t,e){!function(t,e){for(var n=f(t)?t.split(""):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,(function(n,i){e.call(void 0,n,i,t)&&G(t,i)}))}(t.s,(function(t){return t==e}))};"function"!=typeof e&&e.then(n,n)}}function Eh(t){void 0!==t.a.languageCode&&t.Y&&(t.Y=!1,t.a.languageCode=t.u)}function Ah(t,e){t.a.tenantId=e,t.h.tenantId=e}function kh(t){return Oh(t),t.ca}function Oh(t){if(t.$)throw Error("AuthUI instance is deleted!")}function Ch(){var t=rr();if(bh(t)){for(var e in t=new Ut(t),qt)qt.hasOwnProperty(e)&&Mt(t.a.a,qt[e]);e={state:"signIn",mode:"emailLink",operation:"clear"};var n=d.document.title;d.history&&d.history.replaceState&&d.history.replaceState(e,n,t.toString())}}function Dh(t){return Oh(t),mh(t).signOut()}function Ph(t,e,n){if(Oh(t),e&&e.code&&("auth/email-already-in-use"==e.code||"auth/credential-already-in-use"==e.code)){var i=Wo(kh(t));return Bi().then((function(){return i(new Pn("anonymous-upgrade-merge-conflict",null,n||e.credential))})).then((function(){throw t.g&&(t.g.m(),t.g=null),e}))}return qi(e)}function Rh(t,e,n,i){Du.call(this,vc,void 0,i,"providerMatchByEmail",{F:e,D:n}),this.i=t}function Nh(t,e,n,i,r){Du.call(this,yc,{ec:e},r,"selectTenant",{F:n,D:i}),this.i=t}function Mh(t){Du.call(this,$u,void 0,t,"spinner")}function Lh(t){for(var e in this.a=new eo,no(this.a,"authDomain"),no(this.a,"displayMode",qh),no(this.a,"tenants"),no(this.a,"callbacks"),no(this.a,"tosUrl"),no(this.a,"privacyPolicyUrl"),t)if(t.hasOwnProperty(e))try{io(this.a,e,t[e])}catch(t){zr('Invalid config: "'+e+'"',void 0)}}function Fh(t){return t.a.get("callbacks")||{}}function jh(t){var e=t.a.get("tosUrl")||null;if(t=t.a.get("privacyPolicyUrl")||null,e&&!t&&Kr("Privacy Policy URL is missing, the link will not be displayed."),e&&t){if("function"==typeof e)return e;if("string"==typeof e)return function(){nr(e)}}return null}function Uh(t){var e=t.a.get("tosUrl")||null,n=t.a.get("privacyPolicyUrl")||null;if(n&&!e&&Kr("Terms of Service URL is missing, the link will not be displayed."),e&&n){if("function"==typeof n)return n;if("string"==typeof n)return function(){nr(n)}}return null}function Vh(t,e){if(!(t=t.a.get("tenants"))||!t.hasOwnProperty(e)&&!t.hasOwnProperty(Gh))throw Error("Invalid tenant configuration!")}function $h(t,e,n){if(!(t=t.a.get("tenants")))throw Error("Invalid tenant configuration!");var i=[];if(!(t=t[e]||t[Gh]))return zr("Invalid tenant configuration: "+e+" is not configured!",void 0),i;if(!(e=t.signInOptions))throw Error("Invalid tenant configuration: signInOptions are invalid!");return e.forEach((function(t){if("string"==typeof t)i.push(t);else if("string"==typeof t.provider){var e=t.hd;e&&n?(e instanceof RegExp?e:new RegExp("@"+e.replace(".","\\.")+"$")).test(n)&&i.push(t.provider):i.push(t.provider)}else zr(t="Invalid tenant configuration: signInOption "+JSON.stringify(t)+" is invalid!",void 0)})),i}(t=ch.prototype).nb=function(){return Oh(this),!!to(yh(this))||bh(rr())},t.start=function(t,e){wh(this,t,e)},t.Db=function(){Oh(this),this.Z=!0},t.reset=function(){Oh(this);var t=this;this.T&&this.T.removeAttribute("lang"),this.J&&function(t){var e=vi(t.N());mi[e]&&mi[e].length&&(function(t,e){t:{for(var n=t.length,i=f(t)?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}0<=e&&G(t,e)}(mi[e],(function(e){return e==t})),mi[e].length||delete mi[e])}(this.J),Eh(this),this.O=null,Ch(),Ks(qs,yh(this)),Oh(this),this.l.cancel(),this.i=Bi({user:null,credential:null}),gh==this&&(gh=null),this.T=null;for(var e=0;e<this.s.length;e++)"function"==typeof this.s[e]?this.s[e]():this.s[e].cancel&&this.s[e].cancel();this.s=[],Js(yh(this)),this.g&&(this.g.m(),this.g=null),this.L=null,this.h&&(this.C=Dh(this).then((function(){t.C=null}),(function(){t.C=null})))},t.ib=function(t){Oh(this);var e,n=this.ca;for(e in t)try{io(n.a,e,t[e])}catch(t){zr('Invalid config: "'+e+'"',void 0)}ie&&io(n.a,"popupMode",!1),Lo(n),!this.da&&zo(kh(this))&&(Kr("signInSuccess callback is deprecated. Please use signInSuccessWithAuthResult callback instead."),this.da=!0)},t.Wb=function(){Oh(this);var t=kh(this),e=ro(t.a,"widgetUrl");t=Fo(t);for(var n,i=e.search(_t),r=0,s=[];0<=(n=mt(e,r,t,i));)s.push(e.substring(r,n)),r=Math.min(e.indexOf("&",n)+1||i,i);s.push(e.substr(r)),e=s.join("").replace(vt,"$1"),(t+=i="="+encodeURIComponent("select"))?(0>(i=e.indexOf("#"))&&(i=e.length),0>(r=e.indexOf("?"))||r>i?(r=i,n=""):n=e.substring(r+1,i),i=(e=[e.substr(0,r),n,e.substr(i)])[1],e[1]=t?i?i+"&"+t:t:i,i=e[0]+(e[1]?"?"+e[1]:"")+e[2]):i=e,kh(this).a.get("popupMode")?(i=i||"about:blank",(t={width:500,height:600,top:0<(t=(window.screen.availHeight-600)/2)?t:0,left:0<(e=(window.screen.availWidth-500)/2)?e:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1}).target=t.target||i.target||"google_popup",t.width=t.width||690,t.height=t.height||500,(t=tr(i,t))&&t.focus()):Le(window.location,i)},t.Wa=function(){var t=this;return Oh(this),this.h.app.delete().then((function(){var e=dh(yh(t));delete hh[e],t.reset(),t.$=!0}))},t.Ib=function(t,e){Oh(this);var n=this,i=function(){for(var t=32,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();if(!$o(kh(this)))return qi(Error("Email link sign-in should be enabled to trigger email sending."));var r=function(t){if($o(t)){var e={url:rr(),handleCodeInApp:!0};(t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))&&"function"==typeof t.emailLinkSignIn&&ut(e,t.emailLinkSignIn()),t=e.url;var n=rr();n instanceof bt||(n=St(n)),t instanceof bt||(t=St(t));var i=n;n=new bt(i);var r=!!t.j;r?wt(n,t.j):r=!!t.A,r?n.A=t.A:r=!!t.h,r?n.h=t.h:r=null!=t.C;var s=t.g;if(r)Tt(n,t.C);else if(r=!!t.g)if("/"!=s.charAt(0)&&(i.h&&!i.g?s="/"+s:-1!=(i=n.g.lastIndexOf("/"))&&(s=n.g.substr(0,i+1)+s)),".."==s||"."==s)s="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){i=0==s.lastIndexOf("/",0),s=s.split("/");for(var o=[],a=0;a<s.length;){var u=s[a++];"."==u?i&&a==s.length&&o.push(""):".."==u?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==s.length&&o.push("")):(o.push(u),i=!0)}s=o.join("/")}return r?n.g=s:r=""!==t.a.toString(),r?xt(n,Ft(t.a)):r=!!t.s,r&&(n.s=t.s),e.url=n.toString(),e}return null}(kh(this)),s=new Ut(r.url);return function(t,e){e?t.a.a.set(qt.Sa,e):Mt(t.a.a,qt.Sa)}(s,i),e&&e.a&&(function(t,e,n){Ys(Ws,Ss(t,JSON.stringify(es(e))),n)}(i,e,yh(this)),$t(s,e.a.providerId)),function(t,e){null!==e?t.a.a.set(qt.Qa,e?"1":"0"):Mt(t.a.a,qt.Qa)}(s,function(t){return!(!(t=Ao(t,h.auth.EmailAuthProvider.PROVIDER_ID))||!t.forceSameDevice)}(kh(this))),xh(this,(function(e){return e&&((e=e.uid)?s.a.a.set(qt.Pa,e):Mt(s.a.a,qt.Pa)),r.url=s.toString(),mh(n).sendSignInLinkToEmail(t,r)})).then((function(){var e=yh(n),r={};r.email=t,Ys(Gs,Ss(i,JSON.stringify(r)),e)}),(function(t){throw Ks(Ws,yh(n)),Ks(Gs,yh(n)),t}))},t.bc=function(t,e){Oh(this);var n=this;return mh(this).signInWithEmailAndPassword(t,e).then((function(i){return xh(n,(function(r){return r?Dh(n).then((function(){return Ph(n,{code:"auth/email-already-in-use"},h.auth.EmailAuthProvider.credential(t,e))})):i}))}))},t.Yb=function(t,e){Oh(this);var n=this;return xh(this,(function(i){if(i){var r=h.auth.EmailAuthProvider.credential(t,e);return i.linkWithCredential(r)}return mh(n).createUserWithEmailAndPassword(t,e)}))},t.ac=function(t){Oh(this);var e=this;return xh(this,(function(n){return n?n.linkWithCredential(t).then((function(t){return t}),(function(n){if(n&&"auth/email-already-in-use"==n.code&&n.email&&n.credential)throw n;return Ph(e,n,t)})):mh(e).signInWithCredential(t)}))},t.dc=function(t){Oh(this);var e=this,n=this.i;return this.i=null,xh(this,(function(n){return n&&!Zs(yh(e))?n.linkWithRedirect(t):mh(e).signInWithRedirect(t)})).then((function(){}),(function(t){throw e.i=n,t}))},t.cc=function(t,e){Oh(this);var n=this;return xh(this,(function(i){return i?i.linkWithPhoneNumber(t,e).then((function(t){return new Ir(t,(function(t){if("auth/credential-already-in-use"==t.code)return Ph(n,t);throw t}))})):_h(n).signInWithPhoneNumber(t,e).then((function(t){return new Ir(t)}))}))},t.$b=function(){return Oh(this),_h(this).signInAnonymously()},t.Xb=function(t,e){return Oh(this),mh(this).signInWithEmailAndPassword(t,e)},a(Rh,Du),Rh.prototype.v=function(){this.u(this.i),this.w(this.i),this.l().focus(),El(this.l(),(this.l().value||"").length),Du.prototype.v.call(this)},Rh.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},C(Rh.prototype,{l:Oc,H:Cc,u:Dc,B:Pc,j:Rc,M:bc,w:Tc}),a(Nh,Du),Nh.prototype.v=function(){!function(t,e){function n(t){e(t)}for(var i=t.g?Ve("firebaseui-id-tenant-selection-button",t.g||t.s.a):[],r=0;r<i.length;r++){var s=i[r];Ja(t,s,O(n,Hl(s,"tenantId")))}}(this,this.i),Du.prototype.v.call(this)},Nh.prototype.o=function(){this.i=null,Du.prototype.o.call(this)},a(Mh,Du);var Bh=["immediateFederatedRedirect","privacyPolicyUrl","signInFlow","signInOptions","tosUrl"],qh="optionFirst",zh={pc:qh,oc:"identifierFirst"},Gh="*";function Wh(t,e){var n=this;this.s=ir(t),this.a={},Object.keys(e).forEach((function(t){n.a[t]=new Lh(e[t])})),this.ob=this.g=this.A=this.h=this.i=this.j=null,Object.defineProperty(this,"languageCode",{get:function(){return this.ob},set:function(t){this.ob=t||null},enumerable:!1})}function Hh(t){t.j&&t.j.reset(),t.mb(),t.g&&t.g.m()}(t=Wh.prototype).Ub=function(t,e){var n=this;Hh(this);var i=t.apiKey;return new Mi((function(t,r){if(n.a.hasOwnProperty(i)){var s=Fh(n.a[i]).selectTenantUiHidden||null;if(function(t){for(var e in t=t.a.get("displayMode"),zh)if(zh[e]===t)return zh[e];return qh}(n.a[i])===qh){var o=[];e.forEach((function(t){t=t||"_";var e=n.a[i].a.get("tenants");if(!e)throw Error("Invalid tenant configuration!");(e=e[t]||e[Gh])?t={tenantId:"_"!==t?t:null,V:e.fullLabel||null,displayName:e.displayName,za:e.iconUrl,ta:e.buttonColor}:(zr("Invalid tenant configuration: "+t+" is not configured!",void 0),t=null),t&&o.push(t)}));var a=function(e){e={tenantId:e,providerIds:$h(n.a[i],e||"_")},t(e)};if(1===o.length)return void a(o[0].tenantId);n.g=new Nh((function(t){Hh(n),s&&s(),a(t)}),o,jh(n.a[i]),Uh(n.a[i]))}else n.g=new Rh((function(){var r=n.g.j();if(r){for(var o=0;o<e.length;o++){var a=$h(n.a[i],e[o]||"_",r);if(0!==a.length)return r={tenantId:e[o],providerIds:a,email:r},Hh(n),s&&s(),void t(r)}n.g.a(Dn({code:"no-matching-tenant-for-email"}).toString())}}),jh(n.a[i]),Uh(n.a[i]));n.g.render(n.s),(r=Fh(n.a[i]).selectTenantUiShown||null)&&r()}else{var u=Error("Invalid project configuration: API key is invalid!");u.code="invalid-configuration",n.pb(u),r(u)}}))},t.Pb=function(t,e){if(!this.a.hasOwnProperty(t))throw Error("Invalid project configuration: API key is invalid!");var n=e||void 0;Vh(this.a[t],e||"_");try{this.i=h.app(n).auth()}catch(r){var i=this.a[t].a.get("authDomain");if(!i)throw Error("Invalid project configuration: authDomain is required!");(t=h.initializeApp({apiKey:t,authDomain:i},n)).auth().tenantId=e,this.i=t.auth()}return this.i},t.Zb=function(t,e){var n=this;return new Mi((function(i,r){function s(e,i){n.j=new ch(t),wh(n.j,n.s,e,i)}var o=t.app.options.apiKey;n.a.hasOwnProperty(o)||r(Error("Invalid project configuration: API key is invalid!"));var a=function(t,e,n){return t=function(t,e){var n=Bh,i=void 0===i?{}:i;return Vh(t,e),function(t,e,n){return n=void 0===n?{}:n,Object.keys(t).filter((function(t){return e.includes(t)})).reduce((function(e,n){return e[n]=t[n],e}),n)}((t=t.a.get("tenants"))[e]||t[Gh],n,i)}(t,e),(e=t.signInOptions)&&n&&(e=e.filter((function(t){return"string"==typeof t?n.includes(t):n.includes(t.provider)})),t.signInOptions=e),t}(n.a[o],t.tenantId||"_",e&&e.providerIds);Hh(n),r={signInSuccessWithAuthResult:function(t){return i(t),!1}};var u,c=Fh(n.a[o]).signInUiShown||null,l=!1;r.uiChanged=function(e,i){null===e&&"callback"===i?((e=$e("firebaseui-id-page-callback",n.s))&&Qa(e),n.h=new Mh,n.h.render(n.s)):l||null===e&&"spinner"===i||"blank"===i||(n.h&&(n.h.m(),n.h=null),l=!0,c&&c(t.tenantId))},a.callbacks=r,a.credentialHelper="none",e&&e.email&&(u={emailHint:e.email}),n.j?n.j.Wa().then((function(){s(a,u)})):s(a,u)}))},t.reset=function(){var t=this;return Bi().then((function(){t.j&&t.j.Wa()})).then((function(){t.j=null,Hh(t)}))},t.Vb=function(){var t=this;this.h||this.A||(this.A=window.setTimeout((function(){Hh(t),t.h=new Mh,t.g=t.h,t.h.render(t.s),t.A=null}),500))},t.mb=function(){window.clearTimeout(this.A),this.A=null,this.h&&(this.h.m(),this.h=null)},t.Bb=function(){return Hh(this),this.g=new Bc,this.g.render(this.s),Bi()},t.pb=function(t){var e,n=this,i=Dn({code:t.code}).toString()||t.message;Hh(this),t.retry&&"function"==typeof t.retry&&(e=function(){n.reset(),t.retry()}),this.g=new Wc(i,e),this.g.render(this.s)},t.Rb=function(t){var e=this;return Bi().then((function(){var n=e.i&&e.i.app.options.apiKey;if(!e.a.hasOwnProperty(n))throw Error("Invalid project configuration: API key is invalid!");if(Vh(e.a[n],t.tenantId||"_"),!e.i.currentUser||e.i.currentUser.uid!==t.uid)throw Error("The user being processed does not match the signed in user!");return(n=Fh(e.a[n]).beforeSignInSuccess||null)?n(t):t})).then((function(e){if(e.uid!==t.uid)throw Error("User with mismatching UID returned.");return e}))},R("firebaseui.auth.FirebaseUiHandler",Wh),R("firebaseui.auth.FirebaseUiHandler.prototype.selectTenant",Wh.prototype.Ub),R("firebaseui.auth.FirebaseUiHandler.prototype.getAuth",Wh.prototype.Pb),R("firebaseui.auth.FirebaseUiHandler.prototype.startSignIn",Wh.prototype.Zb),R("firebaseui.auth.FirebaseUiHandler.prototype.reset",Wh.prototype.reset),R("firebaseui.auth.FirebaseUiHandler.prototype.showProgressBar",Wh.prototype.Vb),R("firebaseui.auth.FirebaseUiHandler.prototype.hideProgressBar",Wh.prototype.mb),R("firebaseui.auth.FirebaseUiHandler.prototype.completeSignOut",Wh.prototype.Bb),R("firebaseui.auth.FirebaseUiHandler.prototype.handleError",Wh.prototype.pb),R("firebaseui.auth.FirebaseUiHandler.prototype.processUser",Wh.prototype.Rb),R("firebaseui.auth.AuthUI",ch),R("firebaseui.auth.AuthUI.getInstance",(function(t){return t=dh(t),hh[t]?hh[t]:null})),R("firebaseui.auth.AuthUI.prototype.disableAutoSignIn",ch.prototype.Db),R("firebaseui.auth.AuthUI.prototype.start",ch.prototype.start),R("firebaseui.auth.AuthUI.prototype.setConfig",ch.prototype.ib),R("firebaseui.auth.AuthUI.prototype.signIn",ch.prototype.Wb),R("firebaseui.auth.AuthUI.prototype.reset",ch.prototype.reset),R("firebaseui.auth.AuthUI.prototype.delete",ch.prototype.Wa),R("firebaseui.auth.AuthUI.prototype.isPendingRedirect",ch.prototype.nb),R("firebaseui.auth.AuthUIError",Pn),R("firebaseui.auth.AuthUIError.prototype.toJSON",Pn.prototype.toJSON),R("firebaseui.auth.CredentialHelper.GOOGLE_YOLO",Jo),R("firebaseui.auth.CredentialHelper.NONE",Qo),R("firebaseui.auth.AnonymousAuthProvider.PROVIDER_ID","anonymous"),Mi.prototype.catch=Mi.prototype.Ca,Mi.prototype.finally=Mi.prototype.fc}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:window)}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:window),"undefined"!=typeof window&&(window.dialogPolyfill=K());var Y=firebaseui.auth},4997:()=>{!function(){"use strict";var t=function(t){this.element_=t,this.init()};window.MaterialButton=t,t.prototype.Constant_={},t.prototype.CssClasses_={RIPPLE_EFFECT:"mdl-js-ripple-effect",RIPPLE_CONTAINER:"mdl-button__ripple-container",RIPPLE:"mdl-ripple"},t.prototype.blurHandler_=function(t){t&&this.element_.blur()},t.prototype.disable=function(){this.element_.disabled=!0},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.element_.disabled=!1},t.prototype.enable=t.prototype.enable,t.prototype.init=function(){if(this.element_){if(this.element_.classList.contains(this.CssClasses_.RIPPLE_EFFECT)){var t=document.createElement("span");t.classList.add(this.CssClasses_.RIPPLE_CONTAINER),this.rippleElement_=document.createElement("span"),this.rippleElement_.classList.add(this.CssClasses_.RIPPLE),t.appendChild(this.rippleElement_),this.boundRippleBlurHandler=this.blurHandler_.bind(this),this.rippleElement_.addEventListener("mouseup",this.boundRippleBlurHandler),this.element_.appendChild(t)}this.boundButtonBlurHandler=this.blurHandler_.bind(this),this.element_.addEventListener("mouseup",this.boundButtonBlurHandler),this.element_.addEventListener("mouseleave",this.boundButtonBlurHandler)}},componentHandler.register({constructor:t,classAsString:"MaterialButton",cssClass:"mdl-js-button",widget:!0})}()},3544:()=>{var t={upgradeDom:function(t,e){},upgradeElement:function(t,e){},upgradeElements:function(t){},upgradeAllRegistered:function(){},registerUpgradedCallback:function(t,e){},register:function(t){},downgradeElements:function(t){}};(t=function(){"use strict";var t=[],e=[],n="mdlComponentConfigInternal_";function i(e,n){for(var i=0;i<t.length;i++)if(t[i].className===e)return void 0!==n&&(t[i]=n),t[i];return!1}function r(t){var e=t.getAttribute("data-upgraded");return null===e?[""]:e.split(",")}function s(t,e){return-1!==r(t).indexOf(e)}function o(t,e,n){if("CustomEvent"in window&&"function"==typeof window.CustomEvent)return new CustomEvent(t,{bubbles:e,cancelable:n});var i=document.createEvent("Events");return i.initEvent(t,e,n),i}function a(e,n){if(void 0===e&&void 0===n)for(var r=0;r<t.length;r++)a(t[r].className,t[r].cssClass);else{var s=e;if(void 0===n){var o=i(s);o&&(n=o.cssClass)}for(var c=document.querySelectorAll("."+n),l=0;l<c.length;l++)u(c[l],s)}}function u(a,u){if(!("object"==typeof a&&a instanceof Element))throw new Error("Invalid argument provided to upgrade MDL element.");var c=o("mdl-componentupgrading",!0,!0);if(a.dispatchEvent(c),!c.defaultPrevented){var l=r(a),h=[];if(u)s(a,u)||h.push(i(u));else{var d=a.classList;t.forEach((function(t){d.contains(t.cssClass)&&-1===h.indexOf(t)&&!s(a,t.className)&&h.push(t)}))}for(var p,f=0,g=h.length;f<g;f++){if(!(p=h[f]))throw new Error("Unable to find a registered component for the given class.");l.push(p.className),a.setAttribute("data-upgraded",l.join(","));var m=new p.classConstructor(a);m[n]=p,e.push(m);for(var _=0,y=p.callbacks.length;_<y;_++)p.callbacks[_](a);p.widget&&(a[p.className]=m);var v=o("mdl-componentupgraded",!0,!1);a.dispatchEvent(v)}}}function c(t){if(t){var i=e.indexOf(t);e.splice(i,1);var r=t.element_.getAttribute("data-upgraded").split(","),s=r.indexOf(t[n].classAsString);r.splice(s,1),t.element_.setAttribute("data-upgraded",r.join(","));var a=o("mdl-componentdowngraded",!0,!1);t.element_.dispatchEvent(a)}}return{upgradeDom:a,upgradeElement:u,upgradeElements:function t(e){Array.isArray(e)||(e=e instanceof Element?[e]:Array.prototype.slice.call(e));for(var n,i=0,r=e.length;i<r;i++)(n=e[i])instanceof HTMLElement&&(u(n),n.children.length>0&&t(n.children))},upgradeAllRegistered:function(){for(var e=0;e<t.length;e++)a(t[e].className)},registerUpgradedCallback:function(t,e){var n=i(t);n&&n.callbacks.push(e)},register:function(e){var r=!0;void 0===e.widget&&void 0===e.widget||(r=e.widget||e.widget);var s={classConstructor:e.constructor||e.constructor,className:e.classAsString||e.classAsString,cssClass:e.cssClass||e.cssClass,widget:r,callbacks:[]};if(t.forEach((function(t){if(t.cssClass===s.cssClass)throw new Error("The provided cssClass has already been registered: "+t.cssClass);if(t.className===s.className)throw new Error("The provided className has already been registered")})),e.constructor.prototype.hasOwnProperty(n))throw new Error("MDL component classes must not have mdlComponentConfigInternal_ defined as a property.");i(e.classAsString,s)||t.push(s)},downgradeElements:function(t){var n=function(t){e.filter((function(e){return e.element_===t})).forEach(c)};if(t instanceof Array||t instanceof NodeList)for(var i=0;i<t.length;i++)n(t[i]);else{if(!(t instanceof Node))throw new Error("Invalid argument provided to downgrade MDL nodes.");n(t)}}}}()).ComponentConfigPublic,t.ComponentConfig,t.Component,t.upgradeDom=t.upgradeDom,t.upgradeElement=t.upgradeElement,t.upgradeElements=t.upgradeElements,t.upgradeAllRegistered=t.upgradeAllRegistered,t.registerUpgradedCallback=t.registerUpgradedCallback,t.register=t.register,t.downgradeElements=t.downgradeElements,window.componentHandler=t,window.componentHandler=t,window.addEventListener("load",(function(){"use strict";"classList"in document.createElement("div")&&"querySelector"in document&&"addEventListener"in window&&Array.prototype.forEach?(document.documentElement.classList.add("mdl-js"),t.upgradeAllRegistered()):(t.upgradeElement=function(){},t.register=function(){})}))},4210:()=>{!function(){"use strict";var t=function(t){this.element_=t,this.init()};window.MaterialProgress=t,t.prototype.Constant_={},t.prototype.CssClasses_={INDETERMINATE_CLASS:"mdl-progress__indeterminate"},t.prototype.setProgress=function(t){this.element_.classList.contains(this.CssClasses_.INDETERMINATE_CLASS)||(this.progressbar_.style.width=t+"%")},t.prototype.setProgress=t.prototype.setProgress,t.prototype.setBuffer=function(t){this.bufferbar_.style.width=t+"%",this.auxbar_.style.width=100-t+"%"},t.prototype.setBuffer=t.prototype.setBuffer,t.prototype.init=function(){if(this.element_){var t=document.createElement("div");t.className="progressbar bar bar1",this.element_.appendChild(t),this.progressbar_=t,(t=document.createElement("div")).className="bufferbar bar bar2",this.element_.appendChild(t),this.bufferbar_=t,(t=document.createElement("div")).className="auxbar bar bar3",this.element_.appendChild(t),this.auxbar_=t,this.progressbar_.style.width="0%",this.bufferbar_.style.width="100%",this.auxbar_.style.width="0%",this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialProgress",cssClass:"mdl-js-progress",widget:!0})}()},5634:()=>{!function(){"use strict";var t=function(t){this.element_=t,this.init()};window.MaterialSpinner=t,t.prototype.Constant_={MDL_SPINNER_LAYER_COUNT:4},t.prototype.CssClasses_={MDL_SPINNER_LAYER:"mdl-spinner__layer",MDL_SPINNER_CIRCLE_CLIPPER:"mdl-spinner__circle-clipper",MDL_SPINNER_CIRCLE:"mdl-spinner__circle",MDL_SPINNER_GAP_PATCH:"mdl-spinner__gap-patch",MDL_SPINNER_LEFT:"mdl-spinner__left",MDL_SPINNER_RIGHT:"mdl-spinner__right"},t.prototype.createLayer=function(t){var e=document.createElement("div");e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER),e.classList.add(this.CssClasses_.MDL_SPINNER_LAYER+"-"+t);var n=document.createElement("div");n.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),n.classList.add(this.CssClasses_.MDL_SPINNER_LEFT);var i=document.createElement("div");i.classList.add(this.CssClasses_.MDL_SPINNER_GAP_PATCH);var r=document.createElement("div");r.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE_CLIPPER),r.classList.add(this.CssClasses_.MDL_SPINNER_RIGHT);for(var s=[n,i,r],o=0;o<s.length;o++){var a=document.createElement("div");a.classList.add(this.CssClasses_.MDL_SPINNER_CIRCLE),s[o].appendChild(a)}e.appendChild(n),e.appendChild(i),e.appendChild(r),this.element_.appendChild(e)},t.prototype.createLayer=t.prototype.createLayer,t.prototype.stop=function(){this.element_.classList.remove("is-active")},t.prototype.stop=t.prototype.stop,t.prototype.start=function(){this.element_.classList.add("is-active")},t.prototype.start=t.prototype.start,t.prototype.init=function(){if(this.element_){for(var t=1;t<=this.Constant_.MDL_SPINNER_LAYER_COUNT;t++)this.createLayer(t);this.element_.classList.add("is-upgraded")}},componentHandler.register({constructor:t,classAsString:"MaterialSpinner",cssClass:"mdl-js-spinner",widget:!0})}()},6573:()=>{!function(){"use strict";var t=function(t){this.element_=t,this.maxRows=this.Constant_.NO_MAX_ROWS,this.init()};window.MaterialTextfield=t,t.prototype.Constant_={NO_MAX_ROWS:-1,MAX_ROWS_ATTRIBUTE:"maxrows"},t.prototype.CssClasses_={LABEL:"mdl-textfield__label",INPUT:"mdl-textfield__input",IS_DIRTY:"is-dirty",IS_FOCUSED:"is-focused",IS_DISABLED:"is-disabled",IS_INVALID:"is-invalid",IS_UPGRADED:"is-upgraded",HAS_PLACEHOLDER:"has-placeholder"},t.prototype.onKeyDown_=function(t){var e=t.target.value.split("\n").length;13===t.keyCode&&e>=this.maxRows&&t.preventDefault()},t.prototype.onFocus_=function(t){this.element_.classList.add(this.CssClasses_.IS_FOCUSED)},t.prototype.onBlur_=function(t){this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.onReset_=function(t){this.updateClasses_()},t.prototype.updateClasses_=function(){this.checkDisabled(),this.checkValidity(),this.checkDirty(),this.checkFocus()},t.prototype.checkDisabled=function(){this.input_.disabled?this.element_.classList.add(this.CssClasses_.IS_DISABLED):this.element_.classList.remove(this.CssClasses_.IS_DISABLED)},t.prototype.checkDisabled=t.prototype.checkDisabled,t.prototype.checkFocus=function(){Boolean(this.element_.querySelector(":focus"))?this.element_.classList.add(this.CssClasses_.IS_FOCUSED):this.element_.classList.remove(this.CssClasses_.IS_FOCUSED)},t.prototype.checkFocus=t.prototype.checkFocus,t.prototype.checkValidity=function(){this.input_.validity&&(this.input_.validity.valid?this.element_.classList.remove(this.CssClasses_.IS_INVALID):this.element_.classList.add(this.CssClasses_.IS_INVALID))},t.prototype.checkValidity=t.prototype.checkValidity,t.prototype.checkDirty=function(){this.input_.value&&this.input_.value.length>0?this.element_.classList.add(this.CssClasses_.IS_DIRTY):this.element_.classList.remove(this.CssClasses_.IS_DIRTY)},t.prototype.checkDirty=t.prototype.checkDirty,t.prototype.disable=function(){this.input_.disabled=!0,this.updateClasses_()},t.prototype.disable=t.prototype.disable,t.prototype.enable=function(){this.input_.disabled=!1,this.updateClasses_()},t.prototype.enable=t.prototype.enable,t.prototype.change=function(t){this.input_.value=t||"",this.updateClasses_()},t.prototype.change=t.prototype.change,t.prototype.init=function(){if(this.element_&&(this.label_=this.element_.querySelector("."+this.CssClasses_.LABEL),this.input_=this.element_.querySelector("."+this.CssClasses_.INPUT),this.input_)){this.input_.hasAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE)&&(this.maxRows=parseInt(this.input_.getAttribute(this.Constant_.MAX_ROWS_ATTRIBUTE),10),isNaN(this.maxRows)&&(this.maxRows=this.Constant_.NO_MAX_ROWS)),this.input_.hasAttribute("placeholder")&&this.element_.classList.add(this.CssClasses_.HAS_PLACEHOLDER),this.boundUpdateClassesHandler=this.updateClasses_.bind(this),this.boundFocusHandler=this.onFocus_.bind(this),this.boundBlurHandler=this.onBlur_.bind(this),this.boundResetHandler=this.onReset_.bind(this),this.input_.addEventListener("input",this.boundUpdateClassesHandler),this.input_.addEventListener("focus",this.boundFocusHandler),this.input_.addEventListener("blur",this.boundBlurHandler),this.input_.addEventListener("reset",this.boundResetHandler),this.maxRows!==this.Constant_.NO_MAX_ROWS&&(this.boundKeyDownHandler=this.onKeyDown_.bind(this),this.input_.addEventListener("keydown",this.boundKeyDownHandler));var t=this.element_.classList.contains(this.CssClasses_.IS_INVALID);this.updateClasses_(),this.element_.classList.add(this.CssClasses_.IS_UPGRADED),t&&this.element_.classList.add(this.CssClasses_.IS_INVALID),this.input_.hasAttribute("autofocus")&&(this.element_.focus(),this.checkFocus())}},componentHandler.register({constructor:t,classAsString:"MaterialTextfield",cssClass:"mdl-js-textfield",widget:!0})}()},8412:(t,e,n)=>{"use strict";n.r(e),n.d(e,{InferenceSession:()=>f,Tensor:()=>d,env:()=>o,registerBackend:()=>s});const i={},r=[],s=(t,e,n)=>{if(!e||"function"!=typeof e.init||"function"!=typeof e.createSessionHandler)throw new TypeError("not a valid backend");{const s=i[t];if(void 0===s)i[t]={backend:e,priority:n};else{if(s.priority>n)return;if(s.priority===n&&s.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${n}`)}if(n>=0){const e=r.indexOf(t);-1!==e&&r.splice(e,1);for(let e=0;e<r.length;e++)if(i[r[e]].priority<=n)return void r.splice(e,0,t);r.push(t)}}},o=new class{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(t){if(void 0!==t){if("string"!=typeof t||-1===["verbose","info","warning","error","fatal"].indexOf(t))throw new Error(`Unsupported logging level: ${t}`);this.logLevelInternal=t}}get logLevel(){return this.logLevelInternal}},a="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,u="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from,c=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),l=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);a&&(c.set("int64",BigInt64Array),l.set(BigInt64Array,"int64")),u&&(c.set("uint64",BigUint64Array),l.set(BigUint64Array,"uint64"));class h{constructor(t,e,n){let i,r,s;if("string"==typeof t)if(i=t,s=n,"string"===t){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");r=e}else{const n=c.get(t);if(void 0===n)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e))r=n.from(e);else{if(!(e instanceof n))throw new TypeError(`A ${i} tensor's data must be type of ${n}`);r=e}}else if(s=e,Array.isArray(t)){if(0===t.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const e=typeof t[0];if("string"===e)i="string",r=t;else{if("boolean"!==e)throw new TypeError(`Invalid element type of data array: ${e}.`);i="bool",r=Uint8Array.from(t)}}else{const e=l.get(t.constructor);if(void 0===e)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);i=e,r=t}if(void 0===s)s=[r.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");const o=(t=>{let e=1;for(let n=0;n<t.length;n++){const i=t[n];if("number"!=typeof i||!Number.isSafeInteger(i))throw new TypeError(`dims[${n}] must be an integer, got: ${i}`);if(i<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${i}`);e*=i}return e})(s);if(o!==r.length)throw new Error(`Tensor's size(${o}) does not match data length(${r.length}).`);this.dims=s,this.type=i,this.data=r,this.size=o}static bufferToTensor(t,e){if(void 0===t)throw new Error("Image buffer must be defined");if(void 0===e.height||void 0===e.width)throw new Error("Image height and width must be defined");const{height:n,width:i}=e,r=e.norm;let s,o;s=void 0===r||void 0===r.mean?255:r.mean,o=void 0===r||void 0===r.bias?0:r.bias;const a=void 0!==e.bitmapFormat?e.bitmapFormat:"RGBA",u=void 0!==e.tensorFormat&&void 0!==e.tensorFormat?e.tensorFormat:"RGB",c=n*i,l="RGBA"===u?new Float32Array(4*c):new Float32Array(3*c);let d=4,p=0,f=1,g=2,m=3,_=0,y=c,v=2*c,b=-1;"RGB"===a&&(d=3,p=0,f=1,g=2,m=-1),"RGBA"===u?b=3*c:"RBG"===u?(_=0,v=c,y=2*c):"BGR"===u&&(v=0,y=c,_=2*c);for(let e=0;e<c;e++,p+=d,g+=d,f+=d,m+=d)l[_++]=(t[p]+o)/s,l[y++]=(t[f]+o)/s,l[v++]=(t[g]+o)/s,-1!==b&&-1!==m&&(l[b++]=(t[m]+o)/s);return new h("float32",l,"RGBA"===u?[1,4,n,i]:[1,3,n,i])}static async fromImage(t,e){const n="undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement,i="undefined"!=typeof ImageData&&t instanceof ImageData,r="undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap,s="undefined"!=typeof String&&(t instanceof String||"string"==typeof t);let o,a={};if(n){const n=document.createElement("canvas"),i=n.getContext("2d");if(null==i)throw new Error("Can not access image data");{let r=t.naturalHeight,s=t.naturalWidth;if(void 0!==e&&void 0!==e.resizedHeight&&void 0!==e.resizedWidth&&(r=e.resizedHeight,s=e.resizedWidth),void 0!==e){if(a=e,void 0!==e.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(a.tensorFormat="RGBA",void 0!==e.height&&e.height!==r)throw new Error("Image input config height doesn't match HTMLImageElement height");if(a.height=r,void 0!==e.width&&e.width!==s)throw new Error("Image input config width doesn't match HTMLImageElement width");a.width=s}else a.tensorFormat="RGBA",a.height=r,a.width=s;n.width=s,n.height=r,i.drawImage(t,0,0,s,r),o=i.getImageData(0,0,s,r).data}}else{if(!i){if(r){if(void 0===e)throw new Error("Please provide image config with format for Imagebitmap");if(void 0!==e.bitmapFormat)throw new Error("Image input config format must be defined for ImageBitmap");const n=document.createElement("canvas").getContext("2d");if(null!=n){const i=t.height,r=t.width;if(n.drawImage(t,0,0,r,i),o=n.getImageData(0,0,r,i).data,void 0!==e){if(void 0!==e.height&&e.height!==i)throw new Error("Image input config height doesn't match ImageBitmap height");if(a.height=i,void 0!==e.width&&e.width!==r)throw new Error("Image input config width doesn't match ImageBitmap width");a.width=r}else a.height=i,a.width=r;return h.bufferToTensor(o,a)}throw new Error("Can not access image data")}if(s)return new Promise(((n,i)=>{const r=document.createElement("canvas"),s=r.getContext("2d");if(!t||!s)return i();const o=new Image;o.crossOrigin="Anonymous",o.src=t,o.onload=()=>{r.width=o.width,r.height=o.height,s.drawImage(o,0,0,r.width,r.height);const t=s.getImageData(0,0,r.width,r.height);if(void 0!==e){if(void 0!==e.height&&e.height!==r.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(a.height=r.height,void 0!==e.width&&e.width!==r.width)throw new Error("Image input config width doesn't match ImageBitmap width");a.width=r.width}else a.height=r.height,a.width=r.width;n(h.bufferToTensor(t.data,a))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{const n="RGBA";let i,r;if(void 0!==e&&void 0!==e.resizedWidth&&void 0!==e.resizedHeight?(i=e.resizedHeight,r=e.resizedWidth):(i=t.height,r=t.width),void 0!==e){if(a=e,void 0!==e.bitmapFormat&&e.bitmapFormat!==n)throw new Error("Image input config format must be RGBA for ImageData");a.bitmapFormat="RGBA"}else a.bitmapFormat="RGBA";if(a.height=i,a.width=r,void 0!==e){const e=document.createElement("canvas");e.width=r,e.height=i;const n=e.getContext("2d");if(null==n)throw new Error("Can not access image data");n.putImageData(t,0,0),o=n.getImageData(0,0,r,i).data}else o=t.data}}if(void 0!==o)return h.bufferToTensor(o,a);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(t){var e,n;const i=document.createElement("canvas").getContext("2d");let r;if(null==i)throw new Error("Can not access image data");{const s=this.dims[3],o=this.dims[2],a=this.dims[1],u=void 0!==t&&void 0!==t.format?t.format:"RGB",c=void 0!==t&&void 0!==(null===(e=t.norm)||void 0===e?void 0:e.mean)?t.norm.mean:255,l=void 0!==t&&void 0!==(null===(n=t.norm)||void 0===n?void 0:n.bias)?t.norm.bias:0,h=o*s;if(void 0!==t){if(void 0!==t.height&&t.height!==o)throw new Error("Image output config height doesn't match tensor height");if(void 0!==t.width&&t.width!==s)throw new Error("Image output config width doesn't match tensor width");if(void 0!==t.format&&4===a&&"RGBA"!==t.format||3===a&&"RGB"!==t.format&&"BGR"!==t.format)throw new Error("Tensor format doesn't match input tensor dims")}const d=4;let p=0,f=1,g=2,m=3,_=0,y=h,v=2*h,b=-1;"RGBA"===u?(_=0,y=h,v=2*h,b=3*h):"RGB"===u?(_=0,y=h,v=2*h):"RBG"===u&&(_=0,v=h,y=2*h),r=i.createImageData(s,o);for(let t=0;t<o*s;p+=d,f+=d,g+=d,m+=d,t++)r.data[p]=(this.data[_++]-l)*c,r.data[f]=(this.data[y++]-l)*c,r.data[g]=(this.data[v++]-l)*c,r.data[m]=-1===b?255:(this.data[b++]-l)*c}return r}reshape(t){return new h(this.type,this.data,t)}}const d=h;class p{constructor(t){this.handler=t}async run(t,e,n){const i={};let r={};if("object"!=typeof t||null===t||t instanceof d||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let s=!0;if("object"==typeof e){if(null===e)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof d)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(0===e.length)throw new TypeError("'fetches' cannot be an empty array.");s=!1;for(const t of e){if("string"!=typeof t)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(t))throw new RangeError(`'fetches' contains invalid output name: ${t}.`);i[t]=null}if("object"==typeof n&&null!==n)r=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{let t=!1;const o=Object.getOwnPropertyNames(e);for(const n of this.outputNames)if(-1!==o.indexOf(n)){const r=e[n];(null===r||r instanceof d)&&(t=!0,s=!1,i[n]=r)}if(t){if("object"==typeof n&&null!==n)r=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else r=e}}else if(void 0!==e)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const e of this.inputNames)if(void 0===t[e])throw new Error(`input '${e}' is missing in 'feeds'.`);if(s)for(const t of this.outputNames)i[t]=null;const o=await this.handler.run(t,i,r),a={};for(const t in o)Object.hasOwnProperty.call(o,t)&&(a[t]=new d(o[t].type,o[t].data,o[t].dims));return a}static async create(t,e,n,s){let o,a={};if("string"==typeof t){if(o=t,"object"==typeof e&&null!==e)a=e;else if(void 0!==e)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(o=t,"object"==typeof e&&null!==e)a=e;else if(void 0!==e)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const i=t;let r=0,u=t.byteLength;if("object"==typeof e&&null!==e)a=e;else if("number"==typeof e){if(r=e,!Number.isSafeInteger(r))throw new RangeError("'byteOffset' must be an integer.");if(r<0||r>=i.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${i.byteLength}).`);if(u=t.byteLength-r,"number"==typeof n){if(u=n,!Number.isSafeInteger(u))throw new RangeError("'byteLength' must be an integer.");if(u<=0||r+u>i.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${i.byteLength-r}].`);if("object"==typeof s&&null!==s)a=s;else if(void 0!==s)throw new TypeError("'options' must be an object.")}else if(void 0!==n)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==e)throw new TypeError("'options' must be an object.");o=new Uint8Array(i,r,u)}}const u=(a.executionProviders||[]).map((t=>"string"==typeof t?t:t.name)),c=await(async t=>{const e=0===t.length?r:t,n=[];for(const t of e){const e=i[t];if(e){if(e.initialized)return e.backend;if(e.aborted)continue;const i=!!e.initPromise;try{return i||(e.initPromise=e.backend.init()),await e.initPromise,e.initialized=!0,e.backend}catch(r){i||n.push({name:t,err:r}),e.aborted=!0}finally{delete e.initPromise}}}throw new Error(`no available backend found. ERR: ${n.map((t=>`[${t.name}] ${t.err}`)).join(", ")}`)})(u),l=await c.createSessionHandler(o,a);return new p(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const f=p},8736:(module,__unused_webpack_exports,__webpack_require__)=>{var e;self,e=__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(t,e,n)=>{var i,r=(i=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return P.buffer!=N&&W(P.buffer),M}function r(){return P.buffer!=N&&W(P.buffer),L}function s(){return P.buffer!=N&&W(P.buffer),F}function o(){return P.buffer!=N&&W(P.buffer),j}function a(){return P.buffer!=N&&W(P.buffer),U}var u,c,l;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,l=e}));var h,d,p,f,g,m,_=Object.assign({},u),y="./this.program",v=(t,e)=>{throw e},b="object"==typeof window,w="function"==typeof importScripts,T="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,x=u.ENVIRONMENT_IS_PTHREAD||!1,S="";function I(t){return u.locateFile?u.locateFile(t,S):S+t}if(T){let e;S=w?n(908).dirname(S)+"/":"//",m=()=>{g||(f=n(1384),g=n(908))},h=function(t,e){return m(),t=g.normalize(t),f.readFileSync(t,e?void 0:"utf8")},p=t=>((t=h(t,!0)).buffer||(t=new Uint8Array(t)),t),d=(t,e,n)=>{m(),t=g.normalize(t),f.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},1<process.argv.length&&(y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),v=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||C("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(9925)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}n.g.Worker=e.Worker}else(b||w)&&(w?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),i&&(S=i),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",T||(h=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),d=(t,e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)}));T&&"undefined"==typeof performance&&(n.g.performance=n(6953).performance);var E=console.log.bind(console),A=console.warn.bind(console);T&&(m(),E=t=>f.writeSync(1,t+"\n"),A=t=>f.writeSync(2,t+"\n"));var k,O=u.print||E,C=u.printErr||A;Object.assign(u,_),_=null,u.thisProgram&&(y=u.thisProgram),u.quit&&(v=u.quit),u.wasmBinary&&(k=u.wasmBinary);var D=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&st("no native wasm support detected");var P,R,N,M,L,F,j,U,V=!1,$="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function B(t,e,n){var i=(e>>>=0)+n;for(n=e;t[n]&&!(n>=i);)++n;if(16<n-e&&t.buffer&&$)return $.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(i="";e<n;){var r=t[e++];if(128&r){var s=63&t[e++];if(192==(224&r))i+=String.fromCharCode((31&r)<<6|s);else{var o=63&t[e++];65536>(r=224==(240&r)?(15&r)<<12|s<<6|o:(7&r)<<18|s<<12|o<<6|63&t[e++])?i+=String.fromCharCode(r):(r-=65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else i+=String.fromCharCode(r)}return i}function q(t,e){return(t>>>=0)?B(r(),t,e):""}function z(t,e,n,i){if(!(0<i))return 0;var r=n>>>=0;i=n+i-1;for(var s=0;s<t.length;++s){var o=t.charCodeAt(s);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s)),127>=o){if(n>=i)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=i)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=i)break;e[n++>>>0]=224|o>>12}else{if(n+3>=i)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-r}function G(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);127>=i?e++:2047>=i?e+=2:55296<=i&&57343>=i?(e+=4,++n):e+=3}return e}function W(t){N=t,u.HEAP8=M=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=L=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=j=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=U=new Float64Array(t)}x&&(N=u.buffer);var H=u.INITIAL_MEMORY||16777216;if(x)P=u.wasmMemory,N=u.buffer;else if(u.wasmMemory)P=u.wasmMemory;else if(!((P=new WebAssembly.Memory({initial:H/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw C("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),T&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");P&&(N=P.buffer),H=N.byteLength,W(N);var K,Y=[],X=[],Z=[],J=[];function Q(){return D||!1}function tt(){var t=u.preRun.shift();Y.unshift(t)}var et,nt=0,it=null,rt=null;function st(t){throw x?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),C(t="Aborted("+t+")"),V=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),l(t),t}function ot(){return et.startsWith("data:application/octet-stream;base64,")}function at(){var t=et;try{if(t==et&&k)return new Uint8Array(k);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){st(t)}}et="ort-wasm-threaded.wasm",ot()||(et=I(et));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function lt(t){(t=ft.Vb[t])||st(),ft.mc(t)}function ht(t){var e=ft.Cc();if(!e)return 6;ft.ac.push(e),ft.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function dt(t){if(x)return Kt(1,1,t);Q()||(ft.oc(),u.onExit&&u.onExit(t),V=!0),v(t,new ct(t))}function pt(t,e){if(!e&&x)throw _t(t),"unwind";Q()||x||(ye(),gt(Z),_e(0),re[1].length&&se(1,10),re[2].length&&se(2,10),ft.oc()),dt(t)}var ft={Yb:[],ac:[],qc:[],Vb:{},fc:function(){x&&ft.Ec()},Pc:function(){},Ec:function(){ft.receiveObjectTransfer=ft.Gc,ft.threadInitTLS=ft.pc,ft.setExitStatus=ft.nc,D=!1},nc:function(){},oc:function(){for(var t of Object.values(ft.Vb))ft.mc(t);for(t of ft.Yb)t.terminate();ft.Yb=[]},mc:function(t){var e=t.Ub;delete ft.Vb[e],ft.Yb.push(t),ft.ac.splice(ft.ac.indexOf(t),1),t.Ub=0,xe(e)},Gc:function(){},pc:function(){ft.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var i=(n=n.data).cmd;if(t.Ub&&(ft.Bc=t.Ub),n.targetThread&&n.targetThread!=fe()){var r=ft.Vb[n.Qc];r?r.postMessage(n,n.transferList):C('Internal error! Worker sent a message "'+i+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===i?Bt(n.queue):"spawnThread"===i?ht(n):"cleanupThread"===i?lt(n.thread):"killThread"===i?(n=n.thread,i=ft.Vb[n],delete ft.Vb[n],i.terminate(),xe(n),ft.ac.splice(ft.ac.indexOf(i),1),i.Ub=0):"cancelThread"===i?ft.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===i?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===i?O("Thread "+n.threadId+": "+n.text):"printErr"===i?C("Thread "+n.threadId+": "+n.text):"alert"===i?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===i?u.onAbort&&u.onAbort(n.arg):i&&C("worker sent an unknown command "+i);ft.Bc=void 0},t.onerror=t=>{throw C("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},T&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||i,wasmMemory:P,wasmModule:R})},yc:function(){var t=I("ort-wasm-threaded.worker.js");ft.Yb.push(new Worker(t))},Cc:function(){return 0==ft.Yb.length&&(ft.yc(),ft.Fc(ft.Yb[0])),ft.Yb.pop()}};function gt(t){for(;0<t.length;)t.shift()(u)}function mt(t){var e=Ae();return t=t(),ke(e),t}function _t(t){if(x)return Kt(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||v(1,t)}}u.PThread=ft,u.establishStackSpace=function(){var t=fe(),e=s()[t+44>>2>>>0];t=s()[t+48>>2>>>0],Ee(e,e-t),ke(e)};var yt=[];function vt(t){var e=yt[t];return e||(t>=yt.length&&(yt.length=t+1),yt[t]=e=K.get(t)),e}u.invokeEntryPoint=function(t,e){t=vt(t)(e),Q()?ft.nc(t):Se(t)};var bt,wt,Tt=[],xt=0,St=0;function It(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){o()[this.Sb+4>>2>>>0]=t},this.bc=function(){return o()[this.Sb+4>>2>>>0]},this.wc=function(t){o()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return o()[this.Sb+8>>2>>>0]},this.rc=function(){s()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(s(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(s(),this.Sb>>2,1)},this.cc=function(t){o()[this.Sb+16>>2>>>0]=t},this.tc=function(){return o()[this.Sb+16>>2>>>0]},this.vc=function(){if(De(this.bc()))return o()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Et(t){return me(new It(t).Sb)}function At(t,e,n,i){return x?Kt(3,1,t,e,n,i):kt(t,e,n,i)}function kt(t,e,n,i){if("undefined"==typeof SharedArrayBuffer)return C("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var r=[];return x&&0===r.length?At(t,e,n,i):(t={Ic:n,Ub:t,zc:i,Nc:r},x?(t.Oc="spawnThread",postMessage(t,r),0):ht(t))}function Ot(t,e,n){return x?Kt(4,1,t,e,n):0}function Ct(t,e){if(x)return Kt(5,1,t,e)}function Dt(t,e){if(x)return Kt(6,1,t,e)}function Pt(t,e,n){if(x)return Kt(7,1,t,e,n)}function Rt(t,e,n){return x?Kt(8,1,t,e,n):0}function Nt(t,e){if(x)return Kt(9,1,t,e)}function Mt(t,e,n){if(x)return Kt(10,1,t,e,n)}function Lt(t,e,n,i){if(x)return Kt(11,1,t,e,n,i)}function Ft(t,e,n,i){if(x)return Kt(12,1,t,e,n,i)}function jt(t,e,n,i){if(x)return Kt(13,1,t,e,n,i)}function Ut(t){if(x)return Kt(14,1,t)}function Vt(t,e){if(x)return Kt(15,1,t,e)}function $t(t,e,n){if(x)return Kt(16,1,t,e,n)}function Bt(t){Atomics.store(s(),t>>2,1),fe()&&Te(t),Atomics.compareExchange(s(),t>>2,1,0)}function qt(t){return o()[t>>>2]+4294967296*s()[t+4>>>2]}function zt(t,e,n,i,r,s){return x?Kt(17,1,t,e,n,i,r,s):-52}function Gt(t,e,n,i,r,s){if(x)return Kt(18,1,t,e,n,i,r,s)}function Wt(t){var n=G(t)+1,i=ge(n);return i&&z(t,e(),i,n),i}function Ht(t,e,n){function i(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}if(x)return Kt(19,1,t,e,n);var r=(new Date).getFullYear(),a=new Date(r,0,1),u=new Date(r,6,1);r=a.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(r,c);s()[t>>2>>>0]=60*l,s()[e>>2>>>0]=Number(r!=c),t=i(a),e=i(u),t=Wt(t),e=Wt(e),c<r?(o()[n>>2>>>0]=t,o()[n+4>>2>>>0]=e):(o()[n>>2>>>0]=e,o()[n+4>>2>>>0]=t)}function Kt(t,e){var n=arguments.length-2,i=arguments;return mt((()=>{for(var r=Oe(8*n),s=r>>3,o=0;o<n;o++){var u=i[2+o];a()[s+o>>>0]=u}return we(t,n,r,e)}))}u.executeNotifiedProxyingQueue=Bt,wt=T?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:x?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var Yt,Xt=[],Zt={};function Jt(){if(!Yt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:y||"./this.program"};for(t in Zt)void 0===Zt[t]?delete e[t]:e[t]=Zt[t];var n=[];for(t in e)n.push(t+"="+e[t]);Yt=n}return Yt}function Qt(t,n){if(x)return Kt(20,1,t,n);var i=0;return Jt().forEach((function(r,s){var a=n+i;for(s=o()[t+4*s>>2>>>0]=a,a=0;a<r.length;++a)e()[s++>>0>>>0]=r.charCodeAt(a);e()[s>>0>>>0]=0,i+=r.length+1})),0}function te(t,e){if(x)return Kt(21,1,t,e);var n=Jt();o()[t>>2>>>0]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),o()[e>>2>>>0]=i,0}function ee(t){return x?Kt(22,1,t):52}function ne(t,e,n,i){return x?Kt(23,1,t,e,n,i):52}function ie(t,e,n,i,r){return x?Kt(24,1,t,e,n,i,r):70}var re=[null,[],[]];function se(t,e){var n=re[t];0===e||10===e?((1===t?O:C)(B(n,0)),n.length=0):n.push(e)}function oe(t,e,n,i){if(x)return Kt(25,1,t,e,n,i);for(var s=0,a=0;a<n;a++){var u=o()[e>>2>>>0],c=o()[e+4>>2>>>0];e+=8;for(var l=0;l<c;l++)se(t,r()[u+l>>>0]);s+=c}return o()[i>>2>>>0]=s,0}var ae=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],le=[31,28,31,30,31,30,31,31,30,31,30,31];function he(t,n,i,r){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function a(t,e){return o(t,e,"0")}function u(t,e){function n(t){return 0>t?-1:0<t?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function c(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),i=(ue(t.getFullYear())?ce:le)[n];if(!(e>i-t.getDate())){t.setDate(t.getDate()+e);break}e-=i-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=c(new Date(t.getFullYear(),0,4)),n=c(n),0>=u(e,t)?0>=u(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var h=s()[r+40>>2>>>0];for(var d in r={Lc:s()[r>>2>>>0],Kc:s()[r+4>>2>>>0],dc:s()[r+8>>2>>>0],jc:s()[r+12>>2>>>0],ec:s()[r+16>>2>>>0],Xb:s()[r+20>>2>>>0],Tb:s()[r+24>>2>>>0],Wb:s()[r+28>>2>>>0],Rc:s()[r+32>>2>>>0],Jc:s()[r+36>>2>>>0],Mc:h?q(h):""},i=q(i),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})i=i.replace(new RegExp(d,"g"),h[d]);var p="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),f="January February March April May June July August September October November December".split(" ");for(d in h={"%a":function(t){return p[t.Tb].substring(0,3)},"%A":function(t){return p[t.Tb]},"%b":function(t){return f[t.ec].substring(0,3)},"%B":function(t){return f[t.ec]},"%C":function(t){return a((t.Xb+1900)/100|0,2)},"%d":function(t){return a(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return a(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),a(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:le)[n++]);return a(t.jc+e,3)},"%m":function(t){return a(t.ec+1,2)},"%M":function(t){return a(t.Kc,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return a(t.Lc,2)},"%t":function(){return"\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return a(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return a(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return a(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},i=i.replace(/%%/g,"\0\0"),h)i.includes(d)&&(i=i.replace(new RegExp(d,"g"),h[d](r)));return d=function(t){var e=Array(G(t)+1);return z(t,e,0,e.length),e}(i=i.replace(/\0\0/g,"%")),d.length>n?0:(function(t,n){e().set(t,n>>>0)}(d,t),d.length-1)}ft.fc();var de=[null,dt,_t,At,Ot,Ct,Dt,Pt,Rt,Nt,Mt,Lt,Ft,jt,Ut,Vt,$t,zt,Gt,Ht,Qt,te,ee,ne,ie,oe],pe={b:function(t){return ge(t+24)+24},n:function(t){return(t=new It(t)).uc()||(t.hc(!0),xt--),t.ic(!1),Tt.push(t),t.sc(),t.vc()},ma:function(t){throw C("Unexpected exception thrown, this is not properly supported - aborting"),V=!0,t},x:function(){Ie(0);var t=Tt.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&vt(e)(t.Zb),Et(t.Zb)}St=0},e:function(){var t=St;if(!t)return ae=0;var e=new It(t);e.cc(t);var n=e.bc();if(!n)return ae=0,t;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===n)break;if(Ce(s,n,e.Sb+16))return ae=s,t}return ae=n,t},l:function(){var t=St;if(!t)return ae=0;var e=new It(t);e.cc(t);var n=e.bc();if(!n)return ae=0,t;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===n)break;if(Ce(s,n,e.Sb+16))return ae=s,t}return ae=n,t},h:function(){var t=St;if(!t)return ae=0;var e=new It(t);e.cc(t);var n=e.bc();if(!n)return ae=0,t;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===n)break;if(Ce(s,n,e.Sb+16))return ae=s,t}return ae=n,t},t:Et,M:function(){var t=Tt.pop();t||st("no exception to throw");var e=t.Zb;throw t.kc()||(Tt.push(t),t.ic(!0),t.hc(!1),xt++),St=e,e},c:function(t,e,n){throw new It(t).fc(e,n),St=t,xt++,t},pa:function(){return xt},Fa:function(t){ve(t,!w,1,!b),ft.pc()},T:function(t){x?postMessage({cmd:"cleanupThread",thread:t}):lt(t)},xa:kt,j:function(t){throw St||(St=t),t},H:Ot,Ma:Ct,ua:Dt,wa:Pt,oa:Rt,Ka:Nt,Ca:Mt,Ja:Lt,V:Ft,va:jt,sa:Ut,La:Vt,ta:$t,Ta:function(){},X:function(){st("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){st("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,i){if(t==e)setTimeout((()=>Bt(i)));else if(x)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:i});else{if(!(t=ft.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:i})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*qt(t)),s()[e>>2>>>0]=t.getUTCSeconds(),s()[e+4>>2>>>0]=t.getUTCMinutes(),s()[e+8>>2>>>0]=t.getUTCHours(),s()[e+12>>2>>>0]=t.getUTCDate(),s()[e+16>>2>>>0]=t.getUTCMonth(),s()[e+20>>2>>>0]=t.getUTCFullYear()-1900,s()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*qt(t)),s()[e>>2>>>0]=t.getSeconds(),s()[e+4>>2>>>0]=t.getMinutes(),s()[e+8>>2>>>0]=t.getHours(),s()[e+12>>2>>>0]=t.getDate(),s()[e+16>>2>>>0]=t.getMonth(),s()[e+20>>2>>>0]=t.getFullYear()-1900,s()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),i=(t.getTime()-n.getTime())/864e5|0;s()[e+28>>2>>>0]=i,s()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(i!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,i)),s()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(s()[t+20>>2>>>0]+1900,s()[t+16>>2>>>0],s()[t+12>>2>>>0],s()[t+8>>2>>>0],s()[t+4>>2>>>0],s()[t>>2>>>0],0),n=s()[t+32>>2>>>0],i=e.getTimezoneOffset(),r=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),a=r.getTimezoneOffset(),u=Math.min(a,o);return 0>n?s()[t+32>>2>>>0]=Number(o!=a&&u==i):0<n!=(u==i)&&(o=Math.max(a,o),e.setTime(e.getTime()+6e4*((0<n?u:o)-i))),s()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-r.getTime())/864e5|0,s()[t+28>>2>>>0]=n,s()[t>>2>>>0]=e.getSeconds(),s()[t+4>>2>>>0]=e.getMinutes(),s()[t+8>>2>>>0]=e.getHours(),s()[t+12>>2>>>0]=e.getDate(),s()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:zt,Ba:Gt,Sa:function t(e,n,i){t.Ac||(t.Ac=!0,Ht(e,n,i))},y:function(){st("")},U:function(){if(!T&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";bt||(bt={}),bt[t]||(bt[t]=1,T&&(t="warning: "+t),C(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return T?n(3993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var i=0;i<e;i++)Xt[i]=a()[n+i>>>0];return(0>t?ut[-t-1]:de[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296);var s=Math;i=Math.max(t,i),s=s.min.call(s,4294901760,i+(65536-i%65536)%65536);t:{try{P.grow(s-N.byteLength+65535>>>16),W(P.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:te,J:pt,I:ee,S:ne,ga:ie,R:oe,d:function(){return ae},na:function t(i,r){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(T)try{var e=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>st("randomDevice")}());for(var s=0;s<r;s++)e()[i+s>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var i=Ae();try{return vt(t)(e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},ja:function(t,e,n){var i=Ae();try{return vt(t)(e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},K:function(t){var e=Ae();try{return vt(t)()}catch(t){if(ke(e),t!==t+0)throw t;Ie(1,0)}},f:function(t,e){var n=Ae();try{return vt(t)(e)}catch(t){if(ke(n),t!==t+0)throw t;Ie(1,0)}},P:function(t,e,n){var i=Ae();try{return vt(t)(e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},Q:function(t,e,n){var i=Ae();try{return vt(t)(e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},k:function(t,e,n){var i=Ae();try{return vt(t)(e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},p:function(t,e,n,i){var r=Ae();try{return vt(t)(e,n,i)}catch(t){if(ke(r),t!==t+0)throw t;Ie(1,0)}},q:function(t,e,n,i,r){var s=Ae();try{return vt(t)(e,n,i,r)}catch(t){if(ke(s),t!==t+0)throw t;Ie(1,0)}},N:function(t,e,n,i,r,s){var o=Ae();try{return vt(t)(e,n,i,r,s)}catch(t){if(ke(o),t!==t+0)throw t;Ie(1,0)}},s:function(t,e,n,i,r,s){var o=Ae();try{return vt(t)(e,n,i,r,s)}catch(t){if(ke(o),t!==t+0)throw t;Ie(1,0)}},w:function(t,e,n,i,r,s,o){var a=Ae();try{return vt(t)(e,n,i,r,s,o)}catch(t){if(ke(a),t!==t+0)throw t;Ie(1,0)}},L:function(t,e,n,i,r,s,o,a){var u=Ae();try{return vt(t)(e,n,i,r,s,o,a)}catch(t){if(ke(u),t!==t+0)throw t;Ie(1,0)}},E:function(t,e,n,i,r,s,o,a,u,c,l,h){var d=Ae();try{return vt(t)(e,n,i,r,s,o,a,u,c,l,h)}catch(t){if(ke(d),t!==t+0)throw t;Ie(1,0)}},aa:function(t,e,n,i,r,s,o,a){var u=Ae();try{return Ve(t,e,n,i,r,s,o,a)}catch(t){if(ke(u),t!==t+0)throw t;Ie(1,0)}},_:function(t,e,n,i,r,s,o){var a=Ae();try{return Re(t,e,n,i,r,s,o)}catch(t){if(ke(a),t!==t+0)throw t;Ie(1,0)}},Z:function(t,e,n,i,r){var s=Ae();try{return $e(t,e,n,i,r)}catch(t){if(ke(s),t!==t+0)throw t;Ie(1,0)}},ca:function(t,e,n,i){var r=Ae();try{return je(t,e,n,i)}catch(t){if(ke(r),t!==t+0)throw t;Ie(1,0)}},$:function(t){var e=Ae();try{return Pe(t)}catch(t){if(ke(e),t!==t+0)throw t;Ie(1,0)}},ba:function(t,e){var n=Ae();try{return Ue(t,e)}catch(t){if(ke(n),t!==t+0)throw t;Ie(1,0)}},Y:function(t,e,n){var i=Ae();try{return Ne(t,e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},g:function(t){var e=Ae();try{vt(t)()}catch(t){if(ke(e),t!==t+0)throw t;Ie(1,0)}},r:function(t,e){var n=Ae();try{vt(t)(e)}catch(t){if(ke(n),t!==t+0)throw t;Ie(1,0)}},i:function(t,e,n){var i=Ae();try{vt(t)(e,n)}catch(t){if(ke(i),t!==t+0)throw t;Ie(1,0)}},ha:function(t,e,n,i){var r=Ae();try{vt(t)(e,n,i)}catch(t){if(ke(r),t!==t+0)throw t;Ie(1,0)}},m:function(t,e,n,i){var r=Ae();try{vt(t)(e,n,i)}catch(t){if(ke(r),t!==t+0)throw t;Ie(1,0)}},v:function(t,e,n,i,r){var s=Ae();try{vt(t)(e,n,i,r)}catch(t){if(ke(s),t!==t+0)throw t;Ie(1,0)}},u:function(t,e,n,i,r,s){var o=Ae();try{vt(t)(e,n,i,r,s)}catch(t){if(ke(o),t!==t+0)throw t;Ie(1,0)}},O:function(t,e,n,i,r,s,o){var a=Ae();try{vt(t)(e,n,i,r,s,o)}catch(t){if(ke(a),t!==t+0)throw t;Ie(1,0)}},A:function(t,e,n,i,r,s,o,a){var u=Ae();try{vt(t)(e,n,i,r,s,o,a)}catch(t){if(ke(u),t!==t+0)throw t;Ie(1,0)}},ka:function(t,e,n,i,r,s,o,a,u){var c=Ae();try{vt(t)(e,n,i,r,s,o,a,u)}catch(t){if(ke(c),t!==t+0)throw t;Ie(1,0)}},C:function(t,e,n,i,r,s,o,a,u,c,l){var h=Ae();try{vt(t)(e,n,i,r,s,o,a,u,c,l)}catch(t){if(ke(h),t!==t+0)throw t;Ie(1,0)}},D:function(t,e,n,i,r,s,o,a,u,c,l,h,d,p,f,g){var m=Ae();try{vt(t)(e,n,i,r,s,o,a,u,c,l,h,d,p,f,g)}catch(t){if(ke(m),t!==t+0)throw t;Ie(1,0)}},fa:function(t,e,n,i,r,s,o,a){var u=Ae();try{Me(t,e,n,i,r,s,o,a)}catch(t){if(ke(u),t!==t+0)throw t;Ie(1,0)}},da:function(t,e,n,i,r,s,o,a,u,c,l,h){var d=Ae();try{Fe(t,e,n,i,r,s,o,a,u,c,l,h)}catch(t){if(ke(d),t!==t+0)throw t;Ie(1,0)}},ea:function(t,e,n,i,r,s){var o=Ae();try{Le(t,e,n,i,r,s)}catch(t){if(ke(o),t!==t+0)throw t;Ie(1,0)}},o:function(t){return t},a:P||u.wasmMemory,G:function(t){ae=t},la:he,z:function(t,e,n,i){return he(t,e,n,i)}};!function(){function t(t,e){u.asm=t.exports,ft.qc.push(u.asm.sb),K=u.asm.ub,X.unshift(u.asm.Va),R=e,x||(nt--,u.monitorRunDependencies&&u.monitorRunDependencies(nt),0==nt&&(null!==it&&(clearInterval(it),it=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!k&&(b||w)){if("function"==typeof fetch&&!et.startsWith("file://"))return fetch(et,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+et+"'";return t.arrayBuffer()})).catch((function(){return at()}));if(d)return new Promise((function(t,e){d(et,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return at()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){C("failed to asynchronously prepare wasm: "+t),st(t)}))}var i={a:pe};if(x||(nt++,u.monitorRunDependencies&&u.monitorRunDependencies(nt)),u.instantiateWasm)try{return u.instantiateWasm(i,t)}catch(t){return C("Module.instantiateWasm callback failed with error: "+t),!1}(k||"function"!=typeof WebAssembly.instantiateStreaming||ot()||et.startsWith("file://")||T||"function"!=typeof fetch?n(e):fetch(et,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(e,(function(t){return C("wasm streaming compile failed: "+t),C("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(l)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var fe=u._pthread_self=function(){return(fe=u._pthread_self=u.asm.ob).apply(null,arguments)},ge=u._malloc=function(){return(ge=u._malloc=u.asm.pb).apply(null,arguments)},me=u._free=function(){return(me=u._free=u.asm.qb).apply(null,arguments)},_e=u._fflush=function(){return(_e=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var ye=u.___funcs_on_exit=function(){return(ye=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ve=u.__emscripten_thread_init=function(){return(ve=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var be,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},Te=u.__emscripten_proxy_execute_task_queue=function(){return(Te=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},xe=u.__emscripten_thread_free_data=function(){return(xe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Se=u.__emscripten_thread_exit=function(){return(Se=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Ie=u._setThrew=function(){return(Ie=u._setThrew=u.asm.Bb).apply(null,arguments)},Ee=u._emscripten_stack_set_limits=function(){return(Ee=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ae=u.stackSave=function(){return(Ae=u.stackSave=u.asm.Db).apply(null,arguments)},ke=u.stackRestore=function(){return(ke=u.stackRestore=u.asm.Eb).apply(null,arguments)},Oe=u.stackAlloc=function(){return(Oe=u.stackAlloc=u.asm.Fb).apply(null,arguments)},Ce=u.___cxa_can_catch=function(){return(Ce=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},De=u.___cxa_is_pointer_type=function(){return(De=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},Pe=u.dynCall_j=function(){return(Pe=u.dynCall_j=u.asm.Ib).apply(null,arguments)},Re=u.dynCall_iiiiij=function(){return(Re=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},Ne=u.dynCall_jii=function(){return(Ne=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Me=u.dynCall_viiiiij=function(){return(Me=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Le=u.dynCall_vjji=function(){return(Le=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},je=u.dynCall_iij=function(){return(je=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},Ue=u.dynCall_ji=function(){return(Ue=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},Ve=u.dynCall_iiiiiij=function(){return(Ve=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},$e=u.dynCall_iiij=function(){return($e=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function Be(){function t(){if(!be&&(be=!0,u.calledRun=!0,!V)&&(x||gt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!x)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();J.unshift(t)}gt(J)}}if(!(0<nt))if(x)c(u),x||gt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)tt();gt(Y),0<nt||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=q,u.stringToUTF8=function(t,e,n){return z(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=P,u.stackSave=Ae,u.stackRestore=ke,u.stackAlloc=Oe,u.ExitStatus=ct,u.PThread=ft,rt=function t(){be||Be(),be||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return Be(),t.ready});t.exports=r},932:(t,e,n)=>{var i,r=(i=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,s;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,s=e}));var o,a,u,c,l,h,d=Object.assign({},e),p="./this.program",f=(t,e)=>{throw e},g="object"==typeof window,m="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";_?(y=m?n(908).dirname(y)+"/":"//",h=()=>{l||(c=n(1384),l=n(908))},o=function(t,e){return h(),t=l.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=o(t,!0)).buffer||(t=new Uint8Array(t)),t),a=(t,e,n)=>{h(),t=l.normalize(t),c.readFile(t,(function(t,i){t?n(t):e(i.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof Z))throw t})),process.on("unhandledRejection",(function(t){throw t})),f=(t,e)=>{if(T||0<$)throw process.exitCode=t,e;e instanceof Z||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(g||m)&&(m?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),i&&(y=i),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},m&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),a=(t,e,n)=>{var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?e(i.response):n()},i.onerror=n,i.send(null)});var v,b=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,d),d=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(f=e.quit),e.wasmBinary&&(v=e.wasmBinary);var T=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&H("no native wasm support detected");var x,S,I,E,A,k,O=!1,C="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function D(t,e,n){var i=(e>>>=0)+n;for(n=e;t[n]&&!(n>=i);)++n;if(16<n-e&&t.buffer&&C)return C.decode(t.subarray(e,n));for(i="";e<n;){var r=t[e++];if(128&r){var s=63&t[e++];if(192==(224&r))i+=String.fromCharCode((31&r)<<6|s);else{var o=63&t[e++];65536>(r=224==(240&r)?(15&r)<<12|s<<6|o:(7&r)<<18|s<<12|o<<6|63&t[e++])?i+=String.fromCharCode(r):(r-=65536,i+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else i+=String.fromCharCode(r)}return i}function P(t,e){return(t>>>=0)?D(E,t,e):""}function R(t,e,n,i){if(!(0<i))return 0;var r=n>>>=0;i=n+i-1;for(var s=0;s<t.length;++s){var o=t.charCodeAt(s);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++s)),127>=o){if(n>=i)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=i)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=i)break;e[n++>>>0]=224|o>>12}else{if(n+3>=i)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-r}function N(t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);127>=i?e++:2047>=i?e+=2:55296<=i&&57343>=i?(e+=4,++n):e+=3}return e}function M(){var t=x.buffer;S=t,e.HEAP8=I=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=A=new Int32Array(t),e.HEAPU8=E=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=k=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var L,F=[],j=[],U=[],V=[],$=0;function B(){var t=e.preRun.shift();F.unshift(t)}var q,z=0,G=null,W=null;function H(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),O=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function K(){return q.startsWith("data:application/octet-stream;base64,")}if(q="ort-wasm.wasm",!K()){var Y=q;q=e.locateFile?e.locateFile(Y,y):y+Y}function X(){var t=q;try{if(t==q&&v)return new Uint8Array(v);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){H(t)}}function Z(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function J(t){for(;0<t.length;)t.shift()(e)}var Q=[],tt=0,et=0;function nt(t){this.Db=t,this.zb=t-24,this.Ub=function(t){k[this.zb+4>>2>>>0]=t},this.Eb=function(){return k[this.zb+4>>2>>>0]},this.Sb=function(t){k[this.zb+8>>2>>>0]=t},this.Wb=function(){return k[this.zb+8>>2>>>0]},this.Tb=function(){A[this.zb>>2>>>0]=0},this.Ib=function(t){I[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=I[this.zb+12>>0>>>0]},this.Jb=function(t){I[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=I[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){A[this.zb>>2>>>0]+=1},this.Xb=function(){var t=A[this.zb>>2>>>0];return A[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){k[this.zb+16>>2>>>0]=t},this.Ob=function(){return k[this.zb+16>>2>>>0]},this.Qb=function(){if(kt(this.Eb()))return k[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function it(t){return bt(new nt(t).zb)}var rt=[];function st(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=L.get(t)),e}function ot(t){var e=N(t)+1,n=vt(e);return n&&R(t,I,n,e),n}var at={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in at)void 0===at[t]?delete e[t]:e[t]=at[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,lt=[null,[],[]];function ht(t,e){var n=lt[t];0===e||10===e?((1===t?b:w)(D(n,0)),n.length=0):n.push(e)}var dt=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ft=[31,29,31,30,31,30,31,31,30,31,30,31],gt=[31,28,31,30,31,30,31,31,30,31,30,31];function mt(t,e,n,i){function r(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function s(t,e){return r(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var i;return 0===(i=n(t.getFullYear()-e.getFullYear()))&&0===(i=n(t.getMonth()-e.getMonth()))&&(i=n(t.getDate()-e.getDate())),i}function a(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function u(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),i=(pt(t.getFullYear())?ft:gt)[n];if(!(e>i-t.getDate())){t.setDate(t.getDate()+e);break}e-=i-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=a(new Date(t.getFullYear(),0,4)),n=a(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=A[i+40>>2>>>0];for(var l in i={$b:A[i>>2>>>0],Zb:A[i+4>>2>>>0],Gb:A[i+8>>2>>>0],Kb:A[i+12>>2>>>0],Hb:A[i+16>>2>>>0],Cb:A[i+20>>2>>>0],Ab:A[i+24>>2>>>0],Bb:A[i+28>>2>>>0],bc:A[i+32>>2>>>0],Yb:A[i+36>>2>>>0],ac:c?P(c):""},n=P(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(t){return h[t.Ab].substring(0,3)},"%A":function(t){return h[t.Ab]},"%b":function(t){return d[t.Hb].substring(0,3)},"%B":function(t){return d[t.Hb]},"%C":function(t){return s((t.Cb+1900)/100|0,2)},"%d":function(t){return s(t.Kb,2)},"%e":function(t){return r(t.Kb,2," ")},"%g":function(t){return u(t).toString().substring(2)},"%G":function(t){return u(t)},"%H":function(t){return s(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),s(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ft:gt)[n++]);return s(t.Kb+e,3)},"%m":function(t){return s(t.Hb+1,2)},"%M":function(t){return s(t.Zb,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return s(t.$b,2)},"%t":function(){return"\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return s(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return s(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return s(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](i)));return l=function(t){var e=Array(N(t)+1);return R(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),l.length>e?0:(I.set(l,t>>>0),l.length-1)}var _t={a:function(t){return vt(t+24)+24},m:function(t){return(t=new nt(t)).Pb()||(t.Ib(!0),tt--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),O=!0,t},w:function(){xt(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&st(e)(t.Db),it(t.Db)}et=0},d:function(){var t=et;if(!t)return dt=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return dt=0,t;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===n)break;if(At(s,n,e.zb+16))return dt=s,t}return dt=n,t},k:function(){var t=et;if(!t)return dt=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return dt=0,t;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===n)break;if(At(s,n,e.zb+16))return dt=s,t}return dt=n,t},g:function(){var t=et;if(!t)return dt=0;var e=new nt(t);e.Fb(t);var n=e.Eb();if(!n)return dt=0,t;for(var i=Array.prototype.slice.call(arguments),r=0;r<i.length;r++){var s=i[r];if(0===s||s===n)break;if(At(s,n,e.zb+16))return dt=s,t}return dt=n,t},s:it,L:function(){var t=Q.pop();t||H("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),tt++),et=e,e},b:function(t,e,n){throw new nt(t).Rb(e,n),et=t,tt++,t},la:function(){return tt},i:function(t){throw et||(et=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){H("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){H("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(k[t>>>2]+4294967296*A[t+4>>>2])),A[e>>2>>>0]=t.getUTCSeconds(),A[e+4>>2>>>0]=t.getUTCMinutes(),A[e+8>>2>>>0]=t.getUTCHours(),A[e+12>>2>>>0]=t.getUTCDate(),A[e+16>>2>>>0]=t.getUTCMonth(),A[e+20>>2>>>0]=t.getUTCFullYear()-1900,A[e+24>>2>>>0]=t.getUTCDay(),A[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(k[t>>>2]+4294967296*A[t+4>>>2])),A[e>>2>>>0]=t.getSeconds(),A[e+4>>2>>>0]=t.getMinutes(),A[e+8>>2>>>0]=t.getHours(),A[e+12>>2>>>0]=t.getDate(),A[e+16>>2>>>0]=t.getMonth(),A[e+20>>2>>>0]=t.getFullYear()-1900,A[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);A[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,A[e+36>>2>>>0]=-60*t.getTimezoneOffset();var i=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),A[e+32>>2>>>0]=0|(i!=n&&t.getTimezoneOffset()==Math.min(n,i))},Fa:function(t){var e=new Date(A[t+20>>2>>>0]+1900,A[t+16>>2>>>0],A[t+12>>2>>>0],A[t+8>>2>>>0],A[t+4>>2>>>0],A[t>>2>>>0],0),n=A[t+32>>2>>>0],i=e.getTimezoneOffset(),r=new Date(e.getFullYear(),0,1),s=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=r.getTimezoneOffset(),a=Math.min(o,s);return 0>n?A[t+32>>2>>>0]=Number(s!=o&&a==i):0<n!=(a==i)&&(s=Math.max(o,s),e.setTime(e.getTime()+6e4*((0<n?a:s)-i))),A[t+24>>2>>>0]=e.getDay(),A[t+28>>2>>>0]=(e.getTime()-r.getTime())/864e5|0,A[t>>2>>>0]=e.getSeconds(),A[t+4>>2>>>0]=e.getMinutes(),A[t+8>>2>>>0]=e.getHours(),A[t+12>>2>>>0]=e.getDate(),A[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,i){t.Vb||(t.Vb=!0,function(t,e,n){function i(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var r=(new Date).getFullYear(),s=new Date(r,0,1),o=new Date(r,6,1);r=s.getTimezoneOffset();var a=o.getTimezoneOffset();A[t>>2>>>0]=60*Math.max(r,a),A[e>>2>>>0]=Number(r!=a),t=i(s),e=i(o),t=ot(t),e=ot(e),a<r?(k[n>>2>>>0]=t,k[n+4>>2>>>0]=e):(k[n>>2>>>0]=e,k[n+4>>2>>>0]=t)}(e,n,i))},B:function(){H("")},ma:function(){return 4294901760},I:_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){E.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=E.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=e*(1+.2/n);i=Math.min(i,t+100663296);var r=Math;i=Math.max(t,i),r=r.min.call(r,4294901760,i+(65536-i%65536)%65536);t:{try{x.grow(r-S.byteLength+65535>>>16),M();var s=1;break t}catch(t){}s=void 0}if(s)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(i,r){var s=e+n;for(r=k[t+4*r>>2>>>0]=s,s=0;s<i.length;++s)I[r++>>0>>>0]=i.charCodeAt(s);I[r>>0>>>0]=0,n+=i.length+1})),0},wa:function(t,e){var n=ut();k[t>>2>>>0]=n.length;var i=0;return n.forEach((function(t){i+=t.length+1})),k[e>>2>>>0]=i,0},ba:function(t){T||0<$||(Tt(),J(U),wt(0),lt[1].length&&ht(1,10),lt[2].length&&ht(2,10)),T||0<$||(e.onExit&&e.onExit(t),O=!0),f(t,new Z(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,i){for(var r=0,s=0;s<n;s++){var o=k[e>>2>>>0],a=k[e+4>>2>>>0];e+=8;for(var u=0;u<a;u++)ht(t,E[o+u>>>0]);r+=a}return k[i>>2>>>0]=r,0},c:function(){return dt},ja:function t(e,i){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module 'crypto'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>H("randomDevice")}());for(var r=0;r<i;r++)I[e+r>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var i=St();try{return st(t)(e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},fa:function(t,e,n){var i=St();try{return st(t)(e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},J:function(t){var e=St();try{return st(t)()}catch(t){if(It(e),t!==t+0)throw t;xt(1,0)}},e:function(t,e){var n=St();try{return st(t)(e)}catch(t){if(It(n),t!==t+0)throw t;xt(1,0)}},N:function(t,e,n){var i=St();try{return st(t)(e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},O:function(t,e,n){var i=St();try{return st(t)(e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},j:function(t,e,n){var i=St();try{return st(t)(e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},o:function(t,e,n,i){var r=St();try{return st(t)(e,n,i)}catch(t){if(It(r),t!==t+0)throw t;xt(1,0)}},p:function(t,e,n,i,r){var s=St();try{return st(t)(e,n,i,r)}catch(t){if(It(s),t!==t+0)throw t;xt(1,0)}},M:function(t,e,n,i,r,s){var o=St();try{return st(t)(e,n,i,r,s)}catch(t){if(It(o),t!==t+0)throw t;xt(1,0)}},r:function(t,e,n,i,r,s){var o=St();try{return st(t)(e,n,i,r,s)}catch(t){if(It(o),t!==t+0)throw t;xt(1,0)}},v:function(t,e,n,i,r,s,o){var a=St();try{return st(t)(e,n,i,r,s,o)}catch(t){if(It(a),t!==t+0)throw t;xt(1,0)}},K:function(t,e,n,i,r,s,o,a){var u=St();try{return st(t)(e,n,i,r,s,o,a)}catch(t){if(It(u),t!==t+0)throw t;xt(1,0)}},D:function(t,e,n,i,r,s,o,a,u,c,l,h){var d=St();try{return st(t)(e,n,i,r,s,o,a,u,c,l,h)}catch(t){if(It(d),t!==t+0)throw t;xt(1,0)}},X:function(t,e,n,i,r,s,o,a){var u=St();try{return Ft(t,e,n,i,r,s,o,a)}catch(t){if(It(u),t!==t+0)throw t;xt(1,0)}},V:function(t,e,n,i,r,s,o){var a=St();try{return Ct(t,e,n,i,r,s,o)}catch(t){if(It(a),t!==t+0)throw t;xt(1,0)}},U:function(t,e,n,i,r){var s=St();try{return jt(t,e,n,i,r)}catch(t){if(It(s),t!==t+0)throw t;xt(1,0)}},Z:function(t,e,n,i){var r=St();try{return Mt(t,e,n,i)}catch(t){if(It(r),t!==t+0)throw t;xt(1,0)}},W:function(t){var e=St();try{return Ot(t)}catch(t){if(It(e),t!==t+0)throw t;xt(1,0)}},Y:function(t,e){var n=St();try{return Lt(t,e)}catch(t){if(It(n),t!==t+0)throw t;xt(1,0)}},T:function(t,e,n){var i=St();try{return Dt(t,e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},f:function(t){var e=St();try{st(t)()}catch(t){if(It(e),t!==t+0)throw t;xt(1,0)}},q:function(t,e){var n=St();try{st(t)(e)}catch(t){if(It(n),t!==t+0)throw t;xt(1,0)}},h:function(t,e,n){var i=St();try{st(t)(e,n)}catch(t){if(It(i),t!==t+0)throw t;xt(1,0)}},da:function(t,e,n,i){var r=St();try{st(t)(e,n,i)}catch(t){if(It(r),t!==t+0)throw t;xt(1,0)}},l:function(t,e,n,i){var r=St();try{st(t)(e,n,i)}catch(t){if(It(r),t!==t+0)throw t;xt(1,0)}},t:function(t,e,n,i,r){var s=St();try{st(t)(e,n,i,r)}catch(t){if(It(s),t!==t+0)throw t;xt(1,0)}},u:function(t,e,n,i,r,s){var o=St();try{st(t)(e,n,i,r,s)}catch(t){if(It(o),t!==t+0)throw t;xt(1,0)}},x:function(t,e,n,i,r,s,o){var a=St();try{st(t)(e,n,i,r,s,o)}catch(t){if(It(a),t!==t+0)throw t;xt(1,0)}},z:function(t,e,n,i,r,s,o,a){var u=St();try{st(t)(e,n,i,r,s,o,a)}catch(t){if(It(u),t!==t+0)throw t;xt(1,0)}},ga:function(t,e,n,i,r,s,o,a,u){var c=St();try{st(t)(e,n,i,r,s,o,a,u)}catch(t){if(It(c),t!==t+0)throw t;xt(1,0)}},A:function(t,e,n,i,r,s,o,a,u,c,l){var h=St();try{st(t)(e,n,i,r,s,o,a,u,c,l)}catch(t){if(It(h),t!==t+0)throw t;xt(1,0)}},C:function(t,e,n,i,r,s,o,a,u,c,l,h,d,p,f,g){var m=St();try{st(t)(e,n,i,r,s,o,a,u,c,l,h,d,p,f,g)}catch(t){if(It(m),t!==t+0)throw t;xt(1,0)}},aa:function(t,e,n,i,r,s,o,a){var u=St();try{Pt(t,e,n,i,r,s,o,a)}catch(t){if(It(u),t!==t+0)throw t;xt(1,0)}},_:function(t,e,n,i,r,s,o,a,u,c,l,h){var d=St();try{Nt(t,e,n,i,r,s,o,a,u,c,l,h)}catch(t){if(It(d),t!==t+0)throw t;xt(1,0)}},$:function(t,e,n,i,r,s){var o=St();try{Rt(t,e,n,i,r,s)}catch(t){if(It(o),t!==t+0)throw t;xt(1,0)}},n:function(t){return t},F:function(t){dt=t},ha:mt,y:function(t,e,n,i){return mt(t,e,n,i)}};!function(){function t(t){e.asm=t.exports,x=e.asm.Ka,M(),L=e.asm.ib,j.unshift(e.asm.La),z--,e.monitorRunDependencies&&e.monitorRunDependencies(z),0==z&&(null!==G&&(clearInterval(G),G=null),W&&(t=W,W=null,t()))}function n(e){t(e.instance)}function i(t){return function(){if(!v&&(g||m)){if("function"==typeof fetch&&!q.startsWith("file://"))return fetch(q,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+q+"'";return t.arrayBuffer()})).catch((function(){return X()}));if(a)return new Promise((function(t,e){a(q,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),H(t)}))}var r={a:_t};if(z++,e.monitorRunDependencies&&e.monitorRunDependencies(z),e.instantiateWasm)try{return e.instantiateWasm(r,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(v||"function"!=typeof WebAssembly.instantiateStreaming||K()||q.startsWith("file://")||_||"function"!=typeof fetch?i(n):fetch(q,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),i(n)}))}))).catch(s)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var yt,vt=e._malloc=function(){return(vt=e._malloc=e.asm.eb).apply(null,arguments)},bt=e._free=function(){return(bt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},Tt=e.___funcs_on_exit=function(){return(Tt=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},xt=e._setThrew=function(){return(xt=e._setThrew=e.asm.jb).apply(null,arguments)},St=e.stackSave=function(){return(St=e.stackSave=e.asm.kb).apply(null,arguments)},It=e.stackRestore=function(){return(It=e.stackRestore=e.asm.lb).apply(null,arguments)},Et=e.stackAlloc=function(){return(Et=e.stackAlloc=e.asm.mb).apply(null,arguments)},At=e.___cxa_can_catch=function(){return(At=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},kt=e.___cxa_is_pointer_type=function(){return(kt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ot=e.dynCall_j=function(){return(Ot=e.dynCall_j=e.asm.pb).apply(null,arguments)},Ct=e.dynCall_iiiiij=function(){return(Ct=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Dt=e.dynCall_jii=function(){return(Dt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},Pt=e.dynCall_viiiiij=function(){return(Pt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},Rt=e.dynCall_vjji=function(){return(Rt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Nt=e.dynCall_viiijjjii=function(){return(Nt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Mt=e.dynCall_iij=function(){return(Mt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Lt=e.dynCall_ji=function(){return(Lt=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},jt=e.dynCall_iiij=function(){return(jt=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Ut(){function t(){if(!yt&&(yt=!0,e.calledRun=!0,!O)){if(J(j),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();V.unshift(t)}J(V)}}if(!(0<z)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)B();J(F),0<z||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=P,e.stringToUTF8=function(t,e,n){return R(t,E,e,n)},e.lengthBytesUTF8=N,e.stackSave=St,e.stackRestore=It,e.stackAlloc=Et,W=function t(){yt||Ut(),yt||(W=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Ut(),t.ready});t.exports=r},4537:t=>{"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),i=0,r=2,s=!0;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,o){n[i]=function(t){if(s)if(s=!1,t)o(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];r.apply(null,e)}};try{t.apply(e||null,n)}catch(t){s&&(s=!1,o(t))}}))}},7419:(t,e)=>{"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var i=new Array(64),r=new Array(123),s=0;s<64;)r[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;n.encode=function(t,e,n){for(var r,s=null,o=[],a=0,u=0;e<n;){var c=t[e++];switch(u){case 0:o[a++]=i[c>>2],r=(3&c)<<4,u=1;break;case 1:o[a++]=i[r|c>>4],r=(15&c)<<2,u=2;break;case 2:o[a++]=i[r|c>>6],o[a++]=i[63&c],u=0}a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0)}return u&&(o[a++]=i[r],o[a++]=61,1===u&&(o[a++]=61)),s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";n.decode=function(t,e,n){for(var i,s=n,a=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&a>1)break;if(void 0===(c=r[c]))throw Error(o);switch(a){case 0:i=c,a=1;break;case 1:e[n++]=i<<2|(48&c)>>4,i=c,a=2;break;case 2:e[n++]=(15&i)<<4|(60&c)>>2,i=c,a=3;break;case 3:e[n++]=(3&i)<<6|c,a=0}}if(1===a)throw Error(o);return n-s},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===e?n.splice(i,1):++i;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<e.length;)e[i].fn.apply(e[i++].ctx,n)}return this}},945:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),i=128===n[3];function r(t,i,r){e[0]=t,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function s(t,i,r){e[0]=t,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function o(t,i){return n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],e[0]}function a(t,i){return n[3]=t[i],n[2]=t[i+1],n[1]=t[i+2],n[0]=t[i+3],e[0]}t.writeFloatLE=i?r:s,t.writeFloatBE=i?s:r,t.readFloatLE=i?o:a,t.readFloatBE=i?a:o}():function(){function e(t,e,n,i){var r=e<0?1:0;if(r&&(e=-e),0===e)t(1/e>0?0:2147483648,n,i);else if(isNaN(e))t(2143289344,n,i);else if(e>34028234663852886e22)t((r<<31|2139095040)>>>0,n,i);else if(e<11754943508222875e-54)t((r<<31|Math.round(e/1401298464324817e-60))>>>0,n,i);else{var s=Math.floor(Math.log(e)/Math.LN2);t((r<<31|s+127<<23|8388607&Math.round(e*Math.pow(2,-s)*8388608))>>>0,n,i)}}function o(t,e,n){var i=t(e,n),r=2*(i>>31)+1,s=i>>>23&255,o=8388607&i;return 255===s?o?NaN:r*(1/0):0===s?1401298464324817e-60*r*o:r*Math.pow(2,s-150)*(o+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,i),t.readFloatLE=o.bind(null,r),t.readFloatBE=o.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),i=128===n[7];function r(t,i,r){e[0]=t,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function s(t,i,r){e[0]=t,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function o(t,i){return n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n[3]=t[i+3],n[4]=t[i+4],n[5]=t[i+5],n[6]=t[i+6],n[7]=t[i+7],e[0]}function a(t,i){return n[7]=t[i],n[6]=t[i+1],n[5]=t[i+2],n[4]=t[i+3],n[3]=t[i+4],n[2]=t[i+5],n[1]=t[i+6],n[0]=t[i+7],e[0]}t.writeDoubleLE=i?r:s,t.writeDoubleBE=i?s:r,t.readDoubleLE=i?o:a,t.readDoubleBE=i?a:o}():function(){function e(t,e,n,i,r,s){var o=i<0?1:0;if(o&&(i=-i),0===i)t(0,r,s+e),t(1/i>0?0:2147483648,r,s+n);else if(isNaN(i))t(0,r,s+e),t(2146959360,r,s+n);else if(i>17976931348623157e292)t(0,r,s+e),t((o<<31|2146435072)>>>0,r,s+n);else{var a;if(i<22250738585072014e-324)t((a=i/5e-324)>>>0,r,s+e),t((o<<31|a/4294967296)>>>0,r,s+n);else{var u=Math.floor(Math.log(i)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(a=i*Math.pow(2,-u))>>>0,r,s+e),t((o<<31|u+1023<<20|1048576*a&1048575)>>>0,r,s+n)}}}function o(t,e,n,i,r){var s=t(i,r+e),o=t(i,r+n),a=2*(o>>31)+1,u=o>>>20&2047,c=4294967296*(1048575&o)+s;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,i,4,0),t.readDoubleLE=o.bind(null,r,0,4),t.readDoubleBE=o.bind(null,s,4,0)}(),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function i(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function r(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:t=>{"use strict";t.exports=function(t,e,n){var i=n||8192,r=i>>>1,s=null,o=i;return function(n){if(n<1||n>r)return t(n);o+n>i&&(s=t(i),o=0);var a=e.call(s,o,o+=n);return 7&o&&(o=1+(7|o)),a}}},4997:(t,e)=>{"use strict";var n=e;n.length=function(t){for(var e=0,n=0,i=0;i<t.length;++i)(n=t.charCodeAt(i))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(i+1))?(++i,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var i,r=null,s=[],o=0;e<n;)(i=t[e++])<128?s[o++]=i:i>191&&i<224?s[o++]=(31&i)<<6|63&t[e++]:i>239&&i<365?(i=((7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,s[o++]=55296+(i>>10),s[o++]=56320+(1023&i)):s[o++]=(15&i)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,s)),o=0);return r?(o&&r.push(String.fromCharCode.apply(String,s.slice(0,o))),r.join("")):String.fromCharCode.apply(String,s.slice(0,o))},n.write=function(t,e,n){for(var i,r,s=n,o=0;o<t.length;++o)(i=t.charCodeAt(o))<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=t.charCodeAt(o+1)))?(i=65536+((1023&i)<<10)+(1023&r),++o,e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128);return n-s}},3442:(t,e)=>{"use strict";e.__esModule=!0;var n=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=n},3720:t=>{t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function i(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=i;var r={},s={};function o(t,e){var n,i,o;return e?(o=0<=(t>>>=0)&&t<256)&&(i=s[t])?i:(n=u(t,(0|t)<0?-1:0,!0),o&&(s[t]=n),n):(o=-128<=(t|=0)&&t<128)&&(i=r[t])?i:(n=u(t,t<0?-1:0,!1),o&&(r[t]=n),n)}function a(t,e){if(isNaN(t))return e?_:m;if(e){if(t<0)return _;if(t>=p)return T}else{if(t<=-f)return x;if(t+1>=f)return w}return t<0?a(-t,e).neg():u(t%d|0,t/d|0,e)}function u(t,e,i){return new n(t,e,i)}n.fromInt=o,n.fromNumber=a,n.fromBits=u;var c=Math.pow;function l(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return l(t.substring(1),e,n).neg();for(var r=a(c(n,8)),s=m,o=0;o<t.length;o+=8){var u=Math.min(8,t.length-o),h=parseInt(t.substring(o,o+u),n);if(u<8){var d=a(c(n,u));s=s.mul(d).add(a(h))}else s=(s=s.mul(r)).add(a(h))}return s.unsigned=e,s}function h(t,e){return"number"==typeof t?a(t,e):"string"==typeof t?l(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=h;var d=4294967296,p=d*d,f=p/2,g=o(1<<24),m=o(0);n.ZERO=m;var _=o(0,!0);n.UZERO=_;var y=o(1);n.ONE=y;var v=o(1,!0);n.UONE=v;var b=o(-1);n.NEG_ONE=b;var w=u(-1,2147483647,!1);n.MAX_VALUE=w;var T=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=T;var x=u(0,-2147483648,!1);n.MIN_VALUE=x;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var e=a(t),n=this.div(e),i=n.mul(e).sub(this);return n.toString(t)+i.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var r=a(c(t,6),this.unsigned),s=this,o="";;){var u=s.div(r),l=(s.sub(u.mul(r)).toInt()>>>0).toString(t);if((s=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return i(t)||(t=h(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(i(t)||(t=h(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(y)},S.neg=S.negate,S.add=function(t){i(t)||(t=h(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,s=65535&this.low,o=t.high>>>16,a=65535&t.high,c=t.low>>>16,l=0,d=0,p=0,f=0;return p+=(f+=s+(65535&t.low))>>>16,d+=(p+=r+c)>>>16,l+=(d+=n+a)>>>16,l+=e+o,u((p&=65535)<<16|(f&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(t){return i(t)||(t=h(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return m;if(i(t)||(t=h(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(x))return t.isOdd()?x:m;if(t.eq(x))return this.isOdd()?x:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return a(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,s=this.low>>>16,o=65535&this.low,c=t.high>>>16,l=65535&t.high,d=t.low>>>16,p=65535&t.low,f=0,_=0,y=0,v=0;return y+=(v+=o*p)>>>16,_+=(y+=s*p)>>>16,y&=65535,_+=(y+=o*d)>>>16,f+=(_+=r*p)>>>16,_&=65535,f+=(_+=s*d)>>>16,_&=65535,f+=(_+=o*l)>>>16,f+=n*p+r*d+s*l+o*c,u((y&=65535)<<16|(v&=65535),(f&=65535)<<16|(_&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(i(t)||(t=h(t)),t.isZero())throw Error("division by zero");var n,r,s;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return _;if(t.gt(this.shru(1)))return v;s=_}else{if(this.eq(x))return t.eq(y)||t.eq(b)?x:t.eq(x)?y:(n=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?y:b:(r=this.sub(t.mul(n)),s=n.add(r.div(t)));if(t.eq(x))return this.unsigned?_:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=m}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),d=a(n),p=d.mul(t);p.isNegative()||p.gt(r);)p=(d=a(n-=l,this.unsigned)).mul(t);d.isZero()&&(d=y),s=s.add(d),r=r.sub(p)}return s},S.div=S.divide,S.modulo=function(t){return i(t)||(t=h(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(t){return i(t)||(t=h(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return i(t)||(t=h(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return i(t)||(t=h(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return i(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(i(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,i){return i?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},1446:(t,e,n)=>{"use strict";var i,r,s,o=n(2100),a=o.Reader,u=o.Writer,c=o.util,l=o.roots.default||(o.roots.default={});l.onnx=((s={}).Version=(i={},(r=Object.create(i))[i[0]="_START_VERSION"]=0,r[i[1]="IR_VERSION_2017_10_10"]=1,r[i[2]="IR_VERSION_2017_10_30"]=2,r[i[3]="IR_VERSION_2017_11_3"]=3,r[i[4]="IR_VERSION_2019_1_22"]=4,r[i[5]="IR_VERSION"]=5,r),s.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.s=c.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=c.emptyArray,t.prototype.ints=c.emptyArray,t.prototype.strings=c.emptyArray,t.prototype.tensors=c.emptyArray,t.prototype.graphs=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.f&&t.hasOwnProperty("f")&&e.uint32(21).float(t.f),null!=t.i&&t.hasOwnProperty("i")&&e.uint32(24).int64(t.i),null!=t.s&&t.hasOwnProperty("s")&&e.uint32(34).bytes(t.s),null!=t.t&&t.hasOwnProperty("t")&&l.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&t.hasOwnProperty("g")&&l.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)l.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)l.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(106).string(t.docString),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&e.uint32(170).string(t.refAttrName),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.AttributeProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.name=t.string();break;case 21:i.refAttrName=t.string();break;case 13:i.docString=t.string();break;case 20:i.type=t.int32();break;case 2:i.f=t.float();break;case 3:i.i=t.int64();break;case 4:i.s=t.bytes();break;case 5:i.t=l.onnx.TensorProto.decode(t,t.uint32());break;case 6:i.g=l.onnx.GraphProto.decode(t,t.uint32());break;case 7:if(i.floats&&i.floats.length||(i.floats=[]),2==(7&r))for(var s=t.uint32()+t.pos;t.pos<s;)i.floats.push(t.float());else i.floats.push(t.float());break;case 8:if(i.ints&&i.ints.length||(i.ints=[]),2==(7&r))for(s=t.uint32()+t.pos;t.pos<s;)i.ints.push(t.int64());else i.ints.push(t.int64());break;case 9:i.strings&&i.strings.length||(i.strings=[]),i.strings.push(t.bytes());break;case 10:i.tensors&&i.tensors.length||(i.tensors=[]),i.tensors.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 11:i.graphs&&i.graphs.length||(i.graphs=[]),i.graphs.push(l.onnx.GraphProto.decode(t,t.uint32()));break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!c.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(c.isInteger(t.i)||t.i&&c.isInteger(t.i.low)&&c.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||c.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=l.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=l.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(c.isInteger(t.ints[e])||t.ints[e]&&c.isInteger(t.ints[e].low)&&c.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||c.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=l.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e){var n;if(n=l.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.AttributeProto)return t;var e=new l.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(c.Long?(e.i=c.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?c.base64.decode(t.s,e.s=c.newBuffer(c.base64.length(t.s)),0):t.s.length&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=l.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=l.onnx.GraphProto.fromObject(t.g)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)c.Long?(e.ints[n]=c.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new c.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?c.base64.decode(t.strings[n],e.strings[n]=c.newBuffer(c.base64.length(t.strings[n])),0):t.strings[n].length&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=l.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=l.onnx.GraphProto.fromObject(t.graphs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),e.defaults){if(n.name="",n.f=0,c.Long){var i=new c.Long(0,0,!1);n.i=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=c.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=e.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?c.Long.prototype.toString.call(t.i):e.longs===Number?new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?c.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=l.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=l.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var r=0;r<t.floats.length;++r)n.floats[r]=e.json&&!isFinite(t.floats[r])?String(t.floats[r]):t.floats[r]}if(t.ints&&t.ints.length)for(n.ints=[],r=0;r<t.ints.length;++r)"number"==typeof t.ints[r]?n.ints[r]=e.longs===String?String(t.ints[r]):t.ints[r]:n.ints[r]=e.longs===String?c.Long.prototype.toString.call(t.ints[r]):e.longs===Number?new c.LongBits(t.ints[r].low>>>0,t.ints[r].high>>>0).toNumber():t.ints[r];if(t.strings&&t.strings.length)for(n.strings=[],r=0;r<t.strings.length;++r)n.strings[r]=e.bytes===String?c.base64.encode(t.strings[r],0,t.strings[r].length):e.bytes===Array?Array.prototype.slice.call(t.strings[r]):t.strings[r];if(t.tensors&&t.tensors.length)for(n.tensors=[],r=0;r<t.tensors.length;++r)n.tensors[r]=l.onnx.TensorProto.toObject(t.tensors[r],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],r=0;r<t.graphs.length;++r)n.graphs[r]=l.onnx.GraphProto.toObject(t.graphs[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?l.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e}(),t}(),s.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.type&&t.hasOwnProperty("type")&&l.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.ValueInfoProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.name=t.string();break;case 2:i.type=l.onnx.TypeProto.decode(t,t.uint32());break;case 3:i.docString=t.string();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=l.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.ValueInfoProto)return t;var e=new l.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=l.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=l.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=c.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(26).string(t.name),null!=t.opType&&t.hasOwnProperty("opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)l.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.NodeProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.input&&i.input.length||(i.input=[]),i.input.push(t.string());break;case 2:i.output&&i.output.length||(i.output=[]),i.output.push(t.string());break;case 3:i.name=t.string();break;case 4:i.opType=t.string();break;case 7:i.domain=t.string();break;case 5:i.attribute&&i.attribute.length||(i.attribute=[]),i.attribute.push(l.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:i.docString=t.string();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!c.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!c.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!c.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=l.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.NodeProto)return t;var e=new l.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=l.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var i=0;i<t.input.length;++i)n.input[i]=t.input[i]}if(t.output&&t.output.length)for(n.output=[],i=0;i<t.output.length;++i)n.output[i]=t.output[i];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],i=0;i<t.attribute.length;++i)n.attribute[i]=l.onnx.AttributeProto.toObject(t.attribute[i],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=c.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.irVersion&&t.hasOwnProperty("irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&l.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)l.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.ModelProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.irVersion=t.int64();break;case 8:i.opsetImport&&i.opsetImport.length||(i.opsetImport=[]),i.opsetImport.push(l.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:i.producerName=t.string();break;case 3:i.producerVersion=t.string();break;case 4:i.domain=t.string();break;case 5:i.modelVersion=t.int64();break;case 6:i.docString=t.string();break;case 7:i.graph=l.onnx.GraphProto.decode(t,t.uint32());break;case 14:i.metadataProps&&i.metadataProps.length||(i.metadataProps=[]),i.metadataProps.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(c.isInteger(t.irVersion)||t.irVersion&&c.isInteger(t.irVersion.low)&&c.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=l.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!c.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!c.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(c.isInteger(t.modelVersion)||t.modelVersion&&c.isInteger(t.modelVersion.low)&&c.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=l.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.ModelProto)return t;var e=new l.onnx.ModelProto;if(null!=t.irVersion&&(c.Long?(e.irVersion=c.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(c.Long?(e.modelVersion=c.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=l.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=l.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[]),e.defaults){if(c.Long){var i=new c.Long(0,0,!1);n.irVersion=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",c.Long?(i=new c.Long(0,0,!1),n.modelVersion=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?c.Long.prototype.toString.call(t.irVersion):e.longs===Number?new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?c.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=l.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var r=0;r<t.opsetImport.length;++r)n.opsetImport[r]=l.onnx.OperatorSetIdProto.toObject(t.opsetImport[r],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],r=0;r<t.metadataProps.length;++r)n.metadataProps[r]=l.onnx.StringStringEntryProto.toObject(t.metadataProps[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.key&&t.hasOwnProperty("key")&&e.uint32(10).string(t.key),null!=t.value&&t.hasOwnProperty("value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.StringStringEntryProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.key=t.string();break;case 2:i.value=t.string();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!c.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!c.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.StringStringEntryProto)return t;var e=new l.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)l.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TensorAnnotation;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.tensorName=t.string();break;case 2:i.quantParameterTensorNames&&i.quantParameterTensorNames.length||(i.quantParameterTensorNames=[]),i.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!c.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=l.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorAnnotation)return t;var e=new l.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=l.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var i=0;i<t.quantParameterTensorNames.length;++i)n.quantParameterTensorNames[i]=l.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[i],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=c.emptyArray,t.prototype.name="",t.prototype.initializer=c.emptyArray,t.prototype.docString="",t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.valueInfo=c.emptyArray,t.prototype.quantizationAnnotation=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)l.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)l.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)l.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)l.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)l.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)l.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.GraphProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.node&&i.node.length||(i.node=[]),i.node.push(l.onnx.NodeProto.decode(t,t.uint32()));break;case 2:i.name=t.string();break;case 5:i.initializer&&i.initializer.length||(i.initializer=[]),i.initializer.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 10:i.docString=t.string();break;case 11:i.input&&i.input.length||(i.input=[]),i.input.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:i.output&&i.output.length||(i.output=[]),i.output.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:i.valueInfo&&i.valueInfo.length||(i.valueInfo=[]),i.valueInfo.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:i.quantizationAnnotation&&i.quantizationAnnotation.length||(i.quantizationAnnotation=[]),i.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=l.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=l.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=l.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.GraphProto)return t;var e=new l.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=l.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=l.onnx.TensorProto.fromObject(t.initializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=l.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=l.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=l.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=l.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var i=0;i<t.node.length;++i)n.node[i]=l.onnx.NodeProto.toObject(t.node[i],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],i=0;i<t.initializer.length;++i)n.initializer[i]=l.onnx.TensorProto.toObject(t.initializer[i],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],i=0;i<t.input.length;++i)n.input[i]=l.onnx.ValueInfoProto.toObject(t.input[i],e);if(t.output&&t.output.length)for(n.output=[],i=0;i<t.output.length;++i)n.output[i]=l.onnx.ValueInfoProto.toObject(t.output[i],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],i=0;i<t.valueInfo.length;++i)n.valueInfo[i]=l.onnx.ValueInfoProto.toObject(t.valueInfo[i],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],i=0;i<t.quantizationAnnotation.length;++i)n.quantizationAnnotation[i]=l.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[i],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=c.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=c.emptyArray,t.prototype.int32Data=c.emptyArray,t.prototype.stringData=c.emptyArray,t.prototype.int64Data=c.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=c.newBuffer([]),t.prototype.externalData=c.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=c.emptyArray,t.prototype.uint64Data=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&l.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(66).string(t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)l.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TensorProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:if(i.dims&&i.dims.length||(i.dims=[]),2==(7&r))for(var s=t.uint32()+t.pos;t.pos<s;)i.dims.push(t.int64());else i.dims.push(t.int64());break;case 2:i.dataType=t.int32();break;case 3:i.segment=l.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(i.floatData&&i.floatData.length||(i.floatData=[]),2==(7&r))for(s=t.uint32()+t.pos;t.pos<s;)i.floatData.push(t.float());else i.floatData.push(t.float());break;case 5:if(i.int32Data&&i.int32Data.length||(i.int32Data=[]),2==(7&r))for(s=t.uint32()+t.pos;t.pos<s;)i.int32Data.push(t.int32());else i.int32Data.push(t.int32());break;case 6:i.stringData&&i.stringData.length||(i.stringData=[]),i.stringData.push(t.bytes());break;case 7:if(i.int64Data&&i.int64Data.length||(i.int64Data=[]),2==(7&r))for(s=t.uint32()+t.pos;t.pos<s;)i.int64Data.push(t.int64());else i.int64Data.push(t.int64());break;case 8:i.name=t.string();break;case 12:i.docString=t.string();break;case 9:i.rawData=t.bytes();break;case 13:i.externalData&&i.externalData.length||(i.externalData=[]),i.externalData.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:i.dataLocation=t.int32();break;case 10:if(i.doubleData&&i.doubleData.length||(i.doubleData=[]),2==(7&r))for(s=t.uint32()+t.pos;t.pos<s;)i.doubleData.push(t.double());else i.doubleData.push(t.double());break;case 11:if(i.uint64Data&&i.uint64Data.length||(i.uint64Data=[]),2==(7&r))for(s=t.uint32()+t.pos;t.pos<s;)i.uint64Data.push(t.uint64());else i.uint64Data.push(t.uint64());break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(c.isInteger(t.dims[e])||t.dims[e]&&c.isInteger(t.dims[e].low)&&c.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!c.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=l.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!c.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||c.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(c.isInteger(t.int64Data[e])||t.int64Data[e]&&c.isInteger(t.int64Data[e].low)&&c.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||c.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(c.isInteger(t.uint64Data[e])||t.uint64Data[e]&&c.isInteger(t.uint64Data[e].low)&&c.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto)return t;var e=new l.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)c.Long?(e.dims[n]=c.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new c.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=l.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?c.base64.decode(t.stringData[n],e.stringData[n]=c.newBuffer(c.base64.length(t.stringData[n])),0):t.stringData[n].length&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)c.Long?(e.int64Data[n]=c.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new c.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?c.base64.decode(t.rawData,e.rawData=c.newBuffer(c.base64.length(t.rawData)),0):t.rawData.length&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=l.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)c.Long?(e.uint64Data[n]=c.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new c.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=c.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var i=0;i<t.dims.length;++i)"number"==typeof t.dims[i]?n.dims[i]=e.longs===String?String(t.dims[i]):t.dims[i]:n.dims[i]=e.longs===String?c.Long.prototype.toString.call(t.dims[i]):e.longs===Number?new c.LongBits(t.dims[i].low>>>0,t.dims[i].high>>>0).toNumber():t.dims[i]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=l.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],i=0;i<t.floatData.length;++i)n.floatData[i]=e.json&&!isFinite(t.floatData[i])?String(t.floatData[i]):t.floatData[i];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],i=0;i<t.int32Data.length;++i)n.int32Data[i]=t.int32Data[i];if(t.stringData&&t.stringData.length)for(n.stringData=[],i=0;i<t.stringData.length;++i)n.stringData[i]=e.bytes===String?c.base64.encode(t.stringData[i],0,t.stringData[i].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[i]):t.stringData[i];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],i=0;i<t.int64Data.length;++i)"number"==typeof t.int64Data[i]?n.int64Data[i]=e.longs===String?String(t.int64Data[i]):t.int64Data[i]:n.int64Data[i]=e.longs===String?c.Long.prototype.toString.call(t.int64Data[i]):e.longs===Number?new c.LongBits(t.int64Data[i].low>>>0,t.int64Data[i].high>>>0).toNumber():t.int64Data[i];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?c.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],i=0;i<t.doubleData.length;++i)n.doubleData[i]=e.json&&!isFinite(t.doubleData[i])?String(t.doubleData[i]):t.doubleData[i];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],i=0;i<t.uint64Data.length;++i)"number"==typeof t.uint64Data[i]?n.uint64Data[i]=e.longs===String?String(t.uint64Data[i]):t.uint64Data[i]:n.uint64Data[i]=e.longs===String?c.Long.prototype.toString.call(t.uint64Data[i]):e.longs===Number?new c.LongBits(t.uint64Data[i].low>>>0,t.uint64Data[i].high>>>0).toNumber(!0):t.uint64Data[i];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],i=0;i<t.externalData.length;++i)n.externalData[i]=l.onnx.StringStringEntryProto.toObject(t.externalData[i],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?l.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.end=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.begin&&t.hasOwnProperty("begin")&&e.uint32(8).int64(t.begin),null!=t.end&&t.hasOwnProperty("end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TensorProto.Segment;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.begin=t.int64();break;case 2:i.end=t.int64();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(c.isInteger(t.begin)||t.begin&&c.isInteger(t.begin.low)&&c.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(c.isInteger(t.end)||t.end&&c.isInteger(t.end.low)&&c.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto.Segment)return t;var e=new l.onnx.TensorProto.Segment;return null!=t.begin&&(c.Long?(e.begin=c.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(c.Long?(e.end=c.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(c.Long){var i=new c.Long(0,0,!1);n.begin=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.begin=e.longs===String?"0":0;c.Long?(i=new c.Long(0,0,!1),n.end=e.longs===String?i.toString():e.longs===Number?i.toNumber():i):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?c.Long.prototype.toString.call(t.begin):e.longs===Number?new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?c.Long.prototype.toString.call(t.end):e.longs===Number?new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),s.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)l.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TensorShapeProto;t.pos<n;){var r=t.uint32();r>>>3==1?(i.dim&&i.dim.length||(i.dim=[]),i.dim.push(l.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&r)}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=l.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto)return t;var e=new l.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=l.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var i=0;i<t.dim.length;++i)n.dim[i]=l.onnx.TensorShapeProto.Dimension.toObject(t.dim[i],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["dimValue","dimParam"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TensorShapeProto.Dimension;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.dimValue=t.int64();break;case 2:i.dimParam=t.string();break;case 3:i.denotation=t.string();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(c.isInteger(t.dimValue)||t.dimValue&&c.isInteger(t.dimValue.low)&&c.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!c.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto.Dimension)return t;var e=new l.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(c.Long?(e.dimValue=c.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?c.Long.prototype.toString.call(t.dimValue):e.longs===Number?new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),t}(),s.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["tensorType"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&l.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(50).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TypeProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.tensorType=l.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:i.denotation=t.string();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){var e=l.onnx.TypeProto.Tensor.verify(t.tensorType);if(e)return"tensorType."+e}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto)return t;var e=new l.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=l.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=l.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.elemType&&t.hasOwnProperty("elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&l.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.TypeProto.Tensor;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.elemType=t.int32();break;case 2:i.shape=l.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!c.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=l.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Tensor)return t;var e=new l.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=l.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),t}(),s.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(10).string(t.domain),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof a||(t=a.create(t));for(var n=void 0===e?t.len:t.pos+e,i=new l.onnx.OperatorSetIdProto;t.pos<n;){var r=t.uint32();switch(r>>>3){case 1:i.domain=t.string();break;case 2:i.version=t.int64();break;default:t.skipType(7&r)}}return i},t.decodeDelimited=function(t){return t instanceof a||(t=new a(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(c.isInteger(t.version)||t.version&&c.isInteger(t.version.low)&&c.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.OperatorSetIdProto)return t;var e=new l.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(c.Long?(e.version=c.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",c.Long){var i=new c.Long(0,0,!1);n.version=e.longs===String?i.toString():e.longs===Number?i.toNumber():i}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?c.Long.prototype.toString.call(t.version):e.longs===Number?new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,o.util.toJSONOptions)},t}(),s),t.exports=l},2100:(t,e,n)=>{"use strict";t.exports=n(9482)},9482:(t,e,n)=>{"use strict";var i=e;function r(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=n(1173),i.BufferWriter=n(3155),i.Reader=n(1408),i.BufferReader=n(593),i.util=n(9693),i.rpc=n(5994),i.roots=n(5054),i.configure=r,r()},1408:(t,e,n)=>{"use strict";t.exports=u;var i,r=n(9693),s=r.LongBits,o=r.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},h=function(){return r.Buffer?function(t){return(u.create=function(t){return r.Buffer.isBuffer(t)?new i(t):l(t)})(t)}:l};function d(){var t=new s(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function p(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new s(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}u.create=h(),u.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return p(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|p(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},u.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){i=t,u.create=h(),i._configure();var e=r.Long?"toLong":"toNumber";r.merge(u.prototype,{int64:function(){return d.call(this)[e](!1)},uint64:function(){return d.call(this)[e](!0)},sint64:function(){return d.call(this).zzDecode()[e](!1)},fixed64:function(){return f.call(this)[e](!0)},sfixed64:function(){return f.call(this)[e](!1)}})}},593:(t,e,n)=>{"use strict";t.exports=s;var i=n(1408);(s.prototype=Object.create(i.prototype)).constructor=s;var r=n(9693);function s(t){i.call(this,t)}s._configure=function(){r.Buffer&&(s.prototype._slice=r.Buffer.prototype.slice)},s.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},s._configure()},5054:t=>{"use strict";t.exports={}},5994:(t,e,n)=>{"use strict";e.Service=n(7948)},7948:(t,e,n)=>{"use strict";t.exports=r;var i=n(9693);function r(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(r.prototype=Object.create(i.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function t(e,n,r,s,o){if(!s)throw TypeError("request must be specified");var a=this;if(!o)return i.asPromise(t,a,e,n,r,s);if(a.rpcImpl)try{return a.rpcImpl(e,n[a.requestDelimited?"encodeDelimited":"encode"](s).finish(),(function(t,n){if(t)return a.emit("error",t,e),o(t);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",n,e),o(null,n)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},r.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(t,e,n)=>{"use strict";t.exports=r;var i=n(9693);function r(t,e){this.lo=t>>>0,this.hi=e>>>0}var s=r.zero=new r(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var o=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(t){if(0===t)return s;var e=t<0;e&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return e&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)},r.from=function(t){if("number"==typeof t)return r.fromNumber(t);if(i.isString(t)){if(!i.Long)return r.fromNumber(parseInt(t,10));t=i.Long.fromString(t)}return t.low||t.high?new r(t.low>>>0,t.high>>>0):s},r.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(t){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;r.fromHash=function(t){return t===o?s:new r((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},r.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},r.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},9693:function(t,e,n){"use strict";var i=e;function r(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;++r)void 0!==t[i[r]]&&n||(t[i[r]]=e[i[r]]);return t}function s(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}i.asPromise=n(4537),i.base64=n(7419),i.EventEmitter=n(9211),i.float=n(945),i.inquire=n(7199),i.utf8=n(4997),i.pool=n(6662),i.LongBits=n(1945),i.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),i.global=i.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},i.isString=function(t){return"string"==typeof t||t instanceof String},i.isObject=function(t){return t&&"object"==typeof t},i.isset=i.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},i.Buffer=function(){try{var t=i.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(t){return"number"==typeof t?i.Buffer?i._Buffer_allocUnsafe(t):new i.Array(t):i.Buffer?i._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(t){return t?i.LongBits.from(t).toHash():i.LongBits.zeroHash},i.longFromHash=function(t,e){var n=i.LongBits.fromHash(t);return i.Long?i.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},i.merge=r,i.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},i.newError=s,i.ProtocolError=s("ProtocolError"),i.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},i.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var t=i.Buffer;t?(i._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},i._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},1173:(t,e,n)=>{"use strict";t.exports=h;var i,r=n(9693),s=r.LongBits,o=r.base64,a=r.utf8;function u(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function h(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var d=function(){return r.Buffer?function(){return(h.create=function(){return new i})()}:function(){return new h}};function p(t,e,n){e[n]=255&t}function f(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function m(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}h.create=d(),h.alloc=function(t){return new r.Array(t)},r.Array!==Array&&(h.alloc=r.pool(h.alloc,r.Array.prototype.subarray)),h.prototype._push=function(t,e,n){return this.tail=this.tail.next=new u(t,e,n),this.len+=e,this},f.prototype=Object.create(u.prototype),f.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},h.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new f((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},h.prototype.int32=function(t){return t<0?this._push(g,10,s.fromNumber(t)):this.uint32(t)},h.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},h.prototype.uint64=function(t){var e=s.from(t);return this._push(g,e.length(),e)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(t){var e=s.from(t).zzEncode();return this._push(g,e.length(),e)},h.prototype.bool=function(t){return this._push(p,1,t?1:0)},h.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(t){var e=s.from(t);return this._push(m,4,e.lo)._push(m,4,e.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(t){return this._push(r.float.writeFloatLE,4,t)},h.prototype.double=function(t){return this._push(r.float.writeDoubleLE,8,t)};var _=r.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var i=0;i<t.length;++i)e[n+i]=t[i]};h.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(p,1,0);if(r.isString(t)){var n=h.alloc(e=o.length(t));o.decode(t,n,0),t=n}return this.uint32(e)._push(_,e,t)},h.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},h.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},h.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},h._configure=function(t){i=t,h.create=d(),i._configure()}},3155:(t,e,n)=>{"use strict";t.exports=s;var i=n(1173);(s.prototype=Object.create(i.prototype)).constructor=s;var r=n(9693);function s(){i.call(this)}function o(t,e,n){t.length<40?r.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}s._configure=function(){s.alloc=r._Buffer_allocUnsafe,s.writeBytesBuffer=r.Buffer&&r.Buffer.prototype instanceof Uint8Array&&"set"===r.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var i=0;i<t.length;)e[n++]=t[i++]}},s.prototype.bytes=function(t){r.isString(t)&&(t=r._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s.writeBytesBuffer,e,t),this},s.prototype.string=function(t){var e=r.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},s._configure()},7714:(t,e,n)=>{"use strict";e.R=void 0;const i=n(6919),r=n(7448);e.R=new class{async init(){}async createSessionHandler(t,e){const n=new i.Session(e);return await n.loadModel(t),new r.OnnxjsSessionHandler(n)}}},4200:(t,e,n)=>{"use strict";e.c8=e.rX=void 0;const i=n(1670),r=n(5381),s=n(2157),o=n(2306);e.rX=()=>{if(("number"!=typeof i.env.wasm.initTimeout||i.env.wasm.initTimeout<0)&&(i.env.wasm.initTimeout=0),"boolean"!=typeof i.env.wasm.simd&&(i.env.wasm.simd=!0),"boolean"!=typeof i.env.wasm.proxy&&(i.env.wasm.proxy=!1),"number"!=typeof i.env.wasm.numThreads||!Number.isInteger(i.env.wasm.numThreads)||i.env.wasm.numThreads<=0){const t="undefined"==typeof navigator?(0,r.cpus)().length:navigator.hardwareConcurrency;i.env.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,s.initWasm)()}async createSessionHandler(t,e){const n=new o.OnnxruntimeWebAssemblySessionHandler;return await n.loadModel(t,e),Promise.resolve(n)}}},6018:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(n(1670),e);const s=n(1670);{const t=n(7714).R;(0,s.registerBackend)("webgl",t,-10)}{const t=n(4200).c8;(0,s.registerBackend)("cpu",t,10),(0,s.registerBackend)("wasm",t,10),(0,s.registerBackend)("xnnpack",t,9)}},246:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class n{constructor(t){Object.assign(this,t)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((t=>`${this[t]}`)).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=t=>new n(t)},7778:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const i=n(1446),r=n(9395),s=n(9162),o=n(2517);var a=r.onnxruntime.experimental.fbs;class u{constructor(t){if(this._attributes=new Map,null!=t){for(const e of t)e instanceof i.onnx.AttributeProto?this._attributes.set(e.name,[u.getValue(e),u.getType(e)]):e instanceof a.Attribute&&this._attributes.set(e.name(),[u.getValue(e),u.getType(e)]);if(this._attributes.size<t.length)throw new Error("duplicated attribute names")}}set(t,e,n){this._attributes.set(t,[n,e])}delete(t){this._attributes.delete(t)}getFloat(t,e){return this.get(t,"float",e)}getInt(t,e){return this.get(t,"int",e)}getString(t,e){return this.get(t,"string",e)}getTensor(t,e){return this.get(t,"tensor",e)}getFloats(t,e){return this.get(t,"floats",e)}getInts(t,e){return this.get(t,"ints",e)}getStrings(t,e){return this.get(t,"strings",e)}getTensors(t,e){return this.get(t,"tensors",e)}get(t,e,n){const i=this._attributes.get(t);if(void 0===i){if(void 0!==n)return n;throw new Error(`required attribute not found: ${t}`)}if(i[1]!==e)throw new Error(`type mismatch: expected ${e} but got ${i[1]}`);return i[0]}static getType(t){const e=t instanceof i.onnx.AttributeProto?t.type:t.type();switch(e){case i.onnx.AttributeProto.AttributeType.FLOAT:return"float";case i.onnx.AttributeProto.AttributeType.INT:return"int";case i.onnx.AttributeProto.AttributeType.STRING:return"string";case i.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case i.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case i.onnx.AttributeProto.AttributeType.INTS:return"ints";case i.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case i.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${i.onnx.AttributeProto.AttributeType[e]}`)}}static getValue(t){const e=t instanceof i.onnx.AttributeProto?t.type:t.type();if(e===i.onnx.AttributeProto.AttributeType.GRAPH||e===i.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const n=this.getValueNoCheck(t);if(e===i.onnx.AttributeProto.AttributeType.INT&&o.LongUtil.isLong(n))return o.LongUtil.longToNumber(n);if(e===i.onnx.AttributeProto.AttributeType.INTS){const t=n,e=new Array(t.length);for(let n=0;n<t.length;n++){const i=t[n];e[n]=o.LongUtil.longToNumber(i)}return e}if(e===i.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof i.onnx.AttributeProto?s.Tensor.fromProto(n):s.Tensor.fromOrtTensor(n);if(e===i.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof i.onnx.AttributeProto)return n.map((t=>s.Tensor.fromProto(t)));if(t instanceof a.Attribute)return n.map((t=>s.Tensor.fromOrtTensor(t)))}if(e===i.onnx.AttributeProto.AttributeType.STRING&&t instanceof i.onnx.AttributeProto){const t=n;return(0,o.decodeUtf8String)(t)}return e===i.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof i.onnx.AttributeProto?n.map(o.decodeUtf8String):n}static getValueNoCheck(t){return t instanceof i.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)}static getValueNoCheckFromOnnxFormat(t){switch(t.type){case i.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case i.onnx.AttributeProto.AttributeType.INT:return t.i;case i.onnx.AttributeProto.AttributeType.STRING:return t.s;case i.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case i.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case i.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case i.onnx.AttributeProto.AttributeType.INTS:return t.ints;case i.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case i.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case i.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error(`unsupported attribute type: ${i.onnx.AttributeProto.AttributeType[t.type]}`)}}static getValueNoCheckFromOrtFormat(t){switch(t.type()){case a.AttributeType.FLOAT:return t.f();case a.AttributeType.INT:return t.i();case a.AttributeType.STRING:return t.s();case a.AttributeType.TENSOR:return t.t();case a.AttributeType.GRAPH:return t.g();case a.AttributeType.FLOATS:return t.floatsArray();case a.AttributeType.INTS:{const e=[];for(let n=0;n<t.intsLength();n++)e.push(t.ints(n));return e}case a.AttributeType.STRINGS:{const e=[];for(let n=0;n<t.stringsLength();n++)e.push(t.strings(n));return e}case a.AttributeType.TENSORS:{const e=[];for(let n=0;n<t.tensorsLength();n++)e.push(t.tensors(n));return e}default:throw new Error(`unsupported attribute type: ${a.AttributeType[t.type()]}`)}}}e.Attribute=u},7091:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const i=n(5038),r=new Map;async function s(t){const n=e.backend;if(void 0!==n[t]&&function(t){const e=t;return"initialize"in e&&"function"==typeof e.initialize&&"createSessionHandler"in e&&"function"==typeof e.createSessionHandler&&"dispose"in e&&"function"==typeof e.dispose}(n[t])){const e=n[t];let i=e.initialize();if("object"==typeof i&&"then"in i&&(i=await i),i)return r.set(t,e),e}}e.backend={webgl:new i.WebGLBackend},e.resolveBackend=async function t(e){if(!e)return t(["webgl"]);{const t="string"==typeof e?[e]:e;for(const e of t){const t=r.get(e);if(t)return t;const n=await s(e);if(n)return n}}throw new Error("no available backend to use")}},5038:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const i=n(1670),r=n(6231),s=n(6416),o=n(7305);e.WebGLBackend=class{get contextId(){return i.env.webgl.contextId}set contextId(t){i.env.webgl.contextId=t}get matmulMaxBatchSize(){return i.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){i.env.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return i.env.webgl.textureCacheMode}set textureCacheMode(t){i.env.webgl.textureCacheMode=t}get pack(){return i.env.webgl.pack}set pack(t){i.env.webgl.pack=t}get async(){return i.env.webgl.async}set async(t){i.env.webgl.async=t}initialize(){try{return this.glContext=(0,o.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),r.Logger.setWithEnv(i.env),r.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return r.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new s.WebGLSessionHandler(this,t)}dispose(){this.glContext.dispose()}}},5107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const i=n(2517),r=n(8520),s=n(5060),o=n(7859),a=n(9390);class u extends r.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new r.GlslLibRoutine("\n      vec2 offsetToCoords(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      ")}}coordsToOffset(){return{coordsToOffset:new r.GlslLibRoutine("\n      int coordsToOffset(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      ")}}getOutputSamplingSnippet(){const t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){const e=t.unpackedShape,n=[t.width,t.height],i={},o="getOutputCoords";switch(e.length){case 0:i[o]=this.getOutputScalarCoords();break;case 1:i[o]=this.getOutputPacked1DCoords(e,n);break;case 2:i[o]=this.getOutputPacked2DCoords(e,n);break;case 3:i[o]=this.getOutputPacked3DCoords(e,n);break;default:i[o]=this.getOutputPackedNDCoords(e,n)}const a=`\n      void setOutput(vec4 val) {\n        ${(0,s.getGlsl)(this.context.glContext.version).output} = val;\n      }\n    `;return i.floatTextureSetRGBA=new r.GlslLibRoutine(a),i}getUnpackedOutputSamplingSnippet(t){const e=t.unpackedShape,n=[t.width,t.height],i={},o="getOutputCoords";switch(e.length){case 0:i[o]=this.getOutputScalarCoords();break;case 1:i[o]=this.getOutputUnpacked1DCoords(e,n);break;case 2:i[o]=this.getOutputUnpacked2DCoords(e,n);break;case 3:i[o]=this.getOutputUnpacked3DCoords(e,n);break;case 4:i[o]=this.getOutputUnpacked4DCoords(e,n);break;case 5:i[o]=this.getOutputUnpacked5DCoords(e,n);break;case 6:i[o]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}const a=`\n        void setOutput(float val) {\n          ${(0,s.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);\n        }\n    `;return i.floatTextureSetR=new r.GlslLibRoutine(a),i}getOutputScalarCoords(){return new r.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")}getOutputPacked1DCoords(t,e){const n=e;let i="";return 1===n[0]?(i=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ${n[1]}.0);\n          }\n        `,new r.GlslLibRoutine(i)):1===n[1]?(i=`\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ${n[0]}.0);\n          }\n        `,new r.GlslLibRoutine(i)):(i=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(${n[0]}, ${n[1]}));\n          return 2 * (resTexRC.y * ${n[0]} + resTexRC.x);\n        }\n      `,new r.GlslLibRoutine(i))}getOutputPacked2DCoords(t,e){let n="";if(i.ArrayUtil.arraysEqual(t,e))return n=`\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));\n        }\n      `,new r.GlslLibRoutine(n);const s=e,o=Math.ceil(t[1]/2);return n=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${s[0]}, ${s[1]}));\n\n          int index = resTexRC.y * ${s[0]} + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${o}) * 2;\n          int c = 2 * (index / ${o});\n\n          return ivec2(r, c);\n        }\n      `,new r.GlslLibRoutine(n)}getOutputPacked3DCoords(t,e){const n=[e[0],e[1]],i=Math.ceil(t[2]/2),s=i*Math.ceil(t[1]/2),o=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${n[0]}, ${n[1]}));\n          int index = resTexRC.y * ${n[0]} + resTexRC.x;\n\n          int b = index / ${s};\n          index -= b * ${s};\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ${i}) * 2;\n          int c = 2 * (index / ${i});\n\n          return ivec3(b, r, c);\n        }\n      `;return new r.GlslLibRoutine(o)}getOutputPackedNDCoords(t,e){const n=[e[0],e[1]],i=Math.ceil(t[t.length-1]/2),s=i*Math.ceil(t[t.length-2]/2);let o=s,a="",u="b, r, c";for(let e=2;e<t.length-1;e++)o*=t[t.length-e-1],a=`\n      int b${e} = index / ${o};\n      index -= b${e} * ${o};\n    `+a,u=`b${e}, `+u;const c=`\n      ivec${t.length} getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(${n[0]}, ${n[1]}));\n        int index = resTexRC.y * ${n[0]} + resTexRC.x;\n\n        ${a}\n\n        int b = index / ${s};\n        index -= b * ${s};\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ${i}) * 2;\n        int c = 2 * (index / ${i});\n\n        return ivec${t.length}(${u});\n      }\n    `;return new r.GlslLibRoutine(c)}getOutputUnpacked1DCoords(t,e){const n=`\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          return resTexRC.y * ${e[0]} + resTexRC.x;\n        }\n      `;return new r.GlslLibRoutine(n)}getOutputUnpacked2DCoords(t,e){const n=`\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          int r = index / ${t[1]};\n          int c = index - r * ${t[1]};\n          return ivec2(r, c);\n        }\n      `;return new r.GlslLibRoutine(n)}getOutputUnpacked3DCoords(t,e){let n="";const i=t.length;let s=null;i<2&&(s=[]),s=new Array(i-1),s[i-2]=t[i-1];for(let e=i-3;e>=0;--e)s[e]=s[e+1]*t[e+1];const o=["r","c","d"],a=s.map(((t,e)=>`int ${o[e]} = index / ${t}; ${e===s.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`};`)).join("");return n=`\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          ${a}\n          return ivec3(r, c, d);\n        }\n      `,new r.GlslLibRoutine(n)}getOutputUnpacked4DCoords(t,e){let n="";const i=t.length;let s=null;i<2&&(s=[]),s=new Array(i-1),s[i-2]=t[i-1];for(let e=i-3;e>=0;--e)s[e]=s[e+1]*t[e+1];const o=["r","c","d","d2"],a=s.map(((t,e)=>`int ${o[e]} = index / ${t}; ${e===s.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`};`)).join("");return n=`\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          ${a}\n          return ivec4(r, c, d, d2);\n        }\n      `,new r.GlslLibRoutine(n)}getOutputUnpacked5DCoords(t,e){let n="";const i=t.length;let s=null;i<2&&(s=[]),s=new Array(i-1),s[i-2]=t[i-1];for(let e=i-3;e>=0;--e)s[e]=s[e+1]*t[e+1];const o=["r","c","d","d2","d3"],a=s.map(((t,e)=>`int ${o[e]} = index / ${t}; ${e===s.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`};`)).join("");return n=`\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(${e[0]}, ${e[1]}));\n          int index = resTexRC.y * ${e[0]} + resTexRC.x;\n          ${a}\n          return ivec5(r, c, d, d2, d3);\n        }\n      `,new r.GlslLibRoutine(n)}getOutputUnpacked6DCoords(t,e){let n="";const i=t.length;let s=null;i<2&&(s=[]),s=new Array(i-1),s[i-2]=t[i-1];for(let e=i-3;e>=0;--e)s[e]=s[e+1]*t[e+1];const o=["r","c","d","d2","d3","d4"],a=s.map(((t,e)=>`int ${o[e]} = index / ${t}; ${e===s.length-1?`int ${o[e+1]} = index - ${o[e]} * ${t}`:`index -= ${o[e]} * ${t}`};`)).join("");return n=`\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(${e[0]}, ${e[1]}));\n         int index = resTexRC.y * ${e[0]} + resTexRC.x;\n         ${a}\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     `,new r.GlslLibRoutine(n)}getCommonUtilFuncs(){const t={};let e="uvFromFlat";t[e]=new r.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),e="packedUVfrom1D",t[e]=new r.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="packedUVfrom2D",t[e]=new r.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="packedUVfrom3D",t[e]=new r.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="sampleTexture";const n=(0,s.getGlsl)(this.context.glContext.version);return t[e]=new r.GlslLibRoutine(`\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ${n.texture2D}(textureSampler, uv).r;\n        }`),t}getInputsSamplingSnippets(){const t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach(((n,i)=>{const r=this.context.inputTextureLayouts[i],s=(0,a.generateShaderFuncNameFromInputSamplerName)(n);r.isPacked?t[s]=this.getPackedSamplerFromInput(s,n,r):t[s]=this.getUnpackedSamplerFromInput(s,n,r);const o=(0,a.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(n);r.unpackedShape.length<=e.unpackedShape.length&&(r.isPacked?t[o]=this.getPackedSamplerAtOutputCoords(o,r,e,n):t[o]=this.getUnpackedSamplerAtOutputCoords(o,r,e,n))})),t}getPackedSamplerAtOutputCoords(t,e,n,s){const o=e.unpackedShape,u=n.unpackedShape,c=s,l=(0,a.generateShaderFuncNameFromInputSamplerName)(c),h=o.length,d=u.length,p=i.BroadcastUtil.getBroadcastDims(o,u),f=(0,a.getCoordsDataType)(d),g=d-h;let m;const _=(0,a.getGlChannels)();m=0===h?"":d<2&&p.length>=1?"coords = 0;":p.map((t=>`coords.${_[t+g]} = 0;`)).join("\n");let y="";y=d<2&&h>0?"coords":o.map(((t,e)=>`coords.${_[e+g]}`)).join(", ");let v="return outputValue;";const b=1===i.ShapeUtil.size(o),w=1===i.ShapeUtil.size(u);if(1!==h||b||w){if(b&&!w)v=1===d?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(p.length){const t=h-2,e=h-1;p.indexOf(t)>-1&&p.indexOf(e)>-1?v="return vec4(outputValue.x);":p.indexOf(t)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":p.indexOf(e)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";const T=`\n      vec4 ${t}() {\n        ${f} coords = getOutputCoords();\n        \n        int lastDim = coords.${_[d-1]};\n        coords.${_[d-1]} = coords.${_[d-2]};\n        coords.${_[d-2]} = lastDim;\n      \n        ${m}\n        vec4 outputValue = ${l}(${y});\n        ${v}\n      }\n    `;return new r.GlslLibRoutine(T,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,n,s){const o=[n.width,n.height],u=[e.width,e.height],c=e.unpackedShape.length,l=n.unpackedShape.length,h=e.unpackedShape,d=n.unpackedShape,p=(0,a.generateShaderFuncNameFromInputSamplerName)(s);if(c===l&&i.ArrayUtil.arraysEqual(u,o)){const e=`\n          float ${t}() {\n            return sampleTexture(${s}, TexCoords);\n          }\n        `;return new r.GlslLibRoutine(e,["coordinates.sampleTexture"])}const f=(0,a.getCoordsDataType)(l),g=i.BroadcastUtil.getBroadcastDims(h,d),m=l-c;let _;const y=(0,a.getGlChannels)();_=0===c?"":l<2&&g.length>=1?"coords = 0;":g.map((t=>`coords.${y[t+m]} = 0;`)).join("\n");let v="";v=l<2&&c>0?"coords":e.unpackedShape.map(((t,e)=>`coords.${y[e+m]}`)).join(", ");const b=`\n        float ${t}() {\n          ${f} coords = getOutputCoords();\n          ${_}\n          return ${p}(${v});\n        }\n      `;return new r.GlslLibRoutine(b,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}}getUnpackedSamplerFromInput(t,e,n){const i=n.unpackedShape;switch(i.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error(`Unsupported dimension ${i.length}-D`)}}getPackedSamplerScalar(t,e){const n=`\n          vec4 ${t}() {\n            return ${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${e}, halfCR);\n          }\n        `;return new r.GlslLibRoutine(n)}getPackedSampler1D(t,e,n){const i=[n.width,n.height],o=[i[1],i[0]],a=(0,s.getGlsl)(this.context.glContext.version),u=`vec4 ${t}(int index) {\n      vec2 uv = packedUVfrom1D(\n      ${o[0]}, ${o[1]}, index);\n      return ${a.texture2D}(${e}, uv);\n    }`;return new r.GlslLibRoutine(u,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,n){const o=n.unpackedShape,a=[n.width,n.height],u=(0,s.getGlsl)(this.context.glContext.version),c=a[0],l=a[1];if(null!=a&&i.ArrayUtil.arraysEqual(o,a)){const n=`vec4 ${t}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${l}.0, ${c}.0);\n        return ${u.texture2D}(${e}, uv);\n      }`;return new r.GlslLibRoutine(n)}const h=a,d=Math.ceil(o[1]/2),p=`vec4 ${t}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${h[1]}, ${h[0]}, ${d}, row, col);\n      return ${u.texture2D}(${e}, uv);\n    }`;return new r.GlslLibRoutine(p,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,n){const i=n.unpackedShape,o=[n.width,n.height],u=[o[0],o[1]],c=(0,s.getGlsl)(this.context.glContext.version);if(1===i[0]){const s=i.slice(1),o=[1,2],u=(0,a.squeezeInputShape)(i,s),c=["b","row","col"],l=JSON.parse(JSON.stringify(n));l.unpackedShape=u;const h=this.getPackedSamplerFromInput(t,e,l),d=`${h.routineBody}\n      vec4 ${t}(int b, int row, int col) {\n        return ${t}(${(0,a.getSqueezedParams)(c,o)});\n      } `;return new r.GlslLibRoutine(d,h.dependencies)}const l=u[0],h=u[1],d=Math.ceil(i[2]/2),p=`vec4 ${t}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${h}, ${l}, ${d*Math.ceil(i[1]/2)}, ${d}, b, row, col);\n      return ${c.texture2D}(${e}, uv);}`;return new r.GlslLibRoutine(p,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,n){const i=n.unpackedShape,o=i.length,a=[n.width,n.height],u=(0,s.getGlsl)(this.context.glContext.version),c=[a[0],a[1]],l=c[1],h=c[0],d=Math.ceil(i[o-1]/2);let p=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",g=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let t=2;t<o-1;t++)f=`int b${t}, `+f,p*=i[o-t-1],g=`b${t} * ${p} + `+g;const m=`vec4 ${t}(${f}) {\n      int index = ${g};\n      int texR = index / ${h};\n      int texC = index - texR * ${h};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}, ${l});\n      return ${u.texture2D}(${e}, uv);\n    }`;return new r.GlslLibRoutine(m)}getUnpackedSamplerScalar(t,e,n){const[i,s]=[n.width,n.height];if(1===i&&1===s){const n=`\n          float ${t}() {\n            return sampleTexture(${e}, halfCR);\n          }\n        `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture"])}const o=`\n        float ${t}() {\n          int offset_${e} = coordsToOffset(TexCoords, ${i}, ${s});\n          vec2 uv = uvFromFlat(${i}, ${s}, offset_${e});\n          return sampleTexture(${e}, uv);\n        }\n      `;return new r.GlslLibRoutine(o,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,n){const i=n.width,s=n.height;if(1===s&&1===i){const n=`\n        float ${t}(int index) {\n          return sampleTexture(${e}, halfCR);\n        }\n      `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture"])}if(1===s){const n=`\n          float ${t}(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ${i}.0, 0.5);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture"])}if(1===i){const n=`\n          float ${t}(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${s}.0);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture"])}const o=`\n        float ${t}(int index) {\n          vec2 uv = uvFromFlat(${i}, ${s}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new r.GlslLibRoutine(o,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,n){const s=n.unpackedShape,u=[n.height,n.width];if(null!=u&&i.ArrayUtil.arraysEqual(s,u)){const n=`\n          float ${t}(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(${u[1]}.0, ${u[0]}.0);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture"])}const{newShape:c,keptDims:l}=(0,o.squeezeShape)(s),h=c;if(h.length<s.length){const i=(0,a.squeezeInputShape)(s,h),o=JSON.parse(JSON.stringify(n));o.unpackedShape=i;const u=["col","row"],c=`\n          ${this.getUnpackedSamplerFromInput(t,e,o).routineBody}\n          float ${t}(int row, int col) {\n            return ${t}(${(0,a.getSqueezedParams)(u,l)});\n          }\n        `;return new r.GlslLibRoutine(c,["coordinates.sampleTexture"])}const d=u[1],p=u[0];if(1===p){const n=`\n          float ${t}(int row, int col) {\n            int offset_${e} = coordsToOffset(TexCoords, ${d}, ${p});\n            float index = dot(vec3(row, col, offset_${e}), vec3(${s[1]}, 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ${d}.0);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===d){const n=`\n          float ${t}(int row, int col) {\n            int offset_${e} = coordsToOffset(TexCoords, ${d}, ${p});\n            float index = dot(vec3(row, col, offset_${e}), vec3(${s[1]}, 1, 1));\n            vec2 uv = vec2((index + 0.5) / ${p}.0, 0.5);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new r.GlslLibRoutine(n,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const f=`\n        float ${t}(int row, int col) {\n          int index = col * ${s[1]} + row;\n          vec2 uv = uvFromFlat(${d}, ${p}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new r.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,n){const i=n.unpackedShape,s=i[1]*i[2],u=i[2],{newShape:c,keptDims:l}=(0,o.squeezeShape)(i),h=c;if(h.length<i.length){const s=(0,a.squeezeInputShape)(i,h),o=["batch","col","row"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=s;const c=this.getUnpackedSamplerFromInput(t,e,u),d=l.reverse(),p=`\n          ${c.routineBody}\n          float ${t}(int batch, int row, int col) {\n            return ${t}(${(0,a.getSqueezedParams)(o,d)});\n          }\n        `;return new r.GlslLibRoutine(p,c.dependencies)}const d=`\n          float ${t}(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ${s} + col * ${u} + row;\n            vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n            return sampleTexture(${e}, uv);\n          }\n      `;return new r.GlslLibRoutine(d,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,n){const i=n.unpackedShape,s=i[3],o=i[2]*s,a=`\n        float ${t}(int row, int col, int depth, int depth2) {\n          int index = row * ${i[1]*o} + col * ${o} +\n              depth2 * ${s} + depth;\n          vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new r.GlslLibRoutine(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,n){const i=n.unpackedShape,s=i[4],u=i[3]*s,c=i[2]*u,l=i[1]*c,{newShape:h,keptDims:d}=(0,o.squeezeShape)(i);if(h.length<i.length){const s=(0,a.squeezeInputShape)(i,h),o=["row","col","depth","depth2","depth3"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=s;const c=`\n          ${this.getUnpackedSamplerFromInput(t,e,u).routineBody}\n          float ${t}(int row, int col, int depth, int depth2, int depth3) {\n            return ${t}(${(0,a.getSqueezedParams)(o,d)});\n          }\n        `;return new r.GlslLibRoutine(c,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const p=`\n        float ${t}(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ${l} + col * ${c} + depth * ${u} +\n          depth3 * ${s} + depth2;\n          vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n          return sampleTexture(${e}, uv);\n        }\n      `;return new r.GlslLibRoutine(p,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,n){const i=n.unpackedShape,s=i[5],u=i[4]*s,c=i[3]*u,l=i[2]*c,h=i[1]*l,{newShape:d,keptDims:p}=(0,o.squeezeShape)(i);if(d.length<i.length){const s=(0,a.squeezeInputShape)(i,d),o=["row","col","depth","depth2","depth3","depth4"],u=JSON.parse(JSON.stringify(n));u.unpackedShape=s;const c=`\n            ${this.getUnpackedSamplerFromInput(t,e,u).routineBody}\n            float ${t}(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ${t}(${(0,a.getSqueezedParams)(o,p)});\n            }\n          `;return new r.GlslLibRoutine(c,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const f=`\n          float ${t}(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ${h} + col * ${l} + depth * ${c} +\n            depth2 * ${u} + depth3 * ${s} + depth4;\n            vec2 uv = uvFromFlat(${n.width}, ${n.height}, index);\n            return sampleTexture(${e}, uv);\n          }\n        `;return new r.GlslLibRoutine(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,i=t.width,s=t.height,o=[];for(let t=0;t<e-1;++t)o.push(`\n        c[${t}] = offset / ${n[t]};`),o.push(`\n        offset -= c[${t}] * ${n[t]};`);o.push(`\n        c[${e-1}] = offset;`);const a=`\n      void toVec(vec2 texCoords, out int c[${e}]) {\n        int offset = coordsToOffset(texCoords, ${i}, ${s});\n        ${o.join("")}\n      }\n      void toVec(int offset, out int c[${e}]) {\n        ${o.join("")}\n      }\n    `;return{toVec:new r.GlslLibRoutine(a,["coordinates.coordsToOffset"])}}valueFrom(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const i=this.context.inputTextureLayouts[n],s=(i.unpackedShape.length>0?i.unpackedShape:i.shape).length;let o=`_${e}`;t[o]=new r.GlslLibRoutine(this.getValueFromSingle(e,s,i.width,i.height,!1),[`shapeUtils.indicesToOffset${o}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),o+="_T",t[o]=new r.GlslLibRoutine(this.getValueFromSingle(e,s,i.width,i.height,!0),[`shapeUtils.indicesToOffset${o}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),t}getValueFromSingle(t,e,n,i,r){let o=`_${t}`;return r&&(o+="_T"),`\n        float ${o}(int m[${e}]) {\n          int offset = indicesToOffset${o}(m);\n          vec2 coords = offsetToCoords(offset, ${n}, ${i});\n          float value = getColorAsFloat(${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${t}, coords));\n          return value;\n        }\n        `}getPackedValueFrom(t,e,n,i,r){let o=`_${t}_Pack`;return r&&(o+="_T"),`\n        vec4 ${o}(int m[${e}]) {\n          int offset = indicesToOffset_${t}(m);\n          vec2 coords = offsetToCoords(offset, ${n}, ${i});\n          return ${(0,s.getGlsl)(this.context.glContext.version).texture2D}(${t}, coords);\n        }\n        `}}e.CoordsGlslLib=u},8520:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional",e.GlslContext=class{constructor(t,e,n,i){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=i}},e.GlslLib=class{constructor(t){this.context=t}},e.GlslLibRoutine=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},e.GlslLibRoutineNode=class{constructor(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(t){if(!t||0===t.length)return[];if(1===t.length)return t;const e=new Set,n=new Set,i=new Array;return this.createOrderedNodes(t,e,n,i),i}static createOrderedNodes(t,e,n,i){for(let r=0;r<t.length;++r)this.dfsTraverse(t[r],e,n,i)}static dfsTraverse(t,e,n,i){if(!t||n.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);const r=t.dependencies;if(r&&r.length>0)for(let t=0;t<r.length;++t)this.dfsTraverse(r[t],e,n,i);i.push(t),n.add(t.name),e.delete(t.name)}}},7341:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const i=n(8520);class r extends i.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new i.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}}decodeFloat32(){return{decode:new i.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}}encodeUint8(){const t=r.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new i.GlslLibRoutine(`\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ${t}\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        `)}}decodeUint8(){const t=r.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new i.GlslLibRoutine(`\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ${t}\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        `)}}static isLittleEndian(){const t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=r},9894:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const i=n(8520),r=n(5060);class s extends i.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const t=(0,r.getGlsl)(this.context.glContext.version);return{setFragColor:new i.GlslLibRoutine(`\n        void setFragColor(float value) {\n            ${t.output} = encode(value);\n        }\n        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new i.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}}}e.FragColorGlslLib=s},2848:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){const e={};let i;for(;null!==(i=n.exec(t));){const t=i[3].split(",").map((t=>{const e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null})).filter((t=>null!==t));e[i[2]]={params:t,body:i[4]}}for(const n in e){const r="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",n),s=new RegExp(r,"gm");for(;null!==(i=s.exec(t));){const r=i[1],s=i[2],o=i[3].split(","),a=r?`${r} ${s};`:"";let u=e[n].body,c="";e[n].params.forEach(((t,e)=>{t&&(c+=`${t.type} ${t.name} = ${o[e]};\n`)})),u=`${c}\n ${u}`,u=u.replace("return",`${s} = `);const l=`\n      ${a}\n      {\n        ${u}\n      }\n      `;t=t.replace(i[0],l)}}return t.replace(n,"")}},8879:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const i=n(8520),r=n(2848),s=n(5483),o=n(5060);e.GlslPreprocessor=class{constructor(t,e,n,r){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new i.GlslContext(t,e,n,r),Object.keys(s.glslRegistry).forEach((t=>{const e=new s.glslRegistry[t](this.context);this.libs[t]=e}));const o=this.glslLibRoutineDependencyGraph;for(const t in this.libs){const e=this.libs[t].getFunctions();for(const n in e){const r=t+"."+n;let s;o[r]?(s=o[r],s.routineBody=e[n].routineBody):(s=new i.GlslLibRoutineNode(r,e[n].routineBody),o[r]=s);const a=e[n].dependencies;if(a)for(let t=0;t<a.length;++t)if(o[a[t]])s.addDependency(o[a[t]]);else{const e=new i.GlslLibRoutineNode(a[t]);o[a[t]]=e,s.addDependency(e)}}}}preprocess(){const t=this.context.programInfo;let e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}\n      ${(0,o.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=(0,r.replaceInlines)(e),`${(0,o.getFragShaderPreamble)(this.context.glContext.version)}\n    ${this.getUniforms(t.inputNames,t.variables)}\n    ${this.getImports(e)}\n    ${e}`}getImports(t){const e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";let n="";for(let t=0;t<e.length;++t){if(!e[t].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${e[t].name}`);n+=e[t].routineBody+"\n"}return n}selectGlslLibRoutinesToBeIncluded(t){const e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((n=>{const i=n.split(".")[1];-1!==t.indexOf(i)&&e.push(this.glslLibRoutineDependencyGraph[n])})),i.TopologicalSortGlslRoutines.returnOrderedNodes(e)}getUniforms(t,e){const n=[];if(t)for(const e of t)n.push(`uniform sampler2D ${e};`);if(e)for(const t of e)n.push(`uniform ${t.type} ${t.name}${t.arrayLength?`[${t.arrayLength}]`:""};`);return n.join("\n")}}},5483:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const i=n(5107),r=n(7341),s=n(9894),o=n(2655),a=n(3891);e.glslRegistry={encoding:r.EncodingGlslLib,fragcolor:s.FragColorGlslLib,vec:a.VecGlslLib,shapeUtils:o.ShapeUtilsGlslLib,coordinates:i.CoordsGlslLib}},2655:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const i=n(8520);class r extends i.GlslLib{constructor(t){super(t)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach(((n,r)=>{const s=this.context.inputTextureLayouts[r].unpackedShape;if(s.length<=t){const r=s.length,o=t-r,a=`bcastIndices_${n}`;let u="";for(let t=0;t<r;++t)u+=`\n          realIndices[${t}] = int( mod(float(bcastedIndices[${o+t}]), ${s[t]}.0) );\n          `;const c=`\n        void ${a} (int bcastedIndices[${t}], out int realIndices[${r}]) {\n          ${u}\n        }\n        `;e[a]=new i.GlslLibRoutine(c)}})),e}bcastMatmulIndex(){const t=this.context.outputTextureLayout.shape.length,e={};return this.context.programInfo.inputNames.forEach(((n,r)=>{const s=this.context.inputTextureLayouts[r].shape;if(!(s.length<2||s.length>t)){const r=s.length,o=t-r,a=`bcastMatmulIndices_${n}`;let u="";for(let t=0;t<r-2;++t)u+=`\n          realIndices[${t}] = int( mod(float(bcastedIndices[${o+t}]), ${s[t]}.0) );\n          `;const c=`\n        void ${a}(int bcastedIndices[${t}], out int realIndices[${r}]) {\n          ${u}\n          realIndices[${r-1}] = bcastedIndices[${t-1}];\n          realIndices[${r-2}] = bcastedIndices[${t-2}];\n        }\n        `;e[a]=new i.GlslLibRoutine(c)}})),e}indicesToOffset(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const s=this.context.inputTextureLayouts[n].shape,o=this.context.inputTextureLayouts[n].strides,a=s.length;let u=`indicesToOffset_${e}`;t[u]=new i.GlslLibRoutine(r.indexToOffsetSingle(u,a,o)),u=`indicesToOffset_${e}_T`,t[u]=new i.GlslLibRoutine(r.indexToOffsetSingle(u,a,o.slice().reverse()))})),t}static indexToOffsetSingle(t,e,n){let i="";for(let t=e-1;t>=0;--t)i+=`\n        offset += indices[${t}] * ${n[t]};\n        `;return`\n      int ${t}(int indices[${e}]) {\n        int offset = 0;\n        ${i}\n        return offset;\n      }\n      `}offsetToIndices(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const s=this.context.inputTextureLayouts[n].shape,o=this.context.inputTextureLayouts[n].strides,a=s.length;let u=`offsetToIndices_${e}`;t[u]=new i.GlslLibRoutine(r.offsetToIndicesSingle(u,a,o)),u=`offsetToIndices_${e}_T`,t[u]=new i.GlslLibRoutine(r.offsetToIndicesSingle(u,a,o.slice().reverse()))})),t}static offsetToIndicesSingle(t,e,n){const i=[];for(let t=0;t<e-1;++t)i.push(`\n      indices[${t}] = offset / ${n[t]};`),i.push(`\n        offset -= indices[${t}] * ${n[t]};`);return i.push(`\n      indices[${e-1}] = offset;`),`\n      void ${t}(int offset, out int indices[${e}]) {\n        ${i.join("")}\n      }\n      `}incrementIndices(){const t={};return this.context.programInfo.inputNames.forEach(((e,n)=>{const r=this.context.inputTextureLayouts[n].shape,s=r.length,o=`incrementIndices_${e}`;let a="";for(let t=0;t<s;++t)a+=`\n        shape[${t}] = ${r[t]};`;const u=`\n        void ${o}(int axis, out int indices[${s}]) {\n          int shape[${s}];\n          ${a};\n          for(int i = ${s} -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        `;t[o]=new i.GlslLibRoutine(u)})),t}}e.ShapeUtilsGlslLib=r},5060:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},i={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function r(t){return 1===t?n:i}e.getGlsl=r,e.getVertexShaderSource=function(t){const e=r(t);return`${e.version}\n      precision highp float;\n      ${e.attribute} vec3 position;\n      ${e.attribute} vec2 textureCoord;\n\n      ${e.varyingVertex} vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }`},e.getFragShaderPreamble=function(t){const e=r(t);return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFrag} vec2 TexCoords;\n    ${e.outputDeclaration}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    `},e.getDefaultFragShaderMain=function(t,e){return`\n  void main() {\n    int indices[${e}];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ${r(t).output} = result;\n  }\n  `}},3891:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const i=n(8520);class r extends i.GlslLib{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(const r in e){const s=`${r}Vec`;let o="";for(let n=0;n<t;++n)o+=`\n          dest[${n}] ${e[r]} src[${n}];\n          `;const a=`\n        void ${s}(int src[${t}], out int dest[${t}]) {\n          ${o}\n        }\n        `;n[s]=new i.GlslLibRoutine(a)}return n}copyVec(){const t=this.context.outputTextureLayout.shape.length;let e="";for(let n=0;n<t;++n)e+=`\n        dest[${n}] = src[${n}];\n        `;const n=`\n      void copyVec(int src[${t}], out int dest[${t}]) {\n        ${e}\n      }\n      `;return{copyVec:new i.GlslLibRoutine(n)}}setVecItem(){const t=this.context.outputTextureLayout.shape.length;let e=`\n        if(index < 0)\n            index =${t} + index;\n        if (index == 0)\n            m[0] = value;\n        `;for(let n=1;n<t-1;++n)e+=`\n        else if (index == ${n})\n            m[${n}] = value;\n            `;e+=`\n        else\n            m[${t-1}] = value;\n        `;const n=`\n      void setVecItem(out int m[${t}], int index, int value) {\n        ${e}\n      }\n        `;return{setVecItem:new i.GlslLibRoutine(n)}}getVecItem(){const t=this.context.outputTextureLayout.shape.length;let e=`\n        if(index < 0)\n            index = ${t} + index;\n        if (index == 0)\n            return m[0];\n      `;for(let n=1;n<t-1;++n)e+=`\n        else if (index == ${n})\n            return m[${n}];\n      `;e+=`\n        else\n            return m[${t-1}];\n        `;const n=`\n      int getVecItem(int m[${t}], int index) {\n        ${e}\n      }\n    `;return{getVecItem:new i.GlslLibRoutine(n)}}}e.VecGlslLib=r},8316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const i=n(6231),r=n(9162),s=n(2517),o=n(2403),a=n(7019),u=n(8710),c=n(5611),l=n(4057),h=n(2039);e.WebGLInferenceHandler=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return(0,l.calculateTextureWidthAndHeight)(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");const n=[];for(let i=0;i<t.inputNames.length;++i)n[i]=this.getOrCreateTextureData(e[i],t.inputTypes[i]);const i=((t,e)=>{const n=e.map((t=>`${t.unpackedShape.join(",")};${t.width}x${t.height}`)).join("_");let i=t.name;return t.cacheHint&&(i+="["+t.cacheHint+"]"),i+=":"+n,i})(t,n);let r=this.session.programManager.getArtifact(i);const s=r?r.programInfo:"function"==typeof t.get?t.get():t,o=(0,l.createTextureLayoutFromTextureType)(this.session.layoutStrategy,s.output.dims,s.output.textureType),a=this.createTextureData(o,s.output.type);return r||(r=this.session.programManager.build(s,n,a),this.session.programManager.setArtifact(i,r)),this.runProgram(r,n,a),a}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,n){for(let n=0;n<e.length;++n)if(!!e[n].isPacked!=(t.programInfo.inputTypes[n]===h.TextureType.packed))throw new Error(`input[${n}] property packed inconsistent`);if(!!n.isPacked!=(t.programInfo.output.textureType===h.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)}getOrCreateTextureData(t,e){let n=this.getTextureData(t.dataId,e===h.TextureType.packed);if(!n&&(n=this.getTextureData(t.dataId,e!==h.TextureType.packed),n))return e===h.TextureType.packed?this.pack(n):this.unpack(n);if(!n){const i=(0,l.createTextureLayoutFromTextureType)(this.session.layoutStrategy,t.dims,e);if(e===h.TextureType.packedLastDimension){const n=1,i=4,r=t.dims;if(4===r.length){const s=[r[0],Math.ceil(r[1]*r[2]*r[3]/i)],o=(0,l.createTextureLayoutFromTextureType)(this.session.layoutStrategy,s,e);let a=t.numberData;if(r[1]*r[2]*r[3]%i!=0){const e=r[0],s=r[1]*r[2]*r[3],o=Math.ceil(s*n/i)*i;a=new Float32Array(e*o);for(let i=0;i<e;++i){const e=i*s,r=i*o+i%n*s;a.set(t.numberData.subarray(e,e+s),r)}}return this.createTextureData(o,t.type,a,t,1)}}if(e===h.TextureType.packed){const e=(0,l.createTextureLayoutFromShape)(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),i=this.createTextureData(e,t.type,t.numberData,t,1);n=this.pack(i)}else n=this.createTextureData(i,t.type,t.numberData,t,1)}return n}createTextureDataFromLayoutBindTensor(t,e,n,i){return this.createTextureData(t,e,n,i,1)}createTextureData(t,e,n,r,s){i.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);const o=this.session.textureManager.createTextureFromLayout(e,t,n,s);return this.createTextureDataFromTexture(t,e,o,r)}reshapeUnpacked(t,e){const n=this.getOrCreateTextureData(t,h.TextureType.unpacked),i={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:s.ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(i,t.type,n.texture).tensor}reshapePacked(t,e){const n=this.getOrCreateTextureData(t,h.TextureType.packed);if((0,a.isReshapeCheap)(t.dims,e)){const i={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:s.ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(i,t.type,n.texture).tensor}const i=(0,a.processDims3D)(t.dims),r=(0,a.processDims3D)(e),o=this.reshapePacked(t,i),u=this.run((0,a.createPackedReshape3DProgramInfoLoader)(this,o,r),[o]);return this.reshapePacked(u,e)}cast(t,e){const n=this.getOrCreateTextureData(t,h.TextureType.unpacked);return this.createTextureDataFromTexture(n,e,n.texture).tensor}createTextureDataFromTexture(t,e,n,i,s){const o=Object.assign(Object.assign({},t),{tensor:i||new r.Tensor(t.unpackedShape,e,(t=>this.readTexture(o)),(async t=>this.readTextureAsync(o)),void 0,s),texture:n});return this.setTextureData(o.tensor.dataId,o,t.isPacked),o}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((t=>this.session.textureManager.releaseTexture(t))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((t=>this.session.textureManager.releaseTexture(t))),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,u.encodeAsUint8)(this,t))}async readTextureAsync(t){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,u.encodeAsUint8)(this,t))}pack(t){return this.executeProgram((0,o.createPackProgramInfoLoader)(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram((0,c.createUnpackProgramInfoLoader)(this,t.tensor),[t.tensor])}}},1640:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const o=n(2898),a=s(n(7839)),u=n(4196),c=n(2069),l=n(8138),h=n(9663),d=n(5193),p=n(7992),f=n(1253),g=n(4776),m=n(6572),_=n(3346),y=n(5623),v=n(2870),b=n(2143),w=n(4939),T=n(718),x=n(2268),S=n(8117),I=n(2278),E=n(5524),A=n(5975),k=n(3933),O=n(6558),C=n(5723),D=n(3738),P=s(n(4909)),R=n(8428),N=n(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",P.abs],["Acos","","7+",P.acos],["Add","","7+",a.add],["And","","7+",a.and],["Asin","","7+",P.asin],["Atan","","7+",P.atan],["AveragePool","","7+",b.averagePool,b.parseAveragePoolAttributes],["BatchNormalization","","7+",o.batchNormalization,o.parseBatchNormalizationAttributes],["Cast","","6+",u.cast,u.parseCastAttributes],["Ceil","","6+",P.ceil],["Clip","","6-10",P.clip,P.parseClipAttributes],["Clip","","11+",P.clipV11],["Concat","","4+",c.concat,c.parseConcatAttributes],["Conv","","1+",l.conv,l.parseConvAttributes],["ConvTranspose","","1+",h.convTranspose,h.parseConvTransposeAttributes],["Cos","","7+",P.cos],["Div","","7+",a.div],["Dropout","","7+",P.identity],["DepthToSpace","","1+",d.depthToSpace,d.parseDepthToSpaceAttributes],["Equal","","7+",a.equal],["Elu","","6+",P.elu,P.parseEluAttributes],["Exp","","6+",P.exp],["Flatten","","1+",p.flatten,p.parseFlattenAttributes],["Floor","","6+",P.floor],["FusedConv","com.microsoft","1+",l.conv,l.parseConvAttributes],["Gather","","1+",f.gather,f.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",b.globalAveragePool,b.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",b.globalMaxPool],["Greater","","7+",a.greater],["Identity","","1+",P.identity],["ImageScaler","","1+",m.imageScaler,m.parseImageScalerAttributes],["InstanceNormalization","","6+",_.instanceNormalization,_.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",P.leakyRelu,P.parseLeakyReluAttributes],["Less","","7+",a.less],["Log","","6+",P.log],["MatMul","","1+",y.matMul,y.parseMatMulAttributes],["MaxPool","","1+",b.maxPool,b.parseMaxPoolAttributes],["Mul","","7+",a.mul],["Neg","","6+",P.neg],["Not","","1+",P.not],["Or","","7+",a.or],["Pad","","2-10",v.padV2,v.parsePadAttributesV2],["Pad","","11+",v.padV11,v.parsePadAttributesV11],["Pow","","7+",a.pow],["PRelu","","7+",a.pRelu],["ReduceLogSum","","1+",w.reduceLogSum,w.parseReduceAttributes],["ReduceMax","","1+",w.reduceMax,w.parseReduceAttributes],["ReduceMean","","1+",w.reduceMean,w.parseReduceAttributes],["ReduceMin","","1+",w.reduceMin,w.parseReduceAttributes],["ReduceProd","","1+",w.reduceProd,w.parseReduceAttributes],["ReduceSum","","1-12",w.reduceSum,w.parseReduceAttributes],["ReduceSumSquare","","1+",w.reduceLogSumSquare,w.parseReduceAttributes],["Relu","","6+",P.relu],["Reshape","","5+",T.reshape],["Resize","","10",x.resize,x.parseResizeAttributesV10],["Resize","","11+",x.resize,x.parseResizeAttributesV11],["Shape","","1+",S.shape],["Sigmoid","","6+",P.sigmoid],["Sin","","7+",P.sin],["Slice","","10+",I.sliceV10],["Slice","","1-9",I.slice,I.parseSliceAttributes],["Softmax","","1-12",E.softmax,E.parseSoftmaxAttributes],["Softmax","","13+",E.softmaxV13,E.parseSoftmaxAttributesV13],["Split","","2-12",A.split,A.parseSplitAttributes],["Sqrt","","6+",P.sqrt],["Squeeze","","1-12",k.squeeze,k.parseSqueezeAttributes],["Squeeze","","13+",k.squeezeV13],["Sub","","7+",a.sub],["Sum","","6+",O.sum],["Tan","","7+",P.tan],["Tanh","","6+",P.tanh],["Tile","","6+",C.tile],["Transpose","","1+",D.transpose,D.parseTransposeAttributes],["Upsample","","7-8",N.upsample,N.parseUpsampleAttributesV7],["Upsample","","9",N.upsample,N.parseUpsampleAttributesV9],["Unsqueeze","","1-12",R.unsqueeze,R.parseUnsqueezeAttributes],["Unsqueeze","","13+",R.unsqueezeV13],["Xor","","7+",a.xor]]},2898:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const i=n(246),r=n(5060),s=n(2039),o={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};e.batchNormalization=(t,e,n)=>(u(e),[t.run(Object.assign(Object.assign({},o),{cacheHint:n.cacheKey,get:()=>a(t,e,n)}),e)]),e.parseBatchNormalizationAttributes=t=>{const e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),r=t.attributes.getInt("spatial",1);return(0,i.createAttributeWithCacheKey)({epsilon:e,momentum:n,spatial:r})};const a=(t,e,n)=>{const i=(0,r.getGlsl)(t.session.backend.glContext.version),a=e[0].dims.length,[u,c]=t.calculateTextureWidthAndHeight(e[1].dims,s.TextureType.unpacked),l=`\n  float process(int[${a}] indices) {\n    vec2 position = offsetToCoords(indices[1], ${u}, ${c});\n    float scale = getColorAsFloat(${i.texture2D}(Scale, position));\n    float mean = getColorAsFloat(${i.texture2D}(Mean, position));\n    float variance = getColorAsFloat(${i.texture2D}(Variance, position));\n    float b = getColorAsFloat(${i.texture2D}(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${n.epsilon})) ) + b;\n  }`;return Object.assign(Object.assign({},o),{output:{dims:e[0].dims,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:l})},u=t=>{if(!t||5!==t.length)throw new Error("BatchNormalization requires 5 inputs.");const e=t[0],n=t[1],i=t[2],r=t[3],s=t[4];if(e.dims.length<3||1!==n.dims.length||1!==i.dims.length||1!==r.dims.length||1!==s.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||s.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==i.type&&"float64"!==i.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==s.type&&"float64"!==s.type)throw new Error("invalid input tensor types.")}},7839:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const i=n(2517),r=n(8520),s=n(5060),o=n(2039);function a(){return{body:"\n  float add_(float a, float b) {\n    return a + b;\n  }\n  vec4 add_(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  ",name:"add_",type:r.FunctionType.ValueBased}}function u(){return{body:"\n  float div_(float a, float b) {\n    return a / b;\n  }\n  vec4 div_(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  ",name:"div_",type:r.FunctionType.ValueBased}}function c(){return{body:"\n  float mul_(float a, float b) {\n    return a * b;\n  }\n  vec4 mul_(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  ",name:"mul_",type:r.FunctionType.ValueBased}}function l(){return{body:"\n  float sub_(float a, float b) {\n    return a - b;\n  }\n  vec4 sub_(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  ",name:"sub_",type:r.FunctionType.ValueBased}}function h(){const t="equal_";return{body:`\n  float ${t}(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  `,name:t,type:r.FunctionType.ValueBased}}function d(){const t="greater_";return{body:`\n  float ${t}(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  `,name:t,type:r.FunctionType.ValueBased}}function p(){const t="less_";return{body:`\n  float ${t}(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  `,name:t,type:r.FunctionType.ValueBased}}function f(){return{body:"\n  float and_(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 and_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  ",name:"and_",type:r.FunctionType.ValueBased}}function g(){return{body:"\n  float or_(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 or_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  ",name:"or_",type:r.FunctionType.ValueBased}}function m(){return{body:"\n  float xor_(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 xor_(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  ",name:"xor_",type:r.FunctionType.ValueBased}}function _(){return{body:"\n  float pow_(float a, float b) {\n    return pow(a, b);\n  }\n  vec4 pow_(vec4 v1, vec4 v2) {\n    return pow(v1, v2);\n  }\n  ",name:"pow_",type:r.FunctionType.ValueBased}}function y(){const t="prelu_";return{body:`\n  float ${t}(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ${t}(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  `,name:t,type:r.FunctionType.ValueBased}}e.glslAdd=a,e.glslDiv=u,e.glslMul=c,e.glslSub=l,e.glslEqual=h,e.glslGreater=d,e.glslLess=p,e.glslAnd=f,e.glslOr=g,e.glslXor=m,e.glslPow=_,e.glslPRelu=y;const v=(t,e,n,i=e[0].type,r)=>{const s=t.session.pack?o.TextureType.packed:o.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],cacheHint:r,get:()=>b(t,e,n,i)}},b=(t,e,n,r=e[0].type)=>{const a=t.session.pack?o.TextureType.packed:o.TextureType.unpacked,u=!i.ShapeUtil.areEqual(e[0].dims,e[1].dims);let c=e[0].dims;const l=t.session.pack;if(u){const o=i.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!o)throw new Error("Can't perform binary op on the given tensors");c=o;const u=c.length,h=0!==e[0].dims.length?e[0].dims.length:1,d=0!==e[1].dims.length?e[1].dims.length:1,p=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",f=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",g=(0,s.getGlsl)(t.session.backend.glContext.version),m=l?`\n      ${n.body}\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ${n.name}(a, b);\n        ${g.output} = result;\n      }`:`\n      ${n.body}\n      float process(int indices[${u}]) {\n        int aindices[${h}];\n        int bindices[${d}];\n        ${p}\n        ${f}\n        return ${n.name}(_A(aindices), _B(bindices));\n      }`;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],output:{dims:c,type:r,textureType:a},shaderSource:m,hasMain:l}}const h=(0,s.getGlsl)(t.session.backend.glContext.version),d=`\n    ${n.body}\n    void main() {\n      vec4 v1 = ${h.texture2D}(A, TexCoords);\n      vec4 v2 = ${h.texture2D}(B, TexCoords);\n      vec4 result = ${n.name}(v1, v2);\n      ${h.output} = result;\n    }\n    `;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],output:{dims:e[0].dims,type:r,textureType:a},shaderSource:d,hasMain:!0}};e.add=(t,e)=>[t.run(v(t,e,a()),e)],e.and=(t,e)=>[t.run(v(t,e,f(),"bool"),e)],e.div=(t,e)=>[t.run(v(t,e,u()),e)],e.equal=(t,e)=>[t.run(v(t,e,h(),"bool"),e)],e.greater=(t,e)=>[t.run(v(t,e,d(),"bool"),e)],e.less=(t,e)=>[t.run(v(t,e,p(),"bool"),e)],e.mul=(t,e)=>[t.run(v(t,e,c()),e)],e.or=(t,e)=>[t.run(v(t,e,g(),"bool"),e)],e.pow=(t,e)=>[t.run(v(t,e,_()),e)],e.pRelu=(t,e)=>[t.run(v(t,e,y()),e)],e.sub=(t,e)=>[t.run(v(t,e,l()),e)],e.xor=(t,e)=>[t.run(v(t,e,m(),"bool"),e)]},4196:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const i=n(2517);e.cast=(t,e,n)=>(r(e),[t.cast(e[0],n)]),e.parseCastAttributes=t=>i.ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to"));const r=t=>{if(!t||1!==t.length)throw new Error("Cast requires 1 input.");if("string"===t[0].type)throw new Error("Invalid input type.")}},1163:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const i=n(5060),r=n(2039),s=n(9390),o=n(2827);e.createPackedConcatProgramInfoLoader=(t,e,n)=>{const u=(c=e.length,l=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},((t,e)=>`X${e}`)),inputTypes:Array(c).fill(r.TextureType.packed),cacheHint:l});var c,l;return Object.assign(Object.assign({},u),{get:()=>((t,e,n,u)=>{const c=n[0].dims.slice();if(u>=c.length||u<-1*c.length)throw new Error("axis specified for concat doesn't match input dimensionality");u<0&&(u=c.length+u);const l=c.slice(0);for(let t=1;t<n.length;t++){const e=n[t].dims.slice();for(let t=0;t<c.length;t++)if(t===u)l[u]+=e[t];else if(c[t]!==e[t])throw new Error("non concat dimensions must match")}const h=l.length,d=(0,o.getChannels)("coords",h),p=(0,s.getCoordsDataType)(h),f=(0,o.unpackFromChannel)(),g=n.map((t=>t.dims)),m=(0,s.getGlChannels)(h),_=new Array(g.length-1);_[0]=g[0][u];for(let t=1;t<_.length;t++)_[t]=_[t-1]+g[t][u];const y=m[u],v=m.slice(-2),b=m.join();let w=`if (${y} < ${_[0]}) {\n        return getChannel(\n            getX0(${b}), vec2(${v.join()}));\n        }`;for(let t=1;t<_.length;t++){const e=_[t-1];w+=`\n            if (${y} < ${_[t]}  && ${y} >= ${_[t-1]}) {\n              return getChannel(\n                getX${t}(${a(m,y,e)}),\n                vec2(${a(v,y,e)}));\n            }`}const T=_.length,x=_[_.length-1];w+=`\n            return getChannel(\n              getX${T}(${a(m,y,x)}),\n              vec2(${a(v,y,x)}));`;const S=(0,i.getGlsl)(t.session.backend.glContext.version),I=`\n          ${f}\n          float getValue(${m.map((t=>"int "+t))}) {\n            ${w}\n          }\n\n          void main() {\n            ${p} coords = getOutputCoords();\n            int lastDim = coords.${m[h-1]};\n            coords.${m[h-1]} = coords.${m[h-2]};\n            coords.${m[h-2]} = lastDim;\n\n            vec4 result = vec4(getValue(${d}), 0., 0., 0.);\n\n            ${d[h-1]} = ${d[h-1]} + 1;\n            if (${d[h-1]} < ${l[h-1]}) {\n              result.g = getValue(${d});\n            }\n\n            ${d[h-2]} = ${d[h-2]} + 1;\n            if (${d[h-2]} < ${l[h-2]}) {\n              result.a = getValue(${d});\n            }\n\n            ${d[h-1]} = ${d[h-1]} - 1;\n            if (${d[h-2]} < ${l[h-2]} &&\n                ${d[h-1]} < ${l[h-1]}) {\n              result.b = getValue(${d});\n            }\n            ${S.output} = result;\n          }\n        `;return Object.assign(Object.assign({},e),{output:{dims:l,type:n[0].type,textureType:r.TextureType.packed},shaderSource:I,hasMain:!0})})(t,u,e,n.axis)})};const a=(t,e,n)=>{const i=t.indexOf(e);return t.map(((t,e)=>e===i?`${t} - ${n}`:t)).join()}},2069:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const i=n(246),r=n(2039),s=n(1163);e.concat=(t,e,n)=>(h(e),t.session.pack&&e[0].dims.length>1?[t.run((0,s.createPackedConcatProgramInfoLoader)(t,e,n),e)]:[t.run(o(t,e,n),e)]);const o=(t,e,n)=>{const i=(s=e.length,o=n.cacheKey,{name:"Concat",inputNames:Array.from({length:s},((t,e)=>`X${e}`)),inputTypes:Array(s).fill(r.TextureType.unpacked),cacheHint:o});var s,o;return Object.assign(Object.assign({},i),{get:()=>((t,e,n,i)=>{const s=n[0].dims.slice();if(i>=s.length||i<-1*s.length)throw new Error("axis specified for concat doesn't match input dimensionality");i<0&&(i=s.length+i);const o=s.slice(0);for(let t=1;t<n.length;t++){const e=n[t].dims.slice();for(let t=0;t<s.length;t++)if(t===i)o[i]+=e[t];else if(s[t]!==e[t])throw new Error("non concat dimensions must match")}const h=o.length,d=new Array(n.length);let p=0;for(let t=0;t<d.length;++t)p+=n[t].dims[i],d[t]=p;let f="";f=n.length<5?a(d):u(d);const g=`\n        ${c(n.length,h)}\n        ${l(d)}\n        ${f}\n        float process(int indices[${h}]) {\n          int textureIndex = getTextureWhereDataResides (indices[${i}]);\n\n          if(textureIndex != 0) {\n            indices[${i}] = indices[${i}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }`;return Object.assign(Object.assign({},e),{output:{dims:o,type:n[0].type,textureType:r.TextureType.unpacked},shaderSource:g})})(0,i,e,n.axis)})},a=t=>`int getTextureWhereDataResides(int index) {\n      ${t.map(((t,e)=>`if(index<${t}) {return ${e};}\n`)).join("")}\n    }`,u=t=>a(t),c=(t,e)=>{const n=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let e=0;e<t;++e)0===e?n.push(`\tif (textureIndex == ${e}) { return _X${e}(indices); }`):e===t-1?n.push(`\telse { return _X${e}(indices); }`):n.push(`\telse if (textureIndex == ${e}) { return _X${e}(indices); }`);return n.push("\t}"),n.join("\n")},l=t=>{const e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let n=0;n<t.length;++n)0===n?e.push(`\tif (index == ${n}) { return ${t[n]}; }`):n===t.length-1?e.push(`\telse { return ${t[n]}; }`):e.push(`\telse if (index == ${n}) { return ${t[n]}; }`);return e.push("\t}"),e.join("\n")};e.parseConcatAttributes=t=>(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis")});const h=t=>{if(!t||t.length<1)throw new Error("too few inputs");const e=t[0].type,n=t[0].dims.length;if("string"===e)throw new Error("string tensor is not supported yet");for(const i of t){if(i.type!==e)throw new Error("input tensors should be one type");if(i.dims.length!==n)throw new Error("input tensors should have the same shape")}}},4770:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const i=n(6231),r=n(5060),s=n(2039),o=n(8138),a=n(2823);e.createUnpackedGroupedConvProgramInfoLoader=(t,e,n)=>{const u=(c=e.length>2,l=n.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:l});var c,l;return Object.assign(Object.assign({},u),{get:()=>((t,e,n,u)=>{const c=e.length>2?"value += getBias(output_channel);":"",l=e[0].dims.slice(),h=e[1].dims.slice(),d=h[0]/u.group;i.Logger.verbose("GroupedConv",`autpPad:${u.autoPad}, dilations:${u.dilations}, group:${u.group}, kernelShape:${u.kernelShape}, pads:${u.pads}, strides:${u.strides}`);const p=(0,o.calculateOutputShape)(l,h,u.dilations,u.pads,u.strides),f=(0,r.getGlsl)(t.session.backend.glContext.version),{activationFunction:g,applyActivation:m}=(0,a.getActivationSnippet)(u),_=`\n  const ivec2 strides = ivec2(${u.strides[0]}, ${u.strides[1]});\n  const ivec2 pads = ivec2(${u.pads[0]}, ${u.pads[1]});\n  ${g}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ${d};\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ${h[1]}; wInChannel++) {\n      int input_channel = group_id * ${h[1]} + wInChannel;\n      for (int wHeight = 0; wHeight < ${h[2]}; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ${u.dilations[0]};\n\n        if (xHeight < 0 || xHeight >= ${l[2]}) {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ${h[3]}; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ${u.dilations[1]};\n          if (xWidth < 0 || xWidth >= ${l[3]}) {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${c}\n    ${m}\n    ${f.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},n),{output:{dims:p,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:_,hasMain:!0})})(t,e,u,n)})}},1386:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const i=n(8138),r=n(8555),s=n(708);e.conv2DPackedPointwise=(t,e,n)=>{const r=e[0].dims,o=e[1].dims,a=(0,i.calculateOutputShape)(r,o,n.dilations,n.pads,n.strides),u=t.reshapePacked(e[0],[r[1],r[2]*r[3]]),c=t.reshapePacked(e[1],[o[0],o[1]]),l=e.length>2?[c,u,e[2]]:[c,u],h=t.run((0,s.createPackedMatmulProgramInfoLoader)(t,l,n),l);return t.reshapePacked(h,a)},e.conv2DPacked=(t,e,n)=>{const o=e[0].dims,a=e[1].dims,u=(0,i.calculateOutputShape)(o,a,n.dilations,n.pads,n.strides),c=t.run((0,r.createPackedIm2ColProgramInfoLoader)(t,e[0],e[1],u,n),[e[0]]),l=t.reshapePacked(e[1],[a[0],a[1]*a[2]*a[3]]),h=3===e.length?[l,c,e[2]]:[l,c],d=t.run((0,s.createPackedMatmulProgramInfoLoader)(t,h,n),h);return t.reshapePacked(d,u)}},9663:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const i=n(246),r=n(5060),s=n(2039),o=n(2823),a=(t,e,n,i,r,s)=>(t-1)*e+n+(i-1)*r+1-s,u=(t,e,n,i,r)=>{const s=Math.floor(t/2);"SAME_UPPER"===e?(n[i]=s,n[r]=t-s):"SAME_LOWER"===e&&(n[i]=t-s,n[r]=s)};e.convTranspose=(t,e,n)=>(d(e,n),c(t,e,n));const c=(t,e,n)=>{const i=h(n,e);return[l(t,e,i)]},l=(t,e,n)=>t.run(((t,e,n)=>{const i=(a=e.length>2,u=n.cacheKey,{name:"ConvTranspose",inputNames:a?["X","W","B"]:["X","W"],inputTypes:a?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],cacheHint:u});var a,u;return Object.assign(Object.assign({},i),{get:()=>((t,e,n,i)=>{const a=e.length>2?"getB(output_channel)":"0.0",u=e[0].dims,c=e[1].dims,l=c[1],h=c[0]/i.group,d=[e[0].dims[0],e[1].dims[1]*i.group,...i.outputShape],p=(0,r.getGlsl)(t.session.backend.glContext.version),{activationFunction:f,applyActivation:g}=(0,o.getActivationSnippet)(i),m=`\n  const ivec2 strides = ivec2(${i.strides[0]}, ${i.strides[1]});\n  const ivec2 pads = ivec2(${i.pads[0]}, ${i.pads[1]});\n  ${f}\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ${l};\n    int wOutChannel = output_channel - group_id * ${l};\n\n    float value = ${a};\n    for (int inChannelOffset = 0; inChannelOffset < ${h}; inChannelOffset++) {\n      int input_channel = group_id * ${h} + inChannelOffset;\n      for (int wWOff = 0; wWOff < ${c[2]}; wWOff++) {\n        for (int wHOff = 0; wHOff < ${c[3]}; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ${i.dilations[0]}, wHOff * ${i.dilations[1]});\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ${u[2]} &&\n            wLocIn.y >= 0 && wLocIn.y < ${u[3]}\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ${g}\n    ${p.output} = vec4(value, .0, .0, .0);\n  }\n`;return Object.assign(Object.assign({},n),{output:{dims:d,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:m,hasMain:!0})})(t,e,i,n)})})(t,e,n),e),h=(t,e)=>{const n=t.kernelShape.slice();if(0===t.kernelShape.length)for(let t=2;t<e[1].dims.length;++t)n.push(e[1].dims[t]);const i=t.pads.slice(),r=t.outputShape.slice();((t,e,n,i,r,s,o,c)=>{const l=t.length-2,h=0===c.length;for(let d=0;d<l;++d){const p=h?t[d+2]*s[d]:c[d],f=a(t[d+2],s[d],r[d],e[d],n[d],p);u(f,i,r,d,d+l),h&&c.push(s[d]*(t[d+2]-1)+o[d]+(e[d]-1)*n[d]+1-r[d]-r[d+l])}})(e[0].dims,n,t.dilations,t.autoPad,i,t.strides,t.outputPadding,r);const s=Object.assign({},t);return Object.assign(s,{kernelShape:n,pads:i,outputShape:r,cacheKey:t.cacheKey}),s};e.parseConvTransposeAttributes=t=>{const e=t.attributes,n=(0,o.parseInternalActivationAttributes)(e),r=e.getString("auto_pad","NOTSET"),s=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),c=e.getInts("output_padding",[0,0]),l=e.getInts("output_shape",[]),h=e.getInts("pads",[0,0,0,0]),d=e.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(Object.assign({autoPad:r,dilations:s,group:a,kernelShape:u,outputPadding:c,outputShape:l,pads:h,strides:d},n))};const d=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");const i=t[0].dims.length-2;if(e.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(e.strides.length!==i)throw new Error(`strides should be ${i}D`);if(e.pads.length!==2*i)throw new Error(`pads should be ${2*i}D`);if(e.outputPadding.length!==i)throw new Error(`output_padding should be ${i}D`);if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const i=n(246),r=n(2517),s=n(4770),o=n(1386),a=n(9828),u=n(2823),c=n(3248),l=n(5623);e.calculateOutputShape=(t,e,n,i,r)=>{const s=t[0],o=t.slice(2),a=o.length,u=e[0],c=e.slice(2).map(((t,e)=>t+(t-1)*(n[e]-1))),l=o.map(((t,e)=>t+i[e]+i[e+a])).map(((t,e)=>Math.floor((t-c[e]+r[e])/r[e])));return[s,u].concat(...l)},e.conv=(t,e,n)=>(g(e,n),h(t,e,n));const h=(t,e,n)=>{const i=f(n,e),r=t.session.pack,a=1===i.kernelShape[0]&&1===i.kernelShape[1];return i.group>1?[t.run((0,s.createUnpackedGroupedConvProgramInfoLoader)(t,e,i),e)]:a&&r?[d(t,e,i)]:r&&4===e[0].dims.length&&1===e[0].dims[0]&&!a?[(0,o.conv2DPacked)(t,e,i)]:[p(t,e,i)]},d=(t,n,i)=>{const r=n[0].dims,s=n[1].dims,o=(0,e.calculateOutputShape)(r,s,i.dilations,i.pads,i.strides),a=t.reshapeUnpacked(n[0],[r[1],r[2]*r[3]]),u=t.reshapeUnpacked(n[1],[s[0],s[1]]),c=n.length>2?[u,a,n[2]]:[u,a],h=t.run((0,l.createMatmulProgramInfoLoader)(c,i),c);return t.reshapeUnpacked(h,o)},p=(t,n,i)=>{const r=n[0].dims,s=n[1].dims,o=(0,e.calculateOutputShape)(r,s,i.dilations,i.pads,i.strides),u=t.run((0,c.createIm2ColProgramInfoLoader)(t,n[0],n[1],o,i),[n[0]]),l=3===n.length?[u,n[1],n[2]]:[u,n[1]];return t.run((0,a.createDotProductProgramInfoLoader)(t,n,o,i),l)},f=(t,e)=>{const n=t.kernelShape.slice();if(0===t.kernelShape.length)for(let t=2;t<e[1].dims.length;++t)n.push(e[1].dims[t]);const i=t.pads.slice();r.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,i,t.autoPad);const s=Object.assign({},t);return Object.assign(s,{kernelShape:n,pads:i,cacheKey:t.cacheKey}),s};e.parseConvAttributes=t=>{const e=t.attributes,n=(0,u.parseInternalActivationAttributes)(e),r=e.getString("auto_pad","NOTSET"),s=e.getInts("dilations",[1,1]),o=e.getInt("group",1),a=e.getInts("kernel_shape",[]),c=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(Object.assign({autoPad:r,dilations:s,group:o,kernelShape:a,pads:c,strides:l},n))};const g=(t,e)=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");const n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error(`dilations should be ${n}D`);if(e.strides.length!==n)throw new Error(`strides should be ${n}D`);if(e.pads.length!==2*n)throw new Error(`pads should be ${2*n}D`);if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("Conv input(bias) should be float tensor")}},5193:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const i=n(3738);e.depthToSpace=(t,e,n)=>{r(e);const s=n.blocksize,o=s*s,a="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],u="DCR"===n.mode?[e[0].dims[0],s,s,e[0].dims[1]/o,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/o,s,s,e[0].dims[2],e[0].dims[3]],c=t.reshapeUnpacked(e[0],u),l={perm:a,cacheKey:`${a}`},[h]=(0,i.transpose)(t,[c],l),d=[e[0].dims[0],e[0].dims[1]/o,e[0].dims[2]*s,e[0].dims[3]*s];return[t.reshapeUnpacked(h,d)]},e.parseDepthToSpaceAttributes=t=>{const e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);const n=t.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error(`unrecognized mode: ${n} for DepthToSpace`);return{mode:n,blocksize:e}};const r=t=>{if(1!==t.length)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if("string"===t[0].type||4!==t[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const i=n(2517),r=n(5060),s=n(2039),o=n(2823),a=n(3248);e.createDotProductProgramInfoLoader=(t,e,n,u)=>{const c=((t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[s.TextureType.unpacked,s.TextureType.packedLastDimension,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.packedLastDimension],cacheKey:e.activationCacheKey}))(e.length>2,u);return Object.assign(Object.assign({},c),{get:()=>((t,e,n,u,c)=>{const l=n[0].dims,h=n[1].dims,d=[h[0],Math.ceil(l[1]*h[2]*h[3]/4)],p=(0,a.calculateIm2ColDims)(l,h,u),[f,g]=t.calculateTextureWidthAndHeight(d,s.TextureType.packedLastDimension),m=i.ShapeUtil.computeStrides(p),[_,y]=t.calculateTextureWidthAndHeight(p,s.TextureType.packedLastDimension),v=u.length,b=n.length<3?"0.0":"_B(b)",w=Math.ceil(l[1]*h[2]*h[3]/4),{activationFunction:T,applyActivation:x}=(0,o.getActivationSnippet)(c),S=(0,r.getGlsl)(t.session.backend.glContext.version),I=`\n${T}\nfloat process(int indices[${v}]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ${m[0]} + im2col[1] * ${m[1]} + im2col[2] * ${m[2]};\n  int kernelOffset = indices[1] * ${d[1]};\n  float value = ${b};\n  for (int i = 0; i < ${w}; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ${_}, ${y});\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ${f}, ${g});\n    value += dot(${S.texture2D}(Im2Col, im2colCoords), ${S.texture2D}(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ${x}\n  return value;\n}`;return Object.assign(Object.assign({},e),{output:{dims:u,type:n[0].type,textureType:s.TextureType.unpacked},shaderSource:I})})(t,c,e,n,u)})}},7992:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const i=n(2517);e.flatten=(t,e,n)=>{r(e,n);const s=i.ShapeUtil.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],s)]},e.parseFlattenAttributes=t=>t.attributes.getInt("axis",1);const r=(t,e)=>{if(!t||1!==t.length)throw new Error("Flatten requires 1 input.");const n=t[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if("string"===t[0].type)throw new Error("string tensor is not supported.")}},2823:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const i=n(2517),r=n(4909);e.getActivationSnippet=function(t){let e;switch(t.activation){case"Relu":e=(0,r.glslRelu)();break;case"Sigmoid":e=(0,r.glslSigmoid)();break;case"Clip":e=(0,r.glslClip)(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const n=e.name;return{activationFunction:e.body,applyActivation:`value = ${n}_(value);`}},e.parseInternalActivationAttributes=t=>{const e=t.getString("activation","");if("Clip"===e){const[n,r]=t.getFloats("activation_params",[i.MIN_CLIP,i.MAX_CLIP]);return{activation:e,clipMax:r,clipMin:n,activationCacheKey:`${e}:${n},${r}`}}return{activation:e,activationCacheKey:e}}},1253:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const i=n(246),r=n(782),s=n(2517),o=n(2039);e.gather=(t,e,n)=>(c(e,n.axis),[t.run(u(t,e,n),e)]),e.parseGatherAttributes=t=>(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",0)});const a={name:"Gather",inputNames:["A","B"],inputTypes:[o.TextureType.unpacked,o.TextureType.unpacked]},u=(t,e,n)=>{const i=Object.assign(Object.assign({},a),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},i),{get:()=>((t,e,n,i)=>{const r=n[0].dims.slice(),a=n[1].dims.slice(),u=new Array(r.length+a.length-1);i=s.ShapeUtil.normalizeAxis(i,r.length);const c=[];for(let t=0;t<u.length;t++)t<i?(u[t]=r[t],c.push(`inputIdx[${t}] = outputIdx[${t}];`)):t<i+a.length?(u[t]=a[t-i],c.push(`indexDataIdx[${t-i}] = outputIdx[${t}];`)):(u[t]=r[t-a.length+1],c.push(`inputIdx[${t-a.length+1}] = outputIdx[${t}];`));const l=`\n      float process(int outputIdx[${u.length||1}]) {\n        int inputIdx[${r.length}];\n        int indexDataIdx[${a.length||1}];\n        indexDataIdx[0] = 0;\n        ${c.join("\n        ")}\n        int idx = int(_B(indexDataIdx));\n        inputIdx[${i}] = idx < 0 ? idx + ${r[i]} : idx;\n        return _A(inputIdx);\n      }`;return Object.assign(Object.assign({},e),{output:{dims:u,type:n[0].type,textureType:o.TextureType.unpacked},shaderSource:l})})(0,i,e,n.axis)})},c=(t,e)=>{if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.");const n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(-1===r.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invaid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invaid input type.")}},4776:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const i=n(246),r=n(2517),s=n(2039);e.gemm=(t,e,n)=>(c(e,n),[t.run(a(e,n),e)]);const o=(t,e)=>{const n=0!==t.attributes.getInt("transA",0),r=0!==t.attributes.getInt("transB",0),s=t.attributes.getFloat("alpha",1),o=t.attributes.getFloat("beta",1);return(0,i.createAttributeWithCacheKey)({transA:n,transB:r,alpha:s,beta:o,isOptionalC:e})};e.parseGemmAttributesV7=t=>o(t,!1),e.parseGemmAttributesV11=t=>o(t,!0);const a=(t,e)=>{const n={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],key:e.cacheKey};return Object.assign(Object.assign({},n),{get:()=>u(n,t,e)})},u=(t,e,n)=>{const i=e[0].dims.slice(),o=e[1].dims.slice(),[a,u]=r.GemmUtil.getShapeOfGemmResult(i,n.transA,o,n.transB,3===e.length?e[2].dims:void 0),c=[a,u];if(!c)throw new Error("Can't use gemm on the given tensors");let l=i[i.length-1],h="";n.transA&&(l=i[0]),n.transA&&n.transB?h="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?h="value += _A_T(a) * _B(b);":!n.transA&&n.transB?h="value += _A(a) * _B_T(b);":n.transA||n.transB||(h="value += _A(a) * _B(b);");const d=c.length,p=`\n      float process(int indices[${d}]) {\n          int a[${d}];\n          int b[${d}];\n          ${3===e.length?`int c[${e[2].dims.length}];`:""}\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ${3===e.length?"bcastIndices_C(indices, c);":""}\n\n          float value = 0.0;\n          for (int k=0; k<${l}; ++k) {\n              a[${d-1}] = k;\n              b[${d-2}] = k;\n              ${h}\n          }\n\n          value = value * alpha;\n          ${3===e.length?"value += beta * _C(c);":""}\n          return value;\n      }`;return Object.assign(Object.assign({},t),{output:{dims:c,type:e[0].type,textureType:s.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:p})},c=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw new Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw new Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}},8555:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const i=n(5060),r=n(2039),s=n(2827);e.createPackedIm2ColProgramInfoLoader=(t,e,n,o,a)=>{const u=(c=a.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[r.TextureType.packed],cacheHint:c});var c;return Object.assign(Object.assign({},u),{get:()=>((t,e,n,o,a,u)=>{const c=n.dims,l=o.dims,h=a.length,d=[l[1]*l[2]*l[3],a[2]*a[3]],p=l[2]*l[3],f=(0,s.unpackFromChannel)(),g=(0,i.getGlsl)(t.session.backend.glContext.version);let m="";for(let t=0;t<=1;t++)for(let e=0;e<=1;e++)m+=`\n            blockIndex = rc.x + ${e};\n            pos = rc.y + ${t};\n\n            if(blockIndex < ${d[1]} && pos < ${d[0]}) {\n              offsetY = int(blockIndex / (${a[h-1]})) * ${u.strides[0]} -\n                ${u.pads[0]};\n              d0 = offsetY + ${u.dilations[0]} * (imod(pos, ${p}) / ${l[2]});\n\n              if(d0 < ${c[2]} && d0 >= 0) {\n                offsetX = imod(blockIndex, ${a[h-1]}) * ${u.strides[1]} -\n                  ${u.pads[1]};\n                d1 = offsetX + ${u.dilations[1]} * imod(imod(pos, ${p}), ${l[2]});\n\n                if(d1 < ${c[3]} && d1 >= 0) {\n\n                  ch = int(float(pos)/ ${p}.);\n                    innerDims = vec2(d0, d1);\n                    result[${2*t+e}] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          `;const _=`\n      ${f}\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ${m}\n          ${g.output} = result;\n      }\n            `;return Object.assign(Object.assign({},e),{output:{dims:d,type:n.type,textureType:r.TextureType.packed},shaderSource:_,hasMain:!0})})(t,u,e,n,o,a)})}},3248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const i=n(2039);e.createIm2ColProgramInfoLoader=(t,n,r,s,o)=>{const a=(u=o.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[i.TextureType.unpacked],cacheHint:u});var u;return Object.assign(Object.assign({},a),{get:()=>((t,n,r,s,o,a)=>{const u=r.dims,c=s.dims,l=o.length,h=(0,e.calculateIm2ColDims)(u,c,o,4),d=`\n        const int XC = ${u[1]};\n        const int XH = ${u[2]};\n        const int XW = ${u[3]};\n        const int KH = ${a.kernelShape[0]};\n        const int KW = ${a.kernelShape[1]};\n        const int dilationH = ${a.dilations[0]};\n        const int dilationW = ${a.dilations[1]};\n        const int strideH = ${a.strides[0]};\n        const int strideW = ${a.strides[1]};\n        const int padH = ${a.pads[0]};\n        const int padW = ${a.pads[1]};\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[${l}]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[${u.length}];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        `;return Object.assign(Object.assign({},n),{output:{dims:h,type:r.type,textureType:i.TextureType.packedLastDimension},shaderSource:d})})(0,a,n,r,s,o)})},e.calculateIm2ColDims=(t,e,n,i=4)=>[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/i)]},6572:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const i=n(246),r=n(2039);e.imageScaler=(t,e,n)=>(u(e),[t.run(o(t,e,n),e)]),e.parseImageScalerAttributes=t=>{const e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return(0,i.createAttributeWithCacheKey)({scale:e,bias:n})};const s={name:"ImageScaler",inputNames:["X"],inputTypes:[r.TextureType.unpacked]},o=(t,e,n)=>{const i=Object.assign(Object.assign({},s),{cacheHint:n.cacheKey});return Object.assign(Object.assign({},i),{get:()=>((t,e,n,i)=>{const s=n[0].dims.slice(),o=s.length,u=`\n      ${a(i.bias.length)}\n      float process(int indices[${o}]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }`;return Object.assign(Object.assign({},e),{output:{dims:s,type:n[0].type,textureType:r.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:i.bias.length,data:i.bias},{name:"scale",type:"float",data:i.scale}],shaderSource:u})})(0,i,e,n)})},a=t=>{const e=[`float getBias(float bias[${t}], int channel) {`];for(let n=0;n<t;++n)0===n?e.push(`\tif (channel == ${n}) { return bias[${n}]; }`):n===t-1?e.push(`\telse { return bias[${n}]; }`):e.push(`\telse if (channel == ${n}) { return bias[${n}]; }`);return e.push("\t}"),e.join("\n")},u=t=>{if(!t||1!==t.length)throw new Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")}},3346:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const i=n(5060),r=n(2039);e.instanceNormalization=(t,e,n)=>{c(e);const i=t.run(o(e[0]),e);return[t.run(u(t,e[0],n,i.dims),[e[0],i,e[1],e[2]])]},e.parseInstanceNormalizationAttributes=t=>t.attributes.getFloat("epsilon",1e-5);const s={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[r.TextureType.unpacked]},o=t=>Object.assign(Object.assign({},s),{get:()=>((t,e)=>{const n=e.dims.slice(),i=n[1],s=n[2]*n[3],o=[n[0],i],a=`\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<${n[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${n[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(${s});\n        temp = 0.0;\n        for(int a2=0; a2<${n[2]}; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<${n[3]}; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(${s});\n\n        return v;\n      }`;return Object.assign(Object.assign({},t),{output:{dims:o,type:e.type,textureType:r.TextureType.packedLastDimension},shaderSource:a})})(s,t)}),a={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[r.TextureType.unpacked,r.TextureType.packedLastDimension,r.TextureType.unpacked,r.TextureType.unpacked]},u=(t,e,n,s)=>{const o=Object.assign(Object.assign({},a),{cacheHint:`${n}`});return Object.assign(Object.assign({},o),{get:()=>((t,e,n,s,o)=>{const a=(0,i.getGlsl)(t.session.backend.glContext.version),[u,c]=t.calculateTextureWidthAndHeight(o,r.TextureType.packedLastDimension),[l,h]=[u/4,c],d=`\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ${l}, ${h});\n        return ${a.texture2D}(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }`;return Object.assign(Object.assign({},e),{output:{dims:n.dims,type:n.type,textureType:r.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:s}],shaderSource:d})})(t,o,e,n,s)})},c=t=>{if(!t||3!==t.length)throw new Error("InstanceNormalization requires 3 inputs.");const e=t[0],n=t[1],i=t[2];if(e.dims.length<3||1!==n.dims.length||1!==i.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==i.type&&"float64"!==i.type)throw new Error("Invalid input type.");if(4!==t[0].dims.length)throw new Error("Only support 4-D input shape.")}},708:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const i=n(2517),r=n(5060),s=n(2039),o=n(9390),a=n(2823),u=n(5623);e.createPackedMatmulProgramInfoLoader=(t,e,n)=>{const c=(l=e.length>2,h=n.activationCacheKey,{name:"MatMul (packed)",inputNames:l?["A","B","Bias"]:["A","B"],inputTypes:l?[s.TextureType.packed,s.TextureType.packed,s.TextureType.packed]:[s.TextureType.packed,s.TextureType.packed],cacheHint:h});var l,h;return Object.assign(Object.assign({},c),{get:()=>((t,e,n,c)=>{const l=n.length>2,h=l?"value += getBiasForMatmul();":"",d=n[0].dims,p=n[1].dims,f=i.BroadcastUtil.calcShape(d,p,!0),g=!i.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!f)throw new Error("Can't use matmul on the given tensors");const m=d[d.length-1],_=Math.ceil(m/2),y=d.length,v=p.length,b=(0,r.getGlsl)(t.session.backend.glContext.version),w=(0,o.getCoordsDataType)(f.length),T=f.length,x=(0,o.getGlChannels)(),{activationFunction:S,applyActivation:I}=(0,a.getActivationSnippet)(c),E=l?`${(0,u.getBiasForMatmul)(w,x,n[2].dims,f,!0)}`:"",A=g?`${function(t,e,n,r){let s=[],o=[];const a=n[0].dims,u=n[1].dims,c=a.length,l=u.length,h=r.length,d=h-c,p=h-l;s=a.map(((t,n)=>`coords.${e[n+d]}`)),s[c-1]="i*2",s.join(", "),o=u.map(((t,n)=>`coords.${e[n+p]}`)),o[l-2]="i*2",o.join(", ");const f=i.BroadcastUtil.getBroadcastDims(a,r),g=i.BroadcastUtil.getBroadcastDims(u,r),m=f.map((t=>`coords.${e[t+d]} = 0;`)).join("\n"),_=g.map((t=>`coords.${e[t+p]} = 0;`)).join("\n"),y=`int lastDim = coords.${e[h-1]};\n  coords.${e[h-1]} = coords.${e[h-2]};\n  coords.${e[h-2]} = lastDim;`;return`\nvec4 getAAtOutCoordsMatmul(int i) {\n  ${t} coords = getOutputCoords();\n  ${y}\n  ${m}\n  vec4 outputValue = getA(${s});\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ${t} coords = getOutputCoords();\n  ${y}\n  ${_}\n  vec4 outputValue = getB(${o});\n  return outputValue;\n}`}(w,x,n,f)}`:"",k=g?"getAAtOutCoordsMatmul(i)":`getA(${function(t,e){let n="";for(let i=0;i<e-2;i++)n+=`rc.${t[i]}, `;return n+=`rc.${t[e-2]}, i*2`,n}(x,y)})`,O=g?"getBAtOutCoordsMatmul(i)":`getB(${function(t,e){let n="";for(let i=0;i<e-2;i++)n+=`rc.${t[i]}, `;return n+=`i*2, rc.${t[e-1]}`,n}(x,v)})`,C=`\n            ${A}\n            ${E}\n            ${S}\n            void main() {\n              ${g?"":`${w} rc =\n          getOutputCoords(); int lastDim = rc.${x[T-1]}; rc.${x[T-1]} =\n          rc.${x[T-2]}; rc.${x[T-2]} = lastDim;\n      `}\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ${_}; i++) {\n                vec4 a = ${k};\n                vec4 b = ${O};\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ${h}\n              ${I}\n              ${b.output} = value;\n            }`;return Object.assign(Object.assign({},e),{output:{dims:f,type:n[0].type,textureType:s.TextureType.packed},shaderSource:C,hasMain:!0})})(t,c,e,n)})}},5623:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const i=n(2517),r=n(2039),s=n(9390),o=n(2823),a=n(708);function u(t,e){const n=(a=t.length>2,u=e.activationCacheKey,{name:"MatMul",inputNames:a?["A","B","Bias"]:["A","B"],inputTypes:a?[r.TextureType.unpacked,r.TextureType.unpacked,r.TextureType.unpacked]:[r.TextureType.unpacked,r.TextureType.unpacked],cacheHint:u});var a,u;return Object.assign(Object.assign({},n),{get:()=>function(t,e,n){const a=e[0].dims,u=e[1].dims,c=i.BroadcastUtil.calcShape(a,u,!0);if(!c)throw new Error("Can't use matmul on the given tensors");const h=(0,s.getCoordsDataType)(c.length),d=(0,s.getGlChannels)(),{activationFunction:p,applyActivation:f}=(0,o.getActivationSnippet)(n),g=e.length>2,m=g?"value += getBiasForMatmul();":"",_=g?`${l(h,d,e[2].dims,c,!1)}`:"",y=c.length,v=a.length,b=u.length,w=`\n    ${p}\n    ${_}\n    float process(int indices[${y}]) {\n        int a[${v}];\n        int b[${b}];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<${a[a.length-1]}; ++k) {\n            a[${v-1}] = k;\n            b[${b-2}] = k;\n            value += _A(a) * _B(b);\n        }\n        ${m}\n        ${f}\n        return value;\n    }`;return Object.assign(Object.assign({},t),{output:{dims:c,type:e[0].type,textureType:r.TextureType.unpacked},shaderSource:w})}(n,t,e)})}e.matMul=(t,e,n)=>(c(e),t.session.pack?[t.run((0,a.createPackedMatmulProgramInfoLoader)(t,e,n),e)]:[t.run(u(e,n),e)]),e.parseMatMulAttributes=t=>(0,o.parseInternalActivationAttributes)(t.attributes),e.createMatmulProgramInfoLoader=u;const c=t=>{if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function l(t,e,n,r,s){let o="";const a=n.length,u=r.length,c=u-a;o=u<2&&a>0?"coords":n.map(((t,n)=>`coords.${e[n+c]}`)).join(", ");const l=i.BroadcastUtil.getBroadcastDims(n,r).map((t=>`coords.${e[t+c]} = 0;`)).join("\n");let h="vec4(outputValue.xx, outputValue.yy)";return 1===i.ShapeUtil.size(n)&&(h="vec4(outputValue.x)"),s?`\nvec4 getBiasForMatmul() {\n  ${t} coords = getOutputCoords();\n  ${l}\n  vec4 outputValue = getBias(${o});\n  return ${h};\n}`:`\nfloat getBiasForMatmul() {\n  ${t} coords = getOutputCoords();\n  ${l}\n  return getBias(coords.x);\n}`}e.getBiasForMatmul=l},2403:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const i=n(5060),r=n(2039),s=n(9390),o=n(2827),a={name:"pack",inputNames:["A"],inputTypes:[r.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(t,e)=>Object.assign(Object.assign({},a),{get:()=>((t,e)=>{const n=(0,i.getGlsl)(t.session.backend.glContext.version),u=e.dims,c=u.length,l=e.dims.length,h=(0,s.getCoordsDataType)(l),d=(0,o.getChannels)("rc",l),p=(f=l,g=d,m=u[u.length-2],_=u[u.length-1],0===f||1===f?"":`\n    int r = ${g[f-2]};\n    int c = ${g[f-1]};\n    int rp1 = ${g[f-2]} + 1;\n    int cp1 = ${g[f-1]} + 1;\n    bool rEdge = rp1 >= ${_};\n    bool cEdge = cp1 >= ${m};\n    `);var f,g,m,_;let y;y=0===c?[1,1]:1===c?[u[0],1]:[u[l-1],u[l-2]];const v=function(t,e,n){if(0===t)return"false";if(1===t)return`rc > ${e[0]}`;let i="";for(let r=t-2;r<t;r++)i+=`${n[r]} >= ${e[r-t+2]}`,r<t-1&&(i+="||");return i}(l,y,d),b=function(t,e){const n=t.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return`getA(rc),\n            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),\n            0, 0`;let i="";if(n>2)for(let t=0;t<n-2;++t)i+=`${e[t]},`;return`getA(${i}r, c),\n          rEdge ? 0. : getA(${i}rp1, c),\n          cEdge ? 0. : getA(${i}r, cp1),\n          rEdge || cEdge ? 0. : getA(${i}rp1, cp1)`}(u,d),w=`\n        void main() {\n          ${h} rc = getOutputCoords();\n\n          if(${v}) {\n            ${n.output} = vec4(0);\n          } else {\n            ${p}\n\n            ${n.output} = vec4(${b});\n          }\n        }\n      `;return Object.assign(Object.assign({},a),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:r.TextureType.packed},shaderSource:w})})(t,e)})},2827:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const i=n(9390);function r(t,e){return(0,i.getGlChannels)(e).map((e=>`${t}.${e}`))}e.getVecChannels=r,e.getChannels=function(t,e){return 1===e?[t]:r(t,e)},e.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},2870:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const i=n(246),r=n(2517),s=n(5060),o=n(2039),a={name:"Pad",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};e.padV2=(t,e,n)=>(l(e),[t.run(Object.assign(Object.assign({},a),{cacheHint:n.cacheKey,get:()=>c(t,e[0],n)}),e)]),e.parsePadAttributesV2=t=>{const e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),r=t.attributes.getInts("pads");return(0,i.createAttributeWithCacheKey)({mode:e,value:n,pads:r})},e.padV11=(t,n,i)=>{h(n);const r=u(t,n,i);return(0,e.padV2)(t,[n[0]],r)},e.parsePadAttributesV11=t=>t.attributes.getString("mode","constant");const u=(t,e,n)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");const r=Array.from(e[1].integerData),s=e.length>=3?e[2].floatData[0]:0;return(0,i.createAttributeWithCacheKey)({mode:n,pads:r,value:s})},c=(t,e,n)=>{const i=r.ShapeUtil.padShape(e.dims.slice(),n.pads),s=i.length,a=`\n      ${d(t,e,n)}\n      float process(int[${s}] indices) {\n          return padA(indices);\n      }`;return{name:"Pad",inputNames:["A"],inputTypes:[o.TextureType.unpacked],output:{dims:i,type:e.type,textureType:o.TextureType.unpacked},shaderSource:a}},l=t=>{if(!t||1!==t.length)throw new Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},h=t=>{if(!t||2!==t.length&&3!==t.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type)throw new Error("Invalid input type.");if(t.length>=3&&"string"===t[2].type)throw new Error("Invalid input type.")},d=(t,e,n)=>{const i=(0,s.getGlsl)(t.session.backend.glContext.version),[a,u]=t.calculateTextureWidthAndHeight(e.dims,o.TextureType.unpacked),c=r.ShapeUtil.computeStrides(e.dims);switch(n.mode){case"constant":return p(i,e.dims,c,a,u,n.pads,n.value);case"reflect":return f(i,e.dims,c,a,u,n.pads);case"edge":return g(i,e.dims,c,a,u,n.pads);default:throw new Error("Invalid mode")}},p=(t,e,n,i,r,s,o)=>{const a=e.length;let u="";for(let t=a-1;t>=0;--t)u+=`\n        k = m[${t}] - ${s[t]};\n        if (k < 0)  return constant;\n        if (k >= ${e[t]}) return constant;\n        offset += k * ${n[t]};\n        `;return`\n      float padA(int m[${a}]) {\n        const float constant = float(${o});\n        int offset = 0;\n        int k = 0;\n        ${u}\n        vec2 coords = offsetToCoords(offset, ${i}, ${r});\n        float value = getColorAsFloat(${t.texture2D}(A, coords));\n        return value;\n      }\n      `},f=(t,e,n,i,r,s)=>{const o=e.length;let a="";for(let t=o-1;t>=0;--t)a+=`\n        k = m[${t}] - ${s[t]};\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ${2*(e[t]-1)};\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ${e[t]}) { k = _2n_1 - k; }\n        }\n        offset += k * ${n[t]};\n        `;return`\n      float padA(int m[${o}]) {\n        int offset = 0;\n        int k = 0;\n        ${a}\n        vec2 coords = offsetToCoords(offset, ${i}, ${r});\n        float value = getColorAsFloat(${t.texture2D}(A, coords));\n        return value;\n      }\n      `},g=(t,e,n,i,r,s)=>{const o=e.length;let a="";for(let t=o-1;t>=0;--t)a+=`\n        k = m[${t}] - ${s[t]};\n        if (k < 0)  k = 0;\n        if (k >= ${e[t]}) k = ${e[t]-1};\n        offset += k * ${n[t]};\n      `;return`\n      float padA(int m[${o}]) {\n        int offset = 0;\n        int k = 0;\n        ${a}\n        vec2 coords = offsetToCoords(offset, ${i}, ${r});\n        float value = getColorAsFloat(${t.texture2D}(A, coords));\n        return value;\n      }\n      `}},2143:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const i=n(246),r=n(2517),s=n(2039);e.averagePool=(t,e,n)=>{h(e);const i={name:"AveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(Object.assign(Object.assign({},i),{get:()=>o(e,i,!1,n)}),e)]},e.parseAveragePoolAttributes=t=>{const e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=0!==t.attributes.getInt("count_include_pad",0),s=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:r,kernelShape:s,strides:o,pads:a})};const o=(t,e,n,i)=>{const[o,a]=u(t,i,n),c=r.ShapeUtil.size(o.kernelShape);let l="";o.countIncludePad?l+=`value /= float(${c});`:l+=`value /= float(${c} - pad);`;const h=`\n        ${d(t[0].dims,o,"value += _X(x);",l,"0.0")}\n      `;return Object.assign(Object.assign({},e),{output:{dims:a,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:h})};e.globalAveragePool=(t,e,n)=>{h(e);const i={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:`${n.countIncludePad}`};return[t.run(Object.assign(Object.assign({},i),{get:()=>o(e,i,!0,n)}),e)]},e.parseGlobalAveragePoolAttributes=t=>{const e=0!==t.attributes.getInt("count_include_pad",0);return(0,i.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},e.maxPool=(t,e,n)=>{h(e);const i={name:"MaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(Object.assign(Object.assign({},i),{get:()=>a(e,i,!1,n)}),e)]},e.parseMaxPoolAttributes=t=>{const e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=t.attributes.getInts("kernel_shape"),s=t.attributes.getInts("strides",[]),o=t.attributes.getInts("pads",[]),a=t.attributes.getInt("storage_order",0),u=t.attributes.getInts("dilations",[]);if(0!==a)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:r,strides:s,pads:o,storageOrder:a,dilations:u})};const a=(t,e,n,i)=>{const[r,o]=u(t,i,n),a=`\n      ${d(t[0].dims,r,"\n      value = max(_X(x), value);\n    ","","-1e5")}\n    `;return Object.assign(Object.assign({},e),{output:{dims:o,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:a})},u=(t,e,n)=>{const i=t[0].dims.slice(),s=Object.hasOwnProperty.call(e,"dilations"),o=e.kernelShape.slice(),a=e.strides.slice(),u=s?e.dilations.slice():[],c=e.pads.slice();r.PoolConvUtil.adjustPoolAttributes(n,i,o,a,u,c);const l=r.PoolConvUtil.computePoolOutputShape(n,i,a,u,o,c,e.autoPad),h=Object.assign({},e);return s?Object.assign(h,{kernelShape:o,strides:a,pads:c,dilations:u,cacheKey:e.cacheKey}):Object.assign(h,{kernelShape:o,strides:a,pads:c,cacheKey:e.cacheKey}),[h,l]},c={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},l={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.globalMaxPool=(t,e)=>(h(e),[t.run(Object.assign(Object.assign({},l),{get:()=>a(e,l,!0,c)}),e)]);const h=t=>{if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},d=(t,e,n,i,s)=>{const o=t.length;if(e.kernelShape.length<=2){const r=e.kernelShape[e.kernelShape.length-1],a=e.strides[e.strides.length-1],u=e.pads[e.pads.length/2-1],c=e.pads[e.pads.length-1],l=t[o-1];let h="",d="",p="";if(h=u+c!==0?`\n          for (int i = 0; i < ${r}; i++) {\n            x[${o} - 1] = indices[${o} - 1] * ${a} - ${u} + i;\n            if (x[${o} - 1] < 0 || x[${o} - 1] >= ${l}) {\n              pad++;\n              continue;\n            }\n            ${n}\n          }`:`\n          for (int i = 0; i < ${r}; i++) {\n            x[${o} - 1] = indices[${o} - 1] * ${a} - ${u} + i;\n            ${n}\n          }`,2===e.kernelShape.length){const n=e.kernelShape[e.kernelShape.length-2],i=e.strides[e.strides.length-2],s=e.pads[e.pads.length/2-2],a=e.pads[e.pads.length-2],u=t[o-2];d=s+a!==0?`\n            for (int j = 0; j < ${n}; j++) {\n              x[${o} - 2] = indices[${o} - 2] * ${i} - ${s} + j;\n              if (x[${o} - 2] < 0 || x[${o} - 2] >= ${u}) {\n                pad+= ${r};\n                continue;\n              }\n          `:`\n            for (int j = 0; j < ${n}; j++) {\n              x[${o} - 2] = indices[${o} - 2] * ${i} - ${s} + j;\n            `,p="\n          }\n        "}return`\n        float process(int indices[${o}]) {\n          int x[${o}];\n          copyVec(indices, x);\n\n          float value = ${s};\n          int pad = 0;\n          ${d}\n          ${h}\n          ${p}\n          ${i}\n          return value;\n        }\n      `}{const a=r.ShapeUtil.size(e.kernelShape),u=r.ShapeUtil.computeStrides(e.kernelShape),c=u.length,l=e.pads.length,h=f(c),d=p(t,"inputDims"),g=p(e.pads,"pads"),m=p(u,"kernelStrides"),_=p(e.strides,"strides");let y="";return y=e.pads.reduce(((t,e)=>t+e))?`\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ${n}\n          }`:`\n          }\n          ${n}\n        `,`\n        ${h}\n        float process(int indices[${o}]) {\n          int x[${o}];\n          copyVec(indices, x);\n          int offset[${c}];\n          int pads[${l}];\n          int inputDims[${o}];\n          int kernelStrides[${c}];\n          int strides[${c}];\n          ${g}\n          ${d}\n          ${_}\n          ${m}\n\n          float value = ${s};\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ${a}; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ${o} - ${c}; j < ${o}; j++) {\n              x[j] = indices[j] * strides[j - ${o} + ${c}]\n                + offset[j - ${o} + ${c}] - pads[j - 2];\n              ${y}\n          }\n          ${i}\n\n          return value;\n        }\n      `}},p=(t,e)=>{let n="";for(let i=0;i<t.length;i++)n+=`\n      ${e}[${i}] = ${t[i]};\n    `;return n},f=t=>`\n  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {\n    if (${t} == 0) {\n      return;\n    }\n    for (int i = 0; i < ${t} - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[${t} - 1] = offset;\n  }`},4939:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const i=n(246),r=n(782),s=n(2517),o=n(2039),a=(t,e,n,i,r)=>{c(e);const s={name:i,inputNames:["A"],inputTypes:[o.TextureType.unpacked]};return[t.run(Object.assign(Object.assign({},s),{cacheHint:n.cacheKey,get:()=>u(t,e,n,i,r,s)}),e)]};e.parseReduceAttributes=t=>{const e=t.attributes.getInts("axes",[]),n=1===t.attributes.getInt("keepdims",1);return(0,i.createAttributeWithCacheKey)({axes:e,keepDims:n})};const u=(t,e,n,i,r,a)=>{const u=[],c=e[0].dims.length||1,l=[],h=s.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),d=r(e,h);let p=d[1];for(let t=0;t<e[0].dims.length;t++)h.indexOf(t)>=0||0===h.length?(n.keepDims&&u.push(1),p=`\n          for(int j${t} = 0; j${t} < ${e[0].dims[t]}; j${t}++) {\n            inputIdx[${t}] = j${t};\n            ${p}\n          }`):(l.push(`inputIdx[${t}] = outputIdx[${u.length}];`),u.push(e[0].dims[t]));const f=`\n      float process(int outputIdx[${u.length||1}]) {\n        float value;                 // final result\n        int inputIdx[${c}];      // addressing input data\n        ${l.join("\n")}\n        ${d[0]}       // init ops for reduce max/min\n        ${p}\n        ${d[2]}       // final computation for reduce mean\n        return value;\n      }`;return Object.assign(Object.assign({},a),{output:{dims:u,type:e[0].type,textureType:o.TextureType.unpacked},shaderSource:f})},c=t=>{if(!t||1!==t.length)throw new Error("Reduce op requires 1 input.");if(-1===r.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.reduceSum=(t,e,n)=>a(t,e,n,"ReduceSum",(()=>["value = 0.0;","value += _A(inputIdx);",""])),e.reduceMean=(t,e,n)=>a(t,e,n,"ReduceMean",((t,e)=>{let n=1;for(let i=0;i<t[0].dims.length;i++)(e.indexOf(i)>=0||0===e.length)&&(n*=t[0].dims[i]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${n}.;`]})),e.reduceMax=(t,e,n)=>a(t,e,n,"ReduceMax",((t,e)=>{const n=[];for(let i=0;i<t[0].dims.length;i++)(e.indexOf(i)>=0||0===e.length)&&n.push(`inputIdx[${i}] = 0;`);return[`${n.join("\n")}\nvalue = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]})),e.reduceMin=(t,e,n)=>a(t,e,n,"ReduceMin",((t,e)=>{const n=[];for(let i=0;i<t[0].dims.length;i++)(e.indexOf(i)>=0||0===e.length)&&n.push(`inputIdx[${i}] = 0;`);return[`${n.join("\n")}\nvalue = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]})),e.reduceProd=(t,e,n)=>a(t,e,n,"ReduceProd",(()=>["value = 1.0;","value *= _A(inputIdx);",""])),e.reduceLogSum=(t,e,n)=>a(t,e,n,"ReduceLogSum",(()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"])),e.reduceLogSumSquare=(t,e,n)=>a(t,e,n,"ReduceLogSumSquare",(()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]))},7019:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const i=n(2517),r=n(5060),s=n(2039),o=n(2827);e.createPackedReshape3DProgramInfoLoader=(t,e,n)=>{const a=(t=>({name:"Reshape (packed)",inputTypes:[s.TextureType.packed],inputNames:["A"],cacheHint:`${t}`}))(n);return Object.assign(Object.assign({},a),{get:()=>((t,e,n,a)=>{const u=e.dims,c=a;let l="";for(let t=0;t<4;t++){let e="";switch(t){case 0:e="outputCoords = rc;";break;case 1:e="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:e="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:e="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}l+=`\n        ${e}\n        ${t>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${t}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ${t>0?"}":""}\n      `}const h=(0,r.getGlsl)(t.session.backend.glContext.version),d=`\n      ${function(t){const e=i.ShapeUtil.computeStrides(t),n=["b","r","c"],r="index";return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${e.map(((t,i)=>`int ${n[i]} = ${r} / ${t}; ${i===e.length-1?`int ${n[i+1]} = ${r} - ${n[i]} * ${t}`:`index -= ${n[i]} * ${t}`};`)).join("")}\n      return ivec3(b, r, c);\n    }\n  `}(u)}\n      ${function(t){const e=i.ShapeUtil.computeStrides(t);return`\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;\n  }\n`}(c)}\n      ${(0,o.unpackFromChannel)()}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ${c[2]};\n        int cols = ${c[1]};\n\n        ${l}\n        ${h.output} = result;\n      }\n    `;return Object.assign(Object.assign({},n),{output:{dims:c,type:e.type,textureType:s.TextureType.packed},shaderSource:d,hasMain:!0})})(t,e,a,n)})},e.processDims3D=function(t){if(0===t.length)return[1,1,1];let e=1;for(let n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]},e.isReshapeCheap=function(t,e){let n=!1;return n=0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2]),n}},718:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const i=n(2517);e.reshape=(t,e)=>{const n=i.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}},2268:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const i=n(5060),r=n(2039),s=n(9390),o=n(2827),a=n(9793),u={name:"Resize",inputNames:["A"],inputTypes:[r.TextureType.packed]};e.resize=(t,e,n)=>((0,a.validateInputs)(e,n),[t.run(Object.assign(Object.assign({},u),{cacheHint:n.cacheKey,get:()=>c(t,e,n)}),e)]),e.parseResizeAttributesV10=t=>(0,a.parseUpsampleAttributes)(t,10),e.parseResizeAttributesV11=t=>(0,a.parseUpsampleAttributes)(t,11);const c=(t,e,n)=>{const a=(0,i.getGlsl)(t.session.backend.glContext.version),[c,h]=l(e,n);if(c.every((t=>1===t))&&"tf_crop_and_resize"!==n.coordinateTransformMode)return Object.assign(Object.assign({},u),{output:{dims:h,type:e[0].type,textureType:r.TextureType.packed},hasMain:!0,shaderSource:`void main() {\n                    vec4 v = ${a.texture2D}(X, TexCoords);\n                    ${a.output} = v;\n                }`});const d=h.length;if(d<2)throw new Error(`output dimension should be at least 2, but got ${d}`);const p=h[d-2],f=h[d-1],g=e[0].dims;if(d!==g.length)throw new Error(`output dimension should match input ${g.length}, but got ${d}`);const m=g[d-2],_=g[d-1],y=c[d-2],v=c[d-1];let b="";if("linear"!==n.mode)throw new Error(`resize (packed) does not support mode: '${n.mode}'`);switch(n.coordinateTransformMode){case"asymmetric":b="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":b="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":b=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ${f}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ${p}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ${f}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ${p}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                `;break;case"align_corners":b=`\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(${f}.0 - 1.0, ${p}.0 - 1.0, ${f}.0 - 1.0,\n                            ${p}.0 - 1.0);\n                        vec4 original = vec4(${_}.0 - 1.0, ${m}.0 - 1.0, ${_}.0 - 1.0,\n                            ${m}.0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${n.coordinateTransformMode}'`)}const w=(0,s.getCoordsDataType)(d),T=`\n            const vec2 inputWH = vec2(${m}.0, ${_}.0);\n            const vec4 scaleWHWH = vec4(float(${y}), float(${v}), float(${y}), float(${v}));\n            ${(0,o.unpackFromChannel)()}\n            ${b}\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ${w} rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ${p-1};\n                bool hasNextCol = rc.z < ${f-1};\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ${a.output} = vec4(newValue);\n            }\n        `;return Object.assign(Object.assign({},u),{output:{dims:h,type:e[0].type,textureType:r.TextureType.packed},hasMain:!0,shaderSource:T})},l=(t,e)=>{const n=t[0].dims;let i,r=e.scales;if(0===r.length){const s=t[e.scalesInputIdx];if(s&&0!==s.size){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");r=h(s,e.mode,e.isResize)}else{const s=t[e.sizesInputIdx];if(!s||0===s.size)throw new Error("Either scales or sizes MUST be provided as input.");i=Array.from(s.integerData),r=d(i,n,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const s=i||n.map(((t,e)=>Math.floor(t*r[e])));return[r,s]},h=(t,e,n)=>{const i=Array.from(t.floatData);return(0,a.scalesValidation)(i,e,n),i},d=(t,e,n,i)=>{const r=e.length,s=new Array(r);for(let n=0,i=r;n<i;n++)if(0===e[n]){if(0!==t[n])throw new Error("Input dim is zero but required output dim is non-zero.");s[n]=1}else s[n]=t[n]/e[n];return(0,a.scalesValidation)(s,n,i),s}},8117:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const i=n(9162);e.shape=(t,e)=>(r(e),[new i.Tensor([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]);const r=t=>{if(!t||1!==t.length)throw new Error("Shape requires 1 input.")}},2278:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const i=n(246),r=n(782),s=n(2517),o=n(2039),a={name:"Slice",inputNames:["A"],inputTypes:[o.TextureType.unpacked]};e.slice=(t,e,n)=>(c(e),[t.run(Object.assign(Object.assign({},a),{cacheHint:n.cacheKey,get:()=>u(t,e[0],n)}),e)]),e.parseSliceAttributes=t=>{const e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),r=t.attributes.getInts("axes",[]);return(0,i.createAttributeWithCacheKey)({starts:e,ends:n,axes:r})};const u=(t,e,n)=>{const i=0===n.axes.length?e.dims.slice(0).map(((t,e)=>e)):n.axes,r=s.ShapeUtil.normalizeAxes(i,e.dims.length),u=n.starts.map(((t,n)=>t>e.dims[r[n]]-1?e.dims[r[n]]:s.ShapeUtil.normalizeAxis(t,e.dims[r[n]]))),c=n.ends.map(((t,n)=>t>e.dims[r[n]]-1?e.dims[r[n]]:s.ShapeUtil.normalizeAxis(t,e.dims[r[n]]))),l=e.dims.slice(),h=[];for(let t=0;t<r.length;t++)l[r[t]]=c[t]-u[t],u[t]>0&&h.push(`outputIdx[${r[t]}] += ${u[t]};`);const d=`\n      float process(int outputIdx[${l.length}]) {\n        ${h.join("\n      ")}\n        return _A(outputIdx);\n      }`;return Object.assign(Object.assign({},a),{output:{dims:l,type:e.type,textureType:o.TextureType.unpacked},shaderSource:d})},c=t=>{if(!t||1!==t.length)throw new Error("Slice requires 1 input.");if(-1===r.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.sliceV10=(t,e)=>{h(e);const n=l(t,e);return[t.run(Object.assign(Object.assign({},a),{cacheHint:n.cacheKey,get:()=>u(t,e[0],n)}),[e[0]])]};const l=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some((t=>1!==t)))throw new Error("currently non-1 steps is not supported for Slice");const n=Array.from(e[1].integerData),i=Array.from(e[2].integerData),r=e.length>=4?Array.from(e[3].integerData):[];return{starts:n,ends:i,axes:r,cacheKey:`${r};${n};${i}`}},h=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length)throw new Error("Invalid input type.");if("int32"!==t[2].type||1!==t[2].dims.length)throw new Error("Invalid input type.");if(t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length))throw new Error("Invalid input type.");if(t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw new Error("Invalid input type.")}},5524:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const i=n(246),r=n(2517),s=n(5060),o=n(2039),a=n(3738),u={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[o.TextureType.unpacked]},c={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[o.TextureType.unpacked,o.TextureType.unpacked]},l={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[o.TextureType.unpacked,o.TextureType.unpacked,o.TextureType.unpacked]};e.softmax=(t,e,n)=>{g(e);const i=e[0].dims.slice(),s=r.ShapeUtil.normalizeAxis(n.axis,i.length),o=r.ShapeUtil.sizeToDimension(i,s),a=r.ShapeUtil.sizeFromDimension(i,s);return h(t,e,n,o,a)},e.parseSoftmaxAttributes=t=>(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=t=>(0,i.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",-1)}),e.softmaxV13=(t,e,n)=>{g(e);const s=e[0].dims.slice(),o=r.ShapeUtil.normalizeAxis(n.axis,s.length),u=s.length,c=o!==u-1,l=[];let d,p=[],f=[];c&&(p=Array.from({length:u}).map(((t,e)=>e)),p[o]=u-1,p[u-1]=o,p.map((t=>l.push(s[t]))),d=(0,i.createAttributeWithCacheKey)({perm:p}),f=(0,a.transpose)(t,e,d));const m=c?r.ShapeUtil.sizeToDimension(l,u-1):r.ShapeUtil.sizeToDimension(s,u-1),_=c?r.ShapeUtil.sizeFromDimension(l,u-1):r.ShapeUtil.sizeFromDimension(s,u-1),y=h(t,c?f:e,n,m,_);return c?(0,a.transpose)(t,y,d):y};const h=(t,e,n,i,r)=>{const s=d(t,e[0],i,r,[i]),o=t.run(Object.assign(Object.assign({},u),{cacheHint:n.cacheKey,get:()=>s}),e),a=p(t,e[0],i,r,s.output.dims,[i]),h=t.run(Object.assign(Object.assign({},c),{cacheHint:n.cacheKey,get:()=>a}),[e[0],o]),g=f(t,e[0],i,r,s.output.dims,a.output.dims);return[t.run(Object.assign(Object.assign({},l),{cacheHint:n.cacheKey,get:()=>g}),[e[0],o,h])]},d=(t,e,n,i,r)=>{const[a,c]=t.calculateTextureWidthAndHeight(e.dims,o.TextureType.unpacked),l=r.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==r.length)throw new Error("Dimensionality of the output should be 1");if(r[0]!==n)throw new Error("Shape of the output should be equal to logical row count");const h=(0,s.getGlsl)(t.session.backend.glContext.version),d=`\n      float process(int[${l}] indices) {\n        int logical_row_start_offset = indices[0] * ${i};\n\n        float max = getColorAsFloat(${h.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},\n        ${c} )));\n        for(int i=1; i<${i}; ++i)\n        {\n          float current = getColorAsFloat(${h.texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${a}, ${c})));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }`;return Object.assign(Object.assign({},u),{output:{dims:r,type:e.type,textureType:o.TextureType.unpacked},shaderSource:d})},p=(t,e,n,i,r,a)=>{const[u,l]=t.calculateTextureWidthAndHeight(e.dims,o.TextureType.unpacked),h=a.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==a.length)throw new Error("Dimensionality of the output should be 1");if(a[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==r.length)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");const d=`\n      float process(int[${h}] indices) {\n        int logical_row_start_offset = indices[0] * ${i};\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<${i}; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(${(0,s.getGlsl)(t.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,\n            ${u}, ${l}))) - max);\n        }\n\n        return norm_factor;\n      }`;return Object.assign(Object.assign({},c),{output:{dims:a,type:e.type,textureType:o.TextureType.unpacked},shaderSource:d})},f=(t,e,n,i,r,s)=>{const[a,u]=t.calculateTextureWidthAndHeight(e.dims,o.TextureType.unpacked),c=e.dims.length;if(n<1||i<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==r.length||1!==s.length)throw new Error("Dimensionality of the intermediate results should be 1");if(r[0]!==n||s[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");const h=`\n      float process(int[${c}] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ${a}, ${u});\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ${i};\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }`;return Object.assign(Object.assign({},l),{output:{dims:e.dims,type:e.type,textureType:o.TextureType.unpacked},shaderSource:h})},g=t=>{if(!t||1!==t.length)throw new Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type")}},5975:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const i=n(246),r=n(2517),s=n(2039),o={name:"Split",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.split=(t,e,n)=>{c(e);const i=r.ShapeUtil.normalizeAxis(n.axis,e[0].dims.length),s=a(t,e,i,n),l=[];for(let r=0;r<s;++r)l.push(t.run(Object.assign(Object.assign({},o),{cacheHint:`${n.cacheKey};${r}`,get:()=>u(t,e[0],n,i,r)}),e));return l},e.parseSplitAttributes=t=>{const e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),r=t.outputs.length;return(0,i.createAttributeWithCacheKey)({axis:e,split:n,numOutputs:r})};const a=(t,e,n,i)=>{const[,s]=r.SplitUtil.splitShape(e[0].dims,n,i.split,i.numOutputs);return s.length},u=(t,e,n,i,a)=>{const[u,c]=r.SplitUtil.splitShape(e.dims,i,n.split,n.numOutputs),l=c[a],h=u[a],d=`\n      float process(int indices[${h.length}]) {\n        indices[${i}] += ${l};\n        return _A(indices);\n      }\n    `;return Object.assign(Object.assign({},o),{cacheHint:`${n.cacheKey}:${a}`,output:{dims:h,type:e.type,textureType:s.TextureType.unpacked},shaderSource:d})},c=t=>{if(!t||1!==t.length)throw new Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw new Error("Invalid input type.")}},3933:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const i=n(2517);e.squeeze=(t,e,n)=>{r(e);const s=i.ShapeUtil.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],s)]},e.squeezeV13=(t,n)=>(s(n),(0,e.squeeze)(t,[n[0]],Array.from(n[1].integerData))),e.parseSqueezeAttributes=t=>t.attributes.getInts("axes");const r=t=>{if(!t||1!==t.length)throw new Error("Squeeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},s=t=>{if(!t||2!==t.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},6558:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const i=n(5060),r=n(2039);e.sum=(t,e)=>{o(e);const n={name:"Sum",inputNames:e.map(((t,e)=>`X${e}`)),inputTypes:new Array(e.length).fill(r.TextureType.unpacked)};return[t.run(Object.assign(Object.assign({},n),{get:()=>s(t,e,n)}),e)]};const s=(t,e,n)=>{const s=(0,i.getGlsl)(t.session.backend.glContext.version),o=e[0].dims.slice(),a=`\n      void main() {\n        vec4 result = ${e.map(((t,e)=>`${s.texture2D}(X${e},TexCoords)`)).join(" + ")};\n        ${s.output} = result;\n      }\n    `;return Object.assign(Object.assign({},n),{output:{dims:o,type:e[0].type,textureType:r.TextureType.unpacked},hasMain:!0,shaderSource:a})},o=t=>{if(!t||0===t.length)throw new Error("Sum requires inputs.");const e=t[0].dims.length;for(let n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(let i=0;i<e;i++)if(t[0].dims[i]!==t[n].dims[i])throw new Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.");for(let e=1;e<t.length;e++)if(t[0].type!==t[e].type)throw new Error("Input types are not matched.")}},5723:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const i=n(782),r=n(2039);e.tile=(t,e)=>{o(e);const n={name:"Tile",inputNames:["A"],inputTypes:[r.TextureType.unpacked]};return[t.run(Object.assign(Object.assign({},n),{get:()=>s(t,e,n)}),e)]};const s=(t,e,n)=>{const i=e[0].dims.slice(),s=new Array(i.length),o=[];for(let t=0;t<i.length;t++)s[t]=i[t]*e[1].numberData[t],o.push(`inputIdx[${t}] = int(mod(float(outputIdx[${t}]), ${i[t]}.));`);const a=s.length,u=`\n      float process(int outputIdx[${a}]) {\n        int inputIdx[${a}];\n        ${o.join("\n")}\n        return _A(inputIdx);\n      }\n    `;return Object.assign(Object.assign({},n),{output:{dims:s,type:e[0].type,textureType:r.TextureType.unpacked},shaderSource:u})},o=t=>{if(!t||2!==t.length)throw new Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(-1===i.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invalid repeat type.")}},3738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const i=n(246),r=n(2517),s=n(2039),o={name:"Transpose",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.transpose=(t,e,n)=>(h(e),[t.run(Object.assign(Object.assign({},o),{cacheHint:n.cacheKey,get:()=>a(t,e[0],n.perm)}),e)]),e.parseTransposeAttributes=t=>(0,i.createAttributeWithCacheKey)({perm:t.attributes.getInts("perm",[])});const a=(t,e,n)=>{const i=e.dims;n=u(i,n);const r=c(i,n),a=i.length,h=`\n      ${l("perm",n,a)}\n      float process(int indices[${a}]) {\n        int a[${a}];\n        perm(a, indices);\n        return _A(a);\n      }`;return Object.assign(Object.assign({},o),{output:{dims:r,type:e.type,textureType:s.TextureType.unpacked},shaderSource:h})},u=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),c=(t,e)=>(e=u(t,e),r.ShapeUtil.sortBasedOnPerm(t,e)),l=(t,e,n)=>{const i=[];i.push(`void ${t}(out int a[${n}], int src[${n}]) {`);for(let t=0;t<n;++t)i.push(`\ta[${e[t]}]=src[${t}];`);return i.push("\t}"),i.join("\n")},h=t=>{if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("input should be float tensor")}},8710:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const i=n(5060),r=n(2039);e.encodeAsUint8=(t,e)=>{const n=e.shape,s=(0,i.getGlsl)(t.session.backend.glContext.version),o=`\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ${s.texture2D}(X,TexCoords).r;\n      ${s.output} = encodeAsUint8(value);\n    }`,a={name:"Uint8Encode",inputTypes:[r.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:r.TextureType.downloadUint8AsFloat},shaderSource:o,hasMain:!0};return t.executeProgram(a,[e.tensor])}},4909:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const i=n(246),r=n(2517),s=n(8520),o=n(5060),a=n(2039);function u(){return O("abs")}function c(){return O("acos")}function l(){return O("asin")}function h(){return O("atan")}function d(){return O("ceil")}function p(){return O("cos")}function f(t){return{body:`\n  const float alpha = float(${t});\n\n  float elu_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 elu_(vec4 v) {\n    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));\n  }\n  `,name:"elu",type:s.FunctionType.ValueBased}}function g(){return O("exp")}function m(){return O("floor")}function _(t,e){return{body:`\n  const float min = float(${t});\n  const float max = float(${e});\n\n  float clip_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 clip_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  `,name:"clip",type:s.FunctionType.ValueBased}}function y(){const t="indentity";return{body:`\n  float ${t}_(float a) {\n    return a;\n  }\n  vec4 ${t}_(vec4 v) {\n    return v;\n  }\n  `,name:t,type:s.FunctionType.ValueBased}}function v(t){const e="leakyRelu";return{body:`\n  const float alpha = float(${t});\n\n  float ${e}_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ${e}_(vec4 v) {\n    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));\n  }\n  `,name:e,type:s.FunctionType.ValueBased}}function b(){return O("log")}function w(){return{body:"\n  float neg_(float a) {\n    return -a;\n  }\n  vec4 neg_(vec4 v) {\n    return -v;\n  }\n  ",name:"neg",type:s.FunctionType.ValueBased}}function T(){return{body:"\n  float not_(float a) {\n    return float( ! bool(a) );\n  }\n  bool not_(bool a) {\n    return !a;\n  }\n  vec4 not_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 not_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  ",name:"not",type:s.FunctionType.ValueBased}}function x(){return O("sin")}function S(){return{body:"\n  float relu_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 relu_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  ",name:"relu",type:s.FunctionType.ValueBased}}function I(){const t="sigmoid";return{body:`\n  float ${t}_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ${t}_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  `,name:t,type:s.FunctionType.ValueBased}}function E(){return O("sqrt")}function A(){return O("tan")}function k(){return{body:"\n  float tanh_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 tanh_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  ",name:"tanh",type:s.FunctionType.ValueBased}}function O(t){return{body:`\n  float ${t}_(float a) {\n    return ${t}(a);\n  }\n  vec4 ${t}_(vec4 v) {\n    return ${t}(v);\n  }\n  `,name:t,type:s.FunctionType.ValueBased}}e.glslAbs=u,e.glslAcos=c,e.glslAsin=l,e.glslAtan=h,e.glslCeil=d,e.glslCos=p,e.glslElu=f,e.glslExp=g,e.glslFloor=m,e.glslClip=_,e.glslIdentity=y,e.glslLeakyRelu=v,e.glslLog=b,e.glslNeg=w,e.glslNot=T,e.glslSin=x,e.glslRelu=S,e.glslSigmoid=I,e.glslSqrt=E,e.glslTan=A,e.glslTanh=k;const C=(t,e,n,i)=>{const r=t.session.pack?a.TextureType.packed:a.TextureType.unpacked,s={name:n.name,inputTypes:[r],inputNames:["A"],cacheHint:i};return Object.assign(Object.assign({},s),{get:()=>((t,e,n,i)=>{const r=t.session.pack?a.TextureType.packed:a.TextureType.unpacked,s=(0,o.getGlsl)(t.session.backend.glContext.version);return Object.assign(Object.assign({},e),{output:{dims:n.dims,type:n.type,textureType:r},shaderSource:`\n     ${i.body}\n     void main() {\n       vec4 v = ${s.texture2D}(A, TexCoords);\n       v = ${i.name}_(v);\n       ${s.output} = v;\n     }\n     `,hasMain:!0})})(t,s,e,n)})};e.abs=(t,e)=>[t.run(C(t,e[0],u()),e)],e.acos=(t,e)=>[t.run(C(t,e[0],c()),e)],e.asin=(t,e)=>[t.run(C(t,e[0],l()),e)],e.atan=(t,e)=>[t.run(C(t,e[0],h()),e)],e.clip=(t,e,n)=>[t.run(C(t,e[0],_(n.min,n.max),n.cacheKey),e)],e.parseClipAttributes=t=>(0,i.createAttributeWithCacheKey)({min:t.attributes.getFloat("min",r.MIN_CLIP),max:t.attributes.getFloat("max",r.MAX_CLIP)}),e.clipV11=(t,n)=>{const i=D(t,n);return(0,e.clip)(t,[n[0]],i)};const D=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const n=e.length>=3?e[1].numberData[0]:r.MIN_CLIP,s=e.length>=3?e[2].numberData[0]:r.MAX_CLIP;return(0,i.createAttributeWithCacheKey)({min:n,max:s})};e.ceil=(t,e)=>[t.run(C(t,e[0],d()),e)],e.cos=(t,e)=>[t.run(C(t,e[0],p()),e)],e.elu=(t,e,n)=>[t.run(C(t,e[0],f(n.alpha),n.cacheKey),e)],e.parseEluAttributes=t=>(0,i.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",1)}),e.exp=(t,e)=>[t.run(C(t,e[0],g()),e)],e.floor=(t,e)=>[t.run(C(t,e[0],m()),e)],e.identity=(t,e)=>[t.run(C(t,e[0],y()),e)],e.leakyRelu=(t,e,n)=>[t.run(C(t,e[0],v(n.alpha),n.cacheKey),e)],e.parseLeakyReluAttributes=t=>(0,i.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",.01)}),e.log=(t,e)=>[t.run(C(t,e[0],b()),e)],e.neg=(t,e)=>[t.run(C(t,e[0],w()),e)],e.not=(t,e)=>[t.run(C(t,e[0],T()),e)],e.relu=(t,e)=>[t.run(C(t,e[0],S()),e)],e.sigmoid=(t,e)=>[t.run(C(t,e[0],I()),e)],e.sin=(t,e)=>[t.run(C(t,e[0],x()),e)],e.sqrt=(t,e)=>[t.run(C(t,e[0],E()),e)],e.tan=(t,e)=>[t.run(C(t,e[0],A()),e)],e.tanh=(t,e)=>[t.run(C(t,e[0],k()),e)]},5611:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const i=n(5060),r=n(2039),s=n(9390),o=n(2827),a={name:"unpack",inputNames:["A"],inputTypes:[r.TextureType.packed]};e.createUnpackProgramInfo=(t,e)=>{const n=e.dims.length,u=(0,o.getChannels)("rc",n),c=u.slice(-2),l=(0,s.getCoordsDataType)(n),h=(0,o.unpackFromChannel)(),d=0===e.dims.length?"":function(t,e){if(1===t)return"rc";let n="";for(let i=0;i<t;i++)n+=e[i],i<t-1&&(n+=",");return n}(n,u),p=n<=1?"rc":`vec2(${c.join(",")})`,f=`\n    ${h}\n    void main() {\n      ${l} rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(${d});\n\n       ${(0,i.getGlsl)(t.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${p}), 0, 0, 0);\n     }\n   `;return Object.assign(Object.assign({},a),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:r.TextureType.unpacked},shaderSource:f})},e.createUnpackProgramInfoLoader=(t,n)=>Object.assign(Object.assign({},a),{get:()=>(0,e.createUnpackProgramInfo)(t,n)})},8428:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const i=n(2517);e.unsqueeze=(t,e,n)=>{r(e);const s=i.ShapeUtil.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],s)]},e.unsqueezeV13=(t,n)=>(s(n),(0,e.unsqueeze)(t,[n[0]],Array.from(n[1].integerData))),e.parseUnsqueezeAttributes=t=>t.attributes.getInts("axes");const r=t=>{if(!t||1!==t.length)throw new Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},s=t=>{if(!t||2!==t.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},9793:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const i=n(246),r=n(5060),s=n(2039),o={name:"Upsample",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.upsample=(t,n,i)=>((0,e.validateInputs)(n,i),[t.run(Object.assign(Object.assign({},o),{cacheHint:i.cacheKey,get:()=>a(t,n,i)}),n)]),e.parseUpsampleAttributesV7=t=>(0,e.parseUpsampleAttributes)(t,7),e.parseUpsampleAttributesV9=t=>(0,e.parseUpsampleAttributes)(t,9),e.parseUpsampleAttributes=(t,n)=>{const r=n>=10,s=t.attributes.getString("mode","nearest");if("nearest"!==s&&"linear"!==s&&(n<11||"cubic"!==s))throw new Error(`unrecognized mode: ${s}`);let o=[];n<9&&(o=t.attributes.getFloats("scales"),(0,e.scalesValidation)(o,s,r));const a=t.attributes.getFloat("extrapolation_value",0),u=n>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u))throw new Error(`coordinate_transform_mode '${u}' is not supported`);const c="tf_crop_and_resize"===u,l=c,h="nearest"===s&&n>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(h))throw new Error(`nearest_mode '${h}' is not supported`);const d=t.attributes.getFloat("cubic_coeff_a",-.75),p=0!==t.attributes.getInt("exclude_outside",0);if(p&&"cubic"!==s)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const f=n<11||"nearest"===s&&"asymmetric"===u&&"floor"===h;let g=0,m=0,_=0;return n>10?t.inputs.length>2?(g=1,m=2,_=3):(m=1,_=2):9===n&&(m=1),(0,i.createAttributeWithCacheKey)({opset:n,isResize:r,mode:s,scales:o,extrapolationValue:a,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:c,nearestMode:h,cubicCoefficientA:d,excludeOutside:p,useNearest2xOptimization:f,roiInputIdx:g,scalesInputIdx:m,sizesInputIdx:_})};const a=(t,e,n)=>{const i=(0,r.getGlsl)(t.session.backend.glContext.version),[a,u]=t.calculateTextureWidthAndHeight(e[0].dims,s.TextureType.unpacked),c=e[0].dims.map(((t,e)=>Math.floor(t*n.scales[e]))),[l,h]=t.calculateTextureWidthAndHeight(c,s.TextureType.unpacked),d=c.length,p=new Array(d),f=new Array(d);let g=`\n      int output_pitches[${d}];\n      int input_pitches[${d}];\n      `;for(let t=d-1;t>=0;t--)p[t]=t===d-1?1:p[t+1]*c[t+1],f[t]=t===d-1?1:f[t+1]*e[0].dims[t+1],g+=`\n        output_pitches[${t}] = ${p[t]};\n        input_pitches[${t}] = ${f[t]};\n        `;const m=`\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ${a}, ${u});\n        float value = getColorAsFloat(${i.texture2D}(X, coords));\n        return value;\n      }\n      `,_="nearest"===n.mode?`\n    ${m}\n    float process(int indices[${d}]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${h});\n\n      ${g}\n\n      int d, m;\n      for (int dim = 0; dim < ${d}; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }`:4===d?`\n    ${m}\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${h});\n\n      ${g}\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }`:`\n    ${m}\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ${l}, ${h});\n\n      ${g}\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }`;return Object.assign(Object.assign({},o),{output:{dims:c,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:_,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map((t=>Math.ceil(t)))}]})};e.validateInputs=(t,e)=>{if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if("string"===t[0].type)throw new Error("Invalid input tensor types.")},e.scalesValidation=(t,e,n)=>{if(n){for(const e of t)if(e<=0)throw new Error("Scale value should be greater than 0.")}else for(const e of t)if(e<1)throw new Error("Scale value should be greater than or equal to 1.");if(!("linear"!==e&&"cubic"!==e||2===t.length||4===t.length&&1===t[0]&&1===t[1]))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${n?"Resize":"Upsample"} opeartor.`)}},1958:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const i=n(1670),r=n(6231),s=n(8879),o=n(5060);e.ProgramManager=class{constructor(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,n){var i;this.profiler.event("op",`ProgramManager.run ${null!==(i=t.programInfo.name)&&void 0!==i?i:"unknown kernel"}`,(()=>{var i;const s=this.glContext.gl,o=t.program;s.useProgram(o);try{this.bindOutput(n),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,null!==(i=t.programInfo.variables)&&void 0!==i?i:[],e)}catch(e){throw r.Logger.error("ProgramManager",t.programInfo.shaderSource),e}this.profiler.event("backend","GlContext.draw()",(()=>{this.glContext.draw()}))}),this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((t=>this.glContext.deleteProgram(t.program)))}build(t,e,n){return this.profiler.event("backend","ProgramManager.build",(()=>{const i=new s.GlslPreprocessor(this.glContext,t,e,n),r=i.preprocess(),o=this.compile(r);return{programInfo:t,program:o,uniformLocations:this.getUniformLocations(o,i.context.programInfo.inputNames,i.context.programInfo.variables),attribLocations:this.getAttribLocations(o)}}))}compile(t){if(!this.vertexShader){r.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const t=(0,o.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(t,this.glContext.gl.VERTEX_SHADER)}i.env.debug&&r.Logger.verbose("ProrgramManager",`FragShader:\n${t}\n`);const e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),n=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),n}bindOutput(t){const e=t.width,n=t.height;r.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${n}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,n)}bindAttributes(t){const e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0}bindUniforms(t,e,n){var i;const r=this.glContext.gl;let s=0;for(const{name:o,type:a,location:u,arrayLength:c}of t){const t=null===(i=e.find((t=>t.name===o)))||void 0===i?void 0:i.data;if("sampler2D"!==a&&!t)throw new Error(`variable '${o}' does not have data defined in program info`);switch(a){case"sampler2D":this.bindTexture(n[s],u,s),s++;break;case"float":c?r.uniform1fv(u,t):r.uniform1f(u,t);break;case"int":c?r.uniform1iv(u,t):r.uniform1i(u,t);break;default:throw new Error(`Uniform not implemented: ${a}`)}}}bindTexture(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,n){const i=[];if(e)for(const n of e)i.push({name:n,type:"sampler2D",location:this.getUniformLocation(t,n)});if(n)for(const e of n)i.push(Object.assign(Object.assign({},e),{location:this.getUniformLocation(t,e.name)}));return i}getUniformLocation(t,e){const n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error(`Uniform ${e} not found.`);return n}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}},6416:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const i=n(6231),r=n(1047),s=n(8316),o=n(1640),a=n(1958),u=n(7859),c=n(5702);e.WebGLSessionHandler=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new u.PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new a.ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new c.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new s.WebGLInferenceHandler(this)}onGraphInitialized(t){const e=t.getValues().filter((t=>-1===t.from&&t.tensor)).map((t=>t.tensor.dataId));this.initializers=new Set(e)}isInitializer(t){return!!this.initializers&&this.initializers.has(t)}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,n=!1){i.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((t=>this.textureManager.releaseTexture(t,!0))),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((t=>this.textureManager.releaseTexture(t,!0))),this.unpackedTextureDataCache=new Map}resolve(t,e,n){const i=(0,r.resolveOperator)(t,e,o.WEBGL_OP_RESOLVE_RULES);return{impl:i.opImpl,context:i.opInit?i.opInit(t,n):t}}}},7769:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const i=n(6231);e.RedFloat32DataEncoder=class{constructor(t,e=1){if(1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}encode(t,e){let n,r;return t.constructor!==Float32Array&&(i.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),r=new Float32Array(t)),e*this.channelSize>t.length?(i.Logger.warning("Encoder","Source data too small. Allocating larger array"),r=t,n=this.allocate(e*this.channelSize),r.forEach(((t,e)=>n[e]=t))):(r=t,n=r),n}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter(((t,e)=>e%4==0)).subarray(0,e):t.subarray(0,e)}},e.RGBAFloatDataEncoder=class{constructor(t,e=1,n){if(1!==e&&4!==e)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}encode(t,e){let n=t;return 1===this.channelSize&&(i.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach(((t,e)=>n[4*e]=t))),n}allocate(t){return new Float32Array(4*t)}decode(t,e){return 1===this.channelSize?t.filter(((t,e)=>e%4==0)).subarray(0,e):t.subarray(0,e)}},e.Uint8DataEncoder=class{constructor(t,e=1){if(this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}},7859:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const i=n(6231),r=n(2517);function s(t,e){const n=[],i=[],r=null!=e&&Array.isArray(e)&&0===e.length,s=null==e||r?null:o(e,t).sort();let a=0;for(let e=0;e<t.length;++e){if(null!=s){if(s[a]===e&&1!==t[e])throw new Error(`Can't squeeze axis ${e} since its dim '${t[e]}' is not 1`);(null==s[a]||s[a]>e)&&1===t[e]&&(n.push(t[e]),i.push(e)),s[a]<=e&&a++}1!==t[e]&&(n.push(t[e]),i.push(e))}return{newShape:n,keptDims:i}}function o(t,e){const n=e.length;return t=null==t?e.map(((t,e)=>e)):[].concat(t),(0,r.assert)(t.every((t=>t>=-n&&t<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`)),(0,r.assert)(t.every(a),(()=>`All values in axis param must be integers but got axis ${t}`)),t.map((t=>t<0?n+t:t))}function a(t){return t%1==0}function u(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function c(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){if(0===t.length)return[1,1];const n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){const r=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce(((t,e)=>t*e)),s=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce(((t,e)=>t*e));if(!(r>n||s>n))return[r,s];i.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`)}const r=t.reduce(((t,e)=>t*e));let s=Math.floor(Math.sqrt(r));for(;s<n&&s<r&&r%s!=0;s++);if(s>=n||r%s!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${t}`);return[s,r/s]}},e.PreferLogicalStrategy=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){const n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n}computeTexture(t,e){const n=e&&e.isPacked;if(0===t.length)return n?[2,2]:[1,1];let r=this.maxTextureSize;if(e&&void 0!==e.breakAxis){const n=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce(((t,e)=>t*e)),s=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce(((t,e)=>t*e));if(!(n>r||s>r))return[n,s];i.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`)}let o=t.slice(0);if(n&&(r*=2,o=o.map(((t,e)=>e>=o.length-2?o[e]%2==0?o[e]:o[e]+1:o[e])),1===o.length&&(o=[2,o[0]])),2!==o.length){const t=s(o);o=t.newShape}const a=u(o);return o.length<=1&&a<=r?[1,a]:2===o.length&&o[0]<=r&&o[1]<=r?o:3===o.length&&o[0]*o[1]<=r&&o[2]<=r?[o[0]*o[1],o[2]]:3===o.length&&o[0]<=r&&o[1]*o[2]<=r?[o[0],o[1]*o[2]]:4===o.length&&o[0]*o[1]*o[2]<=r&&o[3]<=r?[o[0]*o[1]*o[2],o[3]]:4===o.length&&o[0]<=r&&o[1]*o[2]*o[3]<=r?[o[0],o[1]*o[2]*o[3]]:n?c(a/4).map((t=>2*t)):c(a)}},e.squeezeShape=s,e.parseAxisParam=o,e.isInt=a,e.sizeFromShape=u,e.getRowsCols=function(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]},e.sizeToSquarishShape=c,e.getBatchDim=function(t,e=2){return u(t.slice(0,t.length-e))}},4057:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const i=n(2517),r=n(2039);e.createTextureLayoutFromTextureType=(t,n,i)=>{const s=i===r.TextureType.unpacked||i===r.TextureType.unpackedReversed?1:4,o=i===r.TextureType.packed,a=i===r.TextureType.unpackedReversed||i===r.TextureType.packed,u=i===r.TextureType.packedLastDimension?n.length-1:void 0,c=i===r.TextureType.packedLastDimension?n.map(((t,e)=>e===n.length-1?4*t:t)):void 0;return(0,e.createTextureLayoutFromShape)(t,n,s,c,{isPacked:o,reverseWH:a,breakAxis:u})},e.calculateTextureWidthAndHeight=(t,n,i)=>{const r=(0,e.createTextureLayoutFromTextureType)(t,n,i);return[r.width,r.height]},e.createTextureLayoutFromShape=(t,e,n=1,r,s)=>{const o=!(!s||!s.isPacked),[a,u]=t.computeTextureWH(o&&r||e,s),c=e.length;let l=e.slice(0);if(0===c&&(l=[1]),1===n)r=e;else if(o){if(4!==n)throw new Error("a packed texture must be 4-channel");r=e,c>0&&(l[c-1]=Math.ceil(l[c-1]/2)),c>1&&(l[c-2]=Math.ceil(l[c-2]/2))}else if(!r)throw new Error("Unpacked shape is needed when using channels > 1");return{width:a,height:u,channels:n,isPacked:o,shape:l,strides:i.ShapeUtil.computeStrides(l),unpackedShape:r,reversedWH:s&&s.reverseWH}}},5702:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const i=n(6231);e.TextureManager=class{constructor(t,e,n,i){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=i,this.pendingRead=new Map,i.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,n,r){const s=this.toEncoderType(t),o=this.glContext.getEncoder(s,e.channels||1,r);if(e.isPacked&&1===r)throw new Error("not implemented");const a=e.width,u=e.height;let c,l;if(this.config.reuseTextures){c=`${a}x${u}_${o.format}_${o.internalFormat}_${o.textureType}`,l=this.inUseTextures.get(c),l||(l=[],this.inUseTextures.set(c,l));const e=this.idleTextures.get(c);if(e&&e.length>0){const i=e.pop();return l.push(i),1===r&&this.glContext.updateTexture(i,a,u,o,this.toTextureData(t,n)),i}}i.Logger.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);const h=this.glContext.allocateTexture(a,u,o,this.toTextureData(t,n));return this.config.reuseTextures&&(l.push(h),this.textureLookup.set(h,c)),h}readTexture(t,e,n){return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(()=>{const i=t.shape.reduce(((t,e)=>t*e))*n,r=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),n);return this.toTensorData(e,r)}))}async readTextureAsync(t,e,n){const i=t.tensor.dataId;if(n||(n=1),this.pendingRead.has(i)){const t=this.pendingRead.get(i);return new Promise((e=>null==t?void 0:t.push(e)))}return this.profiler.event("backend","TextureManager.readTextureAsync",(async()=>{this.pendingRead.set(i,[]);const r=t.shape.reduce(((t,e)=>t*e))*n;await this.glContext.createAndWaitForFence();const s=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n),o=this.toTensorData(e,s),a=this.pendingRead.get(i);return this.pendingRead.delete(i),null==a||a.forEach((t=>t(o))),o}))}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(()=>{const e=t.shape.reduce(((t,e)=>t*e)),n=this.glContext.readTexture(t.texture,t.width,t.height,4*e,"byte",4);return new Float32Array(n.buffer,n.byteOffset,e)}))}releaseTexture(t,e){let n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture),n)){e&&this.textureLookup.delete(n);const i=this.inUseTextures.get(n);if(i){const e=i.indexOf(t.texture);if(-1!==e){i.splice(e,1);let r=this.idleTextures.get(n);r||(r=[],this.idleTextures.set(n,r)),r.push(t.texture)}}}n&&!e||(i.Logger.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},9390:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const i=n(2517);e.getPackedShape=function(t){const e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)},e.repeatedTry=async function(t,e=(t=>0),n){return new Promise(((i,r)=>{let s=0;const o=()=>{if(t())return void i();s++;const a=e(s);null!=n&&s>=n?r():setTimeout(o,a)};o()}))},e.generateShaderFuncNameFromInputSamplerName=function(t){return(0,i.assert)(void 0!==t&&0!==t.length,(()=>"empty string found for sampler name")),"get"+t.charAt(0).toUpperCase()+t.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(t){return(0,i.assert)(void 0!==t&&0!==t.length,(()=>"empty string found for sampler name")),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(t,e){let n=JSON.parse(JSON.stringify(t));return n=e,n},e.getSqueezedParams=function(t,e){return e.map((e=>t[e])).join(", ")},e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)},e.getGlChannels=function(t=6){return["x","y","z","w","u","v"].slice(0,t)}},7305:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const i=n(6231),r=n(1713),s={};function o(t){const e=function(){if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const t=document.createElement("canvas");return t.width=1,t.height=1,t}();let n;const s={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!t||"webgl2"===t)&&(n=e.getContext("webgl2",s),n))try{return new r.WebGLContext(n,2)}catch(t){i.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${t}`)}if((!t||"webgl"===t)&&(n=e.getContext("webgl",s)||e.getContext("experimental-webgl",s),n))try{return new r.WebGLContext(n,1)}catch(t){i.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${t}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){let n;e&&"webgl2"!==e||!("webgl2"in s)?e&&"webgl"!==e||!("webgl"in s)||(n=s.webgl):n=s.webgl2,n=n||o(e),e=e||1===n.version?"webgl":"webgl2";const i=n.gl;return s[e]=n,i.isContextLost()?(delete s[e],t(e)):(i.disable(i.DEPTH_TEST),i.disable(i.STENCIL_TEST),i.disable(i.BLEND),i.disable(i.DITHER),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SAMPLE_COVERAGE),i.enable(i.SCISSOR_TEST),i.enable(i.CULL_FACE),i.cullFace(i.BACK),n)},e.createNewWebGLContext=o},1713:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const o=n(1670),a=s(n(7769)),u=n(9390);function c(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}e.linearSearchLastTrue=c,e.WebGLContext=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,n,i){const r=this.gl,s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);const o=i?n.encode(i,t*e):null;return r.texImage2D(r.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,o),this.checkError(),s}updateTexture(t,e,n,i,r){const s=this.gl;s.bindTexture(s.TEXTURE_2D,t);const o=i.encode(r,e*n);s.texSubImage2D(s.TEXTURE_2D,0,0,0,e,n,i.format,i.textureType,o),this.checkError()}attachFramebuffer(t,e,n){const i=this.gl;i.bindTexture(i.TEXTURE_2D,t),i.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),this.checkError(),i.viewport(0,0,e,n),i.scissor(0,0,e,n)}readTexture(t,e,n,i,r,s){const o=this.gl;s||(s=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);const a=this.getEncoder(r,s),u=a.allocate(e*n);return o.bindTexture(o.TEXTURE_2D,t),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),o.readPixels(0,0,e,n,o.RGBA,a.textureType,u),this.checkError(),a.decode(u,i)}isFramebufferReady(){return!0}getActiveTexture(){const t=this.gl;return"TEXTURE"+(t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){const n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){const n=this.gl,i=n.createProgram();return n.attachShader(i,t),n.attachShader(i,e),n.linkProgram(i),i}compileShader(t,e){const n=this.gl,i=n.createShader(e);if(!i)throw new Error(`createShader() returned null with type ${e}`);if(n.shaderSource(i,t),n.compileShader(i),!1===n.getShaderParameter(i,n.COMPILE_STATUS))throw new Error(`Failed to compile shader: ${n.getShaderInfoLog(i)}\nShader source:\n${t}`);return i}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,n){const i=this.gl;i.activeTexture(i.TEXTURE0+e),this.checkError(),i.bindTexture(i.TEXTURE_2D,t),this.checkError(),i.uniform1i(n,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(o.env.debug){const t=this.gl,e=t.getError();let n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(n)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,n=0){if(2===this.version)return new a.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new a.RGBAFloatDataEncoder(this.gl,e):new a.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new a.Uint8DataEncoder(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){const t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");const n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){const t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){const t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);const n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);const r=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(i),r}checkRenderFloat32(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const t=this.gl;let e,n,i,r,s;try{e=t.createTexture(),n=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);const o=2===this.version?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,o,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),i=t.createShader(t.VERTEX_SHADER),!!i&&(t.shaderSource(i,"void main(){}"),t.compileShader(i),r=t.createShader(t.FRAGMENT_SHADER),!!r&&(t.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(r),s=t.createProgram(),!!s&&(t.attachShader(s,i),t.attachShader(s,r),t.linkProgram(s),t.useProgram(s),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)))}finally{t.disable(t.BLEND),s&&t.deleteProgram(s),i&&t.deleteShader(i),r&&t.deleteShader(r),n&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(n)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){const t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT)}}isTimerResultAvailable(t){let e=!1,n=!1;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const i=this.gl,r=this.disjointTimerQueryWebgl2Extension;e=i.getQueryParameter(t,i.QUERY_RESULT_AVAILABLE),n=i.getParameter(r.GPU_DISJOINT_EXT)}return e&&!n}getTimerResult(t){let e=0;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");{const n=this.gl;e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t)}return e/1e6}async waitForQueryAndGetTime(t){return await(0,u.repeatedTry)((()=>this.isTimerResultAvailable(t))),this.getTimerResult(t)}async createAndWaitForFence(){const t=this.createFence(this.gl);return this.pollFence(t)}createFence(t){let e;const n=t,i=n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),e=null===i?()=>!0:()=>{const t=n.clientWaitSync(i,0,0);return t===n.ALREADY_SIGNALED||t===n.CONDITION_SATISFIED},{query:i,isFencePassed:e}}async pollFence(t){return new Promise((e=>{this.addItemToPoll((()=>t.isFencePassed()),(()=>e()))}))}pollItems(){const t=c(this.itemsToPoll.map((t=>t.isDoneFn)));for(let e=0;e<=t;++e){const{resolveFn:t}=this.itemsToPoll[e];t()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}async addItemToPoll(t,e){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||await(0,u.repeatedTry)((()=>(this.pollItems(),0===this.itemsToPoll.length)))}}},1036:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const i=n(6231);class r{constructor(t,e){this.op=t,this.node=e}}e.ExecutionPlan=class{constructor(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",(()=>{const e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map(((t,n)=>new r(t,e[n]))),this.reset(),this._starter=[],this._ops.forEach(((t,e)=>{let n=!0;for(const e of t.node.inputs)if(!this._values[e]&&-1===this.graph.getInputIndices().indexOf(e)){n=!1;break}n&&this._starter.push(e)}))}))}reset(){this._values=this.graph.getValues().map((t=>t.tensor))}async execute(t,e){return this.profiler.event("session","ExecutionPlan.execute",(async()=>{this.reset();const n=t.createInferenceHandler(),r=this.graph.getInputIndices();if(e.length!==r.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${r.length}`);e.forEach(((t,e)=>{const n=r[e];this._values[n]=t}));const s=this._starter.slice(0),o=this.graph.getValues(),a=this.graph.getNodes();let u=0;for(;u<s.length;){const t=s[u++],e=this._ops[t],r=e.node.inputs.map((t=>this._values[t]));if(-1!==r.indexOf(void 0))throw new Error(`unresolved input detected: op: ${e.node}`);const c=r;i.Logger.verbose("ExecPlan",`Runing op:${e.node.name} (${c.map(((t,n)=>`'${e.node.inputs[n]}': ${t.type}[${t.dims.join(",")}]`)).join(", ")})`);const l=await this.profiler.event("node",e.node.name,(async()=>e.op.impl(n,c,e.op.context)));if(l.length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");l.forEach(((t,n)=>{const i=e.node.outputs[n];if(this._values[i])throw new Error(`output [${i}] already has value: op:${e.node.name}`);this._values[i]=t}));const h=new Set;l.forEach(((t,n)=>{const i=e.node.outputs[n];for(const t of o[i].to){const e=a[t];let n=!0;for(const t of e.inputs)if(!this._values[t]){n=!1;break}n&&h.add(t)}})),s.push(...h)}const c=[];for(let t=0;t<this.graph.getOutputIndices().length;t++){const e=this.graph.getOutputIndices()[t],n=this._values[e];if(void 0===n)throw new Error(`required output [${e}] does not have value`);0===e?await n.getData():n.data,c.push(n)}return i.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),c}))}}},7070:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const i=n(1446),r=n(7778),s=n(9395),o=n(9162),a=n(2517);var u=s.onnxruntime.experimental.fbs;e.Graph={from:(t,e)=>new h(t,e)};class c{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=a.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}}class l{constructor(t,e){t instanceof i.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new r.Attribute(t.attribute)):t instanceof u.Node&&(this.name=null!=e?e:t.name(),this.opType=t.opType(),this.attributes=new r.Attribute(a.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class h{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof i.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof u.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}}buildGraphFromOnnxFormat(t){const e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const n=new Map;if(!t.input)throw new Error("missing information in graph: input");const i=[];for(const n of t.input){if(e.has(n.name))throw new Error(`duplicated input name: ${n.name}`);const t=this._allData.push(new c(n))-1;e.set(n.name,t),i.push(n.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(const n of t.initializer){let t=e.get(n.name);if(void 0===t){const i=new c;i.type={shape:{dims:a.ProtoUtil.tensorDimsFromProto(n.dims)},tensorType:a.ProtoUtil.tensorDataTypeFromProto(n.dataType)},t=this._allData.push(i)-1,e.set(n.name,t)}this._allData[t]._from=-1,this._allData[t].tensor=o.Tensor.fromProto(n)}for(let t=0;t<this._allData.length;t++)this._allData[t].tensor||(this._allInputIndices.push(t),this._allInputNames.push(i[t]));if(!t.output)throw new Error("missing information in graph: output");for(const n of t.output){if(e.has(n.name))throw new Error(`duplicated output name: ${n.name}`);const t=this._allData.push(new c(n))-1;e.set(n.name,t),this._allOutputIndices.push(t),this._allOutputNames.push(n.name)}if(!t.node)throw new Error("missing information in graph: node");for(const e of t.node){if(!e.name)for(let t=0;;t++){const i=`unnamed_${e.opType}_${t}`;if(!n.has(i)){e.name=i;break}}if(n.has(e.name))throw new Error(`duplicated node name: ${e.name}`);const t=this._nodes.push(new l(e))-1;n.set(e.name,t)}for(let n=0;n<this._nodes.length;n++){const i=this._nodes[n],r=t.node[n];if(!r.output)throw new Error(`missing output for node: ${r.name}`);for(const t of r.output){let s=e.get(t);if(void 0===s&&(s=this._allData.push(new c)-1,e.set(t,s)),i.outputs.push(s),void 0!==this._allData[s]._from)throw new Error(`multiple nodes output to one data value: ${s}`);if(this._allData[s]._from=n,"Constant"===r.opType){if(!r.attribute||1!==r.attribute.length||!r.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!r.output||1!==r.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");i.outputs.pop(),i.executeNode=!1,this._allData[s]._from=-1,this._allData[s].tensor=o.Tensor.fromProto(r.attribute[0].t)}}}for(let n=0;n<this._nodes.length;n++){const i=this._nodes[n],r=t.node[n];if(!r.input)throw new Error(`missing input for node: ${r.name}`);for(const t of r.input){const s=e.get(t);if(void 0===s){if(""===t&&3===r.input.length&&"Resize"===r.opType)continue;throw new Error(`unrecognized input '${t}' for node: ${r.name}`)}i.inputs.push(s),this._allData[s]._to.push(n)}}return!0}buildGraphFromOrtFormat(t){var e,n,i;const r=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const s=new Map,h=[];for(let s=0;s<t.inputsLength();s++){const o=t.inputs(s);if(r.has(o))throw new Error(`duplicated input name: ${o}`);for(let s=0;s<t.nodeArgsLength();s++)if((null===(e=t.nodeArgs(s))||void 0===e?void 0:e.name())===o){const e=new c;if((null===(i=null===(n=t.nodeArgs(s))||void 0===n?void 0:n.type())||void 0===i?void 0:i.valueType())!==u.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const l=t.nodeArgs(s).type().value(new u.TensorTypeAndShape),d=a.ProtoUtil.tensorDataTypeFromProto(l.elemType()),p=l.shape(),f=[];for(let t=0;t<p.dimLength();t++)f.push(a.LongUtil.longToNumber(p.dim(t).value().dimValue()));e.type={shape:{dims:f},tensorType:d};const g=this._allData.push(e)-1;r.set(o,g),h.push(o)}}for(let e=0;e<t.initializersLength();e++){const n=t.initializers(e);let i=r.get(n.name());if(void 0===i){const t=new c,e=a.ProtoUtil.tensorDimsFromORTFormat(n),s=a.ProtoUtil.tensorDataTypeFromProto(n.dataType());t.type={shape:{dims:e},tensorType:s},i=this._allData.push(t)-1,r.set(n.name(),i)}this._allData[i]._from=-1,this._allData[i].tensor=o.Tensor.fromOrtTensor(n)}for(let t=0;t<this._allData.length;t++)this._allData[t].tensor||(this._allInputIndices.push(t),this._allInputNames.push(h[t]));for(let e=0;e<t.outputsLength();e++){const n=t.outputs(e);if(r.has(n))throw new Error(`duplicated output name: ${n}`);const i=this._allData.push(new c)-1;r.set(n,i),this._allOutputIndices.push(i),this._allOutputNames.push(n)}if(!t.nodes)throw new Error("missing information in graph: node");for(let e=0;e<t.nodesLength();e++){const n=t.nodes(e);let i=n.name();if(!i)for(let t=0;i=`unnamed_${n.opType()}_${t}`,s.has(i);t++);if(s.has(i))throw new Error(`duplicated node name: ${i}`);const r=this._nodes.push(new l(n,i))-1;s.set(i,r)}for(let e=0;e<this._nodes.length;e++){const n=this._nodes[e],i=t.nodes(e);if(null==i)throw new Error(`No node exists at index ${e}`);if(0===(null==i?void 0:i.outputsLength()))throw new Error(`missing output for node: ${i.name}`);for(let t=0;t<(null==i?void 0:i.outputsLength());t++){const s=null==i?void 0:i.outputs(t);let a=r.get(s);if(void 0===a&&(a=this._allData.push(new c)-1,r.set(s,a)),n.outputs.push(a),void 0!==this._allData[a]._from)throw new Error(`multiple nodes output to one data value: ${a}`);if(this._allData[a]._from=e,"Constant"===i.opType()){if(1!==i.attributesLength()||!i.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==i.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");n.outputs.pop(),n.executeNode=!1,this._allData[a]._from=-1,this._allData[a].tensor=o.Tensor.fromOrtTensor(i.attributes(0).t())}}}for(let e=0;e<this._nodes.length;e++){const n=this._nodes[e],i=t.nodes(e);if(0===i.inputsLength())throw new Error(`missing input for node: ${i.name}`);for(let t=0;t<i.inputsLength();t++){const s=i.inputs(t),o=r.get(s);if(void 0===o)throw new Error(`unrecognized input '${s}' for node: ${i.name()}`);n.inputs.push(o),this._allData[o]._to.push(e)}}}checkIsAcyclic(){const t=new Set;this._allInputIndices.forEach((e=>{this._allData[e]._to.forEach((e=>{t.add(e)}))}));const e=Array.from(t),n=new Array(this._nodes.length).fill("white");for(;e.length>0;){const t=e.pop();"gray"===n[t]?n[t]="black":(e.push(t),n[t]="gray",this._nodes[t].outputs.forEach((i=>{const r=this._allData[i];if(void 0!==r.tensor)throw new Error("node outputs should not be initialized");if(r._from!==t)throw new Error("from property of the Value object doesn't match index of Node being processed");r._to.forEach((t=>{if("gray"===n[t])throw new Error("model graph is cyclic");"white"===n[t]&&e.push(t)}))})))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0;for(let e=0;e<this._nodes.length;e++)this._nodes[e].executeNode?t>0&&(this._nodes[e].inputs.forEach((n=>{const i=this._allData[n]._to.indexOf(e+t);-1!==i&&(this._allData[n]._to[i]=e)})),this._nodes[e].outputs.forEach((n=>{this._allData[n]._from&&this._allData[n]._from===e+t&&(this._allData[n]._from=e)}))):(t++,this._nodes[e].outputs.forEach((t=>{this._allData[t]._from=-2})),this._nodes.splice(e,1),e--);t=0;for(let e=0;e<this._allData.length;e++)if(-2!==this._allData[e].from||-1!==this._allOutputIndices.indexOf(e+t)){if(t>0){let n=-1;void 0!==this._allData[e].from&&-1!==this._allData[e].from?(n=this._nodes[this._allData[e].from].outputs.indexOf(e+t),-1!==n&&(this._nodes[this._allData[e].from].outputs[n]=e)):(n=this._allInputIndices.indexOf(e+t),-1!==n&&(this._allInputIndices[n]=e)),this._allData[e].to.forEach((i=>{n=this._nodes[i].inputs.indexOf(e+t),-1!==n&&(this._nodes[i].inputs[n]=e)})),0===this._allData[e].to.length&&(n=this._allOutputIndices.indexOf(e+t),-1!==n&&(this._allOutputIndices[n]=e))}}else t++,this._allData.splice(e,1),e--}deleteNode(t){const e=this._nodes[t];if(e.outputs.length>1)for(let t=1;t<e.outputs.length;t++)if(this._allData[e.outputs[t]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");e.executeNode=!1;const n=e.inputs[0],i=e.outputs[0],r=this._allData[i].to,s=this._allData[n].to.indexOf(t);if(-1===s)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[n].to.splice(s,1),this._allData[i]._to=[];const o=this._allOutputIndices.indexOf(i);if(-1!==o&&(this._allOutputIndices[o]=n),r&&r.length>0)for(const t of r){const e=this._nodes[t].inputs.indexOf(i);if(-1===e)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[t].inputs[e]=n,this._allData[n].to.push(t)}}removeAllDropoutNodes(){let t=0;for(const e of this._nodes){if("Dropout"===e.opType){if(1!==e.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==e.outputs.length&&2!==e.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===e.outputs.length&&0!==this._allData[e.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(const e of this._nodes)"Identity"===e.opType&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const t of this._nodes)if("Conv"===t.opType){const e=this._allData[t.outputs[0]]._to;if(1===e.length&&this.isActivation(this._nodes[e[0]])){const n=this._nodes[e[0]];if("Clip"===n.opType)if(1===n.inputs.length)try{t.attributes.set("activation_params","floats",[n.attributes.getFloat("min"),n.attributes.getFloat("max")])}catch(e){t.attributes.set("activation_params","floats",[a.MIN_CLIP,a.MAX_CLIP])}else{if(!(n.inputs.length>=3&&void 0!==this._allData[n.inputs[1]].tensor&&void 0!==this._allData[n.inputs[2]].tensor))continue;t.attributes.set("activation_params","floats",[this._allData[n.inputs[1]].tensor.floatData[0],this._allData[n.inputs[2]].tensor.floatData[0]])}t.attributes.set("activation","string",n.opType),this.deleteNode(e[0])}}}}},6231:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const n={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},i={none:new class{log(t,e,n){}},console:new class{log(t,e,n){console.log(`${this.color(t)} ${n?"[35m"+n+"[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error(`unsupported severity: ${t}`)}}}},r={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let s={"":r};function o(t,e,n,i){if(void 0===e)return r=t,{verbose:o.verbose.bind(null,r),info:o.info.bind(null,r),warning:o.warning.bind(null,r),error:o.error.bind(null,r),fatal:o.fatal.bind(null,r)};if(void 0===n)a(t,e);else if("number"==typeof n&&void 0===i)a(t,e);else if("string"==typeof n&&void 0===i)a(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof i)throw new TypeError("input is valid");a(t,n,0,e)}var r}function a(t,e,r,o){const a=s[o||""]||s[""];n[t]<n[a.minimalSeverity]||(a.logDateTime&&(e=`${(new Date).toISOString()}|${e}`),a.logSourceLocation,i[a.provider].log(t,e,o))}!function(t){function e(t){s={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{const e=s[t]||r;s[t]={provider:n.provider||e.provider,minimalSeverity:n.minimalSeverity||e.minimalSeverity,logDateTime:void 0===n.logDateTime?e.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?e.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.fatal=function(e,n){t("fatal",e,n)},t.reset=e,t.set=n,t.setWithEnv=function(t){const e={};t.logLevel&&(e.minimalSeverity=t.logLevel),n("",e)}}(o||(o={})),e.Logger=o;class u{constructor(t,e,n,i,r,s){this.category=t,this.name=e,this.startTime=n,this.endCallback=i,this.timer=r,this.ctx=s}end(){return this.endCallback(this)}async checkTimer(){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class c{constructor(t,e,n,i){this.category=t,this.name=e,this.startTime=n,this.endTime=i}}e.Profiler=class{static create(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}constructor(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,n,i){const r=this._started?this.begin(t,e,i):void 0;let s=!1;const o=n();if(o&&"function"==typeof o.then)return s=!0,new Promise(((t,e)=>{o.then((async e=>{r&&await r.end(),t(e)}),(async t=>{r&&await r.end(),e(t)}))}));if(!s&&r){const t=r.end();if(t&&"function"==typeof t.then)return new Promise(((e,n)=>{t.then((()=>{e(o)}),(t=>{n(t)}))}))}return o}begin(t,n,i){if(!this._started)throw new Error("profiler is not started yet");if(void 0===i){const i=(0,e.now)();return this.flush(i),new u(t,n,i,(t=>this.endSync(t)))}{const e=i.beginTimer();return new u(t,n,0,(async t=>this.end(t)),e,i)}}async end(t){const e=await t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new c(t.category,t.name,t.startTime,e)),this.flush(e))}endSync(t){const n=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new c(t.category,t.name,t.startTime,n)),this.flush(n))}logOneEvent(t){e.Logger.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(const t=this._flushPointer;this._flushPointer<t+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now="undefined"!=typeof performance&&performance.now?()=>performance.now():Date.now},2644:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const i=n(5686),r=n(1446),s=n(7070),o=n(9395),a=n(2517);var u=o.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(t,e,n){if(!n)try{return void this.loadFromOnnxFormat(t,e)}catch(t){if(void 0!==n)throw t}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){const n=r.onnx.ModelProto.decode(t);if(a.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((t=>({domain:t.domain,version:a.LongUtil.longToNumber(t.version)}))),this._graph=s.Graph.from(n.graph,e)}loadFromOrtFormat(t,e){const n=new i.flatbuffers.ByteBuffer(t),r=u.InferenceSession.getRootAsInferenceSession(n).model();if(a.LongUtil.longToNumber(r.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let t=0;t<r.opsetImportLength();t++){const e=r.opsetImport(t);this._opsets.push({domain:null==e?void 0:e.domain(),version:a.LongUtil.longToNumber(e.version())})}this._graph=s.Graph.from(r.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(t,e)=>{"use strict";function n(t,e){if(e.endsWith("+")){const n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){const n=e.split("-"),i=Number.parseInt(n[0],10),r=Number.parseInt(n[1],10);return!isNaN(i)&&!isNaN(r)&&i<=t&&t<=r}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,i){for(const r of i){const i=r[0],s=r[1],o=r[2],a=r[3],u=r[4];if(t.opType===i)for(const t of e)if((t.domain===s||"ai.onnx"===t.domain&&""===s)&&n(t.version,o))return{opImpl:a,opInit:u}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map((t=>`${t.domain||"ai.onnx"} v${t.version}`)).join(", ")}`)}},9395:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const i=n(5686);var r,s;(function(t){let e;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.INT=2]="INT",t[t.STRING=3]="STRING",t[t.TENSOR=4]="TENSOR",t[t.GRAPH=5]="GRAPH",t[t.FLOATS=6]="FLOATS",t[t.INTS=7]="INTS",t[t.STRINGS=8]="STRINGS",t[t.TENSORS=9]="TENSORS",t[t.GRAPHS=10]="GRAPHS",t[t.SPARSE_TENSOR=11]="SPARSE_TENSOR",t[t.SPARSE_TENSORS=12]="SPARSE_TENSORS"}(e=t.AttributeType||(t.AttributeType={}))})((s=(r=e.onnxruntime||(e.onnxruntime={})).experimental||(r.experimental={})).fbs||(s.fbs={})),function(t){!function(t){!function(t){let e;!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VALUE=1]="VALUE",t[t.PARAM=2]="PARAM"}(e=t.DimensionValueType||(t.DimensionValueType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.UNDEFINED=0]="UNDEFINED",t[t.FLOAT=1]="FLOAT",t[t.UINT8=2]="UINT8",t[t.INT8=3]="INT8",t[t.UINT16=4]="UINT16",t[t.INT16=5]="INT16",t[t.INT32=6]="INT32",t[t.INT64=7]="INT64",t[t.STRING=8]="STRING",t[t.BOOL=9]="BOOL",t[t.FLOAT16=10]="FLOAT16",t[t.DOUBLE=11]="DOUBLE",t[t.UINT32=12]="UINT32",t[t.UINT64=13]="UINT64",t[t.COMPLEX64=14]="COMPLEX64",t[t.COMPLEX128=15]="COMPLEX128",t[t.BFLOAT16=16]="BFLOAT16"}(e=t.TensorDataType||(t.TensorDataType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.Primitive=0]="Primitive",t[t.Fused=1]="Fused"}(e=t.NodeType||(t.NodeType={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){let e;!function(t){t[t.NONE=0]="NONE",t[t.tensor_type=1]="tensor_type",t[t.sequence_type=2]="sequence_type",t[t.map_type=3]="map_type"}(e=t.TypeInfoValue||(t.TypeInfoValue={}))}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsShape(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsShape(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}dim(e,n){let i=this.bb.__offset(this.bb_pos,4);return i?(n||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}dimLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}static startShape(t){t.startObject(1)}static addDim(t,e){t.addFieldOffset(0,e,0)}static createDimVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startDimVector(t,e){t.startVector(4,e,4)}static endShape(t){return t.endObject()}static createShape(t,e){return n.startShape(t),n.addDim(t,e),n.endShape(t)}}e.Shape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimension(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimension(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}value(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}denotation(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimension(t){t.startObject(2)}static addValue(t,e){t.addFieldOffset(0,e,0)}static addDenotation(t,e){t.addFieldOffset(1,e,0)}static endDimension(t){return t.endObject()}static createDimension(t,e,i){return n.startDimension(t),n.addValue(t,e),n.addDenotation(t,i),n.endDimension(t)}}e.Dimension=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDimensionValue(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDimensionValue(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}dimType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}dimParam(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}static startDimensionValue(t){t.startObject(3)}static addDimType(e,n){e.addFieldInt8(0,n,t.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static addDimParam(t,e){t.addFieldOffset(2,e,0)}static endDimensionValue(t){return t.endObject()}static createDimensionValue(t,e,i,r){return n.startDimensionValue(t),n.addDimType(t,e),n.addDimValue(t,i),n.addDimParam(t,r),n.endDimensionValue(t)}}e.DimensionValue=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensorTypeAndShape(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensorTypeAndShape(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}elemType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}shape(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startTensorTypeAndShape(t){t.startObject(2)}static addElemType(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(t,e){t.addFieldOffset(1,e,0)}static endTensorTypeAndShape(t){return t.endObject()}static createTensorTypeAndShape(t,e,i){return n.startTensorTypeAndShape(t),n.addElemType(t,e),n.addShape(t,i),n.endTensorTypeAndShape(t)}}e.TensorTypeAndShape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMapType(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMapType(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}keyType(){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}valueType(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startMapType(t){t.startObject(2)}static addKeyType(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(t,e){t.addFieldOffset(1,e,0)}static endMapType(t){return t.endObject()}static createMapType(t,e,i){return n.startMapType(t),n.addKeyType(t,e),n.addValueType(t,i),n.endMapType(t)}}e.MapType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSequenceType(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSequenceType(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}elemType(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startSequenceType(t){t.startObject(1)}static addElemType(t,e){t.addFieldOffset(0,e,0)}static endSequenceType(t){return t.endObject()}static createSequenceType(t,e){return n.startSequenceType(t),n.addElemType(t,e),n.endSequenceType(t)}}e.SequenceType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){(t.fbs||(t.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(t,e,n,i){return t.prep(4,12),t.writeInt32(i),t.writeInt32(n),t.writeInt32(e),t.offset()}}}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNodeEdge(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNodeEdge(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}nodeIndex(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0}inputEdges(e,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+i)+12*e,this.bb):null}inputEdgesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}outputEdges(e,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+i)+12*e,this.bb):null}outputEdgesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNodeEdge(t){t.startObject(3)}static addNodeIndex(t,e){t.addFieldInt32(0,e,0)}static addInputEdges(t,e){t.addFieldOffset(1,e,0)}static startInputEdgesVector(t,e){t.startVector(12,e,4)}static addOutputEdges(t,e){t.addFieldOffset(2,e,0)}static startOutputEdgesVector(t,e){t.startVector(12,e,4)}static endNodeEdge(t){return t.endObject()}static createNodeEdge(t,e,i,r){return n.startNodeEdge(t),n.addNodeIndex(t,e),n.addInputEdges(t,i),n.addOutputEdges(t,r),n.endNodeEdge(t)}}e.NodeEdge=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNode(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNode(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}sinceVersion(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0}index(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0}opType(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.NodeType.Primitive}executionProviderType(t){let e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null}inputs(t,e){let n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}attributes(e,n){let i=this.bb.__offset(this.bb_pos,24);return i?(n||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}attributesLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCounts(t){let e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}inputArgCountsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}inputArgCountsArray(){let t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}implicitInputs(t,e){let n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}implicitInputsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startNode(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDomain(t,e){t.addFieldOffset(2,e,0)}static addSinceVersion(t,e){t.addFieldInt32(3,e,0)}static addIndex(t,e){t.addFieldInt32(4,e,0)}static addOpType(t,e){t.addFieldOffset(5,e,0)}static addType(e,n){e.addFieldInt32(6,n,t.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(t,e){t.addFieldOffset(7,e,0)}static addInputs(t,e){t.addFieldOffset(8,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(9,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addAttributes(t,e){t.addFieldOffset(10,e,0)}static createAttributesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startAttributesVector(t,e){t.startVector(4,e,4)}static addInputArgCounts(t,e){t.addFieldOffset(11,e,0)}static createInputArgCountsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startInputArgCountsVector(t,e){t.startVector(4,e,4)}static addImplicitInputs(t,e){t.addFieldOffset(12,e,0)}static createImplicitInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startImplicitInputsVector(t,e){t.startVector(4,e,4)}static endNode(t){return t.endObject()}static createNode(t,e,i,r,s,o,a,u,c,l,h,d,p,f){return n.startNode(t),n.addName(t,e),n.addDocString(t,i),n.addDomain(t,r),n.addSinceVersion(t,s),n.addIndex(t,o),n.addOpType(t,a),n.addType(t,u),n.addExecutionProviderType(t,c),n.addInputs(t,l),n.addOutputs(t,h),n.addAttributes(t,d),n.addInputArgCounts(t,p),n.addImplicitInputs(t,f),n.endNode(t)}}e.Node=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsValueInfo(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsValueInfo(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startValueInfo(t){t.startObject(3)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(t,e){t.addFieldOffset(2,e,0)}static endValueInfo(t){return t.endObject()}static createValueInfo(t,e,i,r){return n.startValueInfo(t),n.addName(t,e),n.addDocString(t,i),n.addType(t,r),n.endValueInfo(t)}}e.ValueInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTypeInfo(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTypeInfo(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}denotation(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}valueType(){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.experimental.fbs.TypeInfoValue.NONE}value(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}static startTypeInfo(t){t.startObject(3)}static addDenotation(t,e){t.addFieldOffset(0,e,0)}static addValueType(e,n){e.addFieldInt8(1,n,t.experimental.fbs.TypeInfoValue.NONE)}static addValue(t,e){t.addFieldOffset(2,e,0)}static endTypeInfo(t){return t.endObject()}static createTypeInfo(t,e,i,r){return n.startTypeInfo(t),n.addDenotation(t,e),n.addValueType(t,i),n.addValue(t,r),n.endTypeInfo(t)}}e.TypeInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsOperatorSetId(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsOperatorSetId(t,n){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}domain(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}version(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}static startOperatorSetId(t){t.startObject(2)}static addDomain(t,e){t.addFieldOffset(0,e,0)}static addVersion(t,e){t.addFieldInt64(1,e,t.createLong(0,0))}static endOperatorSetId(t){return t.endObject()}static createOperatorSetId(t,n,i){return e.startOperatorSetId(t),e.addDomain(t,n),e.addVersion(t,i),e.endOperatorSetId(t)}}t.OperatorSetId=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTensor(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTensor(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}dataType(){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED}rawData(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}rawDataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}rawDataArray(){let t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}stringData(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}stringDataLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}static startTensor(t){t.startObject(6)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static addDataType(e,n){e.addFieldInt32(3,n,t.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(t,e){t.addFieldOffset(4,e,0)}static createRawDataVector(t,e){t.startVector(1,e.length,1);for(let n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()}static startRawDataVector(t,e){t.startVector(1,e,1)}static addStringData(t,e){t.addFieldOffset(5,e,0)}static createStringDataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startStringDataVector(t,e){t.startVector(4,e,4)}static endTensor(t){return t.endObject()}static createTensor(t,e,i,r,s,o,a){return n.startTensor(t),n.addName(t,e),n.addDocString(t,i),n.addDims(t,r),n.addDataType(t,s),n.addRawData(t,o),n.addStringData(t,a),n.endTensor(t)}}e.Tensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSparseTensor(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSparseTensor(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}values(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}indices(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dims(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}dimsLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSparseTensor(t){t.startObject(3)}static addValues(t,e){t.addFieldOffset(0,e,0)}static addIndices(t,e){t.addFieldOffset(1,e,0)}static addDims(t,e){t.addFieldOffset(2,e,0)}static createDimsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startDimsVector(t,e){t.startVector(8,e,8)}static endSparseTensor(t){return t.endObject()}static createSparseTensor(t,e,i,r){return n.startSparseTensor(t),n.addValues(t,e),n.addIndices(t,i),n.addDims(t,r),n.endSparseTensor(t)}}e.SparseTensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsAttribute(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsAttribute(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}docString(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}type(){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.AttributeType.UNDEFINED}f(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0}i(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}s(t){let e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}t(e){let n=this.bb.__offset(this.bb_pos,16);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}g(e){let n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}floats(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0}floatsLength(){let t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0}floatsArray(){let t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}ints(t){let e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}intsLength(){let t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0}strings(t,e){let n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}stringsLength(){let t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0}tensors(e,n){let i=this.bb.__offset(this.bb_pos,26);return i?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}tensorsLength(){let t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0}graphs(e,n){let i=this.bb.__offset(this.bb_pos,28);return i?(n||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}graphsLength(){let t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0}static startAttribute(t){t.startObject(13)}static addName(t,e){t.addFieldOffset(0,e,0)}static addDocString(t,e){t.addFieldOffset(1,e,0)}static addType(e,n){e.addFieldInt32(2,n,t.experimental.fbs.AttributeType.UNDEFINED)}static addF(t,e){t.addFieldFloat32(3,e,0)}static addI(t,e){t.addFieldInt64(4,e,t.createLong(0,0))}static addS(t,e){t.addFieldOffset(5,e,0)}static addT(t,e){t.addFieldOffset(6,e,0)}static addG(t,e){t.addFieldOffset(7,e,0)}static addFloats(t,e){t.addFieldOffset(8,e,0)}static createFloatsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()}static startFloatsVector(t,e){t.startVector(4,e,4)}static addInts(t,e){t.addFieldOffset(9,e,0)}static createIntsVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startIntsVector(t,e){t.startVector(8,e,8)}static addStrings(t,e){t.addFieldOffset(10,e,0)}static createStringsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startStringsVector(t,e){t.startVector(4,e,4)}static addTensors(t,e){t.addFieldOffset(11,e,0)}static createTensorsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startTensorsVector(t,e){t.startVector(4,e,4)}static addGraphs(t,e){t.addFieldOffset(12,e,0)}static createGraphsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startGraphsVector(t,e){t.startVector(4,e,4)}static endAttribute(t){return t.endObject()}static createAttribute(t,e,i,r,s,o,a,u,c,l,h,d,p,f){return n.startAttribute(t),n.addName(t,e),n.addDocString(t,i),n.addType(t,r),n.addF(t,s),n.addI(t,o),n.addS(t,a),n.addT(t,u),n.addG(t,c),n.addFloats(t,l),n.addInts(t,h),n.addStrings(t,d),n.addTensors(t,p),n.addGraphs(t,f),n.endAttribute(t)}}e.Attribute=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsGraph(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsGraph(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}initializers(e,n){let i=this.bb.__offset(this.bb_pos,4);return i?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}initializersLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeArgs(e,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}nodeArgsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}nodes(e,n){let i=this.bb.__offset(this.bb_pos,8);return i?(n||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}maxNodeIndex(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0}nodeEdges(e,n){let i=this.bb.__offset(this.bb_pos,12);return i?(n||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}nodeEdgesLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}inputs(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}inputsLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}outputs(t,e){let n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null}outputsLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}sparseInitializers(e,n){let i=this.bb.__offset(this.bb_pos,18);return i?(n||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}sparseInitializersLength(){let t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}static startGraph(t){t.startObject(8)}static addInitializers(t,e){t.addFieldOffset(0,e,0)}static createInitializersVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInitializersVector(t,e){t.startVector(4,e,4)}static addNodeArgs(t,e){t.addFieldOffset(1,e,0)}static createNodeArgsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodeArgsVector(t,e){t.startVector(4,e,4)}static addNodes(t,e){t.addFieldOffset(2,e,0)}static createNodesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodesVector(t,e){t.startVector(4,e,4)}static addMaxNodeIndex(t,e){t.addFieldInt32(3,e,0)}static addNodeEdges(t,e){t.addFieldOffset(4,e,0)}static createNodeEdgesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startNodeEdgesVector(t,e){t.startVector(4,e,4)}static addInputs(t,e){t.addFieldOffset(5,e,0)}static createInputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startInputsVector(t,e){t.startVector(4,e,4)}static addOutputs(t,e){t.addFieldOffset(6,e,0)}static createOutputsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOutputsVector(t,e){t.startVector(4,e,4)}static addSparseInitializers(t,e){t.addFieldOffset(7,e,0)}static createSparseInitializersVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startSparseInitializersVector(t,e){t.startVector(4,e,4)}static endGraph(t){return t.endObject()}static createGraph(t,e,i,r,s,o,a,u,c){return n.startGraph(t),n.addInitializers(t,e),n.addNodeArgs(t,i),n.addNodes(t,r),n.addMaxNodeIndex(t,s),n.addNodeEdges(t,o),n.addInputs(t,a),n.addOutputs(t,u),n.addSparseInitializers(t,c),n.endGraph(t)}}e.Graph=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsModel(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsModel(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}irVersion(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}opsetImport(e,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}opsetImportLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}producerName(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}producerVersion(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}domain(t){let e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}modelVersion(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}docString(t){let e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null}graph(e){let n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}graphDocString(t){let e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null}static startModel(t){t.startObject(9)}static addIrVersion(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addOpsetImport(t,e){t.addFieldOffset(1,e,0)}static createOpsetImportVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startOpsetImportVector(t,e){t.startVector(4,e,4)}static addProducerName(t,e){t.addFieldOffset(2,e,0)}static addProducerVersion(t,e){t.addFieldOffset(3,e,0)}static addDomain(t,e){t.addFieldOffset(4,e,0)}static addModelVersion(t,e){t.addFieldInt64(5,e,t.createLong(0,0))}static addDocString(t,e){t.addFieldOffset(6,e,0)}static addGraph(t,e){t.addFieldOffset(7,e,0)}static addGraphDocString(t,e){t.addFieldOffset(8,e,0)}static endModel(t){return t.endObject()}static createModel(t,e,i,r,s,o,a,u,c,l){return n.startModel(t),n.addIrVersion(t,e),n.addOpsetImport(t,i),n.addProducerName(t,r),n.addProducerVersion(t,s),n.addDomain(t,o),n.addModelVersion(t,a),n.addDocString(t,u),n.addGraph(t,c),n.addGraphDocString(t,l),n.endModel(t)}}e.Model=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){class e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKernelCreateInfos(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKernelCreateInfos(t,n){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}nodeIndices(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}nodeIndicesLength(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}nodeIndicesArray(){let t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}kernelDefHashes(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}kernelDefHashesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startKernelCreateInfos(t){t.startObject(2)}static addNodeIndices(t,e){t.addFieldOffset(0,e,0)}static createNodeIndicesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startNodeIndicesVector(t,e){t.startVector(4,e,4)}static addKernelDefHashes(t,e){t.addFieldOffset(1,e,0)}static createKernelDefHashesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startKernelDefHashesVector(t,e){t.startVector(8,e,8)}static endKernelCreateInfos(t){return t.endObject()}static createKernelCreateInfos(t,n,i){return e.startKernelCreateInfos(t),e.addNodeIndices(t,n),e.addKernelDefHashes(t,i),e.endKernelCreateInfos(t)}}t.KernelCreateInfos=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSubGraphSessionState(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSubGraphSessionState(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}graphId(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}sessionState(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startSubGraphSessionState(t){t.startObject(2)}static addGraphId(t,e){t.addFieldOffset(0,e,0)}static addSessionState(t,e){t.addFieldOffset(1,e,0)}static endSubGraphSessionState(t){let e=t.endObject();return t.requiredField(e,4),e}static createSubGraphSessionState(t,e,i){return n.startSubGraphSessionState(t),n.addGraphId(t,e),n.addSessionState(t,i),n.endSubGraphSessionState(t)}}e.SubGraphSessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSessionState(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSessionState(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}kernels(e){let n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}subGraphSessionStates(e,n){let i=this.bb.__offset(this.bb_pos,6);return i?(n||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}subGraphSessionStatesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSessionState(t){t.startObject(2)}static addKernels(t,e){t.addFieldOffset(0,e,0)}static addSubGraphSessionStates(t,e){t.addFieldOffset(1,e,0)}static createSubGraphSessionStatesVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startSubGraphSessionStatesVector(t,e){t.startVector(4,e,4)}static endSessionState(t){return t.endObject()}static createSessionState(t,e,i){return n.startSessionState(t),n.addKernels(t,e),n.addSubGraphSessionStates(t,i),n.endSessionState(t)}}e.SessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){class n{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInferenceSession(t,e){return(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInferenceSession(t,e){return t.setPosition(t.position()+i.flatbuffers.SIZE_PREFIX_LENGTH),(e||new n).__init(t.readInt32(t.position())+t.position(),t)}static bufferHasIdentifier(t){return t.__has_identifier("ORTM")}ortVersion(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}model(e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}sessionState(e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startInferenceSession(t){t.startObject(3)}static addOrtVersion(t,e){t.addFieldOffset(0,e,0)}static addModel(t,e){t.addFieldOffset(1,e,0)}static addSessionState(t,e){t.addFieldOffset(2,e,0)}static endInferenceSession(t){return t.endObject()}static finishInferenceSessionBuffer(t,e){t.finish(e,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(t,e){t.finish(e,"ORTM",!0)}static createInferenceSession(t,e,i,r){return n.startInferenceSession(t),n.addOrtVersion(t,e),n.addModel(t,i),n.addSessionState(t,r),n.endInferenceSession(t)}}e.InferenceSession=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const i=n(1670),r=n(9162);e.OnnxjsSessionHandler=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(t,e,n){const s=new Map;for(const e in t)if(Object.hasOwnProperty.call(t,e)){const n=t[e];s.set(e,new r.Tensor(n.dims,n.type,void 0,void 0,n.data))}const o=await this.session.run(s),a={};return o.forEach(((t,e)=>{a[e]=new i.Tensor(t.type,t.data,t.dims)})),a}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const i=n(7067),r=n(1296),s=n(7091),o=n(1036),a=n(6231),u=n(2644);e.Session=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=a.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(t,e,n){await this.profiler.event("session","Session.loadModel",(async()=>{const o=await(0,s.resolveBackend)(this.backendHint);if(this.sessionHandler=o.createSessionHandler(this.context),this._model=new u.Model,"string"==typeof t){const e=t.endsWith(".ort");if("undefined"==typeof fetch){const n=await(0,r.promisify)(i.readFile)(t);this.initialize(n,e)}else{const n=await fetch(t),i=await n.arrayBuffer();this.initialize(new Uint8Array(i),e)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{const i=new Uint8Array(t,e||0,n||t.byteLength);this.initialize(i)}}))}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(()=>{const n=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,n,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new o.ExecutionPlan(this._model.graph,this._ops,this.profiler)})),this._initialized=!0}async run(t){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",(async()=>{const e=this.normalizeAndValidateInputs(t),n=await this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(n)}))}normalizeAndValidateInputs(t){const e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);const n=new Array(t.size);let i=0;for(let r=0;r<e.length;++r){const s=t.get(e[r]);if(!s)throw new Error(`missing input tensor for: '${name}'`);n[i++]=s}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{const e=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),i=new Array(e.length);for(let r=0;r<e.length;++r){const s=n[e[r]];i[r]=s.type.shape.dims,this.context.graphInputTypes.push(s.type.tensorType),this.context.graphInputDims.push(t[r].dims)}this.validateInputTensorDims(i,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let n=0;n<e.length;n++){const i=t[n],r=e[n].type;if(i!==r)throw new Error(`input tensor[${n}] check failed: expected type '${i}' but got ${r}`)}}validateInputTensorDims(t,e,n){for(let i=0;i<e.length;i++){const r=t[i],s=e[i].dims;if(!this.compareTensorDims(r,s,n))throw new Error(`input tensor[${i}] check failed: expected shape '[${r.join(",")}]' but got [${s.join(",")}]`)}}compareTensorDims(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i]&&(!n||0!==t[i]))return!1;return!0}createOutput(t){const e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");const n=new Map;for(let i=0;i<e.length;++i)n.set(e[i],t[i]);return n}initializeOps(t){const e=t.getNodes();this._ops=new Array(e.length);for(let n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)}}},9162:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const r=n(3442),s=i(n(3720)),o=n(1446),a=n(9395),u=n(2517);var c=a.onnxruntime.experimental.fbs;class l{get data(){if(void 0===this.cache){const t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache}get stringData(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")}get(t){return this.data[u.ShapeUtil.indicesToOffset(t,this.strides)]}set(t,e){this.data[u.ShapeUtil.indicesToOffset(t,this.strides)]=e}async getData(){return void 0===this.cache&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=u.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(t,e,n,i,s,o=r.Guid.create()){this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=i,this.cache=s,this.dataId=o,this.size=u.ShapeUtil.validateDimsAndCalcSize(t);const a=this.size,c=void 0===n&&void 0===i&&void 0===s;if(void 0!==s&&s.length!==a)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===s||Array.isArray(s)&&s.every((t=>"string"==typeof t))))throw new TypeError("cache should be a string array");c&&(this.cache=new Array(a))}else{if(void 0!==s){const t=d(e);if(!(s instanceof t))throw new TypeError(`cache should be type ${t.name}`)}if(c){const t=new ArrayBuffer(a*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}(e));this.cache=function(t,e){return new(d(e))(t)}(t,e)}}}static fromProto(t){if(!t)throw new Error("cannot construct Value from an empty tensor");const e=u.ProtoUtil.tensorDataTypeFromProto(t.dataType),n=u.ProtoUtil.tensorDimsFromProto(t.dims),i=new l(n,e);if("string"===e)t.stringData.forEach(((t,e)=>{i.data[e]=(0,u.decodeUtf8String)(t)}));else if(t.rawData&&"number"==typeof t.rawData.byteLength&&t.rawData.byteLength>0){const e=i.data,n=new DataView(t.rawData.buffer,t.rawData.byteOffset,t.rawData.byteLength),r=h(t.dataType),s=t.rawData.byteLength/r;if(t.rawData.byteLength%r!=0)throw new Error("invalid buffer length");if(e.length!==s)throw new Error("buffer length mismatch");for(let i=0;i<s;i++){const s=f(n,t.dataType,i*r);e[i]=s}}else{let e;switch(t.dataType){case o.onnx.TensorProto.DataType.FLOAT:e=t.floatData;break;case o.onnx.TensorProto.DataType.INT32:case o.onnx.TensorProto.DataType.INT16:case o.onnx.TensorProto.DataType.UINT16:case o.onnx.TensorProto.DataType.INT8:case o.onnx.TensorProto.DataType.UINT8:case o.onnx.TensorProto.DataType.BOOL:e=t.int32Data;break;case o.onnx.TensorProto.DataType.INT64:e=t.int64Data;break;case o.onnx.TensorProto.DataType.DOUBLE:e=t.doubleData;break;case o.onnx.TensorProto.DataType.UINT32:case o.onnx.TensorProto.DataType.UINT64:e=t.uint64Data;break;default:throw new Error("unspecific error")}if(null==e)throw new Error("failed to populate data from a tensorproto value");const n=i.data;if(n.length!==e.length)throw new Error("array length mismatch");for(let i=0;i<e.length;i++){const r=e[i];s.default.isLong(r)?n[i]=p(r,t.dataType):n[i]=r}}return i}static fromData(t,e,n){return new l(e,n,void 0,void 0,t)}static fromOrtTensor(t){if(!t)throw new Error("cannot construct Value from an empty tensor");const e=u.ProtoUtil.tensorDimsFromORTFormat(t),n=u.ProtoUtil.tensorDataTypeFromProto(t.dataType()),i=new l(e,n);if("string"===n)for(let e=0;e<t.stringDataLength();e++)i.data[e]=t.stringData(e);else if(t.rawDataArray()&&"number"==typeof t.rawDataLength()&&t.rawDataLength()>0){const e=i.data,n=new DataView(t.rawDataArray().buffer,t.rawDataArray().byteOffset,t.rawDataLength()),r=h(t.dataType()),s=t.rawDataLength()/r;if(t.rawDataLength()%r!=0)throw new Error("invalid buffer length");if(e.length!==s)throw new Error("buffer length mismatch");for(let i=0;i<s;i++){const s=f(n,t.dataType(),i*r);e[i]=s}}return i}}function h(t){switch(t){case o.onnx.TensorProto.DataType.UINT8:case o.onnx.TensorProto.DataType.INT8:case o.onnx.TensorProto.DataType.BOOL:return 1;case o.onnx.TensorProto.DataType.UINT16:case o.onnx.TensorProto.DataType.INT16:return 2;case o.onnx.TensorProto.DataType.FLOAT:case o.onnx.TensorProto.DataType.INT32:case o.onnx.TensorProto.DataType.UINT32:return 4;case o.onnx.TensorProto.DataType.INT64:case o.onnx.TensorProto.DataType.DOUBLE:case o.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${o.onnx.TensorProto.DataType[t]}`)}}function d(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function p(t,e){if(e===o.onnx.TensorProto.DataType.INT64||e===c.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==o.onnx.TensorProto.DataType.UINT32&&e!==c.TensorDataType.UINT32&&e!==o.onnx.TensorProto.DataType.UINT64&&e!==c.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${o.onnx.TensorProto.DataType[e]}`);if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function f(t,e,n){switch(e){case o.onnx.TensorProto.DataType.BOOL:case o.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case o.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case o.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case o.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case o.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case o.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case o.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case o.onnx.TensorProto.DataType.INT64:return p(s.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case o.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case o.onnx.TensorProto.DataType.UINT64:return p(s.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${o.onnx.TensorProto.DataType[e]}`)}}e.Tensor=l},2517:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const r=n(5686),s=i(n(3720)),o=n(1446),a=n(9162);e.checkInputsShape=function(t,...e){if(!t||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].dims||t[n].dims.length!==e[n])return!1;return!0},e.assert=function(t,e){if(!t)throw new Error("string"==typeof e?e:e())},e.ArrayUtil=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}};class u{static preprocessInputShapes(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]}static postprocessOutputShape(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}}e.MatMulUtil=u;class c{static calcShape(t,e,n=!1){const i=t.length,r=e.length;if(0===i)return e;if(0===r)return t;const s=Math.max(t.length,e.length),o=new Array(s);if(n){if(i<2||r<2)return;const n=u.calcMatMulShape([t[i-2],t[i-1]],[e[r-2],e[r-1]]);if(void 0===n)return;[o[s-2],o[s-1]]=n}for(let a=n?3:1;a<=s;a++){const n=i-a<0?1:t[i-a],u=r-a<0?1:e[r-a];if(n!==u&&n>1&&u>1)return;o[s-a]=Math.max(n,u)}return o}static index(t,e){const n=new Array(e.length);return c.fillIndex(t,e,n),n}static fillIndex(t,e,n){const i=t.length-e.length;for(let r=0;r<e.length;r++)n[r]=t[i+r]%e[r]}static calc(t,e,n,i,r){const s=c.calcShape(t.dims,e.dims);if(s){if(i&&!d.areEqual(s,t.dims))return;const o=d.size(s),u=i?t:new a.Tensor(s,r||t.type);if(0===s.length)u.set([],n(t.get([]),e.get([])));else{const i=new Array(s.length),r=new Array(t.dims.length),a=new Array(e.dims.length);let l,h=0,d=0,p=!1,f=!1;0===t.dims.length&&(h=t.get([]),p=!0),0===e.dims.length&&(d=e.get([]),f=!0);for(let g=0;g<o;g++){l=g;for(let t=s.length-1;t>=0;t--)i[t]=l%s[t],l=Math.floor(l/s[t]);p||(c.fillIndex(i,t.dims,r),h=t.get(r)),f||(c.fillIndex(i,e.dims,a),d=e.get(a)),u.set(i,n(h,d))}}return u}}static isValidBroadcast(t,e){const n=t.length,i=e.length;if(n>i)return!1;for(let r=1;r<=n;r++)if(1!==t[n-r]&&t[n-r]!==e[i-r])return!1;return!0}static getBroadcastDims(t,e){const n=t.length,i=[];for(let r=0;r<n;r++){const s=n-1-r,o=t[s]||1;(e[e.length-1-r]||1)>1&&1===o&&i.unshift(s)}return i}}e.BroadcastUtil=c,e.arrayCopyHelper=function(t,e,n,i,r){if(i<0||i>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(i+r>e.length)throw new Error("source indices to be copied are outside bounds");if(n+r>t.length)throw new Error("target array is too small to hold result");for(let s=0;s<r;s++)t[n+s]=e[i+s]},e.GemmUtil=class{static getShapeOfGemmResult(t,e,n,i,r){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");let s,o,a;e?(s=t[1],o=t[0]):(s=t[0],o=t[1]);let u=-1;if(i?(a=n[0],u=1):(a=n[1],u=0),n[u]!==o)throw new Error("dimension mismatch");if(s<=0||a<=0||o<=0)throw new Error("invalid shape specified");if(r&&!c.isValidBroadcast(r,[s,a]))throw new Error("gemm: invalid bias shape for broadcast");return[s,a,o]}};class l{static tensorDataTypeFromProto(t){switch(t){case o.onnx.TensorProto.DataType.INT8:return"int8";case o.onnx.TensorProto.DataType.UINT8:return"uint8";case o.onnx.TensorProto.DataType.BOOL:return"bool";case o.onnx.TensorProto.DataType.INT16:return"int16";case o.onnx.TensorProto.DataType.UINT16:return"uint16";case o.onnx.TensorProto.DataType.INT32:return"int32";case o.onnx.TensorProto.DataType.UINT32:return"uint32";case o.onnx.TensorProto.DataType.FLOAT:return"float32";case o.onnx.TensorProto.DataType.DOUBLE:return"float64";case o.onnx.TensorProto.DataType.STRING:return"string";case o.onnx.TensorProto.DataType.INT64:return"int32";case o.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${o.onnx.TensorProto.DataType[t]}`)}}static tensorDataTypeStringToEnum(t){switch(t){case"int8":return o.onnx.TensorProto.DataType.INT8;case"uint8":return o.onnx.TensorProto.DataType.UINT8;case"bool":return o.onnx.TensorProto.DataType.BOOL;case"int16":return o.onnx.TensorProto.DataType.INT16;case"uint16":return o.onnx.TensorProto.DataType.UINT16;case"int32":return o.onnx.TensorProto.DataType.INT32;case"uint32":return o.onnx.TensorProto.DataType.UINT32;case"float32":return o.onnx.TensorProto.DataType.FLOAT;case"float64":return o.onnx.TensorProto.DataType.DOUBLE;case"string":return o.onnx.TensorProto.DataType.STRING;case"int64":return o.onnx.TensorProto.DataType.INT64;case"uint64":return o.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${t}`)}}static tensorDimsFromProto(t){return t.map((t=>s.default.isLong(t)?t.toNumber():t))}static tensorValueTypeFromProto(t){return{tensorType:l.tensorDataTypeFromProto(t.elemType),shape:{dims:l.tensorDimsFromProto(t.shape.dim.map((t=>t.dimValue)))}}}static tensorDimsFromORTFormat(t){const e=[];for(let n=0;n<t.dimsLength();n++)e.push(h.longToNumber(t.dims(n)));return e}static tensorAttributesFromORTFormat(t){const e=[];for(let n=0;n<t.attributesLength();n++)e.push(t.attributes(n));return e}}e.ProtoUtil=l;class h{static longToNumber(t,e){return s.default.isLong(t)?t.toNumber():t instanceof r.flatbuffers.Long?s.default.fromValue({low:t.low,high:t.high,unsigned:null!=e&&e}).toNumber():t}static isLong(t){return s.default.isLong(t)||t instanceof r.flatbuffers.Long}}e.LongUtil=h;class d{static size(t){return d.getSizeFromDimensionRange(t,0,t.length)}static sizeFromDimension(t,e){if(e<0||e>t.length)throw new Error(`invalid dimension of ${e} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return d.getSizeFromDimensionRange(t,e,t.length)}static sizeToDimension(t,e){if(e<0||e>t.length)throw new Error(`invalid dimension of ${e} for sizeToDimension as Tensor has ${t.length} dimensions.`);return d.getSizeFromDimensionRange(t,0,e)}static getSizeFromDimensionRange(t,e,n){let i=1;for(let r=e;r<n;r++){if(t[r]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");i*=t[r]}return i}static computeStrides(t){const e=t.length;if(0===e)return[];if(1===e)return[1];const n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(let i=e-3;i>=0;--i)n[i]=n[i+1]*t[i+1];return n}static transpose(t){return t.slice().reverse()}static indicesToOffset(t,e,n){void 0===n&&(n=t.length);let i=0;for(let r=0;r<n;++r)i+=e[r]*t[r];return i}static offsetToIndices(t,e){const n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];const i=new Array(e.length);for(let n=0;n<i.length-1;++n)i[n]=Math.floor(t/e[n]),t-=i[n]*e[n];return i[i.length-1]=t,i}static normalizeAxis(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t}static normalizeAxes(t,e){return t.map((t=>this.normalizeAxis(t,e)))}static incrementIndex(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(let i=n-1;i>=0&&(t[i]++,!(t[i]<e[i]));--i)t[i]=0}static calculateReshapedDims(t,e){if(0===e.length){if(0===t.length||1===d.size(t))return[];throw new Error("cannot reshape to a scalar Tensor")}const n=e.length,i=new Array(n);let r=-1,s=1;for(let o=0;o<n;o++){if(e[o]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===e[o]){if(-1!==r)throw new Error("at most one dimension in shape hints can be -1");r=o}else{if(0===e[o]){if(o>=t.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");i[o]=t[o]}else i[o]=e[o];s*=i[o]}}const o=d.size(t);if(-1!==r){if(o%s!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${t}] Output shape: [${e}]`);i[r]=o/s}else if(s!==o)throw new Error("reshapedDims and originalDims don't have matching sizes");return i}static sortBasedOnPerm(t,e){return e?e.map((e=>t[e])):t.slice().reverse()}static padShape(t,e){const n=t.length;return t.map(((t,i)=>t+e[i]+e[i+n]))}static areEqual(t,e){return t.length===e.length&&t.every(((t,n)=>t===e[n]))}static validateDimsAndCalcSize(t){if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let e=1;for(const n of t){if(!Number.isInteger(n))throw new TypeError(`Invalid shape: ${n} is not an integer`);if(n<0||n>2147483647)throw new TypeError(`Invalid shape: length ${n} is not allowed`);e*=n}return e}static flattenShape(t,e){e<0&&(e+=t.length);const n=t.reduce(((t,e)=>t*e),1),i=t.slice(e).reduce(((t,e)=>t*e),1);return[n/i,i]}static squeezeShape(t,e){const n=new Array;e=d.normalizeAxes(e,t.length);for(let i=0;i<t.length;i++){const r=e.indexOf(i)>=0;if(r&&1!==t[i])throw new Error("squeeze an axis of size different than 1");(0===e.length&&t[i]>1||e.length>0&&!r)&&n.push(t[i])}return n}static unsqueezeShape(t,e){const n=new Array(t.length+e.length);n.fill(0);for(let t=0;t<e.length;t++){const i=d.normalizeAxis(e[t],n.length);if(i>=n.length)throw new Error("'axes' has an out of range axis");if(0!==n[i])throw new Error("'axes' has a duplicate axis");n[i]=1}let i=0;for(let e=0;e<n.length;e++)0===n[e]&&(n[e]=t[i++]);if(i!==t.length)throw new Error("the unsqueezed dimension could not be established");return n}}e.ShapeUtil=d,e.MathUtil=class{static sqr(t,e,n,i,r){if(i<0||i>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(i+r>e.length)throw new Error("source indices to be copied are outside bounds");if(n+r>t.length)throw new Error("target array is too small to hold result");for(let s=0;s<r;s++)t[n+s]+=Math.pow(e[i+s],2)}static axpy(t,e,n,i,r,s){if(i<0||i>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(i+r>e.length)throw new Error("source indices to be copied are outside bounds");if(n+r>t.length)throw new Error("target array is too small to hold result");for(let o=0;o<r;o++)t[n+o]+=s*e[i+o]}static powx(t,e,n,i,r,s){if(i<0||i>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(i+r>e.length)throw new Error("source indices to be copied are outside bounds");if(n+r>t.length)throw new Error("target array is too small to hold result");for(let o=0;o<r;o++)t[n+o]=Math.pow(e[i+o],s)}static mul(t,e,n,i,r){if(i<0||i>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(i+r>e.length)throw new Error("source indices to be copied are outside bounds");if(n+r>t.length)throw new Error("target array is too small to hold result");for(let s=0;s<r;s++)t[n+s]=e[i+s]*t[n+s]}};class p{static splitShape(t,e,n,i){if(0===n.length){if(!i)throw new Error("need to know number of outputs when the 'split' attribute is not specified");p.determineSplit(t[e],i,n)}const r=[],s=[0];for(let i=0;i<n.length;++i){0!==i&&s.push(s[i-1]+n[i-1]);const o=t.slice();o[e]=n[i],r.push(o)}return[r,s]}static determineSplit(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(let i=0;i<e;++i)n.push(t/e)}}e.SplitUtil=p;class f{static calcReduce(t,e,n,i,r){const s=t.dims.slice(0);0===e.length&&s.forEach(((t,n)=>e.push(n)));const o=f.calcReduceShape(s,e,!0),u=d.size(o),l=new a.Tensor(o,t.type),h=d.computeStrides(o),p=d.computeStrides(s),g=new Array(s.length);for(let n=0;n<u;n++){const o=d.offsetToIndices(n,h);c.fillIndex(o,s,g),l.set(o,f.calcReduceByAxis(t.numberData,e,s,0,d.indicesToOffset(g,p),i,r))}return n?l:new a.Tensor(f.calcReduceShape(s,e,n),l.type,void 0,void 0,l.data,l.dataId)}static calcReduceByAxis(t,e,n,i,r,s,o){let a=0;if(i>=e.length)return s(t[r]);const u=e[i],c=u>=n.length?1:d.size(n.slice(u+1));for(let l=0;l<n[u];l++)a=0===l?f.calcReduceByAxis(t,e,n,i+1,r,s,o):o(a,f.calcReduceByAxis(t,e,n,i+1,r,s,o)),r+=c;return a}static calcReduceShape(t,e,n){const i=t.slice();for(let t=0;t<e.length;t++)i[e[t]]=n?1:0;return i.filter((t=>0!==t))}}e.ReduceUtil=f;class g{static adjustPoolAttributes(t,e,n,i,r,s){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let t=0;t<e.length-2;t++)t>=n.length?n.push(e[t+2]):n[t]=e[t+2];for(let t=0;t<n.length;t++)if(t<i.length){if(i[t]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let t=0;t<n.length;t++)if(t<r.length){if(r[t]<0)throw new Error("dilations should be greater than or equal to 1")}else r.push(1);for(let t=0;t<2*n.length;t++)if(t<s.length){if(s[t]<0)throw new Error("pad should be greater than or equal to 1")}else s.push(0);for(let t=0;t<n.length;t++){if(n[t]<=0)throw new Error("kernel shapes need to be greater than 0");if(s[t]>=n[t]||s[t+n.length]>=n[t])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,e,n,i,r,s){if(s){if(r.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(e.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let o=0;o<t.length-2;o++)g.adjustPadAndReturnShape(t[o+2],e[o],n[o],i[o],r,o,o+t.length-2,s)}}static computePoolOutputShape(t,e,n,i,r,s,o){if(e.length<=0)throw new Error("input shape must be of size greater than 0");const a=[e[0],e[1]];return g.computeShapeHelper(t,e,a,n,i,r,s,o),a}static computeConvOutputShape(t,e,n,i,r,s,o){if(t.length<=0||e.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const a=[t[0],e[0]];return g.computeShapeHelper(!1,t,a,n,i,r,s,o),a}static computeShapeHelper(t,e,n,i,r,s,o,a){if(t)for(let t=0;t<e.length-2;t++)n.push(1);else for(let t=0;t<e.length-2;t++)n.push(g.adjustPadAndReturnShape(e[t+2],i[t],r[t],s[t],o,t,t+e.length-2,a))}static adjustPadAndReturnShape(t,e,n,i,r,s,o,a){const u=n*(i-1)+1;if(!a||"NOTSET"===a)return Math.floor((t+r[s]+r[o]-u)/e+1);switch(a){case"VALID":return r[s]=0,r[o]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const n=((t+e-1)/e-1)*e+i-t;return r[s]="SAME_LOWER"===a?Math.floor((n+1)/2):Math.floor(n/2),r[o]=n-r[s],Math.floor((t+n-i)/e+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=g,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(t){return(new TextDecoder).decode(t)}},7967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,i,r)=>{if("object"==typeof t&&null!==t){if(i.has(t))throw new Error("Circular reference in options");i.add(t)}Object.entries(t).forEach((([t,s])=>{const o=n?n+t:t;if("object"==typeof s)(0,e.iterateExtraOptions)(s,o+".",i,r);else if("string"==typeof s||"number"==typeof s)r(o,s.toString());else{if("boolean"!=typeof s)throw new Error("Can't handle extra config type: "+typeof s);r(o,s?"1":"0")}}))}},2157:function(t,e,n){"use strict";var i,r=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const a=n(1670),u=o(n(349)),c=n(6361),l=()=>!!a.env.wasm.proxy&&"undefined"!=typeof document;let h,d,p,f=!1,g=!1,m=!1;const _=[],y=[],v=[],b=[],w=[],T=[],x=()=>{if(f||!g||m||!h)throw new Error("worker not ready")},S=t=>{switch(t.data.type){case"init-wasm":f=!1,t.data.err?(m=!0,d[1](t.data.err)):(g=!0,d[0]());break;case"init-ort":t.data.err?p[1](t.data.err):p[0]();break;case"create_allocate":t.data.err?_.shift()[1](t.data.err):_.shift()[0](t.data.out);break;case"create_finalize":t.data.err?y.shift()[1](t.data.err):y.shift()[0](t.data.out);break;case"create":t.data.err?v.shift()[1](t.data.err):v.shift()[0](t.data.out);break;case"release":t.data.err?b.shift()[1](t.data.err):b.shift()[0]();break;case"run":t.data.err?w.shift()[1](t.data.err):w.shift()[0](t.data.out);break;case"end-profiling":t.data.err?T.shift()[1](t.data.err):T.shift()[0]()}},I="undefined"!=typeof document?null===(i=null===document||void 0===document?void 0:document.currentScript)||void 0===i?void 0:i.src:void 0;e.initWasm=async()=>{if(l()){if(g)return;if(f)throw new Error("multiple calls to 'initWasm()' detected.");if(m)throw new Error("previous call to 'initWasm()' failed.");return f=!0,void 0===a.env.wasm.wasmPaths&&I&&0!==I.indexOf("blob:")&&(a.env.wasm.wasmPaths=I.substr(0,+I.lastIndexOf("/")+1)),new Promise(((t,e)=>{null==h||h.terminate(),h=n(9710).Z(),h.onmessage=S,d=[t,e];const i={type:"init-wasm",in:a.env.wasm};h.postMessage(i)}))}return(0,c.initializeWebAssembly)(a.env.wasm)},e.initOrt=async(t,e)=>{if(l())return x(),new Promise(((n,i)=>{p=[n,i];const r={type:"init-ort",in:{numThreads:t,loggingLevel:e}};h.postMessage(r)}));u.initOrt(t,e)},e.createSessionAllocate=async t=>l()?(x(),new Promise(((e,n)=>{_.push([e,n]);const i={type:"create_allocate",in:{model:t}};h.postMessage(i,[t.buffer])}))):u.createSessionAllocate(t),e.createSessionFinalize=async(t,e)=>l()?(x(),new Promise(((n,i)=>{y.push([n,i]);const r={type:"create_finalize",in:{modeldata:t,options:e}};h.postMessage(r)}))):u.createSessionFinalize(t,e),e.createSession=async(t,e)=>l()?(x(),new Promise(((n,i)=>{v.push([n,i]);const r={type:"create",in:{model:t,options:e}};h.postMessage(r,[t.buffer])}))):u.createSession(t,e),e.releaseSession=async t=>{if(l())return x(),new Promise(((e,n)=>{b.push([e,n]);const i={type:"release",in:t};h.postMessage(i)}));u.releaseSession(t)},e.run=async(t,e,n,i,r)=>l()?(x(),new Promise(((s,o)=>{w.push([s,o]);const a={type:"run",in:{sessionId:t,inputIndices:e,inputs:n,outputIndices:i,options:r}};h.postMessage(a,u.extractTransferableBuffers(n))}))):u.run(t,e,n,i,r),e.endProfiling=async t=>{if(l())return x(),new Promise(((e,n)=>{T.push([e,n]);const i={type:"end-profiling",in:t};h.postMessage(i)}));u.endProfiling(t)}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const i=n(7967),r=n(4983),s=n(6361);e.setRunOptions=t=>{const e=(0,s.getInstance)();let n=0;const o=[],a=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(a.terminate=!1);let s=0;if(void 0!==(null==t?void 0:t.tag)&&(s=(0,r.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,s),0===n)throw new Error("Can't create run options");return void 0!==(null==t?void 0:t.extra)&&(0,i.iterateExtraOptions)(t.extra,"",new WeakSet,((t,i)=>{const s=(0,r.allocWasmString)(t,o),a=(0,r.allocWasmString)(i,o);if(0!==e._OrtAddRunConfigEntry(n,s,a))throw new Error(`Can't set a run config entry: ${t} - ${i}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},2306:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const i=n(2806),r=n(1670),s=n(2850),o=n(2157);let a;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(t){const e=await fetch(t),n=await e.arrayBuffer();return(0,o.createSessionAllocate)(new Uint8Array(n))}async loadModel(t,e){if(a||(await(0,o.initOrt)(r.env.wasm.numThreads,(t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}})(r.env.logLevel)),a=!0),"string"==typeof t)if("undefined"==typeof fetch){const n=await(0,s.promisify)(i.readFile)(t);[this.sessionId,this.inputNames,this.outputNames]=await(0,o.createSession)(n,e)}else{const n=await this.createSessionAllocate(t);[this.sessionId,this.inputNames,this.outputNames]=await(0,o.createSessionFinalize)(n,e)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,o.createSession)(t,e)}async dispose(){return(0,o.releaseSession)(this.sessionId)}async run(t,e,n){const i=[],s=[];Object.entries(t).forEach((t=>{const e=t[0],n=t[1],r=this.inputNames.indexOf(e);if(-1===r)throw new Error(`invalid input '${e}'`);i.push(n),s.push(r)}));const a=[];Object.entries(e).forEach((t=>{const e=t[0],n=this.outputNames.indexOf(e);if(-1===n)throw new Error(`invalid output '${e}'`);a.push(n)}));const u=await(0,o.run)(this.sessionId,s,i.map((t=>[t.type,t.dims,t.data])),a,n),c={};for(let t=0;t<u.length;t++)c[this.outputNames[a[t]]]=new r.Tensor(u[t][0],u[t][2],u[t][1]);return c}startProfiling(){}endProfiling(){(0,o.endProfiling)(this.sessionId)}}},4919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const i=n(7967),r=n(4983),s=n(6361);e.setSessionOptions=t=>{const e=(0,s.getInstance)();let n=0;const o=[],a=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(a);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(a.graphOptimizationLevel="all");const u=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(a.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(a.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(a.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(a.executionMode="sequential");const c=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(a.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,r.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(a.enableProfiling=!1),n=e._OrtCreateSessionOptions(u,!!a.enableCpuMemArena,!!a.enableMemPattern,c,!!a.enableProfiling,0,l,a.logSeverityLevel,a.logVerbosityLevel),0===n)throw new Error("Can't create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const i of e){let e="string"==typeof i?i:i.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,r.allocWasmString)(e,n);if(0!==(0,s.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can't append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,i.iterateExtraOptions)(t.extra,"",new WeakSet,((t,i)=>{const s=(0,r.allocWasmString)(t,o),a=(0,r.allocWasmString)(i,o);if(0!==e._OrtAddSessionConfigEntry(n,s,a))throw new Error(`Can't set a session config entry: ${t} - ${i}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},4983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const i=n(6361);e.allocWasmString=(t,e)=>{const n=(0,i.getInstance)(),r=n.lengthBytesUTF8(t)+1,s=n._malloc(r);return n.stringToUTF8(t,s,r),e.push(s),s}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const i=n(586),r=n(4919),s=n(4983),o=n(6361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can't initialize onnxruntime. error code = ${n}`)};const a=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let i=0,s=0,u=[];try{if([s,u]=(0,r.setSessionOptions)(e),i=n._OrtCreateSession(t[0],t[1],s),0===i)throw new Error("Can't create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(s),u.forEach(n._free)}const c=n._OrtGetInputCount(i),l=n._OrtGetOutputCount(i),h=[],d=[],p=[],f=[];for(let t=0;t<c;t++){const e=n._OrtGetInputName(i,t);if(0===e)throw new Error("Can't get an input name");d.push(e),h.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(i,t);if(0===e)throw new Error("Can't get an output name");f.push(e),p.push(n.UTF8ToString(e))}return a.set(i,[i,d,f]),[i,h,p]},e.createSession=(t,n)=>{const i=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(i,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=a.get(t);if(!n)throw new Error("invalid session id");const i=n[0],r=n[1],s=n[2];r.forEach(e._OrtFree),s.forEach(e._OrtFree),e._OrtReleaseSession(i),a.delete(t)};const u=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},c=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,r,h)=>{const d=(0,o.getInstance)(),p=a.get(t);if(!p)throw new Error("invalid session id");const f=p[0],g=p[1],m=p[2],_=e.length,y=r.length;let v=0,b=[];const w=[],T=[];try{[v,b]=(0,i.setRunOptions)(h);for(let t=0;t<_;t++){const e=n[t][0],i=n[t][1],r=n[t][2];let o,a;if(Array.isArray(r)){a=4*r.length,o=d._malloc(a),T.push(o);let t=o/4;for(let e=0;e<r.length;e++){if("string"!=typeof r[e])throw new TypeError(`tensor data at index ${e} is not a string`);d.HEAPU32[t++]=(0,s.allocWasmString)(r[e],T)}}else a=r.byteLength,o=d._malloc(a),T.push(o),d.HEAPU8.set(new Uint8Array(r.buffer,r.byteOffset,a),o);const c=d.stackSave(),l=d.stackAlloc(4*i.length);try{let t=l/4;i.forEach((e=>d.HEAP32[t++]=e));const n=d._OrtCreateTensor(u(e),o,a,l,i.length);if(0===n)throw new Error("Can't create a tensor");w.push(n)}finally{d.stackRestore(c)}}const t=d.stackSave(),o=d.stackAlloc(4*_),a=d.stackAlloc(4*_),p=d.stackAlloc(4*y),x=d.stackAlloc(4*y);try{let n=o/4,i=a/4,s=p/4,u=x/4;for(let t=0;t<_;t++)d.HEAPU32[n++]=w[t],d.HEAPU32[i++]=g[e[t]];for(let t=0;t<y;t++)d.HEAPU32[s++]=0,d.HEAPU32[u++]=m[r[t]];let h=d._OrtRun(f,a,o,_,x,y,p,v);const b=[];if(0===h)for(let t=0;t<y;t++){const e=d.HEAPU32[p/4+t],n=d.stackSave(),i=d.stackAlloc(16);let r,s=0;try{if(h=d._OrtGetTensorData(e,i,i+4,i+8,i+12),0!==h)throw new Error(`Can't access output tensor data. error code = ${h}`);let t=i/4;const o=d.HEAPU32[t++];s=d.HEAPU32[t++];const a=d.HEAPU32[t++],u=d.HEAPU32[t++],p=[];for(let t=0;t<u;t++)p.push(d.HEAPU32[a/4+t]);d._OrtFree(a);const f=0===p.length?1:p.reduce(((t,e)=>t*e));if(r=c(o),"string"===r){const t=[];let e=s/4;for(let n=0;n<f;n++){const i=d.HEAPU32[e++],r=n===f-1?void 0:d.HEAPU32[e]-i;t.push(d.UTF8ToString(i,r))}b.push([r,p,t])}else{const t=new(l(r))(f);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(d.HEAPU8.subarray(s,s+t.byteLength)),b.push([r,p,t])}}finally{d.stackRestore(n),"string"===r&&s&&d._free(s),d._OrtReleaseTensor(e)}}if(0===h)return b;throw new Error(`failed to call OrtRun(). error code = ${h}.`)}finally{d.stackRestore(t)}}finally{w.forEach(d._OrtReleaseTensor),T.forEach(d._free),d._OrtReleaseRunOptions(v),b.forEach(d._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=a.get(t);if(!n)throw new Error("invalid session id");const i=n[0],r=e._OrtEndProfiling(i);if(0===r)throw new Error("Can't get an profile file name");e._OrtFree(r)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},6361:function(t,e,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return r(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const a=s(n(6449)),u=o(n(932)),c=n(3474);let l,h=!1,d=!1,p=!1;const f=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(h)return Promise.resolve();if(d)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(p)throw new Error("previous call to 'initializeWebAssembly()' failed.");d=!0;const e=t.initTimeout,i=t.numThreads,r=t.simd,s=i>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=r&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),g="string"==typeof t.wasmPaths?t.wasmPaths:void 0,m=f(!1,s),_=f(o,s),y="object"==typeof t.wasmPaths?t.wasmPaths[_]:void 0;let v=!1;const b=[];if(e>0&&b.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),b.push(new Promise(((t,e)=>{const i=s?c:u.default,r={locateFile:(t,e)=>s&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):t===m?null!=y?y:(null!=g?g:e)+_:e+t};if(s)if("undefined"==typeof Blob)r.mainScriptUrlOrBlob=a.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${i.toString()}})();`;r.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}i(r).then((e=>{d=!1,h=!0,l=e,t()}),(t=>{d=!1,p=!0,e(t)}))}))),await Promise.race(b),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(h&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!h||d||p||(d=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,d=!1,h=!1,p=!0)}},9710:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(477),r=n.n(i);function s(){return r()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:t=>{"use strict";t.exports=function(t,e,n,i){var r=self||window;try{try{var s;try{s=new r.Blob([t])}catch(e){(s=new(r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder)).append(t),s=s.getBlob()}var o=r.URL||r.webkitURL,a=o.createObjectURL(s),u=new r[e](a,n);return o.revokeObjectURL(a),u}catch(i){return new r[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!i)throw Error("Inline worker is not supported");return new r[e](i,n)}}},4154:t=>{"use strict";t.exports='"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\n'},1670:t=>{"use strict";t.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(t,e,n)=>{"use strict";n.r(e),n.d(e,{flatbuffers:()=>i});var i={};i.Offset,i.Table,i.SIZEOF_SHORT=2,i.SIZEOF_INT=4,i.FILE_IDENTIFIER_LENGTH=4,i.SIZE_PREFIX_LENGTH=4,i.Encoding={UTF8_BYTES:1,UTF16_STRING:2},i.int32=new Int32Array(2),i.float32=new Float32Array(i.int32.buffer),i.float64=new Float64Array(i.int32.buffer),i.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],i.Long=function(t,e){this.low=0|t,this.high=0|e},i.Long.create=function(t,e){return 0==t&&0==e?i.Long.ZERO:new i.Long(t,e)},i.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},i.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},i.Long.ZERO=new i.Long(0,0),i.Builder=function(t){if(t)e=t;else var e=1024;this.bb=i.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},i.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},i.Builder.prototype.dataBuffer=function(){return this.bb},i.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},i.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var r=this.bb.capacity();this.bb=i.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)},i.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},i.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},i.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},i.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},i.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},i.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},i.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},i.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},i.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},i.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},i.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},i.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},i.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},i.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},i.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},i.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},i.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},i.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},i.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},i.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},i.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},i.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},i.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},i.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},i.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},i.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,r=i.ByteBuffer.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r},i.Builder.prototype.addOffset=function(t){this.prep(i.SIZEOF_INT,0),this.writeInt32(this.offset()-t+i.SIZEOF_INT)},i.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},i.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var r=(n+2)*i.SIZEOF_SHORT;this.addInt16(r);var s=0,o=this.space;t:for(e=0;e<this.vtables.length;e++){var a=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(a)){for(var u=i.SIZEOF_SHORT;u<r;u+=i.SIZEOF_SHORT)if(this.bb.readInt16(o+u)!=this.bb.readInt16(a+u))continue t;s=this.vtables[e];break}}return s?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,s-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},i.Builder.prototype.finish=function(t,e,n){var r=n?i.SIZE_PREFIX_LENGTH:0;if(e){var s=e;if(this.prep(this.minalign,i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH+r),s.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var o=i.FILE_IDENTIFIER_LENGTH-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,i.SIZEOF_INT+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},i.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},i.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(0==this.bb.readInt16(i+e))throw new Error("FlatBuffers: field "+e+" must be set")},i.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(i.SIZEOF_INT,t*e),this.prep(n,t*e)},i.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},i.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var i,r=t.charCodeAt(n++);(i=r<55296||r>=56320?r:(r<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var s=this.space,o=this.bb.bytes();n<e.length;n++)o[s++]=e[n];return this.endVector()},i.Builder.prototype.createLong=function(t,e){return i.Long.create(t,e)},i.ByteBuffer=function(t){this.bytes_=t,this.position_=0},i.ByteBuffer.allocate=function(t){return new i.ByteBuffer(new Uint8Array(t))},i.ByteBuffer.prototype.clear=function(){this.position_=0},i.ByteBuffer.prototype.bytes=function(){return this.bytes_},i.ByteBuffer.prototype.position=function(){return this.position_},i.ByteBuffer.prototype.setPosition=function(t){this.position_=t},i.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},i.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},i.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},i.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},i.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},i.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},i.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},i.ByteBuffer.prototype.readInt64=function(t){return new i.Long(this.readInt32(t),this.readInt32(t+4))},i.ByteBuffer.prototype.readUint64=function(t){return new i.Long(this.readUint32(t),this.readUint32(t+4))},i.ByteBuffer.prototype.readFloat32=function(t){return i.int32[0]=this.readInt32(t),i.float32[0]},i.ByteBuffer.prototype.readFloat64=function(t){return i.int32[i.isLittleEndian?0:1]=this.readInt32(t),i.int32[i.isLittleEndian?1:0]=this.readInt32(t+4),i.float64[0]},i.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},i.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},i.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},i.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},i.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},i.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},i.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},i.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},i.ByteBuffer.prototype.writeFloat32=function(t,e){i.float32[0]=e,this.writeInt32(t,i.int32[0])},i.ByteBuffer.prototype.writeFloat64=function(t,e){i.float64[0]=e,this.writeInt32(t,i.int32[i.isLittleEndian?0:1]),this.writeInt32(t+4,i.int32[i.isLittleEndian?1:0])},i.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+i.SIZEOF_INT+i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+i.SIZEOF_INT+e));return t},i.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},i.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},i.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),r="",s=0;if(t+=i.SIZEOF_INT,e===i.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;s<n;){var o,a=this.readUint8(t+s++);if(a<192)o=a;else{var u=this.readUint8(t+s++);if(a<224)o=(31&a)<<6|63&u;else{var c=this.readUint8(t+s++);o=a<240?(15&a)<<12|(63&u)<<6|63&c:(7&a)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+s++)}}o<65536?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296+(o>>10),56320+(1023&o)))}return r},i.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},i.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+i.SIZEOF_INT},i.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},i.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=i.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+i.FILE_IDENTIFIER_LENGTH);for(var e=0;e<i.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+i.SIZEOF_INT+e))return!1;return!0},i.ByteBuffer.prototype.createLong=function(t,e){return i.Long.create(t,e)}}},__webpack_module_cache__={};function __nested_webpack_require_546802__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__nested_webpack_require_546802__),n.exports}__nested_webpack_require_546802__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __nested_webpack_require_546802__.d(e,{a:e}),e},__nested_webpack_require_546802__.d=(t,e)=>{for(var n in e)__nested_webpack_require_546802__.o(e,n)&&!__nested_webpack_require_546802__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__nested_webpack_require_546802__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__nested_webpack_require_546802__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__nested_webpack_require_546802__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__nested_webpack_require_546802__(6018);return __webpack_exports__})(),module.exports=e(__webpack_require__(8412))},5666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var s=e&&e.prototype instanceof m?e:m,o=Object.create(s.prototype),a=new O(i||[]);return r(o,"_invoke",{value:I(t,n,a)}),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d="suspendedStart",p="executing",f="completed",g={};function m(){}function _(){}function y(){}var v={};c(v,o,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==n&&i.call(w,o)&&(v=w);var T=y.prototype=m.prototype=Object.create(v);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(r,s,o,a){var u=h(t[r],t,s);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&i.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,o,a)}),(function(t){n("throw",t,o,a)})):e.resolve(l).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,a)}))}a(u.arg)}var s;r(this,"_invoke",{value:function(t,i){function r(){return new e((function(e,r){n(t,i,e,r)}))}return s=s?s.then(r,r):r()}})}function I(t,e,n){var i=d;return function(r,s){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw s;return D()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=E(o,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var u=h(t,e,n);if("normal"===u.type){if(i=n.done?f:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=f,n.method="throw",n.arg=u.arg)}}}function E(t,n){var i=n.method,r=t.iterator[i];if(r===e)return n.delegate=null,"throw"===i&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var s=h(r,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function C(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function n(){for(;++r<t.length;)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:D}}function D(){return{value:e,done:!0}}return _.prototype=y,r(T,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:_,configurable:!0}),_.displayName=c(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,u,"GeneratorFunction")),t.prototype=Object.create(T),t},t.awrap=function(t){return{__await:t}},x(S.prototype),c(S.prototype,a,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,i,r,s){void 0===s&&(s=Promise);var o=new S(l(e,n,i,r),s);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(T),c(T,u,"Generator"),c(T,o,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return a.type="throw",a.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:C(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},2756:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AMOscillator:()=>zs,AMSynth:()=>xo,Abs:()=>oo,Add:()=>Zs,AmplitudeEnvelope:()=>bo,Analyser:()=>Ga,AudioToGain:()=>Bs,AutoFilter:()=>ua,AutoPanner:()=>la,AutoWah:()=>da,BaseContext:()=>Sr,BiquadFilter:()=>So,BitCrusher:()=>fa,Buffer:()=>Iu,BufferSource:()=>Au,Buffers:()=>Eu,Channel:()=>Qa,Chebyshev:()=>ma,Chorus:()=>wa,Clock:()=>ps,Compressor:()=>su,Context:()=>Ir,Convolver:()=>hu,CrossFade:()=>sa,DCMeter:()=>Ya,Delay:()=>fs,Destination:()=>mu,Distortion:()=>Ta,Draw:()=>wu,DuoSynth:()=>ko,EQ3:()=>lu,Emitter:()=>xr,Envelope:()=>mo,FFT:()=>Ka,FMOscillator:()=>Gs,FMSynth:()=>Oo,FatOscillator:()=>Hs,FeedbackCombFilter:()=>Uo,FeedbackDelay:()=>Sa,Filter:()=>Io,Follower:()=>ha,Freeverb:()=>Oa,Frequency:()=>Yr,FrequencyClass:()=>Wr,FrequencyEnvelope:()=>Eo,FrequencyShifter:()=>Ea,Gain:()=>ss,GainToAudio:()=>ao,Gate:()=>ou,GrainPlayer:()=>so,GreaterThan:()=>ho,GreaterThanZero:()=>lo,IntervalTimeline:()=>Ts,JCReverb:()=>Ra,LFO:()=>to,Limiter:()=>au,Listener:()=>vu,Loop:()=>Wo,LowpassCombFilter:()=>$o,Master:()=>_u,MembraneSynth:()=>Po,Merge:()=>ya,MetalSynth:()=>Do,Meter:()=>Ha,MidSideCompressor:()=>uu,MidSideMerge:()=>Va,MidSideSplit:()=>Ua,Midi:()=>ys,MidiClass:()=>_s,Mono:()=>tu,MonoSynth:()=>Ao,MultibandCompressor:()=>cu,MultibandSplit:()=>eu,Multiply:()=>qs,Negate:()=>uo,Noise:()=>Ps,NoiseSynth:()=>Ro,Offline:()=>gs,OfflineContext:()=>Cr,OmniOscillator:()=>Xs,OnePoleFilter:()=>Vo,Oscillator:()=>Us,PWMOscillator:()=>Ks,PanVol:()=>Ja,Panner:()=>ca,Panner3D:()=>iu,Param:()=>ts,Part:()=>Ho,Pattern:()=>ia,Phaser:()=>Fa,PingPongDelay:()=>Ma,PitchShift:()=>La,Player:()=>io,Players:()=>ro,PluckSynth:()=>Bo,PolySynth:()=>qo,Pow:()=>po,PulseOscillator:()=>Ws,Recorder:()=>ru,Reverb:()=>ja,Sampler:()=>zo,Scale:()=>Js,ScaleExp:()=>fo,Sequence:()=>ra,Signal:()=>us,Solo:()=>Za,Split:()=>_a,StateTimeline:()=>Qr,StereoWidener:()=>Ba,Subtract:()=>co,SyncedSignal:()=>go,Synth:()=>wo,Ticks:()=>bs,TicksClass:()=>vs,Time:()=>Gr,TimeClass:()=>zr,Timeline:()=>yr,ToneAudioBuffer:()=>Or,ToneAudioBuffers:()=>ms,ToneAudioNode:()=>es,ToneBufferSource:()=>Ds,ToneEvent:()=>Go,ToneOscillatorNode:()=>js,Transport:()=>fu,TransportTime:()=>Zr,TransportTimeClass:()=>Xr,Tremolo:()=>qa,Unit:()=>r,UserMedia:()=>Ls,Vibrato:()=>za,Volume:()=>Ss,WaveShaper:()=>$s,Waveform:()=>Xa,Zero:()=>Qs,connect:()=>is,connectSeries:()=>ns,connectSignal:()=>cs,context:()=>xu,dbToGain:()=>Lr,debug:()=>i,defaultArg:()=>cr,disconnect:()=>rs,ftom:()=>Vr,gainToDb:()=>Fr,getContext:()=>Rr,getDestination:()=>yu,getDraw:()=>Tu,getListener:()=>bu,getTransport:()=>gu,immediate:()=>pu,intervalToFrequencyRatio:()=>jr,isArray:()=>Ki,isBoolean:()=>Hi,isDefined:()=>qi,isFunction:()=>zi,isNote:()=>Xi,isNumber:()=>Gi,isObject:()=>Wi,isString:()=>Yi,isUndef:()=>Bi,loaded:()=>Su,mtof:()=>Br,now:()=>du,optionsFromArguments:()=>ur,setContext:()=>Nr,start:()=>Mr,supported:()=>Ni,version:()=>s});var i={};n.r(i),n.d(i,{assert:()=>Mi,assertContextRunning:()=>Fi,assertRange:()=>Li,log:()=>Vi,setLogger:()=>Ui,warn:()=>$i});var r={};n.r(r);const s="14.7.77";var o=n(5382);const a=new WeakSet,u=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,_={construct:()=>_},y=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,v=(t,e)=>{const n=[];let i=t.replace(/^[\s]+/,""),r=i.match(y);for(;null!==r;){const t=r[1].slice(1,-1),s=r[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(s),i=i.slice(r[0].length).replace(/^[\s]+/,""),r=i.match(y)}return[n.join(";"),i]},b=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},w=t=>{if(!(t=>{try{new new Proxy(t,_)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},T=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},x=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[i]=n;return t.delete(i),i},S=(t,e,n,i)=>{const r=T(t,e),s=x(r,(t=>t[0]===n&&t[1]===i));return 0===r.size&&t.delete(e),s},I=t=>T(p,t),E=t=>{if(a.has(t))throw new Error("The AudioNode is already stored.");a.add(t),I(t).forEach((t=>t(!0)))},A=t=>"port"in t,k=t=>{if(!a.has(t))throw new Error("The AudioNode is not stored.");a.delete(t),I(t).forEach((t=>t(!1)))},O=(t,e)=>{!A(t)&&e.every((t=>0===t.size))&&k(t)},C={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},D=(t,e)=>t.context===e,P=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},R=()=>new DOMException("","IndexSizeError"),N=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw R();throw t}})},M={numberOfChannels:1},L=-34028234663852886e22,F=-L,j=t=>a.has(t),U={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},V=t=>T(u,t),$=t=>T(l,t),B=(t,e)=>{const{activeInputs:n}=V(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||B(n,[...e,t])}))));const i=(t=>"playbackRate"in t)(t)?[t.playbackRate]:A(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const t of i){const n=$(t);void 0!==n&&n.activeInputs.forEach((([t])=>B(t,e)))}j(t)&&k(t)},q=t=>{B(t.destination,[])},z=t=>"context"in t,G=t=>z(t[0]),W=(t,e,n,i)=>{for(const e of t)if(n(e)){if(i)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},H=(t,e,[n,i],r)=>{W(t,[e,n,i],(t=>t[0]===e&&t[1]===n),r)},K=(t,[e,n,i],r)=>{const s=t.get(e);void 0===s?t.set(e,new Set([[n,i]])):W(s,[n,i],(t=>t[0]===n),r)},Y=t=>"inputs"in t,X=(t,e,n,i)=>{if(Y(e)){const r=e.inputs[i];return t.connect(r,n,0),[r,n,0]}return t.connect(e,n,i),[e,n,i]},Z=(t,e,n)=>{for(const i of t)if(i[0]===e&&i[1]===n)return t.delete(i),i;return null},J=(t,e)=>{if(!I(t).delete(e))throw new Error("Missing the expected event listener.")},Q=(t,e,n)=>{const i=T(t,e),r=x(i,(t=>t[0]===n));return 0===i.size&&t.delete(e),r},tt=(t,e,n,i)=>{Y(e)?t.disconnect(e.inputs[i],n,0):t.disconnect(e,n,i)},et=t=>T(c,t),nt=t=>T(h,t),it=t=>f.has(t),rt=t=>!a.has(t),st=(t,e)=>new Promise((n=>{if(null!==e)n(!0);else{const e=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),s=r.getChannelData(0);s[0]=1,s[1]=1;const o=t.createBufferSource();o.buffer=r,o.loop=!0,o.connect(e).connect(t.destination),o.connect(i),o.disconnect(i),e.onaudioprocess=i=>{const r=i.inputBuffer.getChannelData(0);Array.prototype.some.call(r,(t=>1===t))?n(!0):n(!1),o.stop(),e.onaudioprocess=null,o.disconnect(e),e.disconnect(t.destination)},o.start()}})),ot=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},at=t=>"context"in t,ut=t=>{const e=new Map;t.connect=(t=>(n,i=0,r=0)=>{const s=at(n)?t(n,i,r):t(n,i),o=e.get(n);return void 0===o?e.set(n,[{input:r,output:i}]):o.every((t=>t.input!==r||t.output!==i))&&o.push({input:r,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(i,r,s)=>{if(n.apply(t),void 0===i)e.clear();else if("number"==typeof i)for(const[t,n]of e){const r=n.filter((t=>t.output!==i));0===r.length?e.delete(t):e.set(t,r)}else if(e.has(i))if(void 0===r)e.delete(i);else{const t=e.get(i);if(void 0!==t){const n=t.filter((t=>t.output!==r&&(t.input!==s||void 0===s)));0===n.length?e.delete(i):e.set(i,n)}}for(const[n,i]of e)i.forEach((e=>{at(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)},ct=(t,e,n,i,r)=>{const[s,o]=((t,e,n,i)=>{const{activeInputs:r,passiveInputs:s}=V(e),o=Z(r[i],t,n);return null===o?[S(s,t,n,i)[2],!1]:[o[2],!0]})(t,n,i,r);if(null!==s&&(J(t,s),!o||e||it(t)||tt(et(t),et(n),i,r)),j(n)){const{activeInputs:t}=V(n);O(n,t)}},lt=(t,e,n,i)=>{const[r,s]=((t,e,n)=>{const{activeInputs:i,passiveInputs:r}=$(e),s=Z(i,t,n);return null===s?[Q(r,t,n)[1],!1]:[s[2],!0]})(t,n,i);null!==r&&(J(t,r),!s||e||it(t)||et(t).disconnect(nt(n),i))};class ht{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,i)=>t.call(e,n,i,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const dt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function pt(t,e,n,i,r){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],i,r);else{const s=t.getChannelData(i);if(0===e[n].byteLength)e[n]=s.slice(r,r+128);else{const t=new Float32Array(s.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const ft=(t,e,n,i,r)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],i,r):0!==e[n].byteLength&&t.getChannelData(i).set(e[n],r)},gt=(t,e)=>{const n=[];for(let i=0;i<t;i+=1){const t=[],r="number"==typeof e?e:e[i];for(let e=0;e<r;e+=1)t.push(new Float32Array(128));n.push(t)}return n},mt=async(t,e,n,i,r,s,o)=>{const a=null===e?128*Math.ceil(t.context.length/128):e.length,u=i.channelCount*i.numberOfInputs,c=r.reduce(((t,e)=>t+e),0),l=0===c?null:n.createBuffer(c,a,n.sampleRate);if(void 0===s)throw new Error("Missing the processor constructor.");const h=V(t),d=await((t,e)=>{const n=T(m,t),i=et(e);return T(n,i)})(n,t),p=gt(i.numberOfInputs,i.channelCount),f=gt(i.numberOfOutputs,r),g=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let c=0;c<a;c+=128){if(i.numberOfInputs>0&&null!==e)for(let t=0;t<i.numberOfInputs;t+=1)for(let n=0;n<i.channelCount;n+=1)pt(e,p[t],n,n,c);void 0!==s.parameterDescriptors&&null!==e&&s.parameterDescriptors.forEach((({name:t},n)=>{pt(e,g,t,u+n,c)}));for(let t=0;t<i.numberOfInputs;t+=1)for(let e=0;e<r[t];e+=1)0===f[t][e].byteLength&&(f[t][e]=new Float32Array(128));try{const t=p.map(((t,e)=>0===h.activeInputs[e].size?[]:t)),e=o(c/n.sampleRate,n.sampleRate,(()=>d.process(t,f,g)));if(null!==l)for(let t=0,e=0;t<i.numberOfOutputs;t+=1){for(let n=0;n<r[t];n+=1)ft(l,f[t],n,e+n,c);e+=r[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return l},_t={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},yt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},vt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},bt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},wt={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Tt=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise((i=>{const r=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>r();try{e.postMessage(t,[t])}finally{r()}}))},xt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},St=(t,e,n)=>{const i=e[n];if(void 0===i)throw t();return i},It={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Et={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},At=()=>new DOMException("","InvalidStateError"),kt=()=>new DOMException("","InvalidAccessError"),Ot={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Ct=(t,e,n,i,r,s,o,a,u,c,l)=>{const h=c.length;let d=a;for(let a=0;a<h;a+=1){let h=n[0]*c[a];for(let e=1;e<r;e+=1){const i=d-e&u-1;h+=n[e]*s[i],h-=t[e]*o[i]}for(let t=r;t<i;t+=1)h+=n[t]*s[d-t&u-1];for(let n=r;n<e;n+=1)h-=t[n]*o[d-n&u-1];s[d]=c[a],o[d]=h,d=d+1&u-1,l[a]=h}return d},Dt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Pt=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},Rt=(t,e,n)=>{const i=e[n];void 0!==i&&i!==t[n]&&(t[n]=i)},Nt=(t,e)=>{Rt(t,e,"channelCount"),Rt(t,e,"channelCountMode"),Rt(t,e,"channelInterpretation")},Mt=t=>"function"==typeof t.getFloatTimeDomainData,Lt=(t,e,n)=>{const i=e[n];void 0!==i&&i!==t[n].value&&(t[n].value=i)},Ft=t=>{t.start=(e=>(n=0,i=0,r)=>{if("number"==typeof r&&r<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,i,r)})(t.start)},jt=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},Ut=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Vt=(t,e)=>{const n=t.createBiquadFilter();return Nt(n,e),Lt(n,e,"Q"),Lt(n,e,"detune"),Lt(n,e,"frequency"),Lt(n,e,"gain"),Rt(n,e,"type"),n},$t=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Nt(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw At()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw At()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw At()}})})(n),n},Bt=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),qt=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Nt(n,e),Lt(n,e,"delayTime"),n},zt=(t,e)=>{const n=t.createGain();return Nt(n,e),Lt(n,e,"gain"),n};function Gt(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Wt(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)r=e,n=[(i=n)[0]*r[0]-i[1]*r[1],i[0]*r[1]+i[1]*r[0]],n[0]+=t[s];var i,r;return n}const Ht=(t,e,n,i)=>t.createScriptProcessor(e,n,i),Kt=()=>new DOMException("","NotSupportedError"),Yt={numberOfChannels:1},Xt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Zt={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Jt={disableNormalization:!1},Qt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},te=()=>new DOMException("","UnknownError"),ee={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},ne=(t,e,n)=>void 0===t.copyFromChannel?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),ie=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},re=(t,e,n,i)=>{let r=t;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:s,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(t,e,{get:n(s),set:i(o)})},se=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(i){if(9!==i.code)throw i;se(t,e,n+1e-7)}},oe=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},ae=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},ue=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},ce=()=>{try{new DOMException}catch{return!1}return!0},le=()=>new Promise((t=>{const e=new ArrayBuffer(0),{port1:n,port2:i}=new MessageChannel;n.onmessage=({data:e})=>t(null!==e),i.postMessage(e,[e])})),he=(t,e)=>{const n=e.createGain();t.connect(n);const i=(e=>()=>{e.call(t,n),t.removeEventListener("ended",i)})(t.disconnect);t.addEventListener("ended",i),Bt(t,n),t.stop=(e=>{let i=!1;return(r=0)=>{if(i)try{e.call(t,r)}catch{n.gain.setValueAtTime(0,r)}else e.call(t,r),i=!0}})(t.stop)},de=(t,e)=>n=>{const i={value:t};return Object.defineProperties(n,{currentTarget:i,target:i}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},pe=(t=>(e,n,[i,r,s],o)=>{t(e[r],[n,i,s],(t=>t[0]===n&&t[1]===i),o)})(W),fe=(t=>(e,n,[i,r,s],o)=>{const a=e.get(i);void 0===a?e.set(i,new Set([[r,n,s]])):t(a,[r,n,s],(t=>t[0]===r&&t[1]===n),o)})(W),ge=(t=>(e,n,i,r)=>t(e[r],(t=>t[0]===n&&t[1]===i)))(x),me=new WeakMap,_e=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(me),ye=(ve=new Map,be=new WeakMap,(t,e)=>{const n=be.get(t);if(void 0!==n)return n;const i=ve.get(t);if(void 0!==i)return i;try{const n=e();return n instanceof Promise?(ve.set(t,n),n.catch((()=>!1)).then((e=>(ve.delete(t),be.set(t,e),e)))):(be.set(t,n),n)}catch{return be.set(t,!1),!1}});var ve,be;const we="undefined"==typeof window?null:window,Te=((t,e)=>(n,i)=>{const r=n.createAnalyser();if(Nt(r,i),!(i.maxDecibels>i.minDecibels))throw e();return Rt(r,i,"fftSize"),Rt(r,i,"maxDecibels"),Rt(r,i,"minDecibels"),Rt(r,i,"smoothingTimeConstant"),t(Mt,(()=>Mt(r)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const i=Math.max(n.length,t.fftSize);for(let t=0;t<i;t+=1)e[t]=.0078125*(n[t]-128);return e}})(r),r})(ye,R),xe=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(V),Se=((t,e,n)=>async(i,r,s)=>{const o=t(i);await Promise.all(o.activeInputs.map(((t,o)=>Array.from(t).map((async([t,a])=>{const u=e(t),c=await u.render(t,r),l=i.context.destination;n(t)||i===l&&n(i)||c.connect(s,a,o)})))).reduce(((t,e)=>[...t,...e]),[]))})(V,xe,it),Ie=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s){const o=i.get(s);return void 0!==o?Promise.resolve(o):(async(r,s)=>{let o=e(r);if(!D(o,s)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(s,e)}return i.set(s,o),await n(r,s,o),o})(r,s)}}})(Te,et,Se),Ee=(Ae=d,t=>{const e=Ae.get(t);if(void 0===e)throw At();return e});var Ae;const ke=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(we),Oe=(t=>e=>null!==t&&e instanceof t)(ke),Ce=new WeakMap,De=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,i){if(null!==n){let r=this._listeners.get(n);void 0===r&&(r=t(this,n),"function"==typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(e,r,i)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const i=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,n)}})(de),Pe=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(we),Re=(t=>e=>null!==t&&e instanceof t)(Pe),Ne=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(we),Me=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(we),Le=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(we),Fe=((t,e,n,i,r,s,o,a,u,l,h,d,f,g,m,_)=>class extends l{constructor(e,i,r,s){super(r),this._context=e,this._nativeAudioNode=r;const o=h(e);d(o)&&!0!==n(st,(()=>st(o,_)))&&ut(r),c.set(this,r),p.set(this,new Set),"closed"!==e.state&&i&&E(this),t(this,s,r)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,a=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw r();const c=h(this._context),l=m(c);if(f(t)||g(t))throw s();if(z(t)){const r=et(t);try{const e=X(this._nativeAudioNode,r,n,a),i=rt(this);(l||i)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!i&&rt(t)&&E(t)}catch(t){if(12===t.code)throw s();throw t}if(e(this,t,n,a,l)){const e=u([this],t);ot(e,i(l))}return t}const d=nt(t);if("playbackRate"===d.name&&1024===d.maxValue)throw o();try{this._nativeAudioNode.connect(d,n),(l||rt(this))&&this._nativeAudioNode.disconnect(d,n)}catch(t){if(12===t.code)throw s();throw t}if(((t,e,n,i)=>{const{activeInputs:r,passiveInputs:s}=$(e),{outputs:o}=V(t),a=I(t),u=o=>{const a=et(t),u=nt(e);if(o){const e=Q(s,t,n);H(r,t,e,!1),i||it(t)||a.connect(u,n)}else{const e=((t,e,n)=>x(t,(t=>t[0]===e&&t[1]===n)))(r,t,n);K(s,e,!1),i||it(t)||a.disconnect(u,n)}};return!!W(o,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(a.add(u),j(t)?H(r,t,[n,u],!0):K(s,[t,n,u],!0),!0)})(this,t,n,l)){const e=u([this],t);ot(e,i(l))}}disconnect(t,e,n){let i;const o=h(this._context),c=m(o);if(void 0===t)i=((t,e)=>{const n=V(t),i=[];for(const r of n.outputs)G(r)?ct(t,e,...r):lt(t,e,...r),i.push(r[0]);return n.outputs.clear(),i})(this,c);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw r();i=((t,e,n)=>{const i=V(t),r=[];for(const s of i.outputs)s[1]===n&&(G(s)?ct(t,e,...s):lt(t,e,...s),r.push(s[0]),i.outputs.delete(s));return r})(this,c,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw r();if(z(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw r();if(i=((t,e,n,i,r)=>{const s=V(t);return Array.from(s.outputs).filter((t=>!(t[0]!==n||void 0!==i&&t[1]!==i||void 0!==r&&t[2]!==r))).map((n=>(G(n)?ct(t,e,...n):lt(t,e,...n),s.outputs.delete(n),n[0])))})(this,c,t,e,n),0===i.length)throw s()}for(const t of i){const e=u([this],t);ot(e,a)}}})((je=u,(t,e,n)=>{const i=[];for(let t=0;t<n.numberOfInputs;t+=1)i.push(new Set);je.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,i,r,s,o,a,u,c,l,h,d)=>{const p=new WeakMap;return(f,g,m,_,y)=>{const{activeInputs:v,passiveInputs:b}=s(g),{outputs:w}=s(f),T=a(f),x=s=>{const a=u(g),c=u(f);if(s){const e=S(b,f,m,_);t(v,f,e,!1),y||h(f)||n(c,a,m,_),d(g)&&E(g)}else{const t=i(v,f,m,_);e(b,_,t,!1),y||h(f)||r(c,a,m,_);const n=o(g);if(0===n)l(g)&&O(g,v);else{const t=p.get(g);void 0!==t&&clearTimeout(t),p.set(g,setTimeout((()=>{l(g)&&O(g,v)}),1e3*n))}}};return!!c(w,[g,m,_],(t=>t[0]===g&&t[1]===m&&t[2]===_),!0)&&(T.add(x),l(f)?t(v,f,[m,_,x],!0):e(b,_,[f,m,x],!0),!0)}})(pe,fe,X,ge,tt,V,_e,I,et,W,j,it,rt),ye,((t,e,n,i,r,s)=>o=>(a,u)=>{const c=t.get(a);if(void 0===c){if(!o&&s(a)){const t=i(a),{outputs:s}=n(a);for(const n of s)if(G(n)){const r=i(n[0]);e(t,r,n[1],n[2])}else{const e=r(n[0]);t.disconnect(e,n[1])}}t.set(a,u)}else t.set(a,c+u)})(f,tt,V,et,nt,j),R,kt,Kt,((t,e,n,i,r,s,o,a)=>(u,c)=>{const l=e.get(u);if(void 0===l)throw new Error("Missing the expected cycle count.");const h=s(u.context),d=a(h);if(l===c){if(e.delete(u),!d&&o(u)){const e=i(u),{outputs:s}=n(u);for(const n of s)if(G(n)){const r=i(n[0]);t(e,r,n[1],n[2])}else{const t=r(n[0]);e.connect(t,n[1])}}}else e.set(u,l-c)})(X,f,V,et,nt,Ee,j,Oe),((t,e,n)=>function i(r,s){const o=z(s)?s:n(t,s);if((t=>"delayTime"in t)(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map((t=>i([...r,o],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(Ce,V,T),De,Ee,Re,Ne,Me,Oe,Le);var je;const Ue=((t,e,n,i,r,s)=>class extends t{constructor(t,n){const o=r(t),a={...C,...n},u=i(o,a);super(t,!1,u,s(o)?e():null),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(Fe,Ie,R,Te,Ee,Oe),Ve=new WeakSet,$e=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(we),Be=(qe=new Uint32Array(1),t=>(qe[0]=t,qe[0]));var qe;const ze=((t,e)=>n=>{n.copyFromChannel=(i,r,s=0)=>{const o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();const u=n.length,c=n.getChannelData(a),l=i.length;for(let t=o<0?-o:0;t+o<u&&t<l;t+=1)i[t]=c[t+o]},n.copyToChannel=(i,r,s=0)=>{const o=t(s),a=t(r);if(a>=n.numberOfChannels)throw e();const u=n.length,c=n.getChannelData(a),l=i.length;for(let t=o<0?-o:0;t+o<u&&t<l;t+=1)c[t+o]=i[t]}})(Be,R),Ge=(t=>e=>{e.copyFromChannel=(n=>(i,r,s=0)=>{const o=t(s),a=t(r);if(o<e.length)return n.call(e,i,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(i,r,s=0)=>{const o=t(s),a=t(r);if(o<e.length)return n.call(e,i,a,o)})(e.copyToChannel)})(Be),We=((t,e,n,i,r,s,o,a)=>{let u=null;return class c{constructor(c){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:l,numberOfChannels:h,sampleRate:d}={...M,...c};null===u&&(u=new r(1,1,44100));const p=null!==i&&e(s,s)?new i({length:l,numberOfChannels:h,sampleRate:d}):u.createBuffer(h,l,d);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(o(p),N(p)):e(P,(()=>P(p)))||a(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===c.prototype||t.has(e)}}})(Ve,ye,Kt,$e,ke,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})($e),ze,Ge),He=(t=>(e,n)=>{const i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(i),i.disconnect()};n.addEventListener("ended",r)})(zt),Ke=((t,e,n)=>async(i,r,s)=>{const o=e(i);await Promise.all(Array.from(o.activeInputs).map((async([e,i])=>{const o=t(e),a=await o.render(e,r);n(e)||a.connect(s,i)})))})(xe,$,it),Ye=(t=>(e,n,i)=>t(n,e,i))(Ke),Xe=((t,e,n,i,r,s,o,a,u,c,l)=>(u,h)=>{const d=u.createBufferSource();return Nt(d,h),Lt(d,h,"playbackRate"),Rt(d,h,"buffer"),Rt(d,h,"loop"),Rt(d,h,"loopEnd"),Rt(d,h,"loopStart"),e(n,(()=>n(u)))||(t=>{t.start=(e=>{let n=!1;return(i=0,r=0,s)=>{if(n)throw At();e.call(t,i,r,s),n=!0}})(t.start)})(d),e(i,(()=>i(u)))||(t=>{t.start=(e=>(n=0,i=0,r)=>{const s=t.buffer,o=null===s?i:Math.min(s.duration,i);null!==s&&o>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,r)})(t.start)})(d),e(r,(()=>r(u)))||c(d,u),e(s,(()=>s(u)))||Ft(d),e(o,(()=>o(u)))||l(d,u),e(a,(()=>a(u)))||jt(d),t(u,d),d})(He,ye,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),oe,ae,ue,0,(t=>(e,n)=>{const i=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=i),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===i?null:n}),(t=>n=>t.call(e,null===n?i:n)))})(re),he),Ze=((t,e)=>(n,i,r)=>(t(i).replay(r),e(i,n,r)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})($),Ke),Je=((t,e,n,i,r)=>()=>{const s=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(u,c){const l=s.get(c);return void 0!==l?Promise.resolve(l):(async(u,c)=>{let l=n(u);const h=D(l,c);if(!h){const t={buffer:l.buffer,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,loop:l.loop,loopEnd:l.loopEnd,loopStart:l.loopStart,playbackRate:l.playbackRate.value};l=e(c,t),null!==o&&l.start(...o),null!==a&&l.stop(a)}return s.set(c,l),h?await t(c,u.playbackRate,l.playbackRate):await i(c,u.playbackRate,l.playbackRate),await r(u,c,l),l})(u,c)}}})(Ye,Xe,et,Ze,Se),Qe=((t,e,n,i,r,s,a,u,c,l,h,d,p)=>(i,f,g,m=null,_=null)=>{const y=new o.AutomationEventList(g.defaultValue),v=f?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:i}=n;e.exponentialRampToValueAtTime(i,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:i}=n;e.linearRampToValueAtTime(i,t)}else if("setTarget"===n.type){const{startTime:t,target:i,timeConstant:r}=n;e.setTargetAtTime(i,t,r)}else if("setValue"===n.type){const{startTime:t,value:i}=n;e.setValueAtTime(i,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,t)}}}}))(y):null,b={get defaultValue(){return g.defaultValue},get maxValue(){return null===m?g.maxValue:m},get minValue(){return null===_?g.minValue:_},get value(){return g.value},set value(t){g.value=t,b.setValueAtTime(t,i.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof g.cancelAndHoldAtTime)null===v&&y.flush(i.context.currentTime),y.add(r(t)),g.cancelAndHoldAtTime(t);else{const e=Array.from(y).pop();null===v&&y.flush(i.context.currentTime),y.add(r(t));const n=Array.from(y).pop();g.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?g.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?g.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?g.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&g.setValueCurveAtTime(n.values,n.startTime,n.duration))}return b},cancelScheduledValues:t=>(null===v&&y.flush(i.context.currentTime),y.add(s(t)),g.cancelScheduledValues(t),b),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===v&&y.flush(i.context.currentTime),y.add(a(t,e)),g.exponentialRampToValueAtTime(t,e),b},linearRampToValueAtTime:(t,e)=>(null===v&&y.flush(i.context.currentTime),y.add(u(t,e)),g.linearRampToValueAtTime(t,e),b),setTargetAtTime:(t,e,n)=>(null===v&&y.flush(i.context.currentTime),y.add(c(t,e,n)),g.setTargetAtTime(t,e,n),b),setValueAtTime:(t,e)=>(null===v&&y.flush(i.context.currentTime),y.add(l(t,e)),g.setValueAtTime(t,e),b),setValueCurveAtTime(t,e,n){const r=t instanceof Float32Array?t:new Float32Array(t);if(null!==d&&"webkitAudioContext"===d.name){const t=e+n,s=i.context.sampleRate,o=Math.ceil(e*s),a=Math.floor(t*s),u=a-o,c=new Float32Array(u);for(let t=0;t<u;t+=1){const i=(r.length-1)/n*((o+t)/s-e),a=Math.floor(i),u=Math.ceil(i);c[t]=a===u?r[a]:(1-(i-a))*r[a]+(1-(u-i))*r[u]}null===v&&y.flush(i.context.currentTime),y.add(h(c,e,n)),g.setValueCurveAtTime(c,e,n);const l=a/s;l<t&&p(b,c[c.length-1],l),p(b,r[r.length-1],t)}else null===v&&y.flush(i.context.currentTime),y.add(h(r,e,n)),g.setValueCurveAtTime(r,e,n);return b}};return n.set(b,g),e.set(b,i),t(b,v),b})((tn=l,(t,e)=>{tn.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),Ce,h,0,o.createCancelAndHoldAutomationEvent,o.createCancelScheduledValuesAutomationEvent,o.createExponentialRampToValueAutomationEvent,o.createLinearRampToValueAutomationEvent,o.createSetTargetAutomationEvent,o.createSetValueAutomationEvent,o.createSetValueCurveAutomationEvent,Pe,se);var tn;const en=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){const a=s(t),u={...U,...i},c=r(a,u),l=o(a),h=l?e():null;super(t,!1,c,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==u.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,l,c.playbackRate,F,L)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){E(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),j(this)&&k(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(Fe,Je,Qe,At,Xe,Ee,Oe,de),nn=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,e){const n=s(t),i=o(n),u=r(n,e,i);super(t,!1,u,i?(t=>{const e=new WeakMap;return{render(n,i){const r=e.get(i);return void 0!==r?Promise.resolve(r):(async(n,i)=>{const r=i.destination;return e.set(i,r),await t(n,i,r),r})(n,i)}}})(a):null),this._isNodeOfNativeOfflineAudioContext=i,this._nativeAudioDestinationNode=u}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Fe,0,R,At,((t,e)=>(n,i,r)=>{const s=n.destination;if(s.channelCount!==i)try{s.channelCount=i}catch{}r&&"explicit"!==s.channelCountMode&&(s.channelCountMode="explicit"),0===s.maxChannelCount&&Object.defineProperty(s,"maxChannelCount",{value:i});const o=t(n,{channelCount:i,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e);try{s.channelCount=e}catch(t){if(e>s.maxChannelCount)throw t}})),e(o,"channelCountMode",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),s.channelCountMode=e})),e(o,"channelInterpretation",(t=>()=>t.call(o)),(t=>e=>{t.call(o,e),s.channelInterpretation=e})),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o})(zt,re),Ee,Oe,Se),rn=((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a)=>{let u=n(o);const c=D(u,a);if(!c){const t={Q:u.Q.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,gain:u.gain.value,type:u.type};u=e(a,t)}return s.set(a,u),c?(await t(a,o.Q,u.Q),await t(a,o.detune,u.detune),await t(a,o.frequency,u.frequency),await t(a,o.gain,u.gain)):(await i(a,o.Q,u.Q),await i(a,o.detune,u.detune),await i(a,o.frequency,u.frequency),await i(a,o.gain,u.gain)),await r(o,a,u),u})(o,a)}}})(Ye,Vt,et,Ze,Se),sn=(t=>(e,n)=>t.set(e,n))(me),on=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,i){const u=s(t),c={..._t,...i},l=r(u,c),h=o(u);super(t,!1,l,h?n():null),this._Q=e(this,h,l.Q,F,L),this._detune=e(this,h,l.detune,1200*Math.log2(F),-1200*Math.log2(F)),this._frequency=e(this,h,l.frequency,t.sampleRate/2,0),this._gain=e(this,h,l.gain,40*Math.log10(F),L),this._nativeBiquadFilterNode=l,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n)}catch(t){if(11===t.code)throw i();throw t}if(t.length!==e.length||e.length!==n.length)throw i()}})(Fe,Qe,rn,kt,Vt,Ee,Oe,sn),an=((t,e)=>(n,i,r)=>{const s=new Set;return n.connect=(r=>(o,a=0,u=0)=>{const c=0===s.size;if(e(o))return r.call(n,o,a,u),t(s,[o,a,u],(t=>t[0]===o&&t[1]===a&&t[2]===u),!0),c&&i(),o;r.call(n,o,a),t(s,[o,a],(t=>t[0]===o&&t[1]===a),!0),c&&i()})(n.connect),n.disconnect=(t=>(i,o,a)=>{const u=s.size>0;if(void 0===i)t.apply(n),s.clear();else if("number"==typeof i){t.call(n,i);for(const t of s)t[1]===i&&s.delete(t)}else{e(i)?t.call(n,i,o,a):t.call(n,i,o);for(const t of s)t[0]!==i||void 0!==o&&t[1]!==o||void 0!==a&&t[2]!==a||s.delete(t)}const c=0===s.size;u&&c&&r()})(n.disconnect),n})(W,Ne),un=((t,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const r=n.createBufferSource();e(i,(()=>{const t=i.numberOfInputs;for(let e=0;e<t;e+=1)r.connect(i,0,e)}),(()=>r.disconnect(i)))})(At,an),cn=((t,e)=>(n,i)=>{const r=n.createChannelMerger(i.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,r),Nt(r,i),r})(Pe,un),ln=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s){const o=i.get(s);return void 0!==o?Promise.resolve(o):(async(r,s)=>{let o=e(r);if(!D(o,s)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(s,e)}return i.set(s,o),await n(r,s,o),o})(r,s)}}})(cn,et,Se),hn=((t,e,n,i,r)=>class extends t{constructor(t,s){const o=i(t),a={...yt,...s};super(t,!1,n(o,a),r(o)?e():null)}})(Fe,ln,cn,Ee,Oe),dn=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s){const o=i.get(s);return void 0!==o?Promise.resolve(o):(async(r,s)=>{let o=e(r);if(!D(o,s)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(s,e)}return i.set(s,o),await n(r,s,o),o})(r,s)}}})($t,et,Se),pn=((t,e,n,i,r,s)=>class extends t{constructor(t,s){const o=i(t),a=(t=>({...t,channelCount:t.numberOfOutputs}))({...vt,...s});super(t,!1,n(o,a),r(o)?e():null)}})(Fe,dn,$t,Ee,Oe),fn=((t,e,n,i)=>(r,{offset:s,...o})=>{const a=r.createBuffer(1,2,44100),u=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(r,{...o,gain:s}),l=a.getChannelData(0);l[0]=1,l[1]=1,u.buffer=a,u.loop=!0;const h={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return u.onended},set onended(t){u.onended=t},addEventListener:(...t)=>u.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>u.dispatchEvent(t[0]),removeEventListener:(...t)=>u.removeEventListener(t[0],t[1],t[2]),start(t=0){u.start.call(u,t)},stop(t=0){u.stop.call(u,t)}};return t(r,u),i(Bt(h,c),(()=>u.connect(c)),(()=>u.disconnect(c)))})(He,Xe,zt,an),gn=((t,e,n,i,r)=>(s,o)=>{if(void 0===s.createConstantSource)return n(s,o);const a=s.createConstantSource();return Nt(a,o),Lt(a,o,"offset"),e(i,(()=>i(s)))||Ft(a),e(r,(()=>r(s)))||jt(a),t(s,a),a})(He,ye,fn,oe,ue),mn=((t,e,n,i,r)=>()=>{const s=new WeakMap;let o=null,a=null;return{set start(t){o=t},set stop(t){a=t},render(u,c){const l=s.get(c);return void 0!==l?Promise.resolve(l):(async(u,c)=>{let l=n(u);const h=D(l,c);if(!h){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,offset:l.offset.value};l=e(c,t),null!==o&&l.start(o),null!==a&&l.stop(a)}return s.set(c,l),h?await t(c,u.offset,l.offset):await i(c,u.offset,l.offset),await r(u,c,l),l})(u,c)}}})(Ye,gn,et,Ze,Se),_n=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){const a=r(t),u={...bt,...o},c=i(a,u),l=s(a),h=l?n():null;super(t,!1,c,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=c,this._offset=e(this,l,c.offset,F,L),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){E(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),j(this)&&k(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(Fe,Qe,mn,gn,Ee,Oe,de),yn=((t,e)=>(n,i)=>{const r=n.createConvolver();if(Nt(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),Rt(r,i,"buffer"),i.channelCount>2)throw t();if(e(r,"channelCount",(t=>()=>t.call(r)),(e=>n=>{if(n>2)throw t();return e.call(r,n)})),"max"===i.channelCountMode)throw t();return e(r,"channelCountMode",(t=>()=>t.call(r)),(e=>n=>{if("max"===n)throw t();return e.call(r,n)})),r})(Kt,re),vn=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s){const o=i.get(s);return void 0!==o?Promise.resolve(o):(async(r,s)=>{let o=e(r);if(!D(o,s)){const e={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(s,e)}return i.set(s,o),Y(o)?await n(r,s,o.inputs[0]):await n(r,s,o),o})(r,s)}}})(yn,et,Se),bn=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=i(t),u={...wt,...o},c=n(a,u);super(t,!1,c,r(a)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==u.buffer&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(Fe,vn,yn,Ee,Oe,sn),wn=((t,e,n,i,r)=>s=>{const o=new WeakMap;return{render(a,u){const c=o.get(u);return void 0!==c?Promise.resolve(c):(async(a,u)=>{let c=n(a);const l=D(c,u);if(!l){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:s};c=e(u,t)}return o.set(u,c),l?await t(u,a.delayTime,c.delayTime):await i(u,a.delayTime,c.delayTime),await r(a,u,c),c})(a,u)}}})(Ye,qt,et,Ze,Se),Tn=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){const u=r(t),c={...xt,...a},l=i(u,c),h=s(u);super(t,!1,l,h?n(c.maxDelayTime):null),this._delayTime=e(this,h,l.delayTime),o(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(Fe,Qe,wn,qt,Ee,Oe,sn),xn=(t=>(e,n)=>{const i=e.createDynamicsCompressor();if(Nt(i,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return Lt(i,n,"attack"),Lt(i,n,"knee"),Lt(i,n,"ratio"),Lt(i,n,"release"),Lt(i,n,"threshold"),i})(Kt),Sn=((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a)=>{let u=n(o);const c=D(u,a);if(!c){const t={attack:u.attack.value,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,knee:u.knee.value,ratio:u.ratio.value,release:u.release.value,threshold:u.threshold.value};u=e(a,t)}return s.set(a,u),c?(await t(a,o.attack,u.attack),await t(a,o.knee,u.knee),await t(a,o.ratio,u.ratio),await t(a,o.release,u.release),await t(a,o.threshold,u.threshold)):(await i(a,o.attack,u.attack),await i(a,o.knee,u.knee),await i(a,o.ratio,u.ratio),await i(a,o.release,u.release),await i(a,o.threshold,u.threshold)),await r(o,a,u),u})(o,a)}}})(Ye,xn,et,Ze,Se),In=((t,e,n,i,r,s,o,a)=>class extends t{constructor(t,r){const u=s(t),c={...It,...r},l=i(u,c),h=o(u);super(t,!1,l,h?n():null),this._attack=e(this,h,l.attack),this._knee=e(this,h,l.knee),this._nativeDynamicsCompressorNode=l,this._ratio=e(this,h,l.ratio),this._release=e(this,h,l.release),this._threshold=e(this,h,l.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Fe,Qe,Sn,xn,Kt,Ee,Oe,sn),En=((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a)=>{let u=n(o);const c=D(u,a);if(!c){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,gain:u.gain.value};u=e(a,t)}return s.set(a,u),c?await t(a,o.gain,u.gain):await i(a,o.gain,u.gain),await r(o,a,u),u})(o,a)}}})(Ye,zt,et,Ze,Se),An=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=r(t),u={...Et,...o},c=i(a,u),l=s(a);super(t,!1,c,l?n():null),this._gain=e(this,l,c.gain,F,L)}get gain(){return this._gain}})(Fe,Qe,En,zt,Ee,Oe),kn=((t,e,n,i)=>(r,s,{channelCount:o,channelCountMode:a,channelInterpretation:u,feedback:c,feedforward:l})=>{const h=Ut(s,r.sampleRate),d=c instanceof Float64Array?c:new Float64Array(c),p=l instanceof Float64Array?l:new Float64Array(l),f=d.length,g=p.length,m=Math.min(f,g);if(0===f||f>20)throw i();if(0===d[0])throw e();if(0===g||g>20)throw i();if(0===p[0])throw e();if(1!==d[0]){for(let t=0;t<g;t+=1)p[t]/=d[0];for(let t=1;t<f;t+=1)d[t]/=d[0]}const _=n(r,h,o,o);_.channelCount=o,_.channelCountMode=a,_.channelInterpretation=u;const y=[],v=[],b=[];for(let t=0;t<o;t+=1){y.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),v.push(t),b.push(e)}_.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,i=e.numberOfChannels;for(let t=0;t<i;t+=1){const i=e.getChannelData(t),r=n.getChannelData(t);y[t]=Ct(d,f,p,g,m,v[t],b[t],y[t],32,i,r)}};const w=r.sampleRate/2;return Bt({get bufferSize(){return h},get channelCount(){return _.channelCount},set channelCount(t){_.channelCount=t},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){_.channelCountMode=t},get channelInterpretation(){return _.channelInterpretation},set channelInterpretation(t){_.channelInterpretation=t},get context(){return _.context},get inputs(){return[_]},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},addEventListener:(...t)=>_.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>_.dispatchEvent(t[0]),getFrequencyResponse(e,n,i){if(e.length!==n.length||n.length!==i.length)throw t();const r=e.length;for(let t=0;t<r;t+=1){const r=-Math.PI*(e[t]/w),s=[Math.cos(r),Math.sin(r)],o=Gt(Wt(p,s),Wt(d,s));n[t]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),i[t]=Math.atan2(o[1],o[0])}},removeEventListener:(...t)=>_.removeEventListener(t[0],t[1],t[2])},_)})(kt,At,Ht,Kt),On=((t,e,n,i)=>r=>t(Pt,(()=>Pt(r)))?Promise.resolve(t(i,i)).then((t=>{if(!t){const t=n(r,512,0,1);r.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>r.currentTime,t.connect(r.destination)}return r.startRendering()})):new Promise((t=>{const n=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(r.destination),r.startRendering()})))(ye,zt,Ht,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),i=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{i.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(zt,ke)),Cn=((t,e,n,i,r)=>(s,o)=>{const a=new WeakMap;let u=null;return{render(c,l){const h=a.get(l);return void 0!==h?Promise.resolve(h):(async(c,l)=>{let h=null,d=e(c);const p=D(d,l);if(void 0===l.createIIRFilter?h=t(l,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(d=l.createIIRFilter(o,s)),a.set(l,null===h?d:h),null!==h){if(null===u){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(c.context.destination.channelCount,c.context.length,l.sampleRate);u=(async()=>(await i(c,t,t.destination),((t,e,n,i)=>{const r=n instanceof Float64Array?n:new Float64Array(n),s=i instanceof Float64Array?i:new Float64Array(i),o=r.length,a=s.length,u=Math.min(o,a);if(1!==r[0]){for(let t=0;t<o;t+=1)s[t]/=r[0];for(let t=1;t<a;t+=1)r[t]/=r[0]}const c=new Float32Array(32),l=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),d=t.numberOfChannels;for(let e=0;e<d;e+=1){const n=t.getChannelData(e),i=h.getChannelData(e);c.fill(0),l.fill(0),Ct(r,o,s,a,u,c,l,0,32,n,i)}return h})(await r(t),l,s,o)))()}const t=await u;return h.buffer=t,h.start(0),h}return await i(c,l,d),d})(c,l)}}})(Xe,et,ke,Se,On),Dn=(t=>(e,n,i)=>{if(void 0===e.createIIRFilter)return t(e,n,i);const r=e.createIIRFilter(i.feedforward,i.feedback);return Nt(r,i),r})(kn),Pn=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=i(t),u=r(a),c={...Ot,...o},l=e(a,u?null:t.baseLatency,c);super(t,!1,l,u?n(c.feedback,c.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,i,r)=>{if(n.length!==i.length||i.length!==r.length)throw kt();return e.call(t,n,i,r)})})(l),this._nativeIIRFilterNode=l,s(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(Fe,Dn,Cn,Ee,Oe,sn),Rn=((t,e,n,i,r,s,o,a)=>(u,c)=>{const l=c.listener,{forwardX:h,forwardY:d,forwardZ:p,positionX:f,positionY:g,positionZ:m,upX:_,upY:y,upZ:v}=void 0===l.forwardX?(()=>{const h=new Float32Array(1),d=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),p=o(c);let f=!1,g=[0,0,-1,0,1,0],m=[0,0,0];const _=()=>{if(f)return;f=!0;const t=i(c,256,9,0);t.onaudioprocess=({inputBuffer:t})=>{const e=[s(t,h,0),s(t,h,1),s(t,h,2),s(t,h,3),s(t,h,4),s(t,h,5)];e.some(((t,e)=>t!==g[e]))&&(l.setOrientation(...e),g=e);const n=[s(t,h,6),s(t,h,7),s(t,h,8)];n.some(((t,e)=>t!==m[e]))&&(l.setPosition(...n),m=n)},d.connect(t)},y=t=>e=>{e!==g[t]&&(g[t]=e,l.setOrientation(...g))},v=t=>e=>{e!==m[t]&&(m[t]=e,l.setPosition(...m))},b=(e,i,s)=>{const o=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});o.connect(d,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>i});const l=t({context:u},p,o.offset,F,L);var h,f,g,m,y,v,b;return a(l,"value",(t=>()=>t.call(l)),(t=>e=>{try{t.call(l,e)}catch(t){if(9!==t.code)throw t}_(),p&&s(e)})),l.cancelAndHoldAtTime=(h=l.cancelAndHoldAtTime,p?()=>{throw r()}:(...t)=>{const e=h.apply(l,t);return _(),e}),l.cancelScheduledValues=(f=l.cancelScheduledValues,p?()=>{throw r()}:(...t)=>{const e=f.apply(l,t);return _(),e}),l.exponentialRampToValueAtTime=(g=l.exponentialRampToValueAtTime,p?()=>{throw r()}:(...t)=>{const e=g.apply(l,t);return _(),e}),l.linearRampToValueAtTime=(m=l.linearRampToValueAtTime,p?()=>{throw r()}:(...t)=>{const e=m.apply(l,t);return _(),e}),l.setTargetAtTime=(y=l.setTargetAtTime,p?()=>{throw r()}:(...t)=>{const e=y.apply(l,t);return _(),e}),l.setValueAtTime=(v=l.setValueAtTime,p?()=>{throw r()}:(...t)=>{const e=v.apply(l,t);return _(),e}),l.setValueCurveAtTime=(b=l.setValueCurveAtTime,p?()=>{throw r()}:(...t)=>{const e=b.apply(l,t);return _(),e}),l};return{forwardX:b(0,0,y(0)),forwardY:b(1,0,y(1)),forwardZ:b(2,-1,y(2)),positionX:b(6,0,v(0)),positionY:b(7,0,v(1)),positionZ:b(8,0,v(2)),upX:b(3,0,y(3)),upY:b(4,1,y(4)),upZ:b(5,0,y(5))}})():l;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return p},get positionX(){return f},get positionY(){return g},get positionZ(){return m},get upX(){return _},get upY(){return y},get upZ(){return v}}})(Qe,cn,gn,Ht,Kt,ne,Oe,re),Nn=new WeakMap,Mn=((t,e,n,i,r,s)=>class extends n{constructor(n,s){super(n),this._nativeContext=n,d.set(this,n),i(n)&&r.set(n,new Set),this._destination=new t(this,s),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?s(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(nn,Rn,De,Oe,Nn,de),Ln=((t,e,n,i,r,s)=>(o,a)=>{const u=o.createOscillator();return Nt(u,a),Lt(u,a,"detune"),Lt(u,a,"frequency"),void 0!==a.periodicWave?u.setPeriodicWave(a.periodicWave):Rt(u,a,"type"),e(n,(()=>n(o)))||Ft(u),e(i,(()=>i(o)))||s(u,o),e(r,(()=>r(o)))||jt(u),t(o,u),u})(He,ye,oe,ae,ue,he),Fn=((t,e,n,i,r)=>()=>{const s=new WeakMap;let o=null,a=null,u=null;return{set periodicWave(t){o=t},set start(t){a=t},set stop(t){u=t},render(c,l){const h=s.get(l);return void 0!==h?Promise.resolve(h):(async(c,l)=>{let h=n(c);const d=D(h,l);if(!d){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=e(l,t),null!==a&&h.start(a),null!==u&&h.stop(u)}return s.set(l,h),d?(await t(l,c.detune,h.detune),await t(l,c.frequency,h.frequency)):(await i(l,c.detune,h.detune),await i(l,c.frequency,h.frequency)),await r(c,l,h),h})(c,l)}}})(Ye,Ln,et,Ze,Se),jn=((t,e,n,i,r,s,o)=>class extends t{constructor(t,o){const a=r(t),u={...Xt,...o},c=n(a,u),l=s(a),h=l?i():null,d=t.sampleRate/2;super(t,!1,c,h),this._detune=e(this,l,c.detune,153600,-153600),this._frequency=e(this,l,c.frequency,d,-d),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==u.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?o(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){E(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),j(this)&&k(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(Fe,Qe,Ln,Fn,Ee,Oe,de),Un=(t=>(e,n)=>{const i=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return i.buffer=r,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}})(Xe),Vn=((t,e,n,i,r)=>(s,{curve:o,oversample:a,...u})=>{const c=s.createWaveShaper(),l=s.createWaveShaper();Nt(c,u),Nt(l,u);const h=n(s,{...u,gain:1}),d=n(s,{...u,gain:-1}),p=n(s,{...u,gain:1}),f=n(s,{...u,gain:-1});let g=null,m=!1,_=null;const y={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){h.channelCount=t,d.channelCount=t,c.channelCount=t,p.channelCount=t,l.channelCount=t,f.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){h.channelCountMode=t,d.channelCountMode=t,c.channelCountMode=t,p.channelCountMode=t,l.channelCountMode=t,f.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,d.channelInterpretation=t,c.channelInterpretation=t,p.channelInterpretation=t,l.channelInterpretation=t,f.channelInterpretation=t},get context(){return c.context},get curve(){return _},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)c.curve=n,l.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),i=new Float32Array(t+2-t%2);e[0]=n[0],i[0]=-n[t-1];const r=Math.ceil((t+1)/2),s=(t+1)/2-1;for(let o=1;o<r;o+=1){const a=o/r*s,u=Math.floor(a),c=Math.ceil(a);e[o]=u===c?n[u]:(1-(a-u))*n[u]+(1-(c-a))*n[c],i[o]=u===c?-n[t-1-u]:-(1-(a-u))*n[t-1-u]-(1-(c-a))*n[t-1-c]}e[r]=t%2==1?n[r-1]:(n[r-2]+n[r-1])/2,c.curve=e,l.curve=i}_=n,m&&(i(_)&&null===g?g=t(s,h):null!==g&&(g(),g=null))},get inputs(){return[h]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,l.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==o&&(y.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==y.oversample&&(y.oversample=a),r(Bt(y,p),(()=>{h.connect(c).connect(p),h.connect(d).connect(l).connect(f).connect(p),m=!0,i(_)&&(g=t(s,h))}),(()=>{h.disconnect(c),c.disconnect(p),h.disconnect(d),d.disconnect(l),l.disconnect(f),f.disconnect(p),m=!1,null!==g&&(g(),g=null)}))})(Un,At,zt,ie,an),$n=((t,e,n,i,r,s,o)=>(a,u)=>{const c=a.createWaveShaper();if(null!==s&&"webkitAudioContext"===s.name&&void 0===a.createGain().gain.automationRate)return n(a,u);Nt(c,u);const l=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==l&&l.length<2)throw e();Rt(c,{curve:l},"curve"),Rt(c,u,"oversample");let h=null,d=!1;return o(c,"curve",(t=>()=>t.call(c)),(e=>n=>(e.call(c,n),d&&(i(n)&&null===h?h=t(a,c):i(n)||null===h||(h(),h=null)),n))),r(c,(()=>{d=!0,i(c.curve)&&(h=t(a,c))}),(()=>{d=!1,null!==h&&(h(),h=null)}))})(Un,At,Vn,ie,an,Pe,re),Bn=((t,e,n,i,r,s,o,a,u,c)=>(l,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:p,distanceModel:f,maxDistance:g,orientationX:m,orientationY:_,orientationZ:y,panningModel:v,positionX:b,positionY:w,positionZ:T,refDistance:x,rolloffFactor:S,...I})=>{const E=l.createPanner();if(I.channelCount>2)throw o();if("max"===I.channelCountMode)throw o();Nt(E,I);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=n(l,{...A,channelInterpretation:"speakers",numberOfInputs:6}),O=i(l,{...I,gain:1}),C=i(l,{...A,gain:1}),D=i(l,{...A,gain:0}),P=i(l,{...A,gain:0}),R=i(l,{...A,gain:0}),N=i(l,{...A,gain:0}),M=i(l,{...A,gain:0}),L=r(l,256,6,1),F=s(l,{...A,curve:new Float32Array([1,1]),oversample:"none"});let j=[m,_,y],U=[b,w,T];const V=new Float32Array(1);L.onaudioprocess=({inputBuffer:t})=>{const e=[u(t,V,0),u(t,V,1),u(t,V,2)];e.some(((t,e)=>t!==j[e]))&&(E.setOrientation(...e),j=e);const n=[u(t,V,3),u(t,V,4),u(t,V,5)];n.some(((t,e)=>t!==U[e]))&&(E.setPosition(...n),U=n)},Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0});const $={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(t){if(t>2)throw o();O.channelCount=t,E.channelCount=t},get channelCountMode(){return E.channelCountMode},set channelCountMode(t){if("max"===t)throw o();O.channelCountMode=t,E.channelCountMode=t},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(t){O.channelInterpretation=t,E.channelInterpretation=t},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(t){E.coneInnerAngle=t},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(t){E.coneOuterAngle=t},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();E.coneOuterGain=t},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(t){E.distanceModel=t},get inputs(){return[O]},get maxDistance(){return E.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;E.maxDistance=t},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return C.gain},get orientationY(){return D.gain},get orientationZ(){return P.gain},get panningModel(){return E.panningModel},set panningModel(t){E.panningModel=t},get positionX(){return R.gain},get positionY(){return N.gain},get positionZ(){return M.gain},get refDistance(){return E.refDistance},set refDistance(t){if(t<0)throw new RangeError;E.refDistance=t},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;E.rolloffFactor=t},addEventListener:(...t)=>O.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>O.dispatchEvent(t[0]),removeEventListener:(...t)=>O.removeEventListener(t[0],t[1],t[2])};return h!==$.coneInnerAngle&&($.coneInnerAngle=h),d!==$.coneOuterAngle&&($.coneOuterAngle=d),p!==$.coneOuterGain&&($.coneOuterGain=p),f!==$.distanceModel&&($.distanceModel=f),g!==$.maxDistance&&($.maxDistance=g),m!==$.orientationX.value&&($.orientationX.value=m),_!==$.orientationY.value&&($.orientationY.value=_),y!==$.orientationZ.value&&($.orientationZ.value=y),v!==$.panningModel&&($.panningModel=v),b!==$.positionX.value&&($.positionX.value=b),w!==$.positionY.value&&($.positionY.value=w),T!==$.positionZ.value&&($.positionZ.value=T),x!==$.refDistance&&($.refDistance=x),S!==$.rolloffFactor&&($.rolloffFactor=S),1===j[0]&&0===j[1]&&0===j[2]||E.setOrientation(...j),0===U[0]&&0===U[1]&&0===U[2]||E.setPosition(...U),c(Bt($,E),(()=>{O.connect(E),t(O,F,0,0),F.connect(C).connect(k,0,0),F.connect(D).connect(k,0,1),F.connect(P).connect(k,0,2),F.connect(R).connect(k,0,3),F.connect(N).connect(k,0,4),F.connect(M).connect(k,0,5),k.connect(L).connect(l.destination)}),(()=>{O.disconnect(E),a(O,F,0,0),F.disconnect(C),C.disconnect(k),F.disconnect(D),D.disconnect(k),F.disconnect(P),P.disconnect(k),F.disconnect(R),R.disconnect(k),F.disconnect(N),N.disconnect(k),F.disconnect(M),M.disconnect(k),k.disconnect(L),L.disconnect(l.destination)}))})(X,At,cn,zt,Ht,$n,Kt,tt,ne,an),qn=(t=>(e,n)=>{const i=e.createPanner();return void 0===i.orientationX?t(e,n):(Nt(i,n),Lt(i,n,"orientationX"),Lt(i,n,"orientationY"),Lt(i,n,"orientationZ"),Lt(i,n,"positionX"),Lt(i,n,"positionY"),Lt(i,n,"positionZ"),Rt(i,n,"coneInnerAngle"),Rt(i,n,"coneOuterAngle"),Rt(i,n,"coneOuterGain"),Rt(i,n,"distanceModel"),Rt(i,n,"maxDistance"),Rt(i,n,"panningModel"),Rt(i,n,"refDistance"),Rt(i,n,"rolloffFactor"),i)})(Bn),zn=((t,e,n,i,r,s,o,a,u,c)=>()=>{const l=new WeakMap;let h=null;return{render(d,p){const f=l.get(p);return void 0!==f?Promise.resolve(f):(async(d,p)=>{let f=null,g=s(d);const m={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},_={...m,coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor},y=D(g,p);if("bufferSize"in g)f=i(p,{...m,gain:1});else if(!y){const t={..._,orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value};g=r(p,t)}if(l.set(p,null===f?g:f),null!==f){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new o(6,d.context.length,p.sampleRate),i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(t.destination),h=(async()=>{const e=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map((async(e,i)=>{const r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0});return await a(t,e,r.offset),r})));for(let t=0;t<6;t+=1)e[t].connect(i,0,t),e[t].start(0);return c(t)})()}const t=await h,s=i(p,{...m,gain:1});await u(d,p,s);const l=[];for(let e=0;e<t.numberOfChannels;e+=1)l.push(t.getChannelData(e));let g=[l[0][0],l[1][0],l[2][0]],y=[l[3][0],l[4][0],l[5][0]],v=i(p,{...m,gain:1}),b=r(p,{..._,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]});s.connect(v).connect(b.inputs[0]),b.connect(f);for(let e=128;e<t.length;e+=128){const t=[l[0][e],l[1][e],l[2][e]],n=[l[3][e],l[4][e],l[5][e]];if(t.some(((t,e)=>t!==g[e]))||n.some(((t,e)=>t!==y[e]))){g=t,y=n;const o=e/p.sampleRate;v.gain.setValueAtTime(0,o),v=i(p,{...m,gain:0}),b=r(p,{..._,orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),v.gain.setValueAtTime(1,o),s.connect(v).connect(b.inputs[0]),b.connect(f)}}return f}return y?(await t(p,d.orientationX,g.orientationX),await t(p,d.orientationY,g.orientationY),await t(p,d.orientationZ,g.orientationZ),await t(p,d.positionX,g.positionX),await t(p,d.positionY,g.positionY),await t(p,d.positionZ,g.positionZ)):(await a(p,d.orientationX,g.orientationX),await a(p,d.orientationY,g.orientationY),await a(p,d.orientationZ,g.orientationZ),await a(p,d.positionX,g.positionX),await a(p,d.positionY,g.positionY),await a(p,d.positionZ,g.positionZ)),Y(g)?await u(d,p,g.inputs[0]):await u(d,p,g),g})(d,p)}}})(Ye,cn,gn,zt,qn,et,ke,Ze,Se,On),Gn=((t,e,n,i,r,s,o)=>class extends t{constructor(t,a){const u=r(t),c={...Zt,...a},l=n(u,c),h=s(u);super(t,!1,l,h?i():null),this._nativePannerNode=l,this._orientationX=e(this,h,l.orientationX,F,L),this._orientationY=e(this,h,l.orientationY,F,L),this._orientationZ=e(this,h,l.orientationZ,F,L),this._positionX=e(this,h,l.positionX,F,L),this._positionY=e(this,h,l.positionY,F,L),this._positionZ=e(this,h,l.positionZ,F,L),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(Fe,Qe,qn,zn,Ee,Oe,sn),Wn=(t=>(e,{disableNormalization:n,imag:i,real:r})=>{const s=i instanceof Float32Array?i:new Float32Array(i),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,s,{disableNormalization:n});if(Array.from(i).length<2)throw t();return a})(R),Hn=((t,e,n,i)=>class i{constructor(i,r){const s=e(i),o=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}})({...Jt,...r}),a=t(s,o);return n.add(a),a}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===i.prototype||n.has(t)}})(Wn,Ee,new WeakSet),Kn=((t,e,n,i,r,s)=>{const o=16385,a=new Float32Array([1,1]),u=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...c,oversample:"none"},h=(t,s,h,d,p)=>{if(1===s)return((t,e,r,s)=>{const h=new Float32Array(o),d=new Float32Array(o);for(let t=0;t<o;t+=1){const e=t/16384*u;h[t]=Math.cos(e),d[t]=Math.sin(e)}const p=n(t,{...c,gain:0}),f=i(t,{...l,curve:h}),g=i(t,{...l,curve:a}),m=n(t,{...c,gain:0}),_=i(t,{...l,curve:d});return{connectGraph(){e.connect(p),e.connect(void 0===g.inputs?g:g.inputs[0]),e.connect(m),g.connect(r),r.connect(void 0===f.inputs?f:f.inputs[0]),r.connect(void 0===_.inputs?_:_.inputs[0]),f.connect(p.gain),_.connect(m.gain),p.connect(s,0,0),m.connect(s,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(void 0===g.inputs?g:g.inputs[0]),e.disconnect(m),g.disconnect(r),r.disconnect(void 0===f.inputs?f:f.inputs[0]),r.disconnect(void 0===_.inputs?_:_.inputs[0]),f.disconnect(p.gain),_.disconnect(m.gain),p.disconnect(s,0,0),m.disconnect(s,0,1)}}})(t,h,d,p);if(2===s)return((t,r,s,h)=>{const d=new Float32Array(o),p=new Float32Array(o),f=new Float32Array(o),g=new Float32Array(o),m=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>m){const e=(t-m)/(16384-m)*u;d[t]=Math.cos(e),p[t]=Math.sin(e),f[t]=0,g[t]=1}else{const e=t/(16384-m)*u;d[t]=1,p[t]=0,f[t]=Math.cos(e),g[t]=Math.sin(e)}const _=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(t,{...c,gain:0}),v=i(t,{...l,curve:d}),b=n(t,{...c,gain:0}),w=i(t,{...l,curve:p}),T=i(t,{...l,curve:a}),x=n(t,{...c,gain:0}),S=i(t,{...l,curve:f}),I=n(t,{...c,gain:0}),E=i(t,{...l,curve:g});return{connectGraph(){r.connect(_),r.connect(void 0===T.inputs?T:T.inputs[0]),_.connect(y,0),_.connect(b,0),_.connect(x,1),_.connect(I,1),T.connect(s),s.connect(void 0===v.inputs?v:v.inputs[0]),s.connect(void 0===w.inputs?w:w.inputs[0]),s.connect(void 0===S.inputs?S:S.inputs[0]),s.connect(void 0===E.inputs?E:E.inputs[0]),v.connect(y.gain),w.connect(b.gain),S.connect(x.gain),E.connect(I.gain),y.connect(h,0,0),x.connect(h,0,0),b.connect(h,0,1),I.connect(h,0,1)},disconnectGraph(){r.disconnect(_),r.disconnect(void 0===T.inputs?T:T.inputs[0]),_.disconnect(y,0),_.disconnect(b,0),_.disconnect(x,1),_.disconnect(I,1),T.disconnect(s),s.disconnect(void 0===v.inputs?v:v.inputs[0]),s.disconnect(void 0===w.inputs?w:w.inputs[0]),s.disconnect(void 0===S.inputs?S:S.inputs[0]),s.disconnect(void 0===E.inputs?E:E.inputs[0]),v.disconnect(y.gain),w.disconnect(b.gain),S.disconnect(x.gain),E.disconnect(I.gain),y.disconnect(h,0,0),x.disconnect(h,0,0),b.disconnect(h,0,1),I.disconnect(h,0,1)}}})(t,h,d,p);throw r()};return(e,{channelCount:i,channelCountMode:o,pan:a,...u})=>{if("max"===o)throw r();const c=t(e,{...u,channelCount:1,channelCountMode:o,numberOfInputs:2}),l=n(e,{...u,channelCount:i,channelCountMode:o,gain:1}),d=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:a});let{connectGraph:p,disconnectGraph:f}=h(e,i,l,d,c);Object.defineProperty(d.gain,"defaultValue",{get:()=>0}),Object.defineProperty(d.gain,"maxValue",{get:()=>1}),Object.defineProperty(d.gain,"minValue",{get:()=>-1});const g={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount!==t&&(m&&f(),({connectGraph:p,disconnectGraph:f}=h(e,t,l,d,c)),m&&p()),l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw r();l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return d.gain},addEventListener:(...t)=>l.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>l.dispatchEvent(t[0]),removeEventListener:(...t)=>l.removeEventListener(t[0],t[1],t[2])};let m=!1;return s(Bt(g,c),(()=>{p(),m=!0}),(()=>{f(),m=!1}))}})(cn,$t,zt,$n,Kt,an),Yn=((t,e)=>(n,i)=>{const r=i.channelCountMode;if("clamped-max"===r)throw e();if(void 0===n.createStereoPanner)return t(n,i);const s=n.createStereoPanner();return Nt(s,i),Lt(s,i,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>r,set:t=>{if(t!==r)throw e()}}),s})(Kn,Kt),Xn=((t,e,n,i,r)=>()=>{const s=new WeakMap;return{render(o,a){const u=s.get(a);return void 0!==u?Promise.resolve(u):(async(o,a)=>{let u=n(o);const c=D(u,a);if(!c){const t={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,pan:u.pan.value};u=e(a,t)}return s.set(a,u),c?await t(a,o.pan,u.pan):await i(a,o.pan,u.pan),Y(u)?await r(o,a,u.inputs[0]):await r(o,a,u),u})(o,a)}}})(Ye,Yn,et,Ze,Se),Zn=((t,e,n,i,r,s)=>class extends t{constructor(t,o){const a=r(t),u={...Qt,...o},c=n(a,u),l=s(a);super(t,!1,c,l?i():null),this._pan=e(this,l,c.pan)}get pan(){return this._pan}})(Fe,Qe,Yn,Xn,Ee,Oe),Jn=((t,e,n)=>()=>{const i=new WeakMap;return{render(r,s){const o=i.get(s);return void 0!==o?Promise.resolve(o):(async(r,s)=>{let o=e(r);if(!D(o,s)){const e={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(s,e)}return i.set(s,o),Y(o)?await n(r,s,o.inputs[0]):await n(r,s,o),o})(r,s)}}})($n,et,Se),Qn=((t,e,n,i,r,s,o)=>class extends t{constructor(t,e){const a=r(t),u={...ee,...e},c=n(a,u);super(t,!0,c,s(a)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(Fe,At,$n,Jn,Ee,Oe,sn),ti=(t=>null!==t&&t.isSecureContext)(we),ei=(t=>(e,n,i)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return i()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(we),ni=new WeakMap,ii=((t,e)=>n=>{let i=t.get(n);if(void 0!==i)return i;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),t.set(n,i),i})(ni,ke),ri=ti?((t,e,n,i,r,s,o,a,u,c,l,h,d)=>{let p=0;return(f,m,_={credentials:"omit"})=>{const y=l.get(f);if(void 0!==y&&y.has(m))return Promise.resolve();const T=c.get(f);if(void 0!==T){const t=T.get(m);if(void 0!==t)return t}const x=s(f),S=void 0===x.audioWorklet?r(m).then((([t,e])=>{const[i,r]=v(t,e);return n(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}\n})})(window,'_AWGS')`)})).then((()=>{const t=d._AWGS.pop();if(void 0===t)throw new SyntaxError;i(x.currentTime,x.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const i=g.get(x);if(void 0!==i){if(i.has(t))throw e();w(n),b(n.parameterDescriptors),i.set(t,n)}else w(n),b(n.parameterDescriptors),g.set(x,new Map([[t,n]]))}),x.sampleRate,void 0,void 0)))})):Promise.all([r(m),Promise.resolve(t(h,h))]).then((([[t,e],n])=>{const i=p+1;p=i;const[r,s]=v(t,e),c=new Blob([`${r};((AudioWorkletProcessor,registerProcessor)=>{${s}\n})(${n?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${n?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${n?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),l=URL.createObjectURL(c);return x.audioWorklet.addModule(l,_).then((()=>{if(a(x))return x;const t=o(x);return t.audioWorklet.addModule(l,_).then((()=>t))})).then((t=>{if(null===u)throw new SyntaxError;try{new u(t,`__sac${i}`)}catch{throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(l)))}));return void 0===T?c.set(f,new Map([[m,S]])):T.set(m,S),S.then((()=>{const t=l.get(f);void 0===t?l.set(f,new Set([m])):t.add(m)})).finally((()=>{const t=c.get(f);void 0!==t&&t.delete(m)})),S}})(ye,Kt,(t=>e=>new Promise(((n,i)=>{if(null===t)return void i(new SyntaxError);const r=t.document.head;if(null===r)i(new SyntaxError);else{const s=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),u=t.onerror,c=()=>{t.onerror=u,URL.revokeObjectURL(a)};t.onerror=(e,n,r,s,o)=>n===a||n===t.location.href&&1===r&&1===s?(c(),i(o),!1):null!==u?u(e,n,r,s,o):void 0,s.onerror=()=>{c(),i(new SyntaxError)},s.onload=()=>{c(),n()},s.src=a,s.type="module",r.appendChild(s)}})))(we),ei,(async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw new DOMException("","AbortError")}),Ee,ii,Oe,Le,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),r=URL.createObjectURL(n);let s=!1,o=!1;try{await i.audioWorklet.addModule(r);const e=new t(i,"a",{numberOfOutputs:0}),n=i.createOscillator();e.port.onmessage=()=>s=!0,e.onprocessorerror=()=>o=!0,n.connect(e),n.start(0),await i.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return s&&!o})(Le,ke),we):void 0,si=((t,e)=>n=>t(n)||e(n))(Re,Oe),oi=((t,e,n,i,r,s,o,a,u,c,l)=>(n,i)=>{const h=o(n)?n:s(n);if(r.has(i)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{r.add(i)}catch{}return e(u,(()=>u(h)))?h.decodeAudioData(i).then((n=>(Tt(i).catch((()=>{})),e(a,(()=>a(n)))||l(n),t.add(n),n))):new Promise(((e,n)=>{const r=async()=>{try{await Tt(i)}catch{}},s=t=>{n(t),r()};try{h.decodeAudioData(i,(n=>{"function"!=typeof n.copyFromChannel&&(c(n),N(n)),t.add(n),r().then((()=>e(n)))}),(t=>{s(null===t?new DOMException("","EncodingError"):t)}))}catch(t){s(t)}}))})(Ve,ye,0,0,new WeakSet,Ee,si,P,Pt,ze,Ge),ai=((t,e,n,i,r,s,o,a,u,c,l,h,d,p,f,g,m,_,y,v)=>class extends f{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(t,e,i){return new n({length:e,numberOfChannels:t,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(t=6){return new s(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new o(this,{numberOfOutputs:t})}createConstantSource(){return new a(this)}createConvolver(){return new u(this)}createDelay(t=1){return new l(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new g(this)}createPanner(){return new m(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new _(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new v(this)}decodeAudioData(t,e,n){return c(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t)),(t=>{throw"function"==typeof n&&n(t),t}))}})(ri,Ue,We,en,on,hn,pn,_n,bn,oi,Tn,In,An,Pn,Mn,jn,Gn,Hn,Zn,Qn),ui=((t,e,n,i)=>class extends t{constructor(t,e){const r=n(t),s=((t,e)=>t.createMediaElementSource(e.mediaElement))(r,e);if(i(r))throw TypeError();super(t,!0,s,null),this._nativeMediaElementAudioSourceNode=s}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(Fe,0,Ee,Oe),ci=((t,e,n,i)=>class extends t{constructor(t,e){const r=n(t);if(i(r))throw new TypeError;const s=((t,e)=>{const n=t.createMediaStreamDestination();return Nt(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(r,{...Dt,...e});super(t,!1,s,null),this._nativeMediaStreamAudioDestinationNode=s}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Fe,0,Ee,Oe),li=((t,e,n,i)=>class extends t{constructor(t,e){const r=n(t),s=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const i=n.slice(0,1),r=t.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r})(r,e);if(i(r))throw new TypeError;super(t,!0,s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Fe,0,Ee,Oe),hi=((t,e)=>(n,{mediaStreamTrack:i})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);const r=new MediaStream([i]),s=n.createMediaStreamSource(r);if("audio"!==i.kind)throw t();if(e(n))throw new TypeError;return s})(At,Oe),di=((t,e,n)=>class extends t{constructor(t,i){const r=n(t);super(t,!0,e(r,i),null)}})(Fe,hi,Ee),pi=((t,e,n,i,r,s,o,a,u)=>class extends t{constructor(t={}){if(null===u)throw new Error("Missing the native AudioContext constructor.");let e;try{e=new u(t)}catch(t){if(12===t.code&&"sampleRate is not in range"===t.message)throw n();throw t}if(null===e)throw i();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:r}=t,{sampleRate:s}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===r?512/s:"interactive"===r||void 0===r?256/s:"playback"===r?1024/s:128*Math.max(2,Math.min(128,Math.round(r*s/128)))/s,this._nativeAudioContext=e,"webkitAudioContext"===u.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),q(this)})))}createMediaElementSource(t){return new r(this,{mediaElement:t})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new a(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(ai,At,Kt,te,ui,ci,li,di,Pe),fi=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Nn),gi=(t=>(e,n)=>{t(e).add(n)})(fi),mi=(t=>(e,n,i=0,r=0)=>{const s=e[i];if(void 0===s)throw t();return at(n)?s.connect(n,0,r):s.connect(n,0)})(R),_i=(t=>(e,n)=>{t(e).delete(n)})(fi),yi=(t=>(e,n,i,r=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?St(t,e,n).disconnect():at(n)?void 0===i?e.forEach((t=>t.disconnect(n))):void 0===r?St(t,e,i).disconnect(n,0):St(t,e,i).disconnect(n,0,r):void 0===i?e.forEach((t=>t.disconnect(n))):St(t,e,i).disconnect(n,0))(R),vi=new WeakMap,bi=((t,e)=>n=>e(t,n))(vi,T),wi=((t,e,n,i,r,s,o,a,u,c,l,h,d)=>(p,f,g,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw u();const y=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(y.some((t=>t<1)))throw u();if(y.length!==_.numberOfOutputs)throw e();if("explicit"!==_.channelCountMode)throw u();const v=_.channelCount*_.numberOfInputs,b=y.reduce(((t,e)=>t+e),0),w=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(v+w>6||b>6)throw u();const T=new MessageChannel,x=[],S=[];for(let t=0;t<_.numberOfInputs;t+=1)x.push(o(p,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),S.push(r(p,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const I=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:i}of g.parameterDescriptors){const r=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[i]?_.parameterData[i]:void 0===t?0:t});Object.defineProperties(r.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?F:e},minValue:{get:()=>void 0===n?L:n}}),I.push(r)}const E=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+w)}),A=Ut(f,p.sampleRate),k=a(p,A,v+w,Math.max(1,b)),O=r(p,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),C=[];for(let t=0;t<_.numberOfOutputs;t+=1)C.push(i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[t]}));for(let t=0;t<_.numberOfInputs;t+=1){x[t].connect(S[t]);for(let e=0;e<_.channelCount;e+=1)S[t].connect(E,e,t*_.channelCount+e)}const D=new ht(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map((({name:t},e)=>{const n=I[e];return n.connect(E,0,v+e),n.start(0),[t,n.offset]})));E.connect(k);let P=_.channelInterpretation,R=null;const N=0===_.numberOfOutputs?[k]:C,M={get bufferSize(){return A},get channelCount(){return _.channelCount},set channelCount(t){throw n()},get channelCountMode(){return _.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return P},set channelInterpretation(t){for(const e of x)e.channelInterpretation=t;P=t},get context(){return k.context},get inputs(){return x},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(t){"function"==typeof R&&M.removeEventListener("processorerror",R),R="function"==typeof t?t:null,"function"==typeof R&&M.addEventListener("processorerror",R)},get parameters(){return D},get port(){return T.port2},addEventListener:(...t)=>k.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,N),disconnect:c.bind(null,N),dispatchEvent:(...t)=>k.dispatchEvent(t[0]),removeEventListener:(...t)=>k.removeEventListener(t[0],t[1],t[2])},j=new Map;var U,V;T.port1.addEventListener=(U=T.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=j.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{l(p.currentTime,p.sampleRate,(()=>e(t)))},j.set(e,t[1]))}}return U.call(T.port1,t[0],t[1],t[2])}),T.port1.removeEventListener=(V=T.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=j.get(t[1]);void 0!==e&&(j.delete(t[1]),t[1]=e)}return V.call(T.port1,t[0],t[1],t[2])});let $=null;Object.defineProperty(T.port1,"onmessage",{get:()=>$,set:t=>{"function"==typeof $&&T.port1.removeEventListener("message",$),$="function"==typeof t?t:null,"function"==typeof $&&(T.port1.addEventListener("message",$),T.port1.start())}}),g.prototype.port=T.port1;let B=null;const q=((t,e,n,i)=>{let r=m.get(t);void 0===r&&(r=new WeakMap,m.set(t,r));const s=(async(t,e)=>{const n=await(t=>new Promise(((e,n)=>{const{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:t})=>{i.close(),r.close(),e(t)},i.onmessageerror=({data:t})=>{i.close(),r.close(),n(t)},r.postMessage(t)})))(e);return new t(n)})(n,i);return r.set(e,s),s})(p,M,g,_);q.then((t=>B=t));const z=gt(_.numberOfInputs,_.channelCount),G=gt(_.numberOfOutputs,y),W=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let H=!0;const K=()=>{_.numberOfOutputs>0&&k.disconnect(O);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=C[t];for(let i=0;i<y[t];i+=1)O.disconnect(n,e+i,i);e+=y[t]}},Y=new Map;k.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==B){const n=h(M);for(let i=0;i<A;i+=128){for(let e=0;e<_.numberOfInputs;e+=1)for(let n=0;n<_.channelCount;n+=1)pt(t,z[e],n,n,i);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach((({name:e},n)=>{pt(t,W,e,v+n,i)}));for(let t=0;t<_.numberOfInputs;t+=1)for(let e=0;e<y[t];e+=1)0===G[t][e].byteLength&&(G[t][e]=new Float32Array(128));try{const t=z.map(((t,e)=>{if(n[e].size>0)return Y.set(e,A/128),t;const i=Y.get(e);return void 0===i?[]:(t.every((t=>t.every((t=>0===t))))&&(1===i?Y.delete(e):Y.set(e,i-1)),t)})),r=l(p.currentTime+i/p.sampleRate,p.sampleRate,(()=>B.process(t,G,W)));H=r;for(let t=0,n=0;t<_.numberOfOutputs;t+=1){for(let r=0;r<y[t];r+=1)ft(e,G[t],r,n+r,i);n+=y[t]}}catch(t){H=!1,M.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!H){for(let t=0;t<_.numberOfInputs;t+=1){x[t].disconnect(S[t]);for(let e=0;e<_.channelCount;e+=1)S[i].disconnect(E,e,t*_.channelCount+e)}if(void 0!==g.parameterDescriptors){const t=g.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=I[e];t.disconnect(E,0,v+e),t.stop()}}E.disconnect(k),k.onaudioprocess=null,X?K():Q();break}}}};let X=!1;const Z=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),J=()=>k.connect(Z).connect(p.destination),Q=()=>{k.disconnect(Z),Z.disconnect()};return J(),d(M,(()=>{if(H){Q(),_.numberOfOutputs>0&&k.connect(O);for(let t=0,e=0;t<_.numberOfOutputs;t+=1){const n=C[t];for(let i=0;i<y[t];i+=1)O.connect(n,e+i,i);e+=y[t]}}X=!0}),(()=>{H&&(J(),K()),X=!1}))})(mi,R,At,cn,$t,gn,zt,Ht,Kt,yi,ei,bi,an),Ti=((t,e,n,i,r)=>(s,o,a,u,c,l)=>{if(null!==a)try{const e=new a(s,u,l),i=new Map;let o=null;if(Object.defineProperties(e,{channelCount:{get:()=>l.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>o,set:t=>{"function"==typeof o&&e.removeEventListener("processorerror",o),o="function"==typeof t?t:null,"function"==typeof o&&e.addEventListener("processorerror",o)}}}),e.addEventListener=(d=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=i.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},i.set(e,t[1]))}}return d.call(e,"error",t[1],t[2]),d.call(e,...t)}),e.removeEventListener=(h=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=i.get(t[1]);void 0!==e&&(i.delete(t[1]),t[1]=e)}return h.call(e,"error",t[1],t[2]),h.call(e,t[0],t[1],t[2])}),0!==l.numberOfOutputs){const t=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(s.destination),r(e,(()=>t.disconnect()),(()=>t.connect(s.destination)))}return e}catch(t){if(11===t.code)throw i();throw t}var h,d;if(void 0===c)throw i();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(l),e(s,o,c,l)})(At,wi,zt,Kt,an),xi=((t,e,n,i,r,s,o,a,u,c,l,h,d,p,f,g)=>(m,_,y)=>{const v=new WeakMap;let b=null;return{render(w,T){a(T,w);const x=v.get(T);return void 0!==x?Promise.resolve(x):(async(a,w)=>{let T=l(a),x=null;const S=D(T,w),I=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(null===h){const t=I.reduce(((t,e)=>t+e),0),n=r(w,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),s=[];for(let t=0;t<a.numberOfOutputs;t+=1)s.push(i(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:I[t]}));const c=o(w,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1});c.connect=e.bind(null,s),c.disconnect=u.bind(null,s),x=[n,s,c]}else S||(T=new h(w,m));if(v.set(w,null===x?T:x[2]),null!==x){if(null===b){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const t=a.channelCount*a.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,u=async()=>{const u=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),c=[],l=[];for(let t=0;t<_.numberOfInputs;t+=1)c.push(o(u,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),l.push(r(u,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map((async t=>{const e=s(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(u,t,e.offset),e}))),m=i(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<_.numberOfInputs;t+=1){c[t].connect(l[t]);for(let e=0;e<_.channelCount;e+=1)l[t].connect(m,e,t*_.channelCount+e)}for(const[e,n]of h.entries())n.connect(m,0,t+e),n.start(0);return m.connect(u.destination),await Promise.all(c.map((t=>f(a,u,t)))),g(u)};b=mt(a,0===n?null:await u(),w,_,I,y,c)}const t=await b,e=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[u,l,h]=x;null!==t&&(e.buffer=t,e.start(0)),e.connect(u);for(let t=0,e=0;t<a.numberOfOutputs;t+=1){const n=l[t];for(let i=0;i<I[t];i+=1)u.connect(n,e+i,i);e+=I[t]}return h}if(S)for(const[e,n]of a.parameters.entries())await t(w,n,T.parameters.get(e));else for(const[t,e]of a.parameters.entries())await p(w,e,T.parameters.get(t));return await f(a,w,T),T})(w,T)}}})(Ye,mi,Xe,cn,$t,gn,zt,_i,yi,ei,et,Le,ke,Ze,Se,On),Si=(t=>e=>t.get(e))(ni),Ii=(t=>(e,n)=>{t.set(e,n)})(vi),Ei=ti?((t,e,n,i,r,s,o,a,u,c,l,h,d,p)=>class extends e{constructor(e,l,d){var p;const f=a(e),m=u(f),_=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}))({...dt,...d});(t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}})(_);const y=g.get(f),v=null==y?void 0:y.get(l),b=m||"closed"!==f.state?f:null!==(p=o(f))&&void 0!==p?p:f,w=r(b,m?null:e.baseLatency,c,l,v,_);super(e,!0,w,m?i(l,_,v):null);const T=[];w.parameters.forEach(((t,e)=>{const i=n(this,m,t);T.push([e,i])})),this._nativeAudioWorkletNode=w,this._onprocessorerror=null,this._parameters=new ht(T),m&&t(f,this);const{activeInputs:x}=s(this);h(w,x)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?p(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(gi,Fe,Qe,xi,Ti,V,Si,Ee,Oe,Le,0,Ii,0,de):void 0,Ai=((t,e)=>(n,i,r)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(Kt,ke),ki=((t,e,n,i,r,s,o,a)=>(u,c)=>n(u).render(u,c).then((()=>Promise.all(Array.from(i(c)).map((t=>n(t).render(t,c)))))).then((()=>r(c))).then((n=>("function"!=typeof n.copyFromChannel?(o(n),N(n)):e(s,(()=>s(n)))||a(n),t.add(n),n))))(Ve,ye,xe,fi,On,P,ze,Ge),Oi=((t,e,n,i,r)=>class extends t{constructor(t,n,r){let s;if("number"==typeof t&&void 0!==n&&void 0!==r)s={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");s=t}const{length:o,numberOfChannels:a,sampleRate:u}={...Yt,...s},c=i(a,o,u);e(Pt,(()=>Pt(c)))||c.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(c.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(c,a),this._length=o,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,q(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(ai,ye,At,Ai,ki),Ci=((t,e)=>n=>{const i=t.get(n);return e(i)||e(n)})(d,Re),Di=((t,e)=>n=>t.has(n)||e(n))(c,Ne),Pi=((t,e)=>n=>t.has(n)||e(n))(h,Me),Ri=((t,e)=>n=>{const i=t.get(n);return e(i)||e(n)})(d,Oe),Ni=()=>(async(t,e,n,i,r,s,o,a,u,c,l,h,d,p,f,g)=>!!(t(e,e)&&t(n,n)&&t(r,r)&&t(s,s)&&t(a,a)&&t(u,u)&&t(c,c)&&t(l,l)&&t(h,h)&&t(d,d)&&t(p,p))&&(await Promise.all([t(i,i),t(o,o),t(f,f),t(g,g)])).every((t=>t)))(ye,(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;const n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch{return!1}return!0})(ke),(t=>()=>{if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;const e=new t,n=void 0!==e.close;try{e.close()}catch{}return n})(Pe),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise((t=>{let n=!0;const i=i=>{n&&(n=!1,e.startRendering(),t(i instanceof TypeError))};let r;try{r=e.decodeAudioData(null,(()=>{}),i)}catch(t){i(t)}void 0!==r&&r.catch(i)}))})(ke),(t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0})(Pe),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n})(ke),((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new MessageChannel,r=new e(1,128,44100),s=URL.createObjectURL(n);let o=!1;try{await r.audioWorklet.addModule(s);const e=new t(r,"a",{numberOfOutputs:0}),n=r.createOscillator();await new Promise((t=>{e.port.onmessage=()=>t(),e.port.postMessage(i.port2,[i.port2])})),e.port.onmessage=()=>o=!0,n.connect(e),n.start(0),await r.startRendering(),o=await new Promise((t=>{i.port1.onmessage=({data:e})=>t(1===e),i.port1.postMessage(0)}))}catch{}finally{i.port1.close(),URL.revokeObjectURL(s)}return o})(Le,ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch{return!0}return!1})(ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0})(ke),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch{return!1}return!0})(ke),ce,(t=>()=>null!==t&&t.hasOwnProperty("isSecureContext"))(we),(t=>()=>{if(null===t)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(t){return!0}finally{e.close()}})(Pe),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);const n=e.createConstantSource(),i=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,i.channelCount=1,n.start(),n.connect(i).connect(e.destination),e.startRendering().then((t=>1!==t.getChannelData(0)[0]))})(ke),le);function Mi(t,e){if(!t)throw new Error(e)}function Li(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Fi(t){t.isOffline||"running"===t.state||$i('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let ji=console;function Ui(t){ji=t}function Vi(...t){ji.log(...t)}function $i(...t){ji.warn(...t)}function Bi(t){return void 0===t}function qi(t){return!Bi(t)}function zi(t){return"function"==typeof t}function Gi(t){return"number"==typeof t}function Wi(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function Hi(t){return"boolean"==typeof t}function Ki(t){return Array.isArray(t)}function Yi(t){return"string"==typeof t}function Xi(t){return Yi(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const Zi="object"==typeof self?self:null,Ji=Zi&&(Zi.hasOwnProperty("AudioContext")||Zi.hasOwnProperty("webkitAudioContext"));var Qi=n(655);class tr{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function er(t){return Pi(t)}function nr(t){return Di(t)}function ir(t){return Ri(t)}function rr(t){return Ci(t)}function sr(t){return t instanceof AudioBuffer}function or(t,e){return"value"===t||er(e)||nr(e)||sr(e)}function ar(t,...e){if(!e.length)return t;const n=e.shift();if(Wi(t)&&Wi(n))for(const e in n)or(e,n[e])?t[e]=n[e]:Wi(n[e])?(t[e]||Object.assign(t,{[e]:{}}),ar(t[e],n[e])):Object.assign(t,{[e]:n[e]});return ar(t,...e)}function ur(t,e,n=[],i){const r={},s=Array.from(e);if(Wi(s[0])&&i&&!Reflect.has(s[0],i)&&(Object.keys(s[0]).some((e=>Reflect.has(t,e)))||(ar(r,{[i]:s[0]}),n.splice(n.indexOf(i),1),s.shift())),1===s.length&&Wi(s[0]))ar(r,s[0]);else for(let t=0;t<n.length;t++)qi(s[t])&&(r[n[t]]=s[t]);return ar(t,r)}function cr(t,e){return Bi(t)?e:t}function lr(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class hr{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Zi&&this.toString()===Zi.TONE_DEBUG_CLASS)&&Vi(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}hr.version=s;const dr=1e-6;function pr(t,e){return t>e+dr}function fr(t,e){return pr(t,e)||mr(t,e)}function gr(t,e){return t+dr<e}function mr(t,e){return Math.abs(t-e)<dr}function _r(t,e,n){return Math.max(Math.min(t,n),e)}class yr extends hr{constructor(){super(),this.name="Timeline",this._timeline=[];const t=ur(yr.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Mi(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Mi(fr(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(mr(this._timeline[e].time,t)){for(let n=e;n>=0&&mr(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&fr(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const i=this._timeline.length;let r=i;if(i>0&&this._timeline[i-1][e]<=t)return i-1;for(;n<r;){let i=Math.floor(n+(r-n)/2);const s=this._timeline[i],o=this._timeline[i+1];if(mr(s[e],t)){for(let n=i;n<this._timeline.length&&mr(this._timeline[n][e],t);n++)i=n;return i}if(gr(s[e],t)&&pr(o[e],t))return i;pr(s[e],t)?r=i:n=i+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let i=this._search(t),r=this._search(e);return-1!==i&&-1!==r?(this._timeline[i].time!==t&&(i+=1),this._timeline[r].time===e&&(r-=1),this._iterate(n,i,r)):-1===i&&this._iterate(n,0,r),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&mr(this._timeline[n].time,t)){let i=n;for(let e=n;e>=0&&mr(this._timeline[e].time,t);e--)i=e;this._iterate((t=>{e(t)}),i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const vr=[];function br(t){vr.push(t)}const wr=[];function Tr(t){wr.push(t)}class xr extends hr{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Bi(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...i)=>{e(...i),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Bi(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Bi(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,i=n.length;t<i;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(xr.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Sr extends xr{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Ir extends Sr{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new yr,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=ur(Ir.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=function(t){return new pi(t)}({latencyHint:t.latencyHint}),this._ticker=new tr(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,vr.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Mi(rr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return Mi(rr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return Mi(rr(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Mi(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Mi(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Mi(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Mi(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Mi(qi(Ei),"This node only works in a secure context (https or localhost)"),new Ei(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return(0,Qi.mG)(this,void 0,void 0,(function*(){Mi(qi(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return(0,Qi.mG)(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,Yi(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return rr(this._context)?this._context.resume():Promise.resolve()}close(){return(0,Qi.mG)(this,void 0,void 0,(function*(){var t;rr(this._context)&&(yield this._context.close()),this._initialized&&(t=this,wr.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=e,i.loop=!0,i.start(0),this._constants.set(t,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,i=()=>{const r=this.now();this._timeouts.add({callback:()=>{t(),i()},id:n,time:r+e})};return i(),n}}function Er(t,e){Ki(e)?e.forEach((e=>Er(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ar(t,e){Ki(e)?e.forEach((e=>Ar(t,e))):Object.defineProperty(t,e,{writable:!0})}const kr=()=>{};class Or extends hr{constructor(){super(),this.name="ToneAudioBuffer",this.onload=kr;const t=ur(Or.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&sr(t.url)||t.url instanceof Or?this.set(t.url):Yi(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:kr,onload:kr,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Rr().sampleRate}set(t){return t instanceof Or?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){const e=Or.load(t).then((t=>{this.set(t),this.onload(this)}));Or.downloads.push(e);try{yield e}finally{const t=Or.downloads.indexOf(e);Or.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=Ki(t)&&t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=Rr(),s=r.createBuffer(n,i,r.sampleRate),o=e||1!==n?t:[t];for(let t=0;t<n;t++)s.copyToChannel(o[t],t);return this._buffer=s,this}toMono(t){if(Gi(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Gi(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),i=Math.floor(e*this.sampleRate);Mi(n<i,"The start time must be less than the end time");const r=i-n,s=Rr().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)s.copyToChannel(this.getChannelData(t).subarray(n,i),t);return new Or(s)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new Or).fromArray(t)}static fromUrl(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){const e=new Or;return yield e.load(t)}))}static load(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){const e=t.match(/\[([^\]\[]+\|.+)\]$/);if(e){const n=e[1].split("|");let i=n[0];for(const t of n)if(Or.supportsType(t)){i=t;break}t=t.replace(e[0],i)}const n=""===Or.baseUrl||Or.baseUrl.endsWith("/")?Or.baseUrl:Or.baseUrl+"/",i=yield fetch(n+t);if(!i.ok)throw new Error(`could not load url: ${t}`);const r=yield i.arrayBuffer();return yield Rr().decodeAudioData(r)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return(0,Qi.mG)(this,void 0,void 0,(function*(){for(yield Promise.resolve();Or.downloads.length;)yield Or.downloads[0]}))}}Or.baseUrl="",Or.downloads=[];class Cr extends Ir{constructor(){var t,e,n;super({clockSource:"offline",context:ir(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Oi(t,e,n)),lookAhead:0,updateInterval:ir(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=ir(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return(0,Qi.mG)(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Or(e)}))}close(){return Promise.resolve()}}const Dr=new class extends Sr{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Pr=Dr;function Rr(){return Pr===Dr&&Ji&&Nr(new Ir),Pr}function Nr(t){Pr=rr(t)?new Ir(t):ir(t)?new Cr(t):t}function Mr(){return Pr.resume()}if(Zi&&!Zi.TONE_SILENCE_LOGGING){let t="v";"dev"===s&&(t="");const e=` * Tone.js ${t}${s} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Lr(t){return Math.pow(10,t/20)}function Fr(t){return Math.log(t)/Math.LN10*20}function jr(t){return Math.pow(2,t/12)}let Ur=440;function Vr(t){return Math.round($r(t))}function $r(t){return 69+12*Math.log2(t/Ur)}function Br(t){return Ur*Math.pow(2,(t-69)/12)}class qr extends hr{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),i="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof qr&&this.fromType(this._val),Bi(this._val))return this._noArg();if(Yi(this._val)&&Bi(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Wi(this._val)){let t=0;for(const e in this._val)if(qi(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(qi(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return Yi(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class zr extends qr{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new zr(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),i=this.valueOf();return i+(Math.round(i/n)*n-i)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){const n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],i=new zr(this.context,e[0]).toSeconds();return e.forEach((e=>{const r=new zr(this.context,e).toSeconds();Math.abs(r-t)<Math.abs(i-t)&&(n=e,i=r)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let i=e%1*4;e=Math.floor(e)%this._getTimeSignature();const r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[n,e,i].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Vr(this.toFrequency())}_now(){return this.context.now()}}function Gr(t,e){return new zr(Rr(),t,e)}class Wr extends zr{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Ur}static set A4(t){!function(t){Ur=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:Wr.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=Hr[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:Wr.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(t){return new Wr(this.context,this.valueOf()*jr(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Vr(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Wr.A4);let n=Math.round(12*e)+57;const i=Math.floor(n/12);return i<0&&(n+=-12*i),Kr[n%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Br(t)}static ftom(t){return Vr(t)}}const Hr={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},Kr=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Yr(t,e){return new Wr(Rr(),t,e)}class Xr extends zr{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function Zr(t,e){return new Xr(Rr(),t,e)}class Jr extends hr{constructor(){super();const t=ur(Jr.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Rr()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new zr(this.context,t).toSeconds()}toFrequency(t){return new Wr(this.context,t).toFrequency()}toTicks(t){return new Xr(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Bi(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];qi(n)&&qi(n.value)&&qi(n.setValueAtTime)?t[e]=n.value:n instanceof Jr?t[e]=n._getPartialProperties(t[e]):Ki(n)||Gi(n)||Yi(n)||Hi(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&qi(this[e])&&(this[e]&&qi(this[e].value)&&qi(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof Jr?this[e].set(t[e]):this[e]=t[e])})),this}}class Qr extends yr{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Li(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){const n=this._timeline[e];if(n.state===t)return n}}}class ts extends Jr{constructor(){super(ur(ts.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=ur(ts.getDefaults(),arguments,["param","units","convert"]);for(Mi(qi(t.param)&&(er(t.param)||t.param instanceof ts),"param must be an AudioParam");!er(t.param);)t.param=t.param._param;this._swappable=!!qi(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new yr(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,qi(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Jr.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return qi(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return qi(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return qi(this.maxValue)&&qi(this.minValue)&&Li(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Lr(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?Fr(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),i=this._fromType(t);return Mi(isFinite(i)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),i=this._events.get(e);let r=this._initialValue;if(null===i)r=this._initialValue;else if("setTargetAtTime"!==i.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)r=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=i.value;if("setTargetAtTime"===i.type){const e=this._events.getBefore(i.time);t=null===e?this._initialValue:e.value}r="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,t,n.time,n.value,e):this._exponentialInterpolate(i.time,t,n.time,n.value,e)}else r=i.value;else{const t=this._events.getBefore(i.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===i.type&&(r=this._exponentialApproach(i.time,n,i.value,i.constant,e))}return this._toType(r)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),i=this.toSeconds(e);return Mi(isFinite(n)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=mr(n,0)?this._minOutput:n,this._assertRange(n);const i=this.toSeconds(e);return Mi(isFinite(n)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const i=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,i),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const i=this._fromType(t);Mi(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(e);return this._assertRange(i),Mi(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",t,r,n),this._param.setTargetAtTime(i,r,n),this}setValueCurveAtTime(t,e,n,i=1){n=this.toSeconds(n),e=this.toSeconds(e);const r=this._fromType(t[0])*i;this.setValueAtTime(this._toType(r),e);const s=n/(t.length-1);for(let n=1;n<t.length;n++){const r=this._fromType(t[n])*i;this.linearRampToValueAtTime(this._toType(r),e+n*s)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Mi(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Mi(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const i=this._events.get(e),r=this._events.getAfter(e);return i&&mr(i.time,e)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),"linearRampToValueAtTime"===r.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===r.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const i=this._events.getAfter(n.time),r=i?i.time:e+2,s=(r-e)/10;for(let n=e;n<r;n+=s)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Mi(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)}_linearInterpolate(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)}_exponentialInterpolate(t,e,n,i,r){return e*Math.pow(i/e,(r-t)/(n-t))}}class es extends Jr{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return qi(this.input)?er(this.input)||this.input instanceof ts?1:this.input.numberOfInputs:0}get numberOfOutputs(){return qi(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return qi(t)&&(t instanceof es||nr(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Mi(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return is(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return $i("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return rs(this,t,e,n),this}chain(...t){return ns(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),qi(this.input)&&(this.input instanceof es?this.input.dispose():nr(this.input)&&this.input.disconnect()),qi(this.output)&&(this.output instanceof es?this.output.dispose():nr(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ns(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof es?t.connect(e):nr(t)&&is(t,e),e)),e)}function is(t,e,n=0,i=0){for(Mi(qi(t),"Cannot connect from undefined node"),Mi(qi(e),"Cannot connect to undefined node"),(e instanceof es||nr(e))&&Mi(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Mi(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof es||e instanceof ts;)qi(e.input)&&(e=e.input);for(;t instanceof es;)qi(t.output)&&(t=t.output);er(e)?t.connect(e,n):t.connect(e,n,i)}function rs(t,e,n=0,i=0){if(qi(e))for(;e instanceof es;)e=e.input;for(;!nr(t);)qi(t.output)&&(t=t.output);er(e)?t.disconnect(e,n):nr(e)?t.disconnect(e,n,i):t.disconnect()}class ss extends es{constructor(){super(ur(ss.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=ur(ss.getDefaults(),arguments,["gain","units"]);this.gain=new ts({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Er(this,"gain")}static getDefaults(){return Object.assign(es.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class os extends es{constructor(t){super(t),this.onended=kr,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new ss({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(es.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:kr})}_startGain(t,e=1){Mi(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Mi(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==kr&&(this.onended(this),this.onended=kr,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Mi(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class as extends os{constructor(){super(ur(as.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=ur(as.getDefaults(),arguments,["offset"]);is(this._source,this._gainNode),this.offset=new ts({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(os.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class us extends es{constructor(){super(ur(us.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=ur(us.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new as({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(es.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return cs(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,i){return this._param.setValueCurveAtTime(t,e,n,i),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function cs(t,e,n,i){(e instanceof ts||er(e)||e instanceof us&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof us&&(e.overridden=!0)),is(t,e,n,i)}class ls extends ts{constructor(){super(ur(ls.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new yr(1/0),this._multiplier=1;const t=ur(ls.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ts.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const i=this._fromType(t),r=this._events.get(e),s=Math.round(Math.max(1/n,1));for(let t=0;t<=s;t++){const s=n*t+e,o=this._exponentialApproach(r.time,r.value,i,n,s);this.linearRampToValueAtTime(this._toType(o),s)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const i=this._events.get(n),r=this._events.previousEvent(i),s=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(s,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const i=this._events.get(n),r=this._events.previousEvent(i),s=this._getTicksUntilEvent(r,n);return i.ticks=Math.max(s,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),i=this._events.get(e),r=Math.round(Math.max(10*(e-i.time),1)),s=(e-i.time)/r;for(let t=0;t<=r;t++){const r=s*t+i.time,o=this._exponentialInterpolate(i.time,i.value,e,n,r);this.linearRampToValueAtTime(this._toType(o),r)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Bi(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let i=this._fromType(this.getValueAtTime(e));const r=this._events.get(e);return r&&r.time===e&&"setValueAtTime"===r.type&&(i=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+i)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const i=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-e.time),s=Math.sqrt(Math.pow(i,2)-2*r*(e.ticks-t)),o=(-i+s)/r,a=(-i-s)/r;return(o>0?o:a)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),i=this.toSeconds(t),r=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-r}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class hs extends us{constructor(){super(ur(hs.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=ur(hs.getDefaults(),arguments,["value"]);this.input=this._param=new ls({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(us.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class ds extends Jr{constructor(){super(ur(ds.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Qr,this._tickOffset=new yr;const t=ur(ds.getDefaults(),arguments,["frequency"]);this.frequency=new hs({context:this.context,units:t.units,value:t.frequency}),Er(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Jr.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),qi(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);let r=n,s=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(s=n.ticks,e=n.time),"started"===r.state&&"started"!==t.state&&(s+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),r=t})),this._state.remove(i),s}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let i=e,r=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(r=n.seconds,e=n.time),"started"===i.state&&"started"!==t.state&&(r+=t.time-e),i=t})),this._state.remove(n),r}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),i=this._state.get(e),r=Math.max(n.time,i.time),s=this.frequency.getTicksAtTime(r)+t-n.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(t,e,n){let i=this._state.get(t);this._state.forEachBetween(t,e,(e=>{i&&"started"===i.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(i.time,t),e.time-this.sampleTime,n),i=e}));let r=null;if(i&&"started"===i.state){const s=Math.max(i.time,t),o=this.frequency.getTicksAtTime(s),a=o-this.frequency.getTicksAtTime(i.time);let u=Math.ceil(a)-a;u=mr(u,1)?0:u;let c=this.frequency.getTimeOfTick(o+u);for(;c<e;){try{n(c,Math.round(this.getTicksAtTime(c)))}catch(t){r=t;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class ps extends Jr{constructor(){super(ur(ps.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=kr,this._lastUpdate=0,this._state=new Qr("stopped"),this._boundLoop=this._loop.bind(this);const t=ur(ps.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new ds({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Er(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Jr.getDefaults(),{callback:kr,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Fi(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}xr.mixin(ps);class fs extends es{constructor(){super(ur(fs.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=ur(fs.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new ts({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Er(this,"delayTime")}static getDefaults(){return Object.assign(es.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function gs(t,e,n=2,i=Rr().sampleRate){return(0,Qi.mG)(this,void 0,void 0,(function*(){const r=Rr(),s=new Cr(n,e,i);Nr(s),yield t(s);const o=s.render();Nr(r);const a=yield o;return new Or(a)}))}class ms extends hr{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=ur(ms.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:kr,onload:kr,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Mi(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=kr,i=kr){return Yi(e)?this._buffers.set(t.toString(),new Or(this.baseUrl+e,n,i)):this._buffers.set(t.toString(),new Or(e,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class _s extends Wr{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Vr(super._frequencyToUnits(t))}_ticksToUnits(t){return Vr(super._ticksToUnits(t))}_beatsToUnits(t){return Vr(super._beatsToUnits(t))}_secondsToUnits(t){return Vr(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Br(this.toMidi())}transpose(t){return new _s(this.context,this.toMidi()+t)}}function ys(t,e){return new _s(Rr(),t,e)}class vs extends Xr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function bs(t,e){return new vs(Rr(),t,e)}class ws extends Jr{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new yr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}br((t=>{t.draw=new ws({context:t})})),Tr((t=>{t.draw.dispose()}));class Ts extends hr{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Mi(qi(t.time),"Events must have a time property"),Mi(qi(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new xs(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),i=t.right;i&&(t.right=i.left,i.left=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),i=t.left;i&&(t.left=i.right,i.right=t),null!==e?n?e.left=i:e.right=i:this._setRoot(i)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class xs{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Ss extends es{constructor(){super(ur(Ss.getDefaults(),arguments,["volume"])),this.name="Volume";const t=ur(Ss.getDefaults(),arguments,["volume"]);this.input=this.output=new ss({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Er(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(es.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Is extends es{constructor(){super(ur(Is.getDefaults(),arguments)),this.name="Destination",this.input=new Ss({context:this.context}),this.output=new ss({context:this.context}),this.volume=this.input.volume;const t=ur(Is.getDefaults(),arguments);ns(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(es.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),ns(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}br((t=>{t.destination=new Is({context:t})})),Tr((t=>{t.destination.dispose()}));class Es extends hr{constructor(t){super(),this.name="TimelineValue",this._timeline=new yr({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class As{constructor(t,e){this.id=As._eventId++;const n=Object.assign(As.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:kr,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}As._eventId=0;class ks extends As{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(ks.getDefaults(),e);this.duration=new vs(t.context,n.duration).valueOf(),this._interval=new vs(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},As.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new vs(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new vs(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new vs(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Os extends Jr{constructor(){super(ur(Os.getDefaults(),arguments)),this.name="Transport",this._loop=new Es(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new yr,this._repeatedEvents=new Ts,this._syncedSignals=[],this._swingAmount=0;const t=ur(Os.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new ps({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Er(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(Jr.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(n*Math.PI)*this._swingAmount;t+=new vs(this.context,2*this._swingTicks/3).toSeconds()*i}this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new As(this,{callback:t,time:new Xr(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,i=1/0){const r=new ks(this,{callback:t,duration:new zr(this.context,i).toTicks(),interval:new zr(this.context,e).toTicks(),time:new Xr(this.context,n).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(t,e){const n=new As(this,{callback:t,once:!0,time:new Xr(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new vs(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return qi(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){Ki(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new zr(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new zr(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new vs(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new vs(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),i=e+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,e);this.emit("stop",i),this._clock.setTicksAtTime(t,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const i=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/i}else e=0}const n=new ss(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ar(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}xr.mixin(Os),br((t=>{t.transport=new Os({context:t})})),Tr((t=>{t.transport.dispose()}));class Cs extends es{constructor(t){super(t),this.input=void 0,this._state=new Qr("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=kr,this._syncedStop=kr,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ss({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Er(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(es.getDefaults(),{mute:!1,onstop:kr,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let i=Bi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const t=this._state.get(i);t&&(t.offset=this.toSeconds(cr(e,0)),t.duration=n?this.toSeconds(n):void 0);const r=this.context.transport.schedule((t=>{this._start(t,e,n)}),i);this._scheduled.push(r),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else Fi(this.context),this._start(i,e,n);else Mi(pr(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,n);return this}stop(t){let e=Bi(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||qi(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const i=e-this.toSeconds(n.time);let r;n.duration&&(r=this.toSeconds(n.duration)-i),this._start(t,this.toSeconds(n.offset)+i,r)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=kr,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Ds extends os{constructor(){super(ur(Ds.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=ur(Ds.getDefaults(),arguments,["url","onload"]);is(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new ts({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Or(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(os.getDefaults(),{url:new Or,loop:!1,loopEnd:0,loopStart:0,onload:kr,onerror:kr,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,i=1){Mi(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(t);this._startGain(r,i),e=this.loop?cr(e,this.loopStart):cr(e,0);let s=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;fr(s,t)&&(s=(s-e)%n+e),mr(s,this.buffer.duration)&&(s=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,gr(s,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,s)),qi(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(r+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Ps extends Cs{constructor(){super(ur(Ps.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=ur(Ps.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Cs.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Mi(t in Ms,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=Ms[this._type];this._source=new Ds({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Rs=220500,Ns={brown:null,pink:null,white:null},Ms={get brown(){if(!Ns.brown){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Rs);t[e]=n;let i=0;for(let t=0;t<Rs;t++){const e=2*Math.random()-1;n[t]=(i+.02*e)/1.02,i=n[t],n[t]*=3.5}}Ns.brown=(new Or).fromArray(t)}return Ns.brown},get pink(){if(!Ns.pink){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Rs);let i,r,s,o,a,u,c;t[e]=n,i=r=s=o=a=u=c=0;for(let t=0;t<Rs;t++){const e=2*Math.random()-1;i=.99886*i+.0555179*e,r=.99332*r+.0750759*e,s=.969*s+.153852*e,o=.8665*o+.3104856*e,a=.55*a+.5329522*e,u=-.7616*u-.016898*e,n[t]=i+r+s+o+a+u+c+.5362*e,n[t]*=.11,c=.115926*e}}Ns.pink=(new Or).fromArray(t)}return Ns.pink},get white(){if(!Ns.white){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Rs);t[e]=n;for(let t=0;t<Rs;t++)n[t]=2*Math.random()-1}Ns.white=(new Or).fromArray(t)}return Ns.white}};class Ls extends es{constructor(){super(ur(Ls.getDefaults(),arguments,["volume"])),this.name="UserMedia";const t=ur(Ls.getDefaults(),arguments,["volume"]);this._volume=this.output=new Ss({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Er(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(es.getDefaults(),{mute:!1,volume:0})}open(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){Mi(Ls.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield Ls.enumerateDevices();Gi(t)?this._device=e[t]:(this._device=e.find((e=>e.label===t||e.deviceId===t)),!this._device&&e.length>0&&(this._device=e[0]),Mi(qi(this._device),`No matching device ${t}`));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const i=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=i;const t=this.context.createMediaStreamSource(i);is(t,this.output),this._mediaStream=t}return this}))}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((t=>{t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return(0,Qi.mG)(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((t=>"audioinput"===t.kind))}))}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return qi(navigator.mediaDevices)&&qi(navigator.mediaDevices.getUserMedia)}}function Fs(t,e){return(0,Qi.mG)(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,i=new Cr(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)}))}class js extends os{constructor(){super(ur(js.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=ur(js.getDefaults(),arguments,["frequency","type"]);is(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new ts({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new ts({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Er(this,["frequency","detune"])}static getDefaults(){return Object.assign(os.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Us extends Cs{constructor(){super(ur(Us.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=ur(Us.getDefaults(),arguments,["frequency","type"]);this.frequency=new us({context:this.context,units:"frequency",value:t.frequency}),Er(this,"frequency"),this.detune=new us({context:this.context,units:"cents",value:t.detune}),Er(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Cs.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new js({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return Us._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}));{const t=Us._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(qi(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),i=this.context.createPeriodicWave(e,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Us._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Us._periodicWaveCache.length>100&&Us._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Li(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const i=new Float32Array(n),r=new Float32Array(n);let s=1;if("custom"===t){if(s=this._partials.length+1,this._partialCount=this._partials.length,n=s,0===this._partials.length)return[i,r]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(s=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],s=Math.max(s,2),n=s):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(t){case"sine":a=o<=s?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==a?(i[o]=-a*Math.sin(e*o),r[o]=a*Math.cos(e*o)):(i[o]=0,r[o]=0)}return[i,r]}_inverseFFT(t,e,n){let i=0;const r=t.length;for(let s=0;s<r;s++)i+=t[s]*Math.cos(s*n)+e[s]*Math.sin(s*n);return i}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const i=2*Math.PI;for(let r=0;r<32;r++)n=Math.max(this._inverseFFT(t,e,r/32*i),n);return _r(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Us._periodicWaveCache=[];class Vs extends es{constructor(){super(Object.assign(ur(Vs.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return cs(this,t,e,n),this}}class $s extends Vs{constructor(){super(Object.assign(ur($s.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=ur($s.getDefaults(),arguments,["mapping","length"]);Ki(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):zi(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(us.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let i=0,r=e;i<r;i++){const e=i/(r-1)*2-1;n[i]=t(e,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Mi(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Bs extends Vs{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new $s({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qs extends us{constructor(){super(Object.assign(ur(qs.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=ur(qs.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new ss({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(us.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class zs extends Cs{constructor(){super(ur(zs.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Bs({context:this.context}),this._modulationNode=new ss({context:this.context});const t=ur(zs.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Us({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Us({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qs({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Er(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Us.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Gs extends Cs{constructor(){super(ur(Gs.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new ss({context:this.context,gain:0});const t=ur(Gs.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Us({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new us({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Us({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qs({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new qs({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Er(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Us.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Ws extends Cs{constructor(){super(ur(Ws.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new ss({context:this.context,gain:0}),this._thresh=new $s({context:this.context,mapping:t=>t<=0?-1:1});const t=ur(Ws.getDefaults(),arguments,["frequency","width"]);this.width=new us({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Us({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Er(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Cs.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Hs extends Cs{constructor(){super(ur(Hs.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=ur(Hs.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new us({context:this.context,units:"frequency",value:t.frequency}),this.detune=new us({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Er(this,["frequency","detune"])}static getDefaults(){return Object.assign(Us.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,i)=>t.detune.value=e+n*i))}}get count(){return this._oscillators.length}set count(t){if(Li(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Us({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):kr});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class Ks extends Cs{constructor(){super(ur(Ks.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qs({context:this.context,value:2});const t=ur(Ks.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Ws({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Us({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Er(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Cs.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Ys={am:zs,fat:Hs,fm:Gs,oscillator:Us,pulse:Ws,pwm:Ks};class Xs extends Cs{constructor(){super(ur(Xs.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=ur(Xs.getDefaults(),arguments,["frequency","type"]);this.frequency=new us({context:this.context,units:"frequency",value:t.frequency}),this.detune=new us({context:this.context,units:"cents",value:t.detune}),Er(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Us.getDefaults(),Gs.getDefaults(),zs.getDefaults(),Hs.getDefaults(),Ws.getDefaults(),Ks.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=Ys[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof Ys[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Gi(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Gi(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Yi(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){return Fs(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Zs extends us{constructor(){super(Object.assign(ur(Zs.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new ss({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ns(this._constantSource,this._sum)}static getDefaults(){return Object.assign(us.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Js extends Vs{constructor(){super(Object.assign(ur(Js.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=ur(Js.getDefaults(),arguments,["min","max"]);this._mult=this.input=new qs({context:this.context,value:t.max-t.min}),this._add=this.output=new Zs({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Vs.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Qs extends Vs{constructor(){super(Object.assign(ur(Qs.getDefaults(),arguments))),this.name="Zero",this._gain=new ss({context:this.context}),this.output=this._gain,this.input=void 0,is(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),rs(this.context.getConstant(0),this._gain),this}}class to extends es{constructor(){super(ur(to.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=ts.prototype._fromType,this._toType=ts.prototype._toType,this._is=ts.prototype._is,this._clampValue=ts.prototype._clampValue;const t=ur(to.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Us(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new ss({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new us({context:this.context,units:"audioRange",value:0}),this._zeros=new Qs({context:this.context}),this._a2g=new Bs({context:this.context}),this._scaler=this.output=new Js({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Er(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(Us.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof ts||t instanceof us)&&(this.convert=t.convert,this.units=t.units),cs(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function eo(t,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Li(i,t,e),n.set(this,i)}})}}function no(t,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){Li(this.toSeconds(i),t,e),n.set(this,i)}})}}class io extends Cs{constructor(){super(ur(io.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=ur(io.getDefaults(),arguments,["url","onload"]);this._buffer=new Or({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Cs.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:kr,onerror:kr,playbackRate:1,reverse:!1})}load(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=kr){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?cr(e,this._loopStart):cr(e,0);const i=this.toSeconds(e),r=n;n=cr(n,Math.max(this._buffer.duration-i,0));let s=this.toSeconds(n);s/=this._playbackRate,t=this.toSeconds(t);const o=new Ds({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+s),this._state.setStateAtTime("stopped",t+s,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Bi(r)?o.start(t,i):o.start(t,i,s-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Li(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Li(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}(0,Qi.gn)([no(0)],io.prototype,"fadeIn",void 0),(0,Qi.gn)([no(0)],io.prototype,"fadeOut",void 0);class ro extends es{constructor(){super(ur(ro.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=ur(ro.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Ss({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Er(this,"volume"),this._buffers=new ms({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Cs.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:kr,onerror:kr,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach((e=>{e.fadeIn=t}))}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach((e=>{e.fadeOut=t}))}get state(){return Array.from(this._players).some((([t,e])=>"started"===e.state))?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Mi(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const e=new io({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,e,n){return Mi(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}stopAll(t){return this._players.forEach((e=>e.stop(t))),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach((t=>t.dispose())),this._buffers.dispose(),this}}class so extends Cs{constructor(){super(ur(so.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const t=ur(so.getDefaults(),arguments,["url","onload"]);this.buffer=new Or({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new ps({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Cs.getDefaults(),{onload:kr,onerror:kr,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,n){e=cr(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const i=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/i),n&&this.stop(t+this.toSeconds(n))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach((e=>{e.fadeOut=0,e.stop(t)})),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),n=e*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(t);const i=n<this._overlap?0:this._overlap,r=new Ds({context:this.context,url:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:jr(this.detune/100)}).connect(this.output);r.start(t,this._grainSize*e),r.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(r),r.onended=()=>{const t=this._activeSources.indexOf(r);-1!==t&&this._activeSources.splice(t,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Li(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Li(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Li(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);Li(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((t=>t.dispose())),this}}class oo extends Vs{constructor(){super(...arguments),this.name="Abs",this._abs=new $s({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class ao extends Vs{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new $s({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class uo extends Vs{constructor(){super(...arguments),this.name="Negate",this._multiply=new qs({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class co extends us{constructor(){super(Object.assign(ur(co.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new ss({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new uo({context:this.context}),this.subtrahend=this._param,ns(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(us.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class lo extends Vs{constructor(){super(Object.assign(ur(lo.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new $s({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new qs({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class ho extends us{constructor(){super(Object.assign(ur(ho.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const t=ur(ho.getDefaults(),arguments,["value"]);this._subtract=this.input=new co({context:this.context,value:t.value}),this._gtz=this.output=new lo({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Er(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(us.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class po extends Vs{constructor(){super(Object.assign(ur(po.getDefaults(),arguments,["value"]))),this.name="Pow";const t=ur(po.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new $s({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Vs.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class fo extends Js{constructor(){super(Object.assign(ur(fo.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const t=ur(fo.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new po({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Js.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class go extends us{constructor(){super(ur(us.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const t=ur(us.getDefaults(),arguments,["value","units"]);this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new as({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new Xr(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new Xr(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new Xr(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new Xr(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const i=new Xr(this.context,e).toSeconds();return super.setTargetAtTime(t,i,n),this}cancelScheduledValues(t){const e=new Xr(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,i){const r=new Xr(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,r,n,i),this}cancelAndHoldAtTime(t){const e=new Xr(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new Xr(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const i=new Xr(this.context,n).toSeconds();return super.exponentialRampTo(t,e,i),this}linearRampTo(t,e,n){const i=new Xr(this.context,n).toSeconds();return super.linearRampTo(t,e,i),this}targetRampTo(t,e,n){const i=new Xr(this.context,n).toSeconds();return super.targetRampTo(t,e,i),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class mo extends es{constructor(){super(ur(mo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new us({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=ur(mo.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(es.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Yi(t))return t;{let n;for(n in _o)if(_o[n][e]===t)return n;return t}}_setCurve(t,e,n){if(Yi(n)&&Reflect.has(_o,n)){const i=_o[n];Wi(i)?"_decayCurve"!==t&&(this[t]=i[e]):this[t]=i}else{if(!Ki(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Mi(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),r=this.getValueAtTime(t);if(r>0&&(n=(1-r)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let i=this._attackCurve;for(let t=1;t<i.length;t++)if(i[t-1]<=r&&r<=i[t]){i=this._attackCurve.slice(t),i[0]=r;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(i&&this.sustain<1){const r=e*this.sustain,s=t+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(r,i+s):this._sig.exponentialApproachValueAtTime(r,s,i)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Mi(Ki(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return cs(this,t,e,n),this}asArray(t=1024){return(0,Qi.mG)(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Cr(1,e,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),s=.1*r,o=r+s,a=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/o,decay:e*this.toSeconds(this.decay)/o,release:e*this.toSeconds(this.release)/o,context:n}));return a._sig.toDestination(),a.triggerAttackRelease(e*(i+s)/o,0),(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}(0,Qi.gn)([no(0)],mo.prototype,"attack",void 0),(0,Qi.gn)([no(0)],mo.prototype,"decay",void 0),(0,Qi.gn)([eo(0,1)],mo.prototype,"sustain",void 0),(0,Qi.gn)([no(0)],mo.prototype,"release",void 0);const _o=(()=>{const t=128;let e,n;const i=[];for(e=0;e<t;e++)i[e]=Math.sin(e/127*(Math.PI/2));const r=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;r[e]=t/10+.83*n}r[127]=1;const s=[];for(e=0;e<t;e++)s[e]=Math.ceil(e/127*5)/5;const o=[];for(e=0;e<t;e++)n=e/127,o[e]=.5*(1-Math.cos(Math.PI*n));const a=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,i=Math.cos(t*Math.PI*2*n);a[e]=Math.abs(i*(1-n))}function u(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:u(a),Out:a},cosine:{In:i,Out:(c=i,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:u(r)},sine:{In:o,Out:u(o)},step:{In:s,Out:u(s)}};var c})();class yo extends es{constructor(){super(ur(yo.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=ur(yo.getDefaults(),arguments);this._volume=this.output=new Ss({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Er(this,"volume")}static getDefaults(){return Object.assign(es.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const i=t[e],r=this.context.transport.schedule((i=>{t[e]=i,n.apply(this,t)}),i);this._scheduledEvents.push(r)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,i){const r=this.toSeconds(n),s=this.toSeconds(e);return this.triggerAttack(t,r,i),this.triggerRelease(r+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class vo extends yo{constructor(){super(ur(vo.getDefaults(),arguments));const t=ur(vo.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(yo.getDefaults(),{detune:0,onsilence:kr,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const i=this.toSeconds(e);return this._triggerEnvelopeAttack(i,n),this.setNote(t,i),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),i=t instanceof Wr?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,t,n)}else this.frequency.setValueAtTime(i,n);return this}}(0,Qi.gn)([no(0)],vo.prototype,"portamento",void 0);class bo extends mo{constructor(){super(ur(bo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new ss({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class wo extends vo{constructor(){super(ur(wo.getDefaults(),arguments)),this.name="Synth";const t=ur(wo.getDefaults(),arguments);this.oscillator=new Xs(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new bo(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Er(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(vo.getDefaults(),{envelope:Object.assign(lr(mo.getDefaults(),Object.keys(es.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(lr(Xs.getDefaults(),[...Object.keys(Cs.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class To extends vo{constructor(){super(ur(To.getDefaults(),arguments)),this.name="ModulationSynth";const t=ur(To.getDefaults(),arguments);this._carrier=new wo({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new wo({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new us({context:this.context,units:"frequency"}),this.detune=new us({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new qs({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new ss({context:this.context,gain:0}),Er(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(vo.getDefaults(),{harmonicity:3,oscillator:Object.assign(lr(Xs.getDefaults(),[...Object.keys(Cs.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(lr(mo.getDefaults(),Object.keys(es.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(lr(Xs.getDefaults(),[...Object.keys(Cs.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(lr(mo.getDefaults(),Object.keys(es.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class xo extends To{constructor(){super(ur(xo.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Bs({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class So extends es{constructor(){super(ur(So.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const t=ur(So.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new ts({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new ts({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new ts({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new ts({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(es.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Mi(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const i=19980*Math.pow(n/t,2)+20;e[n]=i}const n=new Float32Array(t),i=new Float32Array(t),r=this.context.createBiquadFilter();return r.type=this.type,r.Q.value=this.Q.value,r.frequency.value=this.frequency.value,r.gain.value=this.gain.value,r.getFrequencyResponse(e,n,i),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Io extends es{constructor(){super(ur(Io.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new ss({context:this.context}),this.output=new ss({context:this.context}),this._filters=[];const t=ur(Io.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new us({context:this.context,units:"positive",value:t.Q}),this.frequency=new us({context:this.context,units:"frequency",value:t.frequency}),this.detune=new us({context:this.context,units:"cents",value:t.detune}),this.gain=new us({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Er(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(es.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Mi(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach((e=>e.type=t))}get rolloff(){return this._rolloff}set rolloff(t){const e=Gi(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let i=n.indexOf(e);Mi(-1!==i,`rolloff can only be ${n.join(", ")}`),i+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((t=>t.disconnect())),this._filters=new Array(i);for(let t=0;t<i;t++){const e=new So({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[t]=e}this._internalChannels=this._filters,ns(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new So({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((()=>1));return this._filters.forEach((()=>{e.getFrequencyResponse(t).forEach(((t,e)=>n[e]*=t))})),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((t=>{t.dispose()})),Ar(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Eo extends mo{constructor(){super(ur(Eo.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=ur(Eo.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new po({context:this.context,value:t.exponent}),this._scale=this.output=new Js({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(mo.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Li(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Ao extends vo{constructor(){super(ur(Ao.getDefaults(),arguments)),this.name="MonoSynth";const t=ur(Ao.getDefaults(),arguments);this.oscillator=new Xs(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Io(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Eo(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new bo(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Er(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(vo.getDefaults(),{envelope:Object.assign(lr(mo.getDefaults(),Object.keys(es.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(lr(Io.getDefaults(),Object.keys(es.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(lr(Eo.getDefaults(),Object.keys(es.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(lr(Xs.getDefaults(),Object.keys(Cs.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class ko extends vo{constructor(){super(ur(ko.getDefaults(),arguments)),this.name="DuoSynth";const t=ur(ko.getDefaults(),arguments);this.voice0=new Ao(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Ao(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new qs({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new to({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new ss({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new us({context:this.context,units:"frequency",value:440}),this.detune=new us({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Er(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return ar(vo.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:ar(lr(Ao.getDefaults(),Object.keys(vo.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:ar(lr(Ao.getDefaults(),Object.keys(vo.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Oo extends To{constructor(){super(ur(Oo.getDefaults(),arguments)),this.name="FMSynth";const t=ur(Oo.getDefaults(),arguments);this.modulationIndex=new qs({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(To.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const Co=[1,1.483,1.932,2.546,2.63,3.897];class Do extends vo{constructor(){super(ur(Do.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const t=ur(Do.getDefaults(),arguments);this.detune=new us({context:this.context,units:"cents",value:t.detune}),this.frequency=new us({context:this.context,units:"frequency"}),this._amplitude=new ss({context:this.context,gain:0}).connect(this.output),this._highpass=new Io({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<Co.length;e++){const n=new Gs({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):kr,type:"square"});n.connect(this._highpass),this._oscillators[e]=n;const i=new qs({context:this.context,value:Co[e]});this._freqMultipliers[e]=i,this.frequency.chain(i,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new Js({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new mo({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return ar(vo.getDefaults(),{envelope:Object.assign(lr(mo.getDefaults(),Object.keys(es.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,e=1){return this.envelope.triggerAttack(t,e),this._oscillators.forEach((e=>e.start(t))),0===this.envelope.sustain&&this._oscillators.forEach((e=>{e.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach((e=>e.stop(t+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach((e=>e.modulationIndex.value=t))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach((e=>e.harmonicity.value=t))}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach((t=>t.dispose())),this._freqMultipliers.forEach((t=>t.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Po extends wo{constructor(){super(ur(Po.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=ur(Po.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Er(this,["oscillator","envelope"])}static getDefaults(){return ar(vo.getDefaults(),wo.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),i=this.toFrequency(t instanceof Wr?t.toFrequency():t),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}(0,Qi.gn)([eo(0)],Po.prototype,"octaves",void 0),(0,Qi.gn)([no(0)],Po.prototype,"pitchDecay",void 0);class Ro extends yo{constructor(){super(ur(Ro.getDefaults(),arguments)),this.name="NoiseSynth";const t=ur(Ro.getDefaults(),arguments);this.noise=new Ps(Object.assign({context:this.context},t.noise)),this.envelope=new bo(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(yo.getDefaults(),{envelope:Object.assign(lr(mo.getDefaults(),Object.keys(es.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(lr(Ps.getDefaults(),Object.keys(Cs.getDefaults())),{type:"white"})})}triggerAttack(t,e=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const No=new Set;function Mo(t){No.add(t)}function Lo(t,e){const n=`registerProcessor("${t}", ${e})`;No.add(n)}class Fo extends es{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=kr;const e=URL.createObjectURL(new Blob([Array.from(No).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e,n).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}Mo('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Mo("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Mo("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const jo="feedback-comb-filter";Lo(jo,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Uo extends Fo{constructor(){super(ur(Uo.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const t=ur(Uo.getDefaults(),arguments,["delayTime","resonance"]);this.input=new ss({context:this.context}),this.output=new ss({context:this.context}),this.delayTime=new ts({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new ts({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Er(this,["resonance","delayTime"])}_audioWorkletName(){return jo}static getDefaults(){return Object.assign(es.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){ns(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Vo extends es{constructor(){super(ur(Vo.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const t=ur(Vo.getDefaults(),arguments,["frequency","type"]);this._frequency=t.frequency,this._type=t.type,this.input=new ss({context:this.context}),this.output=new ss({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(es.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(t),t.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const i=19980*Math.pow(n/t,2)+20;e[n]=i}const n=new Float32Array(t),i=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,i),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class $o extends es{constructor(){super(ur($o.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const t=ur($o.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Uo({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Vo({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(es.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Bo extends yo{constructor(){super(ur(Bo.getDefaults(),arguments)),this.name="PluckSynth";const t=ur(Bo.getDefaults(),arguments);this._noise=new Ps({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new $o({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return ar(yo.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const n=this.toFrequency(t);e=this.toSeconds(e);const i=1/n;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class qo extends yo{constructor(){super(ur(qo.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const t=ur(qo.getDefaults(),arguments,["voice","options"]);Mi(!Gi(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(yo.getDefaults(),{maxPolyphony:32,options:{},voice:wo})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex((e=>e.voice===t));this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}$i("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach((t=>{const i=new _s(this.context,t).toMidi(),r=this._getNextAvailableVoice();r&&(r.triggerAttack(t,e,n),this._activeVoices.push({midi:i,voice:r,released:!1}),this.log("triggerAttack",t,e))}))}_triggerRelease(t,e){t.forEach((t=>{const n=new _s(this.context,t).toMidi(),i=this._activeVoices.find((({midi:t,released:e})=>t===n&&!e));i&&(i.voice.triggerRelease(e),i.released=!0,this.log("triggerRelease",t,e))}))}_scheduleEvent(t,e,n,i){Mi(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,i):this._triggerRelease(e,n):this.context.setTimeout((()=>{this._scheduleEvent(t,e,n,i)}),n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const i=this.toSeconds(e);return this._scheduleEvent("attack",t,i,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,i){const r=this.toSeconds(n);if(this.triggerAttack(t,r,i),Ki(e)){Mi(Ki(t),"If the duration is an array, the notes must also be an array"),t=t;for(let n=0;n<t.length;n++){const i=e[Math.min(n,e.length-1)],s=this.toSeconds(i);Mi(s>0,"The duration must be greater than 0"),this.triggerRelease(t[n],r+s)}}else{const n=this.toSeconds(e);Mi(n>0,"The duration must be greater than 0"),this.triggerRelease(t,r+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(t){const e=lr(t,["onsilence","context"]);return this.options=ar(this.options,e),this._voices.forEach((t=>t.set(e))),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach((({voice:t})=>{t.triggerRelease(e)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((t=>t.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class zo extends yo{constructor(){super(ur(zo.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=ur(zo.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const i=parseInt(n,10);if(Mi(Xi(n)||Gi(i)&&isFinite(i),`url key is neither a note or midi pitch: ${n}`),Xi(n)){const i=new Wr(this.context,n).toMidi();e[i]=t.urls[n]}else Gi(i)&&isFinite(i)&&(e[i]=t.urls[i])})),this._buffers=new ms({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(yo.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:kr,onerror:kr,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const i=$r(new Wr(this.context,t).toFrequency()),r=Math.round(i),s=i-r,o=this._findClosest(r),a=r-o,u=this._buffers.get(a),c=jr(o+s),l=new Ds({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);l.start(e,0,u.duration/c,n),Ki(this._activeSources.get(r))||this._activeSources.set(r,[]),this._activeSources.get(r).push(l),l.onended=()=>{if(this._activeSources&&this._activeSources.has(r)){const t=this._activeSources.get(r),e=t.indexOf(l);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new Wr(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;)t.shift().stop(e)})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,i=1){const r=this.toSeconds(n);return this.triggerAttack(t,r,i),Ki(e)?(Mi(Ki(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const i=e[Math.min(n,e.length-1)];this.triggerRelease(t,r+this.toSeconds(i))}))):this.triggerRelease(t,r+this.toSeconds(e)),this}add(t,e,n){if(Mi(Xi(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Xi(t)){const i=new Wr(this.context,t).toMidi();this._buffers.add(i,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}(0,Qi.gn)([no(0)],zo.prototype,"attack",void 0),(0,Qi.gn)([no(0)],zo.prototype,"release",void 0);class Go extends Jr{constructor(){super(ur(Go.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new Qr("stopped"),this._startOffset=0;const t=ur(Go.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Jr.getDefaults(),{callback:kr,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,(t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Gi(this._loop)&&this._loop>1){e=1/0,Gi(this._loop)&&(e=this._loop*this._getLoopDuration());const i=this._state.getAfter(n);null!==i&&(e=Math.min(e,i.time-n)),e!==1/0&&(this._state.setStateAtTime("stopped",n+e+1,{id:-1}),e=new vs(this.context,e));const r=new vs(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),r,new vs(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new vs(this.context,n))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=cr(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,(t=>{this.context.transport.clear(t.id)})),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;Hi(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new vs(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new vs(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Wo extends Jr{constructor(){super(ur(Wo.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const t=ur(Wo.getDefaults(),arguments,["callback","interval"]);this._event=new Go({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(Jr.getDefaults(),{interval:"4n",callback:kr,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class Ho extends Go{constructor(){super(ur(Ho.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new Qr("stopped"),this._events=new Set;const t=ur(Ho.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach((t=>{Ki(t)?this.add(t[0],t[1]):this.add(t)}))}static getDefaults(){return Object.assign(Go.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=cr(e,this._loop?this._loopStart:0),e=this._loop?cr(e,this._loopStart):cr(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach((e=>{this._startNote(e,n,t)}))}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new vs(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new vs(this.context,e))):t.startOffset>=n&&t.start(new vs(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach((t=>{t.startOffset+=this._startOffset}))}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((e=>{e.stop(t)})),this}at(t,e){const n=new Xr(this.context,t).toTicks(),i=new vs(this.context,1).toSeconds(),r=this._events.values();let s=r.next();for(;!s.done;){const t=s.value;if(Math.abs(n-t.startOffset)<i)return qi(e)&&(t.value=e),t;s=r.next()}return qi(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let i;return e instanceof Go?(i=e,i.callback=this._tick.bind(this)):i=new Go({callback:this._tick.bind(this),context:this.context,value:e}),i.startOffset=n,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(t){this._state.forEach((e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new vs(this.context,e.time))}))}remove(t,e){return Wi(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((n=>{n.startOffset===t&&(Bi(e)||qi(e)&&n.value===e)&&(this._events.delete(n),n.dispose())})),this}clear(){return this._forEach((t=>t.dispose())),this._events.clear(),this}cancel(t){return this._forEach((e=>e.cancel(t))),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach((e=>{e instanceof Ho?e._forEach(t):t(e)})),this}_setAll(t,e){this._forEach((n=>{n[t]=e}))}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach((e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)}))}get loopEnd(){return new vs(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach((e=>{e.loopEnd=t,this._testLoopBoundries(e)}))}get loopStart(){return new vs(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach((t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*Ko(t){let e=0;for(;e<t.length;)e=Zo(e,t),yield t[e],e++}function*Yo(t){let e=t.length-1;for(;e>=0;)e=Zo(e,t),yield t[e],e--}function*Xo(t,e){for(;;)yield*e(t)}function Zo(t,e){return _r(t,0,e.length-1)}function*Jo(t,e){let n=e?0:t.length-1;for(;;)n=Zo(n,t),yield t[n],e?(n++,n>=t.length-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*Qo(t){let e=0,n=0;for(;e<t.length;)e=Zo(e,t),yield t[e],n++,e+=n%2?2:-1}function*ta(t){let e=t.length-1,n=0;for(;e>=0;)e=Zo(e,t),yield t[e],n++,e+=n%2?-2:1}function*ea(t){const e=[];for(let n=0;n<t.length;n++)e.push(n);for(;e.length>0;){const n=Zo(e.splice(Math.floor(e.length*Math.random()),1)[0],t);yield t[n]}}function*na(t,e="up",n=0){switch(Mi(t.length>0,"The array must have more than one value in it"),e){case"up":yield*Xo(t,Ko);case"down":yield*Xo(t,Yo);case"upDown":yield*Jo(t,!0);case"downUp":yield*Jo(t,!1);case"alternateUp":yield*Xo(t,Qo);case"alternateDown":yield*Xo(t,ta);case"random":yield*function*(t){for(;;){const e=Math.floor(Math.random()*t.length);yield t[e]}}(t);case"randomOnce":yield*Xo(t,ea);case"randomWalk":yield*function*(t){let e=Math.floor(Math.random()*t.length);for(;;)0===e?e++:e===t.length-1||Math.random()<.5?e--:e++,yield t[e]}(t)}}class ia extends Wo{constructor(){super(ur(ia.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const t=ur(ia.getDefaults(),arguments,["callback","values","pattern"]);this.callback=t.callback,this._values=t.values,this._pattern=na(t.values,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(Wo.getDefaults(),{pattern:"up",values:[],callback:kr})}_tick(t){const e=this._pattern.next();this._value=e.value,this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=na(this._values,this._type)}}class ra extends Go{constructor(){super(ur(ra.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new Ho({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const t=ur(ra.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(lr(Go.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null!==e&&this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new vs(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>(Yi(e)&&isFinite(parseInt(e,10))&&Ki(n)?t[e]=this._createSequence(n):t[e]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,e,n){t.forEach(((t,i)=>{const r=i*e+n;if(Ki(t))this._rescheduleSequence(t,e/t.length,r);else{const e=new vs(this.context,r,"i").toSeconds();this._part.add(e,t)}}))}_indexTime(t){return new vs(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class sa extends es{constructor(){super(Object.assign(ur(sa.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new ao({context:this.context}),this.a=new ss({context:this.context,gain:0}),this.b=new ss({context:this.context,gain:0}),this.output=new ss({context:this.context}),this._internalChannels=[this.a,this.b];const t=ur(sa.getDefaults(),arguments,["fade"]);this.fade=new us({context:this.context,units:"normalRange",value:t.fade}),Er(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",is(this._split,this.a.gain,0),is(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(es.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class oa extends es{constructor(t){super(t),this.name="Effect",this._dryWet=new sa({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new ss({context:this.context}),this.effectReturn=new ss({context:this.context}),this.input=new ss({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Er(this,"wet")}static getDefaults(){return Object.assign(es.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class aa extends oa{constructor(t){super(t),this.name="LFOEffect",this._lfo=new to({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Er(this,["frequency","depth"])}static getDefaults(){return Object.assign(oa.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class ua extends aa{constructor(){super(ur(ua.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const t=ur(ua.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Io(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(aa.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class ca extends es{constructor(){super(Object.assign(ur(ca.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=ur(ca.getDefaults(),arguments,["pan"]);this.pan=new ts({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Er(this,"pan")}static getDefaults(){return Object.assign(es.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class la extends aa{constructor(){super(ur(la.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const t=ur(la.getDefaults(),arguments,["frequency"]);this._panner=new ca({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(aa.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class ha extends es{constructor(){super(ur(ha.getDefaults(),arguments,["smoothing"])),this.name="Follower";const t=ur(ha.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new oo({context:this.context}),this._lowpass=this.output=new Vo({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(es.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class da extends oa{constructor(){super(ur(da.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const t=ur(da.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new ha({context:this.context,smoothing:t.follower}),this._sweepRange=new fo({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new ss({context:this.context}),this._bandpass=new Io({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Io({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Er(this,["gain","Q"])}static getDefaults(){return Object.assign(oa.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return Fr(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Lr(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const pa="bit-crusher";Lo(pa,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class fa extends oa{constructor(){super(ur(fa.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const t=ur(fa.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new ga({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(oa.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class ga extends Fo{constructor(){super(ur(ga.getDefaults(),arguments)),this.name="BitCrusherWorklet";const t=ur(ga.getDefaults(),arguments);this.input=new ss({context:this.context}),this.output=new ss({context:this.context}),this.bits=new ts({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Fo.getDefaults(),{bits:12})}_audioWorkletName(){return pa}onReady(t){ns(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class ma extends oa{constructor(){super(ur(ma.getDefaults(),arguments,["order"])),this.name="Chebyshev";const t=ur(ma.getDefaults(),arguments,["order"]);this._shaper=new $s({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(oa.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){this._order=t,this._shaper.setMap((e=>this._getCoefficient(e,t,new Map)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class _a extends es{constructor(){super(ur(_a.getDefaults(),arguments,["channels"])),this.name="Split";const t=ur(_a.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(es.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class ya extends es{constructor(){super(ur(ya.getDefaults(),arguments,["channels"])),this.name="Merge";const t=ur(ya.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(es.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class va extends es{constructor(t){super(t),this.name="StereoEffect",this.input=new ss({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new sa({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new _a({context:this.context,channels:2}),this._merge=new ya({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Er(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),ns(...t),is(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),ns(...t),is(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(es.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class ba extends va{constructor(t){super(t),this.feedback=new us({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new ss({context:this.context}),this._feedbackR=new ss({context:this.context}),this._feedbackSplit=new _a({context:this.context,channels:2}),this._feedbackMerge=new ya({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Er(this,["feedback"])}static getDefaults(){return Object.assign(va.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class wa extends ba{constructor(){super(ur(wa.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const t=ur(wa.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new to({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new to({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new fs({context:this.context}),this._delayNodeR=new fs({context:this.context}),this.frequency=this._lfoL.frequency,Er(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(ba.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Ta extends oa{constructor(){super(ur(Ta.getDefaults(),arguments,["distortion"])),this.name="Distortion";const t=ur(Ta.getDefaults(),arguments,["distortion"]);this._shaper=new $s({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(oa.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap((t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class xa extends oa{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new ss({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Er(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(oa.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Sa extends xa{constructor(){super(ur(Sa.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const t=ur(Sa.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new fs({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Er(this,"delayTime")}static getDefaults(){return Object.assign(xa.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Ia extends es{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new ss({context:this.context}),this.output=new ss({context:this.context}),this.offset90=new ss({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),ns(this.input,...this._bank0,this._oneSampleDelay,this.output),ns(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map((t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])}))}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((t=>t.disconnect())),this._bank1.forEach((t=>t.disconnect())),this._oneSampleDelay.disconnect(),this}}class Ea extends oa{constructor(){super(ur(Ea.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const t=ur(Ea.getDefaults(),arguments,["frequency"]);this.frequency=new us({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new js({context:this.context,type:"sine"}),this._cosine=new Us({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new qs({context:this.context}),this._cosineMultiply=new qs({context:this.context}),this._negate=new uo({context:this.context}),this._add=new Zs({context:this.context}),this._phaseShifter=new Ia({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const e=this.immediate();this._sine.start(e),this._cosine.start(e)}static getDefaults(){return Object.assign(oa.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Aa=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],ka=[225,556,441,341];class Oa extends va{constructor(){super(ur(Oa.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const t=ur(Oa.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new us({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=ka.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._allpassFiltersR=ka.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._combFilters=Aa.map(((e,n)=>{const i=new $o({context:this.context,dampening:t.dampening,delayTime:e});return n<Aa.length/2?this.connectEffectLeft(i,...this._allpassFiltersL):this.connectEffectRight(i,...this._allpassFiltersR),this.roomSize.connect(i.resonance),i})),Er(this,["roomSize"])}static getDefaults(){return Object.assign(va.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach((e=>e.dampening=t))}dispose(){return super.dispose(),this._allpassFiltersL.forEach((t=>t.disconnect())),this._allpassFiltersR.forEach((t=>t.disconnect())),this._combFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this}}const Ca=[.06748,.06404,.08212,.09004],Da=[.773,.802,.753,.733],Pa=[347,113,37];class Ra extends va{constructor(){super(ur(Ra.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const t=ur(Ra.getDefaults(),arguments,["roomSize"]);this.roomSize=new us({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new Js({context:this.context,min:-.733,max:.197}),this._allpassFilters=Pa.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._feedbackCombFilters=Ca.map(((t,e)=>{const n=new Uo({context:this.context,delayTime:t});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=Da[e],e<Ca.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n})),this.roomSize.connect(this._scaleRoomSize),Er(this,["roomSize"])}static getDefaults(){return Object.assign(va.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach((t=>t.disconnect())),this._feedbackCombFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Na extends ba{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Er(this,["feedback"])}}class Ma extends Na{constructor(){super(ur(Ma.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const t=ur(Ma.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new fs({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new fs({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new fs({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new us({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Er(this,["delayTime"])}static getDefaults(){return Object.assign(Na.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class La extends xa{constructor(){super(ur(La.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const t=ur(La.getDefaults(),arguments,["pitch"]);this._frequency=new us({context:this.context}),this._delayA=new fs({maxDelay:1,context:this.context}),this._lfoA=new to({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new fs({maxDelay:1,context:this.context}),this._lfoB=new to({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new sa({context:this.context}),this._crossFadeLFO=new to({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new fs({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Er(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(xa.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=jr(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=jr(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Fa extends va{constructor(){super(ur(Fa.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const t=ur(Fa.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new to({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new to({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new us({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Er(this,["frequency","Q"])}static getDefaults(){return Object.assign(va.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let i=0;i<t;i++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((t=>t.disconnect())),this._filtersR.forEach((t=>t.disconnect())),this.frequency.dispose(),this}}class ja extends oa{constructor(){super(ur(ja.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=ur(ja.getDefaults(),arguments,["decay"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(oa.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){Li(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){Li(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return(0,Qi.mG)(this,void 0,void 0,(function*(){const t=this.ready,e=new Cr(2,this._decay+this._preDelay,this.context.sampleRate),n=new Ps({context:e}),i=new Ps({context:e}),r=new ya({context:e});n.connect(r,0,0),i.connect(r,0,1);const s=new ss({context:e}).toDestination();r.connect(s),n.start(0),i.start(0),s.gain.setValueAtTime(0,0),s.gain.setValueAtTime(1,this._preDelay),s.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=e.render();return this.ready=o.then(kr),yield t,this._convolver.buffer=(yield o).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Ua extends es{constructor(){super(ur(Ua.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new _a({channels:2,context:this.context}),this._midAdd=new Zs({context:this.context}),this.mid=new qs({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new co({context:this.context}),this.side=new qs({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Va extends es{constructor(){super(ur(Va.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new ss({context:this.context}),this.side=new ss({context:this.context}),this._left=new Zs({context:this.context}),this._leftMult=new qs({context:this.context,value:Math.SQRT1_2}),this._right=new co({context:this.context}),this._rightMult=new qs({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new ya({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class $a extends oa{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Va({context:this.context}),this._midSideSplit=new Ua({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Ba extends $a{constructor(){super(ur(Ba.getDefaults(),arguments,["width"])),this.name="StereoWidener";const t=ur(Ba.getDefaults(),arguments,["width"]);this.width=new us({context:this.context,value:t.width,units:"normalRange"}),Er(this,["width"]),this._twoTimesWidthMid=new qs({context:this.context,value:2}),this._twoTimesWidthSide=new qs({context:this.context,value:2}),this._midMult=new qs({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new co({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),is(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new qs({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign($a.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class qa extends va{constructor(){super(ur(qa.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=ur(qa.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new to({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new to({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new ss({context:this.context}),this._amplitudeR=new ss({context:this.context}),this.frequency=new us({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new us({context:this.context,value:t.depth,units:"normalRange"}),Er(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(va.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class za extends oa{constructor(){super(ur(za.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const t=ur(za.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new fs({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new to({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Er(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(oa.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Ga extends es{constructor(){super(ur(Ga.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=ur(Ga.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new ss({context:this.context}),this._split=new _a({context:this.context,channels:t.channels}),this.input.connect(this._split),Li(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type}static getDefaults(){return Object.assign(es.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((t,e)=>{const n=this._buffers[e];"fft"===this._type?t.getFloatFrequencyData(n):"waveform"===this._type&&t.getFloatTimeDomainData(n)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach(((e,n)=>{e.fftSize=2*t,this._buffers[n]=new Float32Array(t)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Mi("waveform"===t||"fft"===t,`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach((e=>e.smoothingTimeConstant=t))}dispose(){return super.dispose(),this._analysers.forEach((t=>t.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class Wa extends es{constructor(){super(ur(Wa.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Ga({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Ha extends Wa{constructor(){super(ur(Ha.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const t=ur(Ha.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Ga({context:this.context,size:256,type:"waveform",channels:t.channels}),this.smoothing=t.smoothing,this.normalRange=t.normalRange}static getDefaults(){return Object.assign(Wa.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return $i("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map((t=>{const e=t.reduce(((t,e)=>t+e*e),0),n=Math.sqrt(e/t.length);return this._rms=Math.max(n,this._rms*this.smoothing),this.normalRange?this._rms:Fr(this._rms)}));return 1===this.channels?e[0]:e}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Ka extends Wa{constructor(){super(ur(Ka.getDefaults(),arguments,["size"])),this.name="FFT";const t=ur(Ka.getDefaults(),arguments,["size"]);this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(es.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map((t=>this.normalRange?Lr(t):t))}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Mi(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(2*this.size)}}class Ya extends Wa{constructor(){super(ur(Ya.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Xa extends Wa{constructor(){super(ur(Xa.getDefaults(),arguments,["size"])),this.name="Waveform";const t=ur(Xa.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(Wa.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class Za extends es{constructor(){super(ur(Za.getDefaults(),arguments,["solo"])),this.name="Solo";const t=ur(Za.getDefaults(),arguments,["solo"]);this.input=this.output=new ss({context:this.context}),Za._allSolos.has(this.context)||Za._allSolos.set(this.context,new Set),Za._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(es.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Za._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){Za._soloed.has(this.context)||Za._soloed.set(this.context,new Set),Za._soloed.get(this.context).add(this)}_removeSolo(){Za._soloed.has(this.context)&&Za._soloed.get(this.context).delete(this)}_isSoloed(){return Za._soloed.has(this.context)&&Za._soloed.get(this.context).has(this)}_noSolos(){return!Za._soloed.has(this.context)||Za._soloed.has(this.context)&&0===Za._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Za._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Za._allSolos=new Map,Za._soloed=new Map;class Ja extends es{constructor(){super(ur(Ja.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=ur(Ja.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new ca({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ss({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Er(this,["pan","volume"])}static getDefaults(){return Object.assign(es.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Qa extends es{constructor(){super(ur(Qa.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=ur(Qa.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Za({solo:t.solo,context:this.context}),this._panVol=this.output=new Ja({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Er(this,["pan","volume"])}static getDefaults(){return Object.assign(es.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Qa.buses.has(t)||Qa.buses.set(t,new ss({context:this.context})),Qa.buses.get(t)}send(t,e=0){const n=this._getBus(t),i=new ss({context:this.context,units:"decibels",gain:e});return this.connect(i),i.connect(n),i}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Qa.buses=new Map;class tu extends es{constructor(){super(ur(tu.getDefaults(),arguments)),this.name="Mono",this.input=new ss({context:this.context}),this._merge=this.output=new ya({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class eu extends es{constructor(){super(ur(eu.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new ss({context:this.context}),this.output=void 0,this.low=new Io({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Io({context:this.context,frequency:0,type:"highpass"}),this.mid=new Io({context:this.context,frequency:0,type:"lowpass"}),this.high=new Io({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const t=ur(eu.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new us({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new us({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new us({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Er(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(es.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Ar(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class nu extends es{constructor(){super(...arguments),this.name="Listener",this.positionX=new ts({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new ts({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new ts({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new ts({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new ts({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new ts({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new ts({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new ts({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new ts({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(es.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}br((t=>{t.listener=new nu({context:t})})),Tr((t=>{t.listener.dispose()}));class iu extends es{constructor(){super(ur(iu.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const t=ur(iu.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new ts({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new ts({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new ts({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new ts({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new ts({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new ts({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(es.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}setOrientation(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class ru extends es{constructor(){super(ur(ru.getDefaults(),arguments)),this.name="Recorder";const t=ur(ru.getDefaults(),arguments);this.input=new ss({context:this.context}),Mi(ru.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return es.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==Zi&&Reflect.has(Zi,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return(0,Qi.mG)(this,void 0,void 0,(function*(){Mi("started"!==this.state,"Recorder is already started");const t=new Promise((t=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),t()};this._recorder.addEventListener("start",e,!1)}));return this._recorder.start(),yield t}))}stop(){return(0,Qi.mG)(this,void 0,void 0,(function*(){Mi("stopped"!==this.state,"Recorder is not started");const t=new Promise((t=>{const e=n=>{this._recorder.removeEventListener("dataavailable",e,!1),t(n.data)};this._recorder.addEventListener("dataavailable",e,!1)}));return this._recorder.stop(),yield t}))}pause(){return Mi("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class su extends es{constructor(){super(ur(su.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const t=ur(su.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new ts({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new ts({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new ts({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new ts({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new ts({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Er(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(es.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class ou extends es{constructor(){super(Object.assign(ur(ou.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const t=ur(ou.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new ha({context:this.context,smoothing:t.smoothing}),this._gt=new ho({context:this.context,value:Lr(t.threshold)}),this.input=new ss({context:this.context}),this._gate=this.output=new ss({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(es.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return Fr(this._gt.value)}set threshold(t){this._gt.value=Lr(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class au extends es{constructor(){super(Object.assign(ur(au.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const t=ur(au.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new su({context:this.context,ratio:20,attack:.003,release:.01,threshold:t.threshold}),this.threshold=this._compressor.threshold,Er(this,"threshold")}static getDefaults(){return Object.assign(es.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class uu extends es{constructor(){super(Object.assign(ur(uu.getDefaults(),arguments))),this.name="MidSideCompressor";const t=ur(uu.getDefaults(),arguments);this._midSideSplit=this.input=new Ua({context:this.context}),this._midSideMerge=this.output=new Va({context:this.context}),this.mid=new su(Object.assign(t.mid,{context:this.context})),this.side=new su(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Er(this,["mid","side"])}static getDefaults(){return Object.assign(es.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class cu extends es{constructor(){super(Object.assign(ur(cu.getDefaults(),arguments))),this.name="MultibandCompressor";const t=ur(cu.getDefaults(),arguments);this._splitter=this.input=new eu({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new ss({context:this.context}),this.low=new su(Object.assign(t.low,{context:this.context})),this.mid=new su(Object.assign(t.mid,{context:this.context})),this.high=new su(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Er(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(es.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class lu extends es{constructor(){super(ur(lu.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new ss({context:this.context}),this._internalChannels=[];const t=ur(lu.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new eu({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new ss({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new ss({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new ss({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Er(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(es.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Ar(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class hu extends es{constructor(){super(ur(hu.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const t=ur(hu.getDefaults(),arguments,["url","onload"]);this._buffer=new Or(t.url,(e=>{this.buffer=e,t.onload()})),this.input=new ss({context:this.context}),this.output=new ss({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(es.getDefaults(),{normalize:!0,onload:kr})}load(t){return(0,Qi.mG)(this,void 0,void 0,(function*(){this.buffer=yield this._buffer.load(t)}))}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const e=this._buffer.get();this._convolver.buffer=e||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function du(){return Rr().now()}function pu(){return Rr().immediate()}const fu=Rr().transport;function gu(){return Rr().transport}const mu=Rr().destination,_u=Rr().destination;function yu(){return Rr().destination}const vu=Rr().listener;function bu(){return Rr().listener}const wu=Rr().draw;function Tu(){return Rr().draw}const xu=Rr();function Su(){return Or.loaded()}const Iu=Or,Eu=ms,Au=Ds},655:(t,e,n)=>{"use strict";function i(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function r(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function s(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{u(i.next(t))}catch(t){s(t)}}function a(t){try{u(i.throw(t))}catch(t){s(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}u((i=i.apply(t,e||[])).next())}))}n.d(e,{_T:()=>i,gn:()=>r,mG:()=>s}),Object.create,Object.create},389:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FirebaseError:()=>s.ZR,SDK_VERSION:()=>j,_DEFAULT_ENTRY_NAME:()=>E,_addComponent:()=>C,_addOrOverwriteComponent:()=>D,_apps:()=>k,_clearComponents:()=>M,_components:()=>O,_getProvider:()=>R,_registerComponent:()=>P,_removeServiceInstance:()=>N,deleteApp:()=>B,getApp:()=>V,getApps:()=>$,initializeApp:()=>U,onLog:()=>z,registerVersion:()=>q,setLogLevel:()=>G});var i=n(8463),r=n(3333),s=n(4444);let o,a;const u=new WeakMap,c=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap;let p={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return c.get(t);if("objectStoreNames"===e)return t.objectStoreNames||l.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function f(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(m(this),t),g(u.get(this))}:function(...t){return g(e.apply(m(this),t))}:function(t,...n){const i=e.call(m(this),t,...n);return l.set(i,t.sort?t.sort():[t]),g(i)}:(t instanceof IDBTransaction&&function(t){if(c.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));c.set(t,e)}(t),n=t,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,p):t);var e,n}function g(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(g(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&u.set(e,t)})).catch((()=>{})),d.set(e,t),e}(t);if(h.has(t))return h.get(t);const e=f(t);return e!==t&&(h.set(t,e),d.set(e,t)),e}const m=t=>d.get(t),_=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],v=new Map;function b(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(v.get(e))return v.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=y.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!_.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return v.set(e,s),s}var w;w=p,p={...w,get:(t,e,n)=>b(t,e)||w.get(t,e,n),has:(t,e)=>!!b(t,e)||w.has(t,e)};class T{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const x="@firebase/app",S="0.7.31",I=new r.Yd("@firebase/app"),E="[DEFAULT]",A={[x]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},k=new Map,O=new Map;function C(t,e){try{t.container.addComponent(e)}catch(n){I.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function D(t,e){t.container.addOrOverwriteComponent(e)}function P(t){const e=t.name;if(O.has(e))return I.debug(`There were multiple attempts to register component ${e}.`),!1;O.set(e,t);for(const e of k.values())C(e,t);return!0}function R(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function N(t,e,n=E){R(t,e).clearInstance(n)}function M(){O.clear()}const L=new s.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class F{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw L.create("app-deleted",{appName:this._name})}}const j="9.9.3";function U(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:E,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw L.create("bad-app-name",{appName:String(r)});const o=k.get(r);if(o){if((0,s.vZ)(t,o.options)&&(0,s.vZ)(n,o.config))return o;throw L.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const t of O.values())a.addComponent(t);const u=new F(t,n,a);return k.set(r,u),u}function V(t=E){const e=k.get(t);if(!e)throw L.create("no-app",{appName:t});return e}function $(){return Array.from(k.values())}async function B(t){const e=t.name;k.has(e)&&(k.delete(e),await Promise.all(t.container.getProviders().map((t=>t.delete()))),t.isDeleted=!0)}function q(t,e,n){var r;let s=null!==(r=A[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void I.warn(t.join(" "))}P(new i.wA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}function z(t,e){if(null!==t&&"function"!=typeof t)throw L.create("invalid-log-argument");(0,r.Am)(t,e)}function G(t){(0,r.Ub)(t)}const W="firebase-heartbeat-store";let H=null;function K(){return H||(H=function(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=g(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(g(o.result),t.oldVersion,t.newVersion,g(o.transaction))})),n&&o.addEventListener("blocked",(()=>n())),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(W)}}).catch((t=>{throw L.create("idb-open",{originalErrorMessage:t.message})}))),H}async function Y(t,e){var n;try{const n=(await K()).transaction(W,"readwrite"),i=n.objectStore(W);return await i.put(e,X(t)),n.done}catch(t){if(t instanceof s.ZR)I.warn(t.message);else{const e=L.create("idb-set",{originalErrorMessage:null===(n=t)||void 0===n?void 0:n.message});I.warn(e.message)}}}function X(t){return`${t.name}!${t.options.appId}`}class Z{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Q(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),e=J();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==e&&!this._heartbeatsCache.heartbeats.some((t=>t.date===e)))return this._heartbeatsCache.heartbeats.push({date:e,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const t=J(),{heartbeatsToSend:e,unsentEntries:n}=function(t,e=1024){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),tt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),tt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=(0,s.L)(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function J(){return(new Date).toISOString().substring(0,10)}class Q{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.hl)()&&(0,s.eu)().then((()=>!0)).catch((()=>!1))}async read(){return await this._canUseIndexedDBPromise&&await async function(t){var e;try{return(await K()).transaction(W).objectStore(W).get(X(t))}catch(t){if(t instanceof s.ZR)I.warn(t.message);else{const n=L.create("idb-get",{originalErrorMessage:null===(e=t)||void 0===e?void 0:e.message});I.warn(n.message)}}}(this.app)||{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Y(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Y(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function tt(t){return(0,s.L)(JSON.stringify({version:2,heartbeats:t})).length}P(new i.wA("platform-logger",(t=>new T(t)),"PRIVATE")),P(new i.wA("heartbeat",(t=>new Z(t)),"PRIVATE")),q(x,S,""),q(x,S,"esm2017"),q("fire-js","")},8463:(t,e,n)=>{"use strict";n.d(e,{wA:()=>r,H0:()=>a});var i=n(4444);class r{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const s="[DEFAULT]";class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),i=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(i)return null;throw t}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[t,e]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:n});e.resolve(t)}catch(t){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[t,e]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(t)&&e.resolve(i);return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(t){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(t){}var i;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:s:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},3333:(t,e,n)=>{"use strict";n.d(e,{in:()=>r,Yd:()=>c,Ub:()=>l,Am:()=>h});const i=[];var r;!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},u=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=a[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class c{constructor(t){this.name=t,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}function l(t){i.forEach((e=>{e.setLogLevel(t)}))}function h(t,e){for(const n of i){let i=null;e&&e.level&&(i=s[e.level]),n.userLogHandler=null===t?null:(e,n,...s)=>{const o=s.map((t=>{if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((t=>t)).join(" ");n>=(null!=i?i:e.logLevel)&&t({level:r[n].toLowerCase(),message:o,args:s,type:e.name})}}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";var t=__webpack_require__(2756),e=__webpack_require__(8281),n=__webpack_require__(5202),i=__webpack_require__(9334),r=__webpack_require__(9787),s=__webpack_require__(4468),o=__webpack_require__(3201),a=__webpack_require__(5102),u=__webpack_require__(9133),c=__webpack_require__(173),l={"btn-scale-degree-0":function(){S(0)},"btn-scale-degree-1-down":function(){E(1)},"btn-scale-degree-b2-down":function(){A(2)},"btn-scale-degree-2-down":function(){E(2)},"btn-scale-degree-b3-down":function(){A(3)},"btn-scale-degree-3-down":function(){E(3)},"btn-scale-degree-4-down":function(){E(4)},"btn-scale-degree-b5-down":function(){A(5)},"btn-scale-degree-5-down":function(){E(5)},"btn-scale-degree-b6-down":function(){A(6)},"btn-scale-degree-6-down":function(){E(6)},"btn-scale-degree-b7-down":function(){A(7)},"btn-scale-degree-7-down":function(){E(7)},"btn-scale-degree-1":function(){S(1)},"btn-scale-degree-b2":function(){I(2)},"btn-scale-degree-2":function(){S(2)},"btn-scale-degree-b3":function(){I(3)},"btn-scale-degree-3":function(){S(3)},"btn-scale-degree-4":function(){S(4)},"btn-scale-degree-b5":function(){I(5)},"btn-scale-degree-5":function(){S(5)},"btn-scale-degree-b6":function(){I(6)},"btn-scale-degree-6":function(){S(6)},"btn-scale-degree-b7":function(){I(7)},"btn-scale-degree-7":function(){S(7)},"btn-scale-degree-1-up":function(){k(1)},"btn-scale-degree-b2-up":function(){O(2)},"btn-scale-degree-2-up":function(){k(2)},"btn-scale-degree-b3-up":function(){O(3)},"btn-scale-degree-3-up":function(){k(3)},"btn-scale-degree-4-up":function(){k(4)},"btn-scale-degree-b5-up":function(){O(5)},"btn-scale-degree-5-up":function(){k(5)},"btn-scale-degree-b6-up":function(){O(6)},"btn-scale-degree-6-up":function(){k(6)},"btn-scale-degree-b7-up":function(){O(7)},"btn-scale-degree-7-up":function(){k(7)},"btn-backspace":N,"btn-rhythm-prev":R,"btn-rhythm-next":P,"btn-pickup":function(){d.addRestAtStart(),x()},"btn-whole":function(){$(1)},"btn-half":function(){$(2)},"btn-quarter":function(){$(4)},"btn-eighth":function(){$(8)},"btn-sixteenth":function(){$(16)},"btn-thirty-second":function(){$(32)},"btn-dot":B,"btn-tie":function(){w?z():q()},"btn-toggle-subdivision":function(){v.swingSixteenths(!v.sixteenthsAreSwung()),T(),x()},"btn-octave-up":C,"btn-octave-down":D,"btn-toggle-accidentals":function(){document.getElementById("scale-degree-inputs").classList.toggle("show-accidentals")},"btn-play":function(){if(d.hasValidMelody()){var t=d.getMelodyInFormat(p);d.setRhythmCursor(-1);var e=d.getMelody();v.play(t,d.getTimeSignature(),(function(){for(d.advanceRhythmCursor();d.getRhythmCursorIndex()<d.getNumNotes()&&0===e.getNoteAtIndex(d.getRhythmCursorIndex()).degree;)d.advanceRhythmCursor();x()}))}else alert("Invalid melody. (Probably triplet usage.)")},"btn-save":function(){var t=document.getElementById("swung");d.hasValidMelody()?_?y?M("Save current transcript to database?",(function(){var e=document.getElementById("loading-circle");e&&e.classList.add("loading"),(0,r.writeData)({created:Date.now(),transcript:d.getOutputAsStringWithMetadata(),title:d.getTitle(),artist:_.value,section:y.value,swung:t.checked,swingSubdivision:v.getSwingSubdivision()},(function(){e&&e.classList.remove("loading")}))})):alert("Section name required."):alert("Artist name required."):alert("Invalid melody. (Probably triplet usage.)")},"btn-clear":function(){M("Do you want to delete the current transcript?",(function(){d.removeAllNotes(),x(),d.setTitle("");var t=document.getElementById("song-artist"),e=document.getElementById("song-section");t&&e&&(t.value="",e.value=""),T()}))},"btn-stop":function(){v.stopPlayback()},"btn-copy":function(){if(navigator.clipboard){var t=d.getOutputAsStringWithMetadata();navigator.clipboard.writeText(t).then((function(){return alert("Text copied to clipboard.")}))}else alert("Your browser does not support copying to clipboard.")},"btn-index":function(){confirm("Do you want to leave this page?")&&(window.location.href="catalogue.html")},"btn-tap-tempo":j,"btn-q-triplets":function(){d.toggleTriplets(4),x()},"btn-e-triplets":function(){d.toggleTriplets(8),x()},"btn-time-sig-4-4":function(){V(o.TimeSignatureFourFour)},"btn-time-sig-6-8":function(){V(o.TimeSignatureSixEight)},"btn-time-sig-12-8":function(){V(o.TimeSignatureTwelveEight)}},h={Space:function(){S(0)},KeyQ:function(){k(1)},KeyW:function(){k(2)},KeyE:function(){k(3)},KeyR:function(){k(4)},KeyT:function(){k(5)},KeyY:function(){k(6)},KeyU:function(){k(7)},KeyI:function(){k(8)},KeyA:function(){S(1)},KeyS:function(){S(2)},KeyD:function(){S(3)},KeyF:function(){S(4)},KeyG:function(){S(5)},KeyH:function(){S(6)},KeyJ:function(){S(7)},KeyK:function(){S(8)},KeyZ:function(){E(1)},KeyX:function(){E(2)},KeyC:function(){E(3)},KeyV:function(){E(4)},KeyB:function(){E(5)},KeyN:function(){E(6)},KeyM:function(){E(7)},Comma:function(){E(8)},Digit1:function(){$(1)},Digit2:function(){$(2)},Digit3:function(){$(4)},Digit4:function(){$(8)},Digit5:function(){$(16)},Period:B,Backspace:N,ArrowRight:P,ArrowLeft:R,ArrowUp:q,BracketLeft:function(){d.decrementKey(),T(),x()},BracketRight:function(){d.incrementKey(),T(),x()},Semicolon:D,Quote:C,Backquote:j},d=new n.default(e.default.C_NATURAL),p=new i.default,f=new c.default,g=document.getElementsByClassName("abc-notation-panel")[0],m=document.getElementsByClassName("prediction-panel")[0],_=document.getElementById("song-artist"),y=document.getElementById("song-section"),v=new a.default,b=new u.default(d.getBpm()),w=!1;function T(){var t=d.getInputOctave();document.getElementById("abc-metadata-octave").textContent=t.toString(),document.getElementById("abc-metadata-output-swing-subdivisions").textContent=v.getSwingSubdivision();var n=d.getKey();document.getElementById("abc-metadata-key").value=e.PitchString[n],document.getElementById("swung").checked=d.getIsSwung(),document.getElementById("insert-mode").checked=d.getIsInInsertMode(),document.getElementById("bpm").value=d.getBpm().toString(),document.getElementById("song-title").value=d.getTitle()}function x(){g.innerHTML=d.getOutputAsStringWithBoundaries("<strong>","</strong>");var t,e,n,i=g.getElementsByTagName("strong");i.length>0?i[0].scrollIntoView():g.scrollTop=g.scrollHeight,t=d.hasValidMelody(),e="invalid",n=!g.classList.contains(e),t&&!n?g.classList.remove(e):!t&&n&&g.classList.add(e),d.getNumNotes()>3&&f.getDistribution(d.getMelody()).then((function(t){var e=[];t.forEach((function(n,i){e.push([i,t.get(i)])})),m.innerHTML=e.sort((function(t,e){return e[1]-t[1]})).map((function(t){return t[0]+": "+t[1].toFixed(2)})).join("<br />")}))}function S(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n?d.pushFlatDegree(t,e):d.pushDegree(t,e);var i=d.getLastPitch(p);v.playNoteInStandardForm(i),x()}function I(t,e){S(t,e,!0)}function E(t){S(t,d.getInputOctave()-1)}function A(t){I(t,d.getInputOctave()-1)}function k(t){S(t,d.getInputOctave()+1)}function O(t){I(t,d.getInputOctave()+1)}function C(){d.incrementOctave(),T()}function D(){d.decrementOctave(),T()}function P(){d.advanceRhythmCursor(),x();var t=d.getSelectedPitch(p);v.playNoteInStandardForm(t)}function R(){d.decrementRhythmCursor(),x()}function N(){d.backspace(),x()}function M(e,n){confirm(e)&&(n(),t.context.resume().then())}function L(){var t=!d.getIsInInsertMode();d.setInsertMode(t),T()}function F(){var t=!d.getIsSwung();d.setIsSwung(t),v.setSwing(t?.5:0),T()}function j(){b.tapAtTime(Date.now()),d.setBpm(b.getBpm()),v.setBpm(d.getBpm()),T()}function U(t){if(null!==t.parentElement){var e=window.getComputedStyle(t),n=e.getPropertyValue("background-color"),i=parseInt(e.getPropertyValue("width")),r=parseInt(e.getPropertyValue("height")),s=i/10,o=document.createElement("button");o.classList.add("btn-scale-degree"),o.style.width=(i+2*s).toString(),o.style.height=r.toString(),o.style.backgroundColor=n,o.style.position="absolute",o.style.top=(t.offsetTop-s).toString(),o.style.left=(t.offsetLeft-s).toString(),o.textContent=t.textContent,t.parentElement.insertBefore(o,t),window.setTimeout((function(){o.remove()}),100)}}function V(t){for(var e=document.getElementById("time-sig-buttons"),n=["selected-4-4","selected-6-8","selected-12-8"],i=0;i<n.length;i++)e.classList.remove(n[i]);switch(t){case o.TimeSignatureFourFour:e.classList.add("selected-4-4");break;case o.TimeSignatureSixEight:e.classList.add("selected-6-8");break;case o.TimeSignatureTwelveEight:e.classList.add("selected-12-8")}d.setTimeSignature(t)}function $(t){if(0!==d.getNumNotes()){if(w)d.addDivisorToPreviousNote(t),z();else{d.getRhythmCursorIndex()<0&&d.advanceRhythmCursor();var e=d.getSelectedPitch(p);v.playNoteInStandardForm(e),d.makeNoteDuration(t)}x()}}function B(){d.dotLastNote(),x()}function q(){w=!0,document.getElementsByTagName("main")[0].classList.add("in-tie-mode")}function z(){w=!1,document.getElementsByTagName("main")[0].classList.remove("in-tie-mode")}function G(t){d.setIsSwung(t.swung),v.setSwing(t.swung?.5:0),v.swingSixteenths("16n"===t.swingSubdivision);var e,n,i=document.getElementById("song-artist"),r=document.getElementById("song-section");i&&r&&(i.value=t.artist,r.value=t.section),e=t.transcript,n=s.default.parse(e),d.setMelody(n),V(n.getTimeSignature()),b.setBpm(d.getBpm()),T(),x()}v.initializeTransport(d.getBpm()),function(){for(var t in document.addEventListener("keydown",(function(t){"INPUT"===(null===document.activeElement?"":document.activeElement.tagName)?"Enter"===t.code&&document.activeElement.blur():t.code in h&&h[t.code]()})),l)l.hasOwnProperty(t)&&function(){var e=document.getElementById(t);e.addEventListener("click",l[t]),e.addEventListener("click",(function(){U(e)}))}();document.getElementById("metadata-text-inputs").addEventListener("submit",(function(t){document.activeElement.blur(),t.preventDefault()})),document.getElementById("abc-metadata-key").addEventListener("change",(function(t){var e;null!==t.target&&(e=t.target.value,d.setKeyFromString(e),x())})),document.getElementById("swung").addEventListener("change",F),document.getElementById("insert-mode").addEventListener("change",L);var e=document.getElementById("bpm");e.addEventListener("change",(function(){var t;t=parseInt(e.value),d.setBpm(t),v.setBpm(d.getBpm()),T()}));var n=document.getElementById("song-title");n.addEventListener("change",(function(){var t;t=n.value,d.setTitle(t)}));var i=document.getElementsByTagName("main")[0],r=["pitch","rhythm","metadata","debug"];r.forEach((function(t){document.getElementById("btn-select-"+t).addEventListener("click",(function(e){e.preventDefault(),r.forEach((function(e){var n=e+"-selected";e===t?i.classList.add(n):i.classList.remove(n)}))}))}))}(),T(),x(),(0,r.setUpAuth)(),function(){var t=new URLSearchParams(window.location.search),e=t.get("id");if(e)!function(t){(0,r.getTranscriptsFromDb)((function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return G(i),void v.initializeTransport(d.getBpm())}}))}(e);else{var n=t.get("artist");!function(t,e,n){t&&(d.setTitle(t),T()),e&&(_.value=e),n&&(y.value=n)}(t.get("title"),n,t.get("section"))}}()})()})();